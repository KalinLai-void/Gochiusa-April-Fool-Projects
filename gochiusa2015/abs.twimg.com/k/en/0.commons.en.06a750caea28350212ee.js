webpackJsonp([0],{"+71d":function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={"dm/dm_avatar":i("2g5l")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMTypingIndicator-avatar'),s.s(s.f("overflow",t,e,1),t,e,0,49,67,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(" is-overflowAvatar")}),t.pop()),s.b('">\n'),s.b(s.rp("<dm/dm_avatar0",t,e,"  ")),s.b("</div>"),s.fl()},partials:{"<dm/dm_avatar0":{name:"dm/dm_avatar",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},"+97U":function(t,e,i){"use strict";function s(){this._getTextLength=function(t){return o.a.getUnicodeTextLength(t)},this.getLength=function(t){return t=this.addHiddenText(void 0===t?this.getVisibleText():t),t!==this.prevCounterText&&(this.prevCounterText=t,this.prevCounterLength=this._getTextLength(t)),this.prevCounterLength}}var n=i("CZTd"),o=i.n(n);e.a=s},"+9xK":function(t,e,i){"use strict";(function(t){function s(){this.viewportHelpers=o.a,this.utils=a.default,this.defaultAttrs({playableMediaContainerSelector:".PlayableMedia",playableMediaLoadThreshold:500,scrollThrottle:100,watchedClass:"watched",watchedSelector:".watched",watchDocumentScroll:!0,liveVideoContinuePlayingBehindModals:!1,preventUnloadClass:"playable-media-no-unload"}),this.updateWatchedMedia=function(){this.$media=this.select("playableMediaContainerSelector");var t=this.$media.not(this.attr.watchedSelector);r.a.attachTo(t,{liveVideoContinuePlayingBehindModalsEnabled:this.attr.liveVideoContinuePlayingBehindModalsEnabled}),t.addClass(this.attr.watchedClass),this.throttledProcessWatchedMedia()},this.processWatchedMedia=function(){var e=this;this.isInFullscreen()||this.$media.each(function(i,s){var n=t(s);if(!n.hasClass(e.attr.preventUnloadClass)){var a=o.a.isWithinBounds(e.$container,n,e.attr.playableMediaLoadThreshold),r=n.hasClass("playable-media-loaded");!r&&a?n.trigger("uiLoadPlayableMedia"):r&&!a&&n.trigger("uiUnloadPlayableMedia")}})},this.isInFullscreen=function(){return document.webkitFullscreenElement||document.msFullscreenElement||document.fullscreenElement||document.mozFullScreenElement},this.fullscreenChange=function(){clearInterval(this.fullscreenTimeout),this.isInFullscreen()?this.stopListeningOnProcessEvents():this.fullscreenTimeout=setTimeout(this.listenOnProcessEvents.bind(this),2e3)},this.listenOnProcessEvents=function(){this.on(this.$container,"resize",this.throttledProcessWatchedMedia),this.attr.watchDocumentScroll?this.on(document,"scroll",this.throttledProcessWatchedMedia):this.on("scroll",this.throttledProcessWatchedMedia)},this.stopListeningOnProcessEvents=function(){this.off(this.$container,"resize",this.throttledProcessWatchedMedia),this.attr.watchDocumentScroll?this.off(document,"scroll",this.throttledProcessWatchedMedia):this.off("scroll",this.throttledProcessWatchedMedia)},this.beforeTeardown=function(){this.$media.removeClass(this.attr.watchedClass)},this.preventPlayerToUnload=function(e,i){t(e.target).toggleClass(this.attr.preventUnloadClass,i.preventUnload)},this.before("teardown",this.beforeTeardown),this.after("initialize",function(){this.$container=t(window),this.throttledProcessWatchedMedia=a.default.throttle(this.processWatchedMedia.bind(this),this.attr.scrollThrottle),this.on(document,"uiPageChanged uiWatchPlayableMedia",this.updateWatchedMedia),this.on(document,"uiPreventPlayerUnloading",this.preventPlayerToUnload),this.listenOnProcessEvents(),this.on(document,"fullscreenchange webkitfullscreenchange MSFullscreenChange mozfullscreenchange",this.fullscreenChange),this.updateWatchedMedia()})}var n=i("DBjh"),o=i("/LRg"),a=i("YzIt"),r=i("TCn1");e.a=Object(n.default)(s)}).call(e,i("4kSj"))},"+HBl":function(t,e,i){"use strict";function s(){this.defaultAttrs({showPlaceholderClass:"is-showPlaceholder"}),this.determinePlaceholderVisibilityNotInComposition=function(t){var e=this.getVisibleText();this.$text.toggleClass(this.attr.showPlaceholderClass,!e)},this.determinePlaceholderVisibility=function(t){this.$text.attr("data-in-composition")||this.determinePlaceholderVisibilityNotInComposition()},this.after("initialize",function(){this.determinePlaceholderVisibility(),this.on("uiTextChanged",this.determinePlaceholderVisibility),this.on(this.$text,"compositionend",this.determinePlaceholderVisibilityNotInComposition)})}e.a=s},"+Jq1":function(t,e,i){"use strict";function s(){this.defaults={tweetBoxSelector:".tweet-form",photoButtonSelector:".file-input",photoIconSelector:".tweet-camera",tooltipElementsSelector:".file-input,button.btn",addPhotoLabelSelector:".add-photo-label",multiPhotoDataContainerSelector:".multi-photo-data-container",cameraIconSelector:".tweet-camera.Icon",dragMediaTextSelector:".ComposerDragHelp-text",interceptAvatarImageData:!1,photoLimit:1,disabledClass:"disabled",tooltipClass:"js-tooltip",disabledAttribute:"disabled"},this.disableButton=function(){this.isDisabled=!0,this.$node.addClass(this.attr.disabledClass),this.select("buttonSelector").prop(this.attr.disabledAttribute,!0).addClass(this.attr.disabledClass)},this.enableButton=function(){this.isDisabled=!1,this.$node.removeClass(this.attr.disabledClass),this.select("buttonSelector").prop(this.attr.disabledAttribute,!1).removeClass(this.attr.disabledClass)},this.thumbAdded=function(t,e){var i=e.fileId,s=h.a.get(i);if(s){var n=s.isGif;this.singleSelectionType=s.isVideo||n,this.mediaItems.push(i),this.updateInterface(),this.trigger("uiPreviewThumbnailShow",{isGif:n,isVideo:s.isVideo,isImage:s.isImage});this.$node.closest(this.attr.tweetBoxSelector).trigger("uiComposerDisableExclusiveAttachments"),this.canUpload()?this.enableButton():this.disableButton(),this.popImageToAddQueue()}},this.updateInterface=function(){this.updateAddPhotoLabel(),this.updateAcceptedFormats()},this.thumbRemoved=function(t,e){var i=parseInt(e.fileId,10);h.a.get(i)&&(this.mediaItems=this.mediaItems.filter(function(t){return t!==i}),this.singleSelectionType=!1,this.enableButton(),this.updateInterface(),this.mediaItems.length||(this.trigger("uiPreviewThumbnailHide"),this.trigger("uiComposerEnableExclusiveAttachments")))},this.removeAllThumbs=function(){this.mediaItems=[],this.singleSelectionType=!1,this.updateInterface(),this.reset(),this.enableButton(),this.trigger("uiComposerEnableExclusiveAttachments")},this.interceptGotImageData=function(t,e){var i=e.fileIds,s=0===this.imageToAddQueue.length;this.imageToAddQueue=this.imageToAddQueue.concat(i),s&&this.processNextImageToAdd()},this.processNextImageToAdd=function(){if(0!==this.imageToAddQueue.length){var t=this.imageToAddQueue[0],e=h.a.get(t);if(!e||this.isDisabled&&!this.canUpload(e,!0))return void this.popImageToAddQueue();var i=e.fileHandle;i?e.isVideo?this.mediaItems.length>0?this.addFileError(r.a.MIXED_MEDIA):this.validateVideo(i)&&this.gotVideo(e):e.isGif?this.validateGif(i)&&this.gotImageData(e):this.validateImage(i)&&this.gotImageData(e):(this.trigger("uiImagePickerNoFileReaderError"),this.trigger("uiShowError",{message:Object(n.default)("Error uploading media")}),this.popImageToAddQueue())}},this.popImageToAddQueue=function(){this.imageToAddQueue=this.imageToAddQueue.slice(1),this.imageToAddQueue.length>0&&this.processNextImageToAdd()},this.interceptAvatarImageData=function(t,e){"avatar"===e.uploadType&&this.gotImageData(e)},this.addFileError=function(t){var e=Object(l.a)(t);e&&this.trigger("uiShowError",{message:e}),this.trigger("uiImagePickerError",{message:t}),this.popImageToAddQueue()},this.imageSelectorClicked=function(t,e){this.supportsImageUpload()?this.trigger("uiImagePickerClick",this.eventDataOverrides):(this.trigger("uiImagePickerNoFileReaderError"),this.trigger("uiShowError",{message:Object(n.default)('You need Adobe Flash to upload photos. <a href="http://get.adobe.com/flashplayer">Install Adobe Flash</a>')}),t.preventDefault(),t.stopPropagation())},this.supportsImageUpload=function(){return c.a.hasFileReader()},this.canUpload=function(t,e){if(t=t||{},this.attr.photoLimit<=this.mediaItems.length)return e&&(1===this.attr.photoLimit?this.addFileError(r.a.TOO_MANY_PHOTOS_1):t.isGif||t.isVideo?this.addFileError(r.a.MIXED_MEDIA):this.addFileError(r.a.TOO_MANY_PHOTOS)),!1;var i=h.a.get(this.mediaItems[0]);return!!i&&(this.singleSelectionType?(e&&(i.isGif&&t.isGif?this.addFileError(r.a.GIF_LIMIT):i.isVideo&&t.isVideo?this.addFileError(r.a.TOO_MANY_VIDEOS_1):this.addFileError(r.a.MIXED_MEDIA)),!1):!t.isGif&&!t.isVideo||(e&&this.addFileError(r.a.MIXED_MEDIA),!1))},this.updateAddPhotoLabel=function(){var t=void 0,e=this.mediaItems.length,i=1===e?h.a.get(this.mediaItems[0]):{},s=i.isGif,o=i.isVideo,a=this.attr.photoLimit;t=e?s?Object(n.default)("You can only add one GIF"):o?Object(n.default)("You can only add one video"):1===a&&1===e?Object(n.default)("You can only add one photo"):4===a&&4===e?Object(n.default)("You must remove a photo before adding another one"):Object(n.default)("Add more photos"):1===a?this.hasVideoSupport()?Object(n.default)("Add photo or video"):Object(n.default)("Add photo"):this.hasVideoSupport()?Object(n.default)("Add photos or video"):Object(n.default)("Add photos"),this.select("tooltipElementsSelector").attr("data-original-title",t),this.select("photoButtonSelector").prev("span.visuallyhidden").text(t),this.select("addPhotoLabelSelector").text(t)},this.overrideScribeContext=function(t,e){this.eventDataOverrides={scribeContext:e}},this.dragEnter=function(t,e){this.isDisabled||this.showDragTarget(e)},this.showDragTarget=function(t){var e=Object(n.default)("Drag file here"),i=t&&a.a.hasFiles(t,c.a.GIF_TYPE_REGEXP),s=!i&&t&&a.a.hasFiles(t,c.a.IMAGE_TYPE_REGEXP),o=t&&a.a.hasFiles(t,c.a.VIDEO_TYPE_REGEXP),r=this.mediaItems.length&&(o||i||this.singleSelectionType)||this.mediaItems.length>=this.attr.photoLimit,l=this.$node.closest(this.attr.tweetBoxSelector);r?l.removeClass("is-droppable"):(s?e=Object(n.default)("Drag photo here"):i?e=Object(n.default)("Drag GIF here"):o&&(e=Object(n.default)("Drag video here")),l.addClass("is-droppable")),l.find(this.attr.dragMediaTextSelector).html(e)},this.dragLeave=function(t,e){this.$node.closest(this.attr.tweetBoxSelector).removeClass("is-droppable")},this.after("initialize",function(){this.on("click",{photoButtonSelector:this.imageSelectorClicked});var t=this.$node.closest(this.attr.tweetBoxSelector);this.on(t,"uiPreviewThumbnailRemove",this.thumbRemoved),this.on(t,"uiPreviewThumbnailAdded",this.thumbAdded),this.on(t,"uiPreviewThumbnailRemoveAll",this.removeAllThumbs),this.on(t,"uiGotImageData",this.interceptGotImageData),this.on(t,"uiEnableImageSelection",this.enableButton),this.on(t,"uiDisableImageSelection",this.disableButton),this.on(t,"uiOverrideImageSelectorScribeContext",this.overrideScribeContext),this.on(t,"uiComposerEnableExclusiveAttachments",this.enableButton),this.on(t,"uiComposerDisableExclusiveAttachments",this.disableButton),this.attr.interceptAvatarImageData&&this.on(document,"uiImageSave",this.interceptAvatarImageData),this.on(document.body,"uiDragEnter",this.dragEnter),this.on(document.body,"uiDragLeave uiDrop",this.dragLeave),this.mediaItems=[],this.imageToAddQueue=[],this.updateInterface()})}var n=i("0d4m"),o=i("DBjh"),a=i("wAPH"),r=i("JSdv"),c=i("+dWm"),l=i("YlCE"),h=i("H6fk"),d=i("40xB"),u=Object(o.default)(s,d.a);e.a=u},"+LkO":function(t,e,i){"use strict";var s=i("DBjh"),n=i("YzIt"),o=i("UHc7"),a=i("AJAn"),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a=Object(s.default)(o.a,a.a,function(){this.defaultAttrs({resumeDraftSelector:".js-resumeDraft",deleteDraftSelector:".js-deleteDraft"}),this.initDraftData=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.dbTweets=e},this.openDraftDialog=function(t,e){var i="object"===(void 0===e?"undefined":r(e))&&e.previousStatusIdInThread;"object"!==r(this.dbTweets)||i||this.openOnce()},this.resumeDraft=function(t){this.trigger("uiRestoreTweetstormDialog",this.dbTweets),this.close(t),delete this.dbTweets},this.deleteDraft=function(t){this.trigger("uiTweetstormClearDB"),this.close(t),delete this.dbTweets},this.after("initialize",function(){this.openOnce=n.default.once(this.open),this.on(document,"uiTweetstormDBData",this.initDraftData),this.on(document,"uiComposerActive uiOpenTweetstormDialog",this.openDraftDialog),this.on("click",{resumeDraftSelector:this.resumeDraft,deleteDraftSelector:this.deleteDraft})})})},"+Q5D":function(t,e,i){"use strict";function s(){this.defaultAttrs({noShowError:!0}),this.reportConversation=function(t,e){e=e||{};var i=l(c(t.target,"dataDMUserUpdates"),c(t.target,"dataConversationReported",{conversation_id:e.conversation_id})),s=l(c(t.target,"dataDMError"),c(t.target,"dataConversationReportFailed",{conversation_id:e.conversation_id}));this.post({url:"/i/direct_messages/report_conversation",data:{conversation_id:e.conversation_id,report_as:e.report_as,cursor:this.dmCursor},success:i,error:s})},this.after("initialize",function(){this.on("uiReportConversation",this.reportConversation)})}var n=i("DBjh"),o=i("VtWx"),a=i("9Uwv"),r=i("ldNY"),c=r.a.triggerFn,l=r.a.chain,h=Object(n.default)(s,o.a,a.a);e.a=h},"+Q9N":function(t,e,i){"use strict";function s(){this.attributes({open:!1,text:"",welcomeMessageId:void 0,conversation:{id:null},compose:{id:null,screenName:null,name:null,avatar:null}}),this.openDMDialog=function(t,e){this.attr.open&&((this.attr.conversation||{}).id?this.openConversation():this.openCompose())},this.openConversation=function(){var t=this.attr.conversation||{};this.trigger("uiNeedsDMDialog",{conversation_id:t.id,default_composer_text:this.attr.text,fromInitData:!0})},this.openCompose=function(){var t=this.attr.compose||{};this.trigger("uiNeedsDMDialog",{id:t.id,screen_name:t.screenName,name:t.name,profile_image_url_https:t.avatar,default_composer_text:this.attr.text,welcome_message_id:this.attr.welcomeMessageId,fromInitData:!0})},this.after("initialize",function(){this.on("uiSwiftLoaded uiPopStateNavigate",this.openDMDialog)})}var n=i("DBjh");e.a=Object(n.default)(s)},"+Uin":function(t,e,i){"use strict";function s(){this.composeNewDMWithTweet=function(t,e){this.trigger("uiOpenNewDM",{has_tweet_attachment:!0}),this.trigger("uiComposeWithTweet",e)},this.composeNewDMWithOptions=function(t,e){e.tweetId&&this.trigger("uiComposeWithTweet",{id:e.tweetId}),this.trigger("uiNeedsDMDialog",{id:e.recipientId,default_composer_text:e.defaultComposerText,welcome_message_id:e.welcomeMessageId,has_tweet_attachment:void 0!==e.tweetId,retain_tweet_attachment:void 0!==e.tweetId}),e.messageMeCardData&&this.trigger("uiAddMessageMeCardData",e.messageMeCardData)},this.after("initialize",function(){this.on("uiComposeNewDMWithTweet",this.composeNewDMWithTweet),this.on(window,"uiComposeNewDMWithOptions",this.composeNewDMWithOptions)})}var n=i("DBjh"),o=Object(n.default)(s);e.a=o},"+Y9g":function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="FoundMediaSearch-noResults">\n  <p>Yikes! GIFs aren\'t loading right now.</p>\n  <button type="button" class="btn js-found-media-reload-search-trigger">Reload</button>\n</div>\n'),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},"+dWm":function(t,e,i){"use strict";function s(t){return Object(a.a)().webkit?t+(-1===t.indexOf("?")?"?":"&")+"_blob=1":t}function n(){return++m}var o=i("LSuw"),a=i("RW6J"),r=i("KgvP"),c=i("yMkX"),l=i("JSdv"),h=i("pNUl"),d=i("sxXh"),u=i("H6fk"),p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=0,g={MAX_FILE_SIZE:5242880,MAX_UPLOAD_FILE_SIZE:3145728,GIF_NAME_REGEXP:/.+\.gif$/i,IMAGE_NAME_REGEXP:/.+\.(jpg|jpeg|png|gif)$/i,VIDEO_NAME_REGEXP:/.+\.(mp4|mov|m4v)$/i,GIF_TYPE_REGEXP:/\/+gif$/i,IMAGE_TYPE_REGEXP:/\/+(jpg|jpeg|png|gif)$/i,VIDEO_TYPE_REGEXP:/\/+(mp4|mov|m4v)$/i,vendorURL:window.URL||window.webkitURL,canvasToBlob:function(t,e){var i=this;return e=e||"image/jpeg",new Promise(function(s,n){t.toBlob?t.toBlob(s,e):s(i.getBlobFromDataUri(t.toDataURL(e)))})},validateFileSize:function(t,e){var i=t&&t.size||t.fileSize;return e=e||this.MAX_FILE_SIZE,!i||i<=e},getFileName:function(t){return-1===t.indexOf("/")&&-1===t.indexOf("\\")?t:t.match(/(?:.*)[\/\\]([^\/\\]+(?:\.\w+)?)$/)[1]},hasFileReader:function(){return!("function"!=typeof FileReader&&"object"!==("undefined"==typeof FileReader?"undefined":f(FileReader))||"no_file_reader"in d.a.fromQuery(window.location))},getFileHandles:function(t){return t.files||!1},getFileExtension:function(t){return t.split(".").pop().toLowerCase()},getBlobFromDataUri:function(t){var e=t.split(/data:|;base64,/);if(3!==e.length||!window.Blob)return null;for(var i=atob(e[2]),s=i.length,n=Array(s),o=0;o<s;o++)n[o]=i.charCodeAt(o);return new Blob([new Uint8Array(n)],{type:e[1]})},getDataUriObjectSize:function(t){var e=t.match(/^.*;base64,/)||[""],i=t.match(/=*$/)||[""];return Math.floor(.75*(t.length-i[0].length-e[0].length))},hasBlob:function(){return null!=window.Blob},getObjectUrl:function(t){return this.vendorURL&&t?this.vendorURL.createObjectURL(t):""},revokeObjectUrl:function(t){this.vendorURL&&this.vendorURL.revokeObjectURL(t)},getFileType:function(t,e){var i=this;return new Promise(function(s,n){var o=e&&e.type;i.GIF_NAME_REGEXP.test(t)||g.GIF_TYPE_REGEXP.test(o)?Object(c.a)(e,function(t){return s(t?h.a.GIF:h.a.IMAGE)}):i.IMAGE_NAME_REGEXP.test(t)||g.IMAGE_TYPE_REGEXP.test(o)?s(h.a.IMAGE):i.VIDEO_NAME_REGEXP.test(t)||g.VIDEO_TYPE_REGEXP.test(o)?s(h.a.VIDEO):n()})},getVideoInfo:function(t,e){var i=this,s=this.getObjectUrl(t),n=e?"seeked":"loadeddata",o=document.createElement("video");o.src=s,e&&o.addEventListener("canplay",function(){return o.currentTime=e});var a=this,r=function(t){return i.revokeObjectUrl.bind(i,s),t};return new Promise(function(t,e){o.addEventListener(n,function(){var e=document.createElement("canvas");e.width=o.videoWidth,e.height=o.videoHeight,e.getContext("2d").drawImage(o,0,0),a.canvasToBlob(e).then(function(e){return t({duration:o.duration,thumbnail:{src:a.getObjectUrl(e)}})})},!1),o.addEventListener("error",function(){return e(l.a.FILE_UNSUPPORTED)})}).then(r,r)},getFileInfo:function(t,e,i){var s=this;return g.getFileType(t,e).then(function(a){var r=a===h.a.VIDEO,c=n(),l=p({isGif:a===h.a.GIF,isImage:a===h.a.IMAGE,isVideo:r,fileName:r?"video-thumbnail-"+c:t,fileHandle:e,fileType:a,fileSize:e.size,uploadId:c,mediaType:e.type},i);i&&i.mediaCategoryPrefix&&(l.mediaCategory=i.mediaCategoryPrefix+a),r||(l.thumbnail={src:s.getObjectUrl(e)});var d=u.a.add(l);return l=u.a.update(d,{fileId:d}),r?s.getVideoInfo(e).then(function(t){return t}).then(u.a.update.bind(u.a,l.fileId)).then(o.a):Object(o.a)(l)})},fetchAsBlob:function(t){var e=this,i=/^data:/;return new Promise(function(n,o){if(i.test(t)){var a=e.getBlobFromDataUri(t);a?n(a):o()}else{var r=new XMLHttpRequest;r.open("GET",s(t),!0),r.responseType="blob",r.onload=function(t){r.status<400?n(r.response):o()},r.onerror=function(){o()},r.send()}})},createMapOfBlobUrls:function(t){var e=r.a.unique(t);return Promise.all(e.map(function(t){return this.fetchAsBlob(t)},this)).then(function(t){return e.reduce(function(e,i,s){return e[i]=URL.createObjectURL(t[s]),e},{})})},revokeMapOfBlobUrls:function(t){Object.keys(t).forEach(function(e){return URL.revokeObjectURL(t[e])})}};e.a=g},"/81G":function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("pictographs",t,e,1),t,e,0,16,132,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('<img class="RichEditor-pictographImage" src="'),i.b(i.v(i.f("imageUrl",t,e,0))),i.b('" style="top:'),i.b(i.v(i.f("top",t,e,0))),i.b("px;left:"),i.b(i.v(i.f("left",t,e,0))),i.b('px;" draggable="false">')}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},"/EQT":function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={"promptbird/templates/dismiss_button":i("02mS"),"promptbird/templates/icon":i("8QxQ"),"promptbird/templates/title":i("orcd"),"promptbird/templates/explanation":i("7SIb")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="PromptbirdPrompt PromptbirdPrompt--inlinePointer" data-prompt-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('" data-prompt-intent="'),s.b(s.v(s.f("prompt_intent",t,e,0))),s.b('">\n  <span class="PromptbirdPrompt-arrow"></span>\n'),s.b(s.rp("<promptbird/templates/dismiss_button0",t,e,"  ")),s.b(s.rp("<promptbird/templates/icon1",t,e,"  ")),s.b(s.rp("<promptbird/templates/title2",t,e,"  ")),s.b(s.rp("<promptbird/templates/explanation3",t,e,"  ")),s.b("</div>\n"),s.fl()},partials:{"<promptbird/templates/dismiss_button0":{name:"promptbird/templates/dismiss_button",partials:{},subs:{}},"<promptbird/templates/icon1":{name:"promptbird/templates/icon",partials:{},subs:{}},"<promptbird/templates/title2":{name:"promptbird/templates/title",partials:{},subs:{}},"<promptbird/templates/explanation3":{name:"promptbird/templates/explanation",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},"/LRg":function(t,e,i){"use strict";(function(t){var s=i("reQR");e.a={getGlobalNavHeight:s.a.getGlobalYOffset,isWithinBounds:function(t,e,i,s,n){return s=s||this.getContainerRect(t),n=n||e[0].getBoundingClientRect(),!this.isBelowViewport(t,e,i,s,n)&&!this.isAboveViewport(t,e,i,s,n)},getContainerRect:function(t){return t.get(0)===window?{top:0,left:0,right:window.innerWidth,bottom:window.innerHeight,width:window.innerWidth,height:window.innerHeight}:t.get(0).getBoundingClientRect()},isContainedInViewport:function(t,e,i,s,n,o){return n=n||this.getContainerRect(t),o=o||e[0].getBoundingClientRect(),i=i||0,s=s||0,n.top+i<=o.top&&n.bottom+s>=o.bottom},isPartiallyContainedInViewport:function(t){if(!(t.$container&&t.$element||t.containerRect&&t.elementRect))return!1;var e=t.containerRect||this.getContainerRect(t.$container),i=t.elementRect||t.$element[0].getBoundingClientRect(),s=t.topThreshold||0,n=t.bottomThreshold||0,o=e.top+s,a=e.top+e.height+n,r=i.top,c=i.bottom;return!(a<r||o>c)&&(r-o>0?a-r:c-o)>=t.fractionInViewport*i.height},isAboveViewport:function(t,e,i,s,n){return s=s||this.getContainerRect(t),n=n||e[0].getBoundingClientRect(),s.top>=n.top+n.height/2+(i||0)},isBelowViewport:function(t,e,i,s,n){return s=s||this.getContainerRect(t),n=n||e[0].getBoundingClientRect(),s.bottom<=n.top+n.height/2-(i||0)},getElementClosestToMiddleOfViewport:function(e){var i=this,s=this.getContainerRect(e.$container),n=s.top+s.height/2,o=e.topThreshold||0,a=e.bottomThreshold||0,r=isNaN(parseFloat(e.fractionInViewport))?1:e.fractionInViewport,c=1/0,l=void 0;return e.$elements.each(function(t,e){var h=e.getBoundingClientRect(),d=h.top+h.height/2,u=Math.abs(d-n);u<c&&i.isPartiallyContainedInViewport({topThreshold:o,bottomThreshold:a,fractionInViewport:r,containerRect:s,elementRect:h})&&(c=u,l=e)}),l?t(l):void 0},getContainerOffsetTop:function(t){return t.offset()?t.offset().top:0},getVisibleViewport:function(){return{top:this.getGlobalNavHeight(),bottom:window.innerHeight,left:0,right:window.innerWidth,width:window.innerWidth,height:window.innerHeight}}}}).call(e,i("4kSj"))},"/Y1u":function(t,e,i){"use strict";function s(){this.defaultAttrs({noShowError:!0}),this.successCallback=function(t){return function(e){this.trigger("dataDMConversationListResult",r({},e,{is_pagination_response:this.isPaginationRequest(t)}))}},this.isPaginationRequest=function(t){return!!t.max_entry_id},this.inbox=function(t,e){e=e||{},this.get({url:"/messages",data:{min_entry_id:e.min_entry_id,max_entry_id:e.max_entry_id},eventData:e,success:c(t.target,this.successCallback(e).bind(this)),error:c(t.target,"dataDMError")})},this.paginateInbox=function(t,e){e=e||{},this.get({url:"/inbox/paginate",data:{max_entry_id:e.max_entry_id,is_trusted:e.is_trusted},eventData:e,success:c(t.target,this.successCallback(e).bind(this)),error:c(t.target,"dataDMError")})},this.after("initialize",function(){this.on("uiNeedsDMConversationList",this.inbox),this.on("uiNeedsDMOlderConversationList",this.paginateInbox)})}var n=i("DBjh"),o=i("ldNY"),a=i("VtWx"),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},c=o.a.triggerFn;e.a=Object(n.default)(s,a.a)},"/Ynh":function(t,e,i){"use strict";function s(){this.subscribe=function(t,e){var i=this.consumers[e]||[];-1===i.indexOf(t)&&i.push(t),this.consumers[e]=i,this.lpClient.subscribe(e,this.isHidden)},this.unsubscribe=function(t,e){var i=this.consumers[e]||[];i=i.filter(function(e){return e!==t}),this.consumers[e]=i,i.length||(this.lpClient.unsubscribe(e),delete this.consumers[e])},this.subUnsubHandler=function(t,e){var i=e.consumer_id,s=e.topic;if(i&&s){var n="dataLPSubscribe"===t.type?this.subscribe:this.unsubscribe;(Array.isArray(s)?s:[s]).forEach(n.bind(this,i))}},this.handleVisibilityChange=function(t){"uiPageVisible"===t.type?(this.isHidden=!1,Object.keys(this.consumers).length&&this.lpClient.reconnect()):(this.isHidden=!0,this.lpClient.close())},this.after("initialize",function(){n.a.isSupported()&&(this.consumers={},this.isHidden=!1,this.lpClient=new n.a,this.lpClient.onMessage(this.trigger.bind(this,"dataLPMessage")),this.on("dataLPSubscribe dataLPUnsubscribe",this.subUnsubHandler),this.on("uiPageVisible uiPageHidden",this.handleVisibilityChange))})}var n=i("fygb"),o=i("DBjh");e.a=Object(o.default)(s)},"/jU1":function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_one",t,e,1),t,e,0,21,46,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Like")}),t.pop()),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_other",t,e,1),t,e,0,87,113,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Likes")}),t.pop()),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},"/zmn":function(t,e,i){"use strict";(function(t){var s=i("KgvP"),n={load:function(e,i,s){function n(t){a=!0,o.unbind("load"),s()}var o=t("<img/>"),a=!1;o.on("load",function(t){a||"error"===t.type||i(o)}),o.on("error",n),o.on("abort",n),o.attr("src",e)},loadMultiple:function(e){var i=s.a.unique(e),n=i.map(function(e){var i=t("<img>");return new Promise(function(t,s){return i.on("load",function(e){return t({width:i[0].width,height:i[0].height})}).on("error",function(){return s()}).attr("src",e)})});return Promise.all(n).then(function(t){var e={};return t.forEach(function(t,s){return e[i[s]]=t}),e})}};e.a=n}).call(e,i("4kSj"))},"02iH":function(t,e,i){"use strict";function s(){this.defaultAttrs({photoIntentSelector:".TweetBox-photoIntent",mediaPickerSelector:".TweetBox-mediaPicker"}),this.moveChildren=function(t,e){this.select(t).children().detach().appendTo(this.select(e))},this.moveMediaPickerIntoPhotoIntent=function(){this.moveChildren("mediaPickerSelector","photoIntentSelector"),this.trigger("uiOverrideImageSelectorScribeContext",{component:"stream_header"})},this.moveMediaPickerOutOfPhotoIntent=function(){this.moveChildren("photoIntentSelector","mediaPickerSelector"),this.trigger("uiOverrideImageSelectorScribeContext",this.attr.eventData.scribeContext)},this.after("initialize",function(){this.select("photoIntentSelector").length&&(this.on("uiTweetBoxExpanded",this.moveMediaPickerOutOfPhotoIntent),this.on("uiTweetBoxCondensed",this.moveMediaPickerIntoPhotoIntent),this.isCondensed()&&this.moveMediaPickerIntoPhotoIntent())})}e.a=s},"02mS":function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<button type="button" class="PromptbirdPrompt-dismiss js-promptDismiss" tabindex="-1" data-prompt-scribe-action="dismiss">\n  <span class="Icon Icon--close Icon--small">\n    <span class="visuallyhidden">\n      Dismiss\n    </span>\n  </span>\n</button>\n'),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},"0T2C":function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMTypingIndicator-overflowCount">\n  <span>+'),s.b(s.v(s.f("count",t,e,0))),s.b("</span>\n</div>"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},"0T9I":function(t,e,i){"use strict";function s(){this.defaultAttrs({noShowError:!0}),this.getUsers=function(t,e){var i={retweeted_popup:"/i/activity/retweeted_popup",favorited_popup:"/i/activity/favorited_popup",media_tagged_popup:"/i/activity/media_tagged_popup",reply_users_popup:"/i/tweet/reply_users_popup",like_moment_popup:"/i/moments/user_likes_dialog",people_in_conversation_popup:"/i/tweet/people_in_conversation_popup"}[e.component];this.get({url:i,data:{id:e.contentId},eventData:e,success:"dataActivityPopupSuccess",error:"dataActivityPopupError"})},this.after("initialize",function(){this.on("uiFetchActivityPopup",this.getUsers)})}var n=i("DBjh"),o=i("VtWx");e.a=Object(n.default)(s,o.a)},"0UXa":function(t,e,i){"use strict";function s(){this.defaultAttrs({countdownCounterSelector:".js-countdown-counter",counterProgressSelector:".js-progress-circle",maxLength:280,warnLength:260,warnPercent:92.8,dangerClass:"RadialCounter--danger",pulseClass:"RadialCounter--pulse",safeClass:"RadialCounter--safe",warnClass:"RadialCounter--warn",countdownMaxReachedClass:"is-maxReached"}),this.updateCounter=function(t,e){var i=e.tweetLength,s=e.percent>100?100:e.percent,n=this._getCurrentCountState(s);if(this.updateCountdownCounter(i),this._shouldCounterUpdate(this.countState,n)){var o=[n.className];this._shouldCounterPulse(this.countState,n)&&o.push(this.attr.pulseClass),this.countState=n,this.counter.updateProgress(s).updateClassList(o)}},this.updateCountdownCounter=function(t){var e=this.countdownActive;if(this.countdownActive=t>=this.attr.warnLength,e||this.countdownActive){var i=this.attr.maxLength-t<=0,s=this.countdownActive?this._getCountdownValue(t):"";this.$countdownCounter.html(s).toggleClass(this.attr.countdownMaxReachedClass,i),this.countdownActive&&this.trigger("uiCharCountWarningVisible",{charCount:s})}},this._getCountdownValue=function(t){var e=r.a.getLanguageWeight();return Math.floor((this.attr.maxLength-t)/e)},this._getCurrentCountState=function(t){var e=this.counterStates.safe;return t>=this.attr.warnPercent&&(e=t>=100?this.counterStates.danger:this.counterStates.warn),e},this._shouldCounterPulse=function(t,e){var i=[this.attr.safeClass,this.attr.warnClass,this.attr.dangerClass];return i.indexOf(e.className)>i.indexOf(t.className)},this._shouldCounterUpdate=function(t,e){return!(t===this.counterStates.danger&&e===this.counterStates.danger)},this.after("initialize",function(){this.counterStates={safe:{className:this.attr.safeClass},warn:{className:this.attr.warnClass},danger:{className:this.attr.dangerClass}},this.countState=this.counterStates.safe,this.countdownActive=!1,this.$countdownCounter=this.select("countdownCounterSelector"),this.counter=new a.a(this.select("counterProgressSelector")[0]),this.on("uiUpdateCounter",this.updateCounter)})}var n=i("DBjh"),o=i("uYmV"),a=i.n(o),r=i("cXIp");e.a=Object(n.default)(s)},"11Yp":function(t,e,i){"use strict";(function(t){function s(e,i,s){s=o({},{focusedInterval:3e4,blurredInterval:9e4,backoffFactor:2},s);var a=n.default.setIntervalEvent(e,s.focusedInterval,s.eventData);return t(document).on("uiPageHidden",a.backoff.bind(a,s.blurredInterval,s.backoffFactor)),t(document).on("uiPageVisible",a.cancelBackoff.bind(a)),a}var n=i("r8Bt"),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=s}).call(e,i("4kSj"))},"1NSd":function(t,e,i){"use strict";function s(){this.defaultAttrs({videoSelector:".VideoTrim-video",playStateSelector:".VideoTrim-playState",audioStateSelector:".VideoTrim-audioState",isPlayingClass:"is-playing",isMutedClass:"is-muted",playVideoPollFreq:30}),this.loadVideo=function(t,e){this.videoDuration=0,this.video.pause(),this.video.src=e.videoSrc,this.video.load()},this.unloadVideo=function(){this.loadVideo(null,{videoSrc:""})},this.playVideo=function(t){var e=this;void 0!==t&&this.setVideoCurrentTime(t),this.isVideoPlaying()||(clearInterval(this.playbackIntervalId),this.playbackIntervalId=setInterval(function(){e.video.paused?e.pauseVideo():e.isVideoAtEnd()&&e.pauseVideo(e.endTime),e.updateVideoState()},1e3/this.attr.playVideoPollFreq),this.video.play(),this.isProgressVisible=!0)},this.pauseVideo=function(t){this.video.pause(),clearInterval(this.playbackIntervalId),void 0!==t&&(this.isProgressVisible=!1,this.setVideoCurrentTime(t)),this.updateVideoState()},this.isVideoPlaying=function(){return!this.video.paused&&this.video.currentTime>0},this.setVideoMuted=function(t){this.video.muted=t},this.isVideoMuted=function(){return this.video.muted},this.isVideoAtEnd=function(){var t=1/this.attr.playVideoPollFreq;return this.getVideoCurrentTime()>this.endTime-t||this.video.ended},this.getVideoCurrentTime=function(){return this.video.currentTime},this.setVideoCurrentTime=function(t){this.video.currentTime=t},this.updateVideoState=function(){this.$node.toggleClass(this.attr.isPlayingClass,this.isVideoPlaying()).toggleClass(this.attr.isMutedClass,this.isVideoMuted()),this.trigger("uiVideoStateChanged")},this.readVideoMetadata=function(){this.videoDuration=this.video.duration,this.startTime=0,this.endTime=this.videoDuration,this.trigger("uiVideoLoaded"),this.updateVideoState()},this.videoError=function(t){this.trigger("uiVideoError",{message:Object(n.default)("Video is not playable.")})},this.videoUnloaded=function(t){this.videoDuration=0,this.startTime=0,this.endTime=0,this.trigger("uiVideoUnloaded")},this.toggleVideoPlayback=function(){this.videoDuration&&(this.isVideoPlaying()?this.pauseVideo():this.isVideoAtEnd()?this.playVideo(this.startTime):this.playVideo())},this.toggleAudioState=function(){this.setVideoMuted(!this.isVideoMuted()),this.updateVideoState()},this.after("initialize",function(){this.video=this.select("videoSelector")[0],this.on("uiLoadVideo",this.loadVideo),this.on("uiUnloadVideo",this.unloadVideo),this.on(this.video,"loadedmetadata",this.readVideoMetadata),this.on(this.video,"error",this.videoError),this.on(this.video,"emptied",this.videoUnloaded),this.on("click",{videoSelector:this.toggleVideoPlayback,playStateSelector:this.toggleVideoPlayback,audioStateSelector:this.toggleAudioState})}),this.before("teardown",function(){this.unloadVideo()})}var n=i("0d4m");e.a=s},"1QAW":function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="PlayableMedia LiveBroadcastCard-playerContainer">\n  <div\n    class="PlayableMedia-player LiveBroadcastCard-player"\n    data-use-react-player\n    '),s.s(s.f("serve_ads_in_player",t,e,1),t,e,0,181,205,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("data-serve-ads-in-player")}),t.pop()),s.b(">\n  </div>\n</div>\n"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},"1c4Y":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({itemType:"user",titleSelector:".modal-title",contentSelector:".activity-popup-dialog-content",contentShowingSelector:".tweet-showing",userContentSelector:".activity-popup-dialog-users",footerSelector:".activity-popup-dialog-footer",openDropdownSelector:".user-dropdown.open .dropdown-menu",usersSelector:".activity-popup-users",replyUsersHeadingSelector:".reply-users-heading",activityUserCheckboxSelector:".activity-popup-dialog-users .js-user-checkbox",activityOtherReplyUsersCheckboxSelector:".activity-popup-dialog-other-reply-users .js-other-reply-users-checkbox",accountSelector:".account",saveSelector:".save-action",maxTop:100,modalClasses:{retweeted_popup:"retweeted-popup",favorited_popup:"favorited-popup",media_tagged_popup:"media-tagged-popup",reply_users_popup:"reply-users-popup",like_moment_popup:"like-moment-popup",people_in_conversation_popup:"people-in-conversation-popup"}}),this.setTitle=function(t){this.select("titleSelector").html(t)},this.setContent=function(t,e){this.$node.addClass("has-content");var i=this.select("contentSelector");i.html(t),i.toggleClass(this.attr.contentShowingSelector,!e)},this.setUsers=function(t){this.$node.addClass("has-content"),this.select("userContentSelector").html(t)},this.setFooter=function(t){this.select("footerSelector").html(t)},this.clearContent=function(){this.$node.removeClass("has-content"),this.select("contentSelector").empty(),this.select("userContentSelector").empty(),this.setTitle(""),this.setFooter("")},this.requestPopup=function(t,e){this.openerNode=t.target,this.excludeReplyUserIds=e.excludeReplyUserIds;var i=e.htmlTitle,s=e.contentId,o=e.component;if(this.attr.eventData=a.default.merge(this.attr.eventData,{scribeContext:{component:o}},!0),this.defaultEventData=this.attr.eventData,this.attr.modalClasses[o]){this.clearContent();var r=i||Object(n.default)("Loading...");this.setTitle(r),Object.keys(this.attr.modalClasses).forEach(function(t){var e=this.attr.modalClasses[t];this.$node.toggleClass(e,t===o)},this),this.open(),this.trigger("uiFetchActivityPopup",{component:o,contentId:s})}},this.updatePopup=function(t,e){this.setTitle(e.htmlTitle),this.setUsers(e.htmlUsers),this.setContent(e.htmlContent),this.setFooter(e.htmlFooter),this.trigger("uiActivityPopupRendered"),this.setReplyUsersCheckboxState(this.excludeReplyUserIds);var i=this.select("usersSelector");i.height()>=parseInt(i.css("max-height"),10)&&i.addClass("dropdown-threshold")},this.showError=function(e,i){this.clearContent();var s=t("<p>").addClass("error").html(i.message);this.setUsers(s,!0),this.setTitle(Object(n.default)("Sorry! There was an error."))},this.notifyOpenerDialogClosed=function(){this.trigger(this.openerNode,"uiActivityPopupClosed")},this.setReplyUsersCheckboxState=function(e){var i=this;e&&(this.select("activityUserCheckboxSelector").each(function(s,n){var o=t(n),a=o.closest(i.attr.accountSelector),r=a.attr("data-user-id");o.prop("checked",e.indexOf(r)<0)}),this.updateExcludeAllCheckboxState())},this.updateExcludeAllCheckboxState=function(){var t=this.select("activityUserCheckboxSelector"),e=t.length===t.filter(":checked").length;this.select("activityOtherReplyUsersCheckboxSelector").prop("checked",e)},this.saveExcludedReplyUsers=function(){var e=this.select("activityUserCheckboxSelector").filter(":not(:checked)").toArray().map(function(e){return t(e).closest(this.attr.accountSelector).attr("data-user-id")},this);this.trigger(this.openerNode,"uiActivityPopupSave",{excludeReplyUserIds:e})},this.toggleAllReplyUsers=function(e){this.select("activityUserCheckboxSelector").prop("checked",t(e.target).prop("checked"))},this.after("initialize",function(){this.on(document,"uiRequestActivityPopup",this.requestPopup),this.on(document,"dataActivityPopupSuccess",this.updatePopup),this.on(document,"dataActivityPopupError",this.showError),this.on(document,"uiShowProfilePopup uiOpenTweetDialogWithOptions uiNeedsDMDialog uiOpenSignupDialog",this.close),this.on("change",{activityUserCheckboxSelector:this.updateExcludeAllCheckboxState,activityOtherReplyUsersCheckboxSelector:this.toggleAllReplyUsers}),this.on("uiDialogClosed",this.saveExcludedReplyUsers),this.on("uiDialogClosed",this.notifyOpenerDialogClosed)})}var n=i("0d4m"),o=i("DBjh"),a=i("YzIt"),r=i("UHc7"),c=i("xgWv"),l=i("El2S");e.a=Object(o.default)(s,r.a,l.a,c.a)}).call(e,i("4kSj"))},"1f87":function(t,e,i){"use strict";function s(){this.attributes({conversationContentSelector:".DMConversation-content",notificationDisplayDuration:7e3,mostRecentNotifiedMessageKey:"most_recent_notified_message_id",rollingTagPrefix:"twitterDM",maxSimultaneousNotifications:2,notificationType:"direct_message"}),this.handleUserUpdates=function(t,e){e&&e.notifications&&e.notifications.length&&!this.hasPushSubscription&&this.processNotifications(e.notifications)},this.handleDMPush=function(t,e){this.processNotifications([e])},this.processNotifications=function(t){var e=this.$conversationContainer.attr("data-thread-id"),i=this.isPageFocused()&&this.$conversationContainer.is(":visible"),s=this.storage.getItem(this.attr.mostRecentNotifiedMessageKey)||0,n=t.length?t[t.length-1].id||0:0;this.storage.setItem(this.attr.mostRecentNotifiedMessageKey,o.a.max(n,s)),t.filter(function(t){var n=t.id&&o.a.compare(s,t.id)>=0,a=i&&t.conversation_id.toString()===e;return!n&&!a}).forEach(function(t){this.trigger("uiDisplayNativeNotification",{title:t.title,body:t.body,icon:t.icon,tag:this.getRollingTag(),type:this.attr.notificationType,click:{eventName:"uiDMNotificationClicked",eventData:{conversation_id:t.conversation_id}},displayDuration:this.attr.notificationDisplayDuration})},this)},this.dmNotificationClicked=function(t,e){window.focus(),this.trigger("uiNeedsDMDialog",{conversation_id:e.conversation_id})},this.isPageFocused=function(){return document.hasFocus()},this.getRollingTag=function(){return this.lastTagNumber=this.lastTagNumber||0,this.lastTagNumber=this.lastTagNumber>=this.attr.maxSimultaneousNotifications?1:this.lastTagNumber+1,this.attr.rollingTagPrefix+this.lastTagNumber},this.updatePushSupport=function(t,e){this.hasPushSubscription=!!e.subscribed},this.after("initialize",function(){this.$conversationContainer=this.select("conversationContentSelector"),this.hasPushSubscription=!1,this.on(document,"dataPushSubscriptionState",this.updatePushSupport),this.trigger("uiWantsPushSubscriptionState"),this.on(document,"dataDMUserUpdates",this.handleUserUpdates),this.on(document,"uiDMNotificationClicked",this.dmNotificationClicked),this.on(document,"dataDMPushReceived",this.handleDMPush),this.on(document,"dataDMPushReceived","uiDMRequestUserUpdates"),this.storage=new a.a("dm_notifications")})}var n=i("DBjh"),o=i("lUIe"),a=i("WODX"),r=Object(n.default)(s);e.a=r},"1hKY":function(t,e,i){"use strict";(function(t){function i(){this.onClickOutside=function(e,i){i=i.bind(this),this.clickOutsideHandler=function(s,n){var o=!0;e.each(function(){if(t(s.target).closest(this).length)return o=!1,!1}),o&&i(s,n)},t(document).on("click",this.clickOutsideHandler)},this.offClickOutside=function(){this.clickOutsideHandler&&(t(document).off("click",this.clickOutsideHandler),this.clickOutsideHandler=null)},this.before("teardown",function(){this.offClickOutside()})}e.a=i}).call(e,i("4kSj"))},"1ihI":function(t,e,i){"use strict";(function(t){function s(e,i){i=i||{},this.attr={url:"/i/direct_messages/typeahead",dbName:i.dbName||"dm_typeahead",dbVersion:i.dbVersion||20160920,metadata:{name:"metadata",keyPath:"key"},conversations:{name:"conversations",keyPath:"id",indexes:[{name:"title",keyPath:"title",unique:!1}]},users:{name:"users",keyPath:"id",indexes:[{name:"name_lowercase",keyPath:"name_lowercase",unique:!1},{name:"screen_name",keyPath:"screen_name",unique:!0}]}},this.attr=c.default.merge(this.attr,e),this.after=t.noop,this.defaultAttrs=t.noop,a.default.mixin(this,[l.a]),this.initialize=function(){this.isUsingIndexedDB=!0;var t=this;return this.openIndexedDB(this.attr.dbName,this.attr.dbVersion,[this.attr.metadata,this.attr.users,this.attr.conversations]).then(this.ensureLocalDataBelongsToCurrentUser.bind(this,h.a.user.id)).then(this.checkIfLocalDataHasExpired.bind(this)).then(this.fetchDataIfExpired.bind(this)).then(this.ensureDataAndSchemaVersionMatch.bind(this)).then(this.repopulateDataStore.bind(this)).then(function(){return t.database}).catch(this.onInitializationError.bind(this))},this.getLocalSuggestions=function(t,e){var i=this;return new Promise(function(s,n){var o=function(t){(e||s)(t||[])},a=r.a.tokenizeText(t.query),c=t.dmConversationsOptions||{},l=a.map(function(t){return this.search(t)},i);Promise.all(l).then(u).then(function(t){return c.excludeGroups?i.removeGroups(t):t}).then(function(t){return c.excludeOneToOnes?i.removeOneToOnes(t):t}).then(function(t){return c.sortBySortId?i.sortBySortId(t):t}).then(o,o)})},this.repopulateIfStale=function(t){var e=this;if(t=t||[],t.length){var i=o.a.KeyRange.bound(t[0],t[t.length-1],!1,!1);return this.database.getAll(this.attr.conversations.name,i).then(function(e){return e.length<t.length}).then(function(t){return t&&e.database.clear(e.attr.metadata.name)}).then(function(){return e.initialize()})}},this.removeGroups=function(t){return(t||[]).filter(function(t){return t&&!t.is_group})},this.removeOneToOnes=function(t){return(t||[]).filter(function(t){return t&&t.is_group})},this.sortBySortId=function(t){return(t||[]).sort(function(t,e){return d.a.compare(e.sort_id,t.sort_id)})},this.openIndexedDB=function(t,e,i){var s=this;return o.a.open(t,e,i).then(function(t){return s.database=t})},this.ensureLocalDataBelongsToCurrentUser=function(t){var e=this;return this.database.get(this.attr.metadata.name,"user").then(function(e){return e&&e.id===t}).then(function(t){return t||e.database.clear()})},this.checkIfLocalDataHasExpired=function(){var t=this.now();return this.database.get(this.attr.metadata.name,"ttl").then(function(e){return!e||!e.expires||e.expires<t})},this.fetchDataIfExpired=function(t){return t&&this.get({url:this.attr.url})},this.ensureDataAndSchemaVersionMatch=function(t){if(t){var e=(t.metadata||[]).reduce(function(t,e){return e.version||t},0);if(this.database.version===e)return t}},this.repopulateDataStore=function(t){return t&&this.database.clear().then(this.populateDataStore.bind(this,t))},this.populateDataStore=function(t){return t&&this.database.add(t)},this.onInitializationError=function(t){this.database&&this.database.close()},this.hydrateParticipantsForOneToOnes=function(t){var e=this,i=t.map(function(t){return t.is_group?t:e.hydrateParticipants(t)});return Promise.all(i)},this.hydrateParticipants=function(t){var e=t.participants.map(function(t){return this.getUserById(t)},this);return Promise.all(e).then(function(e){return t.participants=e,t})},this.getUserById=function(t){return this.database.get(this.attr.users.name,t)},this.search=function(t){var e=this.searchUsers(t),i=this.searchConversations(t),s=this.getConversation.bind(this);return Promise.all([e,i]).then(u).then(p).then(function(t){return Promise.all(t.map(function(t){return s(t)}))}).then(this.hydrateParticipantsForOneToOnes.bind(this))},this.searchUsers=function(t){var e=this.database.getByPrefix(this.attr.users.name,"name_lowercase",t),i=this.database.getByPrefix(this.attr.users.name,"screen_name",t);return Promise.all([e,i]).then(u).then(function(t){return t.map(function(t){return t.conversations})}).then(u)},this.searchConversations=function(t){return this.database.getByPrefix(this.attr.conversations.name,"title",t).then(function(t){return t.map(function(t){return t.id})})},this.getConversation=function(t){return this.database.get(this.attr.conversations.name,t)},this.now=function(){return(new Date).getTime()}}var n=i("KgvP"),o=i("b6Cp"),a=i("q9/C"),r=i("pFsH"),c=i("YzIt"),l=i("VtWx"),h=i("IAMj"),d=i("lUIe"),u=n.a.flatten,p=n.a.unique;e.a=s}).call(e,i("4kSj"))},"1jcW":function(t,e,i){"use strict";function s(){this.widgetsAreLoaded=function(){return!(!this.widgets||!this.widgets.init)},this.getWidgets=function(){window.twttr||this.asyncWidgetsLoader(),this.widgets=window.twttr,window.twttr.ready(this._widgetsReady.bind(this))},this._widgetsReady=function(_){this.widgetsReady&&this.widgetsReady()},this.asyncWidgetsLoader=function(){window.twttr=function(t,e,i){var s=t.getElementsByTagName(e)[0];if(!t.getElementById(i)){var n=t.createElement(e);n.id=i,n.src="//platform.twitter.com/widgets.js",s.parentNode.insertBefore(n,s);var o={_e:[],ready:function(t){o._e.push(t)}};return window.twttr||o}}(document,"script","twitter-wjs")}}e.a=s},"1qJr":function(t,e,i){"use strict";function s(){this.defaultAttrs({currentPositionSelector:".TweetBoxUploadProgress-barPosition"}),this.showProgressBar=function(t,e){var i=this.getTweetboxId();e.tweetboxId===i&&(n[i]=e.uploadId,this.$node.addClass("is-showingProgress"))},this.hideProgressBar=function(t,e){this.$node.removeClass("is-showingProgress is-uploading is-waiting is-processing");var i=this.getTweetboxId(),s=n[i];if(s){var o="uiTweetSent"===t.type?"uiMediaSruComplete":"uiMediaSruCancel";this.trigger(document,o,{uploadId:s}),this.select("currentPositionSelector").width(0),delete n[i]}},this.updateProgressBar=function(t,e){n[this.getTweetboxId()]===e.uploadId&&(e.mode&&this.$node.addClass("is-"+e.mode),"uploading"===e.mode&&this.select("currentPositionSelector").width(e.percent+"%"))},this.after("initialize",function(){this.on(document,"uiMediaSruFinalize",this.showProgressBar),this.on(document,"dataMediaSruProgress dataMediaSruSuccess",this.updateProgressBar),this.on(document,"dataMediaSruError dataTweetError uiTweetDialogClosed",this.hideProgressBar),this.on("uiTweetSent uiTweetCancelled",this.hideProgressBar)})}var n={};e.a=s},"1qzW":function(t,e,i){"use strict";(function(t){function s(e){this.attr={id:null,ttl_ms:1728e5,localStorageCount:1200,ie8LocalStorageCount:1e3,limit:6,version:4,localQueriesEnabled:!1,remoteQueriesEnabled:!1,onlyDMable:!1,onlyShowUsersWithCanMediaTag:!1,currentUserId:null,storageAdjacencyList:"userAdjacencyList",storageHash:"userHash",storageProtocol:"protocol",storageVersion:"userVersion",remotePath:"/i/search/typeahead.json",remoteType:"users",prefetchPath:"/i/search/typeahead.json",prefetchType:"users",storageBlackList:"userBlackList",maxLengthBlacklist:100},this.attr=l.default.merge(this.attr,e),this.after=t.noop,this.defaultAttrs=t.noop,c.default.mixin(this,[a.a,h.a,r.a]),this.getPrefetchCount=function(){return this.attr.localStorageCount},this.isMetadataExpired=function(){var t=this.storage.getItem(this.attr.storageVersion),e=this.storage.getItem(this.attr.storageProtocol);return t!==this.attr.version||e!==this.getProtocol()},this.getStorageKeys=function(){return[this.attr.storageVersion,this.attr.storageHash,this.attr.storageAdjacencyList,this.attr.storageProtocol]},this.getDataFromLocalStorage=function(){this.userHash=this.storage.getItem(this.attr.storageHash)||this.userHash,this.adjacencyList=this.storage.getItem(this.attr.storageAdjacencyList)||this.adjacencyList},this.processResults=function(t){if(!t||!t[this.attr.prefetchType])return void this.useStaleData();t[this.attr.prefetchType].forEach(function(t){this.isAccountMalformedAndScribe(t,"typeahead_local")||(t.tokens=t.tokens.map(function(t){return"string"==typeof t?t:t.token}),t.prefetched=!0,this.userHash[t.id]=t,t.tokens.forEach(function(e){var i=n.a.getFirstChar(e);i.trim().length&&(void 0===this.adjacencyList[i]&&(this.adjacencyList[i]=[]),-1===this.adjacencyList[i].indexOf(t.id)&&this.adjacencyList[i].push(t.id))},this))},this),this.storage.setItem(this.attr.storageHash,this.userHash,this.attr.ttl_ms),this.storage.setItem(this.attr.storageAdjacencyList,this.adjacencyList,this.attr.ttl_ms),this.storage.setItem(this.attr.storageVersion,this.attr.version,this.attr.ttl_ms),this.storage.setItem(this.attr.storageProtocol,this.getProtocol(),this.attr.ttl_ms)},this.getLocalSuggestions=function(t,e){if(!this.attr.localQueriesEnabled)return void e([]);var i=n.a.tokenizeText(t.query.replace("@","")),s=this.getPotentiallyMatchingIds(i),o=this.getAccountsFromIds(s),a=o.filter(this.matcher(i));a.sort(this.sorter),a=a.slice(0,this.attr.limit),e(a)},this.getPotentiallyMatchingIds=function(t){var e=[];return t.map(function(t){var i=this.adjacencyList[n.a.getFirstChar(t)];i&&(e=e.concat(i))},this),e=l.default.uniqueArray(e)},this.getAccountsFromIds=function(t){var e=[];return t.forEach(function(t){var i=this.userHash[t];i&&e.push(i)},this),e},this.matcher=function(t){var e=this;return function(i){var s=i.tokens;return!(e.attr.onlyDMable&&!i.is_dm_able)&&(!!e.isEligibleForMediaTagSuggestion(i)&&(t.every(function(t){return s.filter(function(e){return 0===e.indexOf(t)}).length})?i:void 0))}},this.sorter=function(t,e){var i=t.prefetched,s=e.prefetched;return i&&!s?-1:s&&!i?1:function(t,e){var i=t.score_boost?t.score_boost:0,s=e.score_boost?e.score_boost:0,n=t.rounded_score?t.rounded_score:0;return(e.rounded_score?e.rounded_score:0)+s-(n+i)}(t,e)},this.processRemoteSuggestions=function(t,e,i){var s=i[this.attr.id]||[],n={};return s.forEach(function(t){return n[t.id_str]=!0},this),this.requiresRemoteSuggestions(t.queryData)&&e[this.attr.remoteType]&&e[this.attr.remoteType].forEach(function(t){!n[t.id_str]&&(!this.attr.onlyDMable||t.is_dm_able)&&this.isEligibleForMediaTagSuggestion(t)&&!this.isAccountMalformedAndScribe(t,"typeahead_remote")&&s.push(t)},this),i[this.attr.id]=s.slice(0,this.attr.limit),i[this.attr.id].forEach(function(t){this.removeBlacklistSocialContext(t)},this),i},this.removeBlacklistSocialContext=function(t){t.first_connecting_user_id in this.socialContextBlackList&&(t.first_connecting_user_name=void 0,t.first_connecting_user_id=void 0)},this.requiresRemoteSuggestions=function(t){return!(!t||!t.query)&&(t.accountsWithoutAtSignLocalOnly?this.attr.remoteQueriesEnabled&&("@"===n.a.getFirstChar(t.query)||t.atSignRemoved):this.attr.remoteQueriesEnabled)},this.isEligibleForMediaTagSuggestion=function(t){return!this.attr.onlyShowUsersWithCanMediaTag||t.can_media_tag||t.id===this.attr.currentUserId},this.isAccountMalformedAndScribe=function(t,e){var i=n.a.isAccountMalformed(t);return i&&this.scribe({component:"local_storage",element:e,action:"empty"}),i},this.initialize=function(){var t=Object(o.a)({withExpiry:!0});this.storage=new t("typeahead"),this.adjacencyList={},this.userHash={},this.attr.localQueriesEnabled&&this.loadData(this.attr.prefetchPath,this.attr.prefetchType),this.socialContextBlackList=this.storage.getItem(this.attr.storageBlackList)||{}},this.initialize()}var n=i("pFsH"),o=i("rWgq"),a=i("VtWx"),r=i("3oDc"),c=i("q9/C"),l=i("YzIt"),h=i("8XKX");e.a=s}).call(e,i("4kSj"))},"20ha":function(t,e,i){"use strict";var s={formatDuration:function(t){return Math.floor(t/60)+":"+("0"+Math.floor(t%60)).slice(-2)}};e.a=s},"2CoY":function(t,e,i){"use strict";function s(){this.scribeTransport=n.a,this.scribePerftown=function(t,e,i){var s={product:"webclient",description:t,duration_ms:e,start_time_ms:this.startTime,metadata:JSON.stringify(i)};this.scribeTransport.send(s,"perftown")},this.after("initialize",function(){this.startTime=(new Date).getTime()})}var n=i("RMWW");e.a=s},"2g5l":function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMAvatar DMAvatar--'),s.s(s.f("image_count",t,e,1),t,e,0,47,62,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("image_count",t,e,0)))}),t.pop()),s.s(s.f("image_count",t,e,1),t,e,1,0,0,"")||s.b("1"),s.b(' u-chromeOverflowFix">\n'),s.s(s.f("images",t,e,1),t,e,0,147,279,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('    <span class="DMAvatar-container">\n      <img class="DMAvatar-image" src="'),i.b(i.v(i.f("src",t,e,0))),i.b('" alt="'),i.b(i.v(i.f("alt",t,e,0))),i.b('" title="'),i.b(i.v(i.f("alt",t,e,0))),i.b('">\n    </span>\n')}),t.pop()),s.b("</div>\n"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},"2t4W":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({mediaNotDisplayedSelector:".Tombstone",displayMediaSelector:".js-display-this-media",mediaContainerSelector:".js-media-container, .AdaptiveMedia, .js-old-media-container",tweetSelector:".tweet",hiddenClass:"u-hidden"}),this.showMedia=function(t){t=t||this.$node,t.find(this.attr.mediaNotDisplayedSelector).slideUp(100),t.find(this.attr.mediaContainerSelector).removeClass(this.attr.hiddenClass).slideDown(100)},this.showLimitedMedia=function(e){e.stopImmediatePropagation();var i=t(e.target).closest(this.attr.tweetSelector);this.trigger("uiShowLimitedMedia"),this.showMedia(i)},this.showAllMedia=function(e,i){this.showMedia(t(e.target))},this.after("initialize",function(){this.on("click",{displayMediaSelector:this.showLimitedMedia}),this.on("uiShowAllMedia",this.showAllMedia)})}var n=i("DBjh");e.a=Object(n.default)(s)}).call(e,i("4kSj"))},"38hD":function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<button type="button" class="modal-btn modal-close js-close">\n  <span class="Icon Icon--close Icon--medium">\n    <span class="visuallyhidden">Close</span>\n  </span>\n</button>\n'),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},"3Cjl":function(t,e,i){"use strict";function s(){this.createUpload=function(t){return new r.a(t)},this.stats=function(t){this.trigger("dataSruStats",{mediaCategory:t.mediaType.replace("image/gif","gif").replace(/\/.*/,""),command:t.command.toLowerCase(),appendByteSize:t.appendByteSize,status:t.status,duration:t.duration,totalDuration:t.totalDuration,totalByteSize:t.totalByteSize})},this.dataToExtraInitParams=function(t){return c.a.getDecider("sruMediaCategory")&&t.mediaCategory&&"&media_category="+encodeURIComponent(t.mediaCategory)||null},this.init=function(t,e){var i=e.uploadId,s=this.uploads[i],n=o.a.get(e.fileId),a={extraInitParams:this.dataToExtraInitParams(e),pauseBeforeFinalize:!0,stats:this.stats.bind(this),sourceUrl:e.sourceUrl,mediaType:e.mediaType};!s&&n&&(s=this.createUpload(n.fileHandle),this.uploads[i]=s),s.upload(a)},this.finalize=function(t,e){var i=this,s=e.uploadId,n=this.uploads[s];n?n.upload({extraInitParams:this.dataToExtraInitParams(e),success:function(t){return i.trigger("dataMediaSruSuccess",{uploadId:s,mediaId:t,percent:100})},progress:function(t,e){return i.trigger("dataMediaSruProgress",{uploadId:s,percent:t,mode:e})},error:function(t){return i.trigger("dataMediaSruError",{uploadId:s,error:t})},trimRanges:e.trimRange,stats:this.stats.bind(this),sourceUrl:e.sourceUrl,mediaType:e.mediaType}):this.trigger("dataMediaSruError",e)},this.cancelOrComplete=function(t,e){var i=this.uploads[e];i&&(i.cancel(),delete this.uploads[e],this.trigger(t,{uploadId:e}))},this.complete=function(t,e){this.cancelOrComplete("dataMediaSruComplete",e.uploadId)},this.cancel=function(t,e){this.cancelOrComplete("dataMediaSruCancel",e.uploadId)},this.after("initialize",function(){this.uploads={},this.on(document,"uiMediaSruInit",this.init),this.on(document,"uiMediaSruFinalize",this.finalize),this.on(document,"uiMediaSruCancel",this.cancel),this.on(document,"uiMediaSruComplete",this.complete)}),this.after("teardown",function(){var t=this;Object.keys(this.uploads).forEach(function(e){return t.uploads[e].cancel()})})}var n=i("DBjh"),o=i("H6fk"),a=i("h3U/"),r=i.n(a),c=i("IAMj");e.a=Object(n.default)(s)},"3YhO":function(t,e,i){"use strict";(function(t){function s(){this.attributes({checkSelector:".DMReadReceipt-check",statusSelector:".DMReadReceipt-statusView",readRecieptSelector:".DMReadReceipt",seenClass:"is-seen",seenAnimatedClass:"is-seenAnimated",receiptExpandedClass:"is-expanded",userListContainerSelector:".DMReadReceiptUserList",userListExpandedSelector:".DMReadReceiptUserList-expanded",userListTruncatedSelector:".DMReadReceiptUserList-truncated",userListExpandSeenSelector:".DMReadReceiptUserList-expandSeen",seenByAllClass:"is-seenByAll",userListExpandedClass:"is-expanded",conversationContentSelector:".DMConversation-content",sentMessageSelector:".DirectMessage--sent:not(.is-rapidFire)"}),this.resetState=function(t){this.conversationId=t.conversation_id,this.isOtoConversation=t.is_oto,this.participants=t.participants&&t.participants.filter(function(t){return t.id_str!==c.a.user.id})},this.localizeUserList=function(t,e){var i=e?t.slice(0,10):t,s=t.length-i.length;if(s>0){var n={user_count:s};n["user_count_"+a.a.PluralRules.rule_for(s)]=!0;var o=d.a.render(n);i.push(o)}return(new a.a.ListFormatter).format(i)},this.getSeenByData=function(t,e){var i=t.filter(function(t){var i=t.join_conversation_event_id;return!i||1!==n.a.compare(i,e)}),s=i.filter(function(t){return t.last_read_event_id&&1!==n.a.compare(e,t.last_read_event_id)});return{seenByAll:s.length===i.length,seenByUsers:s}},this.setMessageToSeenState=function(t){var e=this.isOtoConversation?Object(l.default)("Seen"):Object(l.default)("Seen by everyone");t.find(this.attr.statusSelector).text(e),t.find(this.attr.checkSelector).addClass(this.attr.seenClass),t.find(this.attr.userListContainerSelector).addClass(this.attr.seenByAllClass)},this.setMessageToCollapsedState=function(t){t.data("has-expanded-read-receipt",!1),t.find(this.attr.readRecieptSelector).removeClass(this.attr.receiptExpandedClass),t.find(this.attr.userListContainerSelector).addClass("u-hidden")},this.setMessageToExpandedState=function(e){var i=this;this.select("sentMessageSelector").each(function(s,n){var o=t(n),a=o.data("message-id")===e.data("message-id"),r=i.isMessageExpanded(o);!a&&r&&i.setMessageToCollapsedState(o)}),e.data("has-expanded-read-receipt",!0),e.find(this.attr.readRecieptSelector).addClass(this.attr.receiptExpandedClass),e.find(this.attr.userListContainerSelector).removeClass("u-hidden")},this.populateDetails=function(t,e){var i=e.seenByUsers;if(e.seenByAll)this.setMessageToSeenState(t);else if(!this.isOtoConversation&&i.length>0){var s={user_count:i.length};s["user_count_"+a.a.PluralRules.rule_for(i.length)]=!0;var n=p.a.render(s);t.find(this.attr.statusSelector).text(n);var o=i.map(function(t){return t.name}),r=this.localizeUserList(o,!0),c=this.localizeUserList(o,!1);t.find(this.attr.userListTruncatedSelector).html(r,!0),t.find(this.attr.userListExpandedSelector).html(c,!1)}},this.handleConversationUpdate=function(e,i){var s=this;if(this.resetState(i),this.participants){this.$content.find(this.attr.sentMessageSelector).each(function(e,i){var n=t(i),o=n.data("message-id"),a=s.getSeenByData(s.participants,o);if(a.seenByAll){var r=n.find(s.attr.checkSelector),c=n.data("is-read-receipt-set"),l=c?s.attr.seenAnimatedClass:s.attr.seenClass;r.addClass(l)}s.isMessageExpanded(n)&&s.populateDetails(n,a),n.data("is-read-receipt-set",!0)})}},this.isMessageExpanded=function(t){return!0===t.data("has-expanded-read-receipt")},this.expandReadReceipt=function(t){if(this.participants){var e=t.data("message-id"),i=this.getSeenByData(this.participants,e);this.populateDetails(t,i),this.setMessageToExpandedState(t)}},this.handleReadReceiptClick=function(e,i){var s=t(e.target).closest(this.attr.sentMessageSelector);this.isMessageExpanded(s)?this.setMessageToCollapsedState(s):this.expandReadReceipt(s)},this.expandSeenList=function(e,i){t(e.target).closest(this.attr.sentMessageSelector).find(this.attr.userListContainerSelector).addClass(this.attr.userListExpandedClass)},this.after("initialize",function(){this.$content=this.select("conversationContentSelector"),this.on("uiDMConversationUpdated",this.handleConversationUpdate),this.on("click",{readRecieptSelector:this.handleReadReceiptClick,userListExpandSeenSelector:this.expandSeenList})})}var n=i("lUIe"),o=i("ZVSr"),a=i.n(o),r=i("DBjh"),c=i("IAMj"),l=i("0d4m"),h=i("l8CN"),d=i.n(h),u=i("R/Ik"),p=i.n(u);e.a=Object(r.default)(s)}).call(e,i("4kSj"))},"3eGJ":function(t,e,i){"use strict";function s(){this.defaultAttrs({phoneNumberInputModalSelector:"#sms-confirmation-begin-modal",pinVerificationModalSelector:"#sms-confirmation-complete-modal",alertBoxSelector:"#sms-alert-box",alertMessageSelector:"#sms-alert-message",alertBoxCloseSelector:"#sms-alert-close",authenticityTokenSelector:"#authenticity_token",resendCodeSelector:"#resend_code"}),this.setUpDialog=function(t,e){this.reset(),this.open()},this.reset=function(){this.select("pinVerificationModalSelector").hide(),this.select("phoneNumberSelector").val(""),this.savedPhoneNumber="",this.savedCountryCode=""},this.afterOpen=function(){this.position(),this.select("alertBoxSelector").hide()},this.alertBannerHandler=function(t,e){this.showAlert(e.message)},this.showAlert=function(t){this.select("alertBoxSelector").show(),this.select("alertMessageSelector").text(t)},this.hideAlert=function(){this.select("alertBoxSelector").hide(),this.select("alertMessageSelector").text("")},this.sendPinCode=function(t,e){t.preventDefault(),this.callbackIfValidPhoneNumber(function(){var t=this.select("phoneNumberSelector").val(),e=this.select("countryCodeSelector").val();this.savedPhoneNumber=t,this.savedCountryCode=e,this.trigger("uiSendPinAction",{phone_number:t,country_code:e})})},this.resendPinCode=function(){this.trigger("uiResendPinAction",{phone_number:this.savedPhoneNumber,country_code:this.savedCountryCode})},this.verifyPinCode=function(t,e){t.preventDefault();var i=this.stripPin(this.select("pinCodeSelectorRaw").val());if(!i)return void this.showAlert(Object(o.default)("Incorrect code. Please try again or request a new one."));this.trigger("uiVerifyPinAction",{numeric_pin:i,phone_number:this.savedPhoneNumber,country_code:this.savedCountryCode})},this.sendPinSuccess=function(t,e){this.select("phoneNumberInputModalSelector").remove(),this.hideAlert();var i=this.trimSavedPhoneNumber();this.select("pinVerificationModalSelector").find("#phone_number_to_verify").html(i),this.select("pinVerificationModalSelector").show(),this.trigger("uiVerifyPinFormImpression")},this.trimSavedPhoneNumber=function(){var t=/\(*\)*\+*-*#* */g,e=this.savedPhoneNumber.replace(t,"");return this.savedCountryCode+e},this.verifyPinSuccess=function(t,e){this.isCompleted=!0,this.close(),this.trigger("uiShowMessage",{message:Object(o.default)("Your account is unlocked.")})},this.resendPinSuccess=function(t,e){this.showAlert(e.message)},this.updateSmsConfirmationCountryCode=function(t,e){this.trigger("uiSmsConfirmationCountryChange")},this.phoneNumberInput=function(t,e){this.startedPhoneInput||(this.trigger("uiSmsConfirmationPhoneNumberInput"),this.startedPhoneInput=!0)},this.pinInput=function(t,e){this.startedPinInput||(this.trigger("uiSmsConfirmationPinCodeInput"),this.startedPinInput=!0)},this.around("close",function(t){this.isOpen()&&!this.isCompleted&&this.trigger("uiCancelSmsConfirmationDialog"),t()}),this.after("initialize",function(){this.on(document,"uiNeedsSmsConfirmationDialog",this.setUpDialog),this.on("uiDialogOpened",this.afterOpen),this.on(document,"dataSendPinSuccess",this.sendPinSuccess),this.on(document,"dataResendPinSuccess",this.resendPinSuccess),this.on(document,"dataVerifyPinSuccess",this.verifyPinSuccess),this.attr.show_sms_confirmation_dialog&&this.trigger("uiNeedsSmsConfirmationDialog"),this.on("click",{submitRegisterButtonSelector:this.sendPinCode,submitVerifyButtonSelector:this.verifyPinCode,alertBoxCloseSelector:this.clearInvalidPhoneMessage,resendCodeSelector:this.resendPinCode}),this.on("uiAlertBanner",this.alertBannerHandler),this.on("uiAlertBannerClose",this.hideAlert),this.on("submit",{phoneNumberInputModalSelector:this.sendPinCode,pinVerificationModalSelector:this.verifyPinCode}),this.on("change",{countryNameSelector:this.updateSmsConfirmationCountryCode}),this.on("input",{phoneNumberSelector:this.phoneNumberInput,pinCodeSelectorRaw:this.pinInput}),this.startedPhoneInput=!1,this.startedPinInput=!1,this.isCompleted=!1})}var n=i("DBjh"),o=i("0d4m"),a=i("UHc7"),r=i("zIBT"),c=Object(n.default)(a.a,r.a,s);e.a=c},"3i53":function(t,e,i){"use strict";(function(t){function s(){var t=Array.prototype.slice.call(arguments);if(!(this instanceof s)){var e=t[0],i=e.dbName,a=e.dbVersion;return n(o.a.open(i,a).then(function(t){return new s(t)}),e)}this.database=t[0]}function n(e,i){return i=i||{},e.then(i.onSuccess||t.noop,i.onFailure||t.noop)}var o=i("b6Cp");e.a=s,s.prototype.closeConnection=function(){this.database.close()},s.prototype.getItemByKey=function(t){return n(this.database.get(t.objectStoreName,t.key),t)},s.prototype.getItemsByPrefix=function(t){return n(this.database.getByPrefix(t.objectStoreName,t.index,t.prefix),t)},s.prototype.addItems=function(t){var e={};return e[t.objectStoreName]=t.items,n(this.database.add(e),t)},s.prototype.upsertItems=function(t){var e={};return e[t.objectStoreName]=t.items,n(this.database.put(e),t)},s.prototype.createObjectStore=function(t){var e=this,i=this.database.name,s=this.database.version;this.database.close();var a={name:t.objectStoreName,keyPath:t.keyPathName,indexes:t.indexes||[]};return n(o.a.open(i,s+1,[a],!0).then(function(t){return e.database=t}),t)},s.prototype.deleteItem=function(t){return n(this.database.destroy(t.objectStoreName,t.key),t)},s.prototype.clearObjectStore=function(t){return n(this.database.clear(t.objectStoreName),t)},s.prototype.clearAllObjectStores=function(t){return n(this.database.clear(),t)},s.prototype.checkIfObjectStoreExists=function(t){return this.database.stores.indexOf(t)>-1}}).call(e,i("4kSj"))},"40xB":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({buttonSelector:".btn",fileInputString:"media[]",emptyFileInputString:"media_empty",fileSelector:"input.file-input",uploadType:"",shouldInterceptTab:!0}),n.default.mixin(this,[l.a,h.a]),this.gotMedia=function(t){t.isVideo?this.gotVideo(t):this.gotImageData(t)},this.gotFileHandle=function(t,e){var i={mediaCategoryPrefix:this.attr.mediaCategoryPrefix};a.a.getFileInfo(t,e,i).then(this.gotMedia.bind(this))},this.reset=function(){this.resetInput("fileSelector",this.attr.emptyFileInputString),this.trigger("uiPreviewThumbnailHide")},this.notifyMediaSruInit=function(t){var e={fileId:t.fileId,url:t.url,uploadId:t.uploadId,mediaCategory:t.mediaCategory,sourceUrl:t.sourceUrl,mediaType:t.mediaType};this.trigger("uiMediaSruInit",e)},this.beginSru=function(t){var e=c.a.get(t);e&&this.notifyMediaSruInit(e)},this.resetInput=function(t,e){var i=this.select(t);i.val("");var s=i.clone().attr("name",e);i.replaceWith(s)},this.validate=function(t,e){var i=this;return a.a.getFileType(t,e).then(function(s){var n=!1;if(s===r.a.GIF?n=i.validateGif(e):s===r.a.IMAGE?n=i.validateImage(e):s===r.a.VIDEO&&(n=i.validateVideo(e)),n)return{fileName:t,fileHandle:e};throw new Error("invalid file")},function(){var t=i.hasVideoSupport()?o.a.FILE_UNSUPPORTED:o.a.NOT_IMAGE;throw i.addFileError(t),t})},this.setup=function(){this.select("fileSelector").attr("name",this.attr.fileInputString)},this.fileSelected=function(t){var e=this.select("fileSelector").get(0),i=a.a.getFileName(e.value);if(!i)return Promise.resolve();for(var s=a.a.getFileHandles(e),n=[],o=0;o<s.length;o++){var r=s[o];n.push(this.validate(i,r))}this.resetInput("fileSelector",this.attr.emptyFileInputString);var c=this;return Promise.all(n).then(function(t){return t.filter(Boolean).forEach(function(t){return c.gotFileHandle(t.fileName,t.fileHandle)})})},this.maybeTabToNextFocusable=function(e){if(9===e.which){e.preventDefault();var i=e.shiftKey?-1:1,s=t("button,input,textarea,object,a[href],[tabindex],[contenteditable=true],[contenteditable=plaintext-only]").filter(":visible:not(:disabled):not([tabindex=-1])");s.eq(s.index(e.target)+i).focus()}},this.updateAcceptedFormats=function(){var t=this.mediaItems&&this.mediaItems.length||0,e=this.videoFormats(t),i=this.imageFormats(t),s=i+","+e;this.select("photoButtonSelector").prop("accept",s)},this.notifyFileSelected=function(t){var e={type:"uiFileSelected",defaultBehavior:this.beginSru.bind(this,t.fileId)};this.trigger(e,t)},this.after("initialize",function(){this.setup(),this.on("change",this.fileSelected),this.attr.shouldInterceptTab&&this.on("keydown",this.maybeTabToNextFocusable),this.on("click",{fileSelector:"uiFileInputClicked"})})}var n=i("q9/C"),o=i("JSdv"),a=i("+dWm"),r=i("pNUl"),c=i("H6fk"),l=i("JTIh"),h=i("WRJE");e.a=s}).call(e,i("4kSj"))},"478N":function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<button type="button" class="btn-link js-create-custom-timeline-button" data-element-term="create_custom_timeline_button">Create new collection</button>\n'),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},"4LVv":function(t,e,i){"use strict";function s(){this.defaultAttrs({reporterUserIdSelector:"#current-user-id",newReportFlowFormSelector:".new-report-flow-form",newReportFlowIframeSelector:"#new-report-flow-frame",newReportFlowNextSelector:".new-report-flow-next-button",newReportFlowNextTextSelector:".next-text",newReportFlowAddTextSelector:".add-text",newReportFlowBackSelector:".new-report-flow-back-button",newReportFlowCloseSelector:".new-report-flow-close-button",newReportFlowDoneSelector:".new-report-flow-done-button"}),this.setUpDialog=function(t,e){this.reset(),this.clientEvent=e.clientEvent||o.a,this.eventData=e,this.setTriggeredTarget(),this.setNewReportFlowContext(),this.showNewReportFlow(),this.open()},this.reset=function(){this.isComplete=!1},this.setTriggeredTarget=function(){this.$node.removeClass("report-moment report-user report-tweet report-dm report-rtbad"),"user"===this.eventData.target?this.$node.addClass("report-user"):"moment"===this.eventData.target?this.$node.addClass("report-moment"):"dm-conversation"===this.eventData.target?this.$node.addClass("report-dm"):"rtb-ad"===this.eventData.target?this.$node.addClass("report-rtbad"):this.$node.addClass("report-tweet")},this.buildReportClientContextParams=function(t){var e=this.clientEvent.scribeContext.page,i=this.clientEvent.scribeContext.section||"",s=this.eventData.scribeContext?this.eventData.scribeContext.component||"":"",n=e+":"+i+":"+s;if(t.client_location=n,this.clientEvent.scribeData)switch(this.clientEvent.scribeData.internal_referer&&(t.client_referer=this.clientEvent.scribeData.internal_referer),e){case"profile":t.profile_id=this.clientEvent.scribeData.profile_id||"";break;case"search":this.clientEvent.scribeData.search_details&&(t.search_query=this.clientEvent.scribeData.search_details.query||"",t.search_source=this.clientEvent.scribeData.search_details.query_source||"",t.search_result_filter=this.clientEvent.scribeData.search_details.result_filter||"")}return t},this.buildReportSourceParams=function(t){return this.$node.hasClass("report-user")?t.source="reportprofile":this.$node.hasClass("report-moment")?(t.source="reportmoment",t.is_media="true",t.reported_moment_id=this.eventData.momentId,t.reported_tweet_id=this.eventData.tweetId):this.$node.hasClass("report-dm")?(t.source="reportdmconversation",t.reported_direct_message_conversation_id=this.eventData.reportedDirectMessageConversationId,t.reported_direct_message_id=this.eventData.reportedDirectMessageId,t.reported_user_id=this.eventData.userId,t.reported_user_id||(t.reported_user_id=0)):this.$node.hasClass("report-rtbad")?(t.source="reportadcreative",t.reported_ad_creative_id=this.eventData.creativeId,t.reported_user_id=this.eventData.userId,t.report_type="report_ads"):(t.source="reporttweet",t.reported_moment_id=this.eventData.momentId,t.reported_tweet_id=this.eventData.tweetId,this.eventData.conversationSection&&(t.conversation_section=this.eventData.conversationSection)),t},this.setNewReportFlowContext=function(){var t=this.select("reporterUserIdSelector").val(),e=(!!this.eventData.mediaType).toString(),i=("promoted"===this.eventData.disclosureType).toString(),s={next_view:"report_story_start",reporter_user_id:t,reported_user_id:this.eventData.userId,is_media:e,is_promoted:i,lang:document.documentElement.lang||"en"},n=this.buildReportSourceParams(s),o="/i/safety/report_story?"+r.a.encode(this.buildReportClientContextParams(n));this.select("newReportFlowIframeSelector").attr("src",o)},this.showNewReportFlow=function(){this.$node.addClass("new-report-flow-dialog"),this.$node.attr("aria-hidden",!1),this.select("newReportFlowBackSelector").hide(),this.select("newReportFlowDoneSelector").hide(),this.select("newReportFlowNextSelector").show(),this.select("newReportFlowNextTextSelector").show(),this.select("newReportFlowAddTextSelector").hide()},this.cancelReport=function(){this.trigger("uiDidCancelReport",this.eventData)},this.completeReport=function(){this.isComplete=!0,this.close()},this.around("close",function(t){this.isOpen()&&!this.isComplete&&this.cancelReport(),this.select("newReportFlowIframeSelector").attr("src",""),t()}),this.newReportFlowFrameNext=function(){this.select("newReportFlowIframeSelector").contents().find("#report_webview_form").submit()},this.newReportFlowFrameBack=function(){this.select("newReportFlowNextTextSelector").show(),this.select("newReportFlowAddTextSelector").hide(),this.select("newReportFlowIframeSelector").get(0).contentWindow.history.back()},this.getIframeLocation=function(){return this.select("newReportFlowIframeSelector").contents().get(0).location},this.checkNewReportFlowContentAndUpdate=function(){var t=this.getIframeLocation(),e=t.href.indexOf("report_story_start")>=0,i=t.href.indexOf("/i/safety/report_story_complete")>=0;if(e)this.select("newReportFlowBackSelector").hide(),this.select("newReportFlowDoneSelector").hide(),this.select("newReportFlowCloseSelector").hide(),this.select("newReportFlowNextTextSelector").show(),this.select("newReportFlowAddTextSelector").hide();else if(i){this.select("newReportFlowBackSelector").hide(),this.select("newReportFlowNextSelector").hide(),this.select("newReportFlowAddTextSelector").hide(),this.select("newReportFlowNextTextSelector").hide(),this.select("newReportFlowDoneSelector").show();var s=t.search.match(/\baction=([^&]+)/),n=void 0;if(this.eventData.userId)n=this.eventData.userId;else{var o=t.search.match(/\breported_user_id=([^&]+)/);n=o[1]}if(null!=s){var a={userId:n,impressionId:this.eventData.impressionId,disclosureType:this.eventData.disclosureType,skipScribe:!0},r=s[1].toLowerCase();if("error"===r)this.select("newReportFlowCloseSelector").show(),this.select("newReportFlowBackSelector").hide(),this.select("newReportFlowDoneSelector").hide();else{var c=void 0;"mute"===r?c="uiDidMuteUser":"block"===r?c="uiBlockAction":"unfollow"===r&&(c="uiUnfollowAction"),void 0!==c&&this.trigger(c,a),this.completeReport()}}}else this.select("newReportFlowBackSelector").show(),this.select("newReportFlowDoneSelector").hide(),this.select("newReportFlowCloseSelector").hide()},this.after("initialize",function(){this.isComplete=!1,this.on(document,"uiNeedsReportDialog",this.setUpDialog);var t=this;this.select("newReportFlowIframeSelector").on("load",function(){return t.checkNewReportFlowContentAndUpdate()}),this.on("click",{newReportFlowNextSelector:this.newReportFlowFrameNext,newReportFlowBackSelector:this.newReportFlowFrameBack,newReportFlowDoneSelector:this.close,newReportFlowCloseSelector:this.close})})}var n=i("DBjh"),o=i("NNES"),a=i("UHc7"),r=i("TX0g"),c=Object(n.default)(a.a,s);e.a=c},"4Oxf":function(t,e,i){"use strict";function s(){this.after("initialize",function(){var t=this.attr.typeaheadData;t&&(this.attachChild(o.a,this.$node,{inputSelector:"div.rich-editor, textarea.tweet-box",completeAllEntities:t.hashtags&&t.hashtags.enabled,includeTweetContext:!0,tweetContextEnabled:t.tweetContextEnabled,allowAccountsWithoutAtSign:t.fullNameMatchingInCompose,inputIsTweetbox:!0}),this.attachChild(n.a,this.$node,{inputSelector:"div.rich-editor, textarea.tweet-box",blockLinkActions:!0,includeSearchGlass:!1,parseHashflags:!0,typeaheadSrc:"COMPOSE",renderLimit:this.attr.renderLimit,datasourceRenders:[["accounts",["accounts"]],["topics",["hashtags"]]],datasourceOptions:{accountsWithoutAtSignLocalOnly:!0,topicsMustStartWithHashtag:!0},accountsShortcutShow:this.attr.accountsShortcutShow,deciders:t}))})}var n=i("cCv7"),o=i("aRgS");e.a=s},"4Pj3":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({containerSelector:".stream-container",itemsSelector:"#stream-items-id",genericItemSelector:".js-stream-item",timelineEndSelector:".timeline-end",backToTopSelector:".back-to-top",lastItemSelector:".stream-item:last",streamItemContentsSelector:".js-actionable-tweet, .js-actionable-user, .js-activity, .js-story-item",truncationLimit:200,highlightedSelector:".stream-container .stream li.js-stream-item.js-activity",tweetContainerSelector:"li",reloadTimelineSelector:".js-reload-timeline",useDeduping:!1}),this.findFirstItemContent=function(e){var i=e.find(this.attr.streamItemContentsSelector);return i=i.not(".conversation-tweet"),t(i[0])},this.injectItems=function(e,i,s,n){var o=t("<div/>").html(i),a=this.getItemsToInject(o),r=o.find(this.attr.genericItemSelector);if(a.length>0&&this.select("timelineEndSelector").addClass("has-items"),"prepend"===e&&a.length>this.attr.truncationLimit&&(a.length=this.attr.truncationLimit,r.length=this.attr.truncationLimit),this.injectToDOM(e,a),this.reportInjectedItems(r,s,n),"prepend"===e){var c=this.select("itemsSelector");c.find(">:gt("+(this.attr.truncationLimit-1)+")").remove();for(var l=c.children().last(),h=void 0;l.find(".promoted-tweet").length;)h=l.prev(),l.remove(),l=h}return a},this.getItemsToInject=function(t){return t.children()},this.injectToDOM=function(t,e){this.select("itemsSelector")[t](e)},this.removeDuplicates=function(t){var e=[];return t.filter(function(t){return!t.tweetId||-1===e.indexOf(t.tweetId)&&(e.push(t.tweetId),!0)})},this.extractTimestamp=function(t){return t.find("[data-time-ms]").attr("data-time-ms")},this.reportInjectedItems=function(e,i,s){function n(t){return"uiHasInjectedNewTimeline"===i||"uiHasInjectedOldTimelineItems"===i||"uiHasInjectedRangeTimelineItems"===i}var o=this,a=[],c=0;e.each(function(e,s){n(i)&&(a=a.concat(o.extraInteractionData(t(s))),a.push(o.interactionData(o.findFirstItemContent(t(s)))),c=Math.max(c,o.extractTimestamp(t(s)))),o.trigger(s,"uiHasInjectedTimelineItem")}),a=this.removeDuplicates(a);var l={};n(i)&&(l={scribeContext:{component:"stream"},scribeData:{},items:a},s&&s.autoplay&&(l.scribeData.event_initiator=r.a.clientSideApp),s&&s.startTimeMs&&(l.scribeData.duration_ms=window.performance.now()-s.startTimeMs)),this.trigger("uiWantsToRefreshTimestamps"),this.trigger(i,l)},this.inspectItemsFromServer=function(t,e){this.isInitialItem(e)?this.notifyNewItems(e):this.isOldItem(e)?this.injectOldItems(e):this.isNewItem(e)?this.notifyNewItems(e):this.wasRangeRequest(e)&&this.injectRangeItems(e)},this.investigateDataError=function(t,e){var i=e.sourceEventData;i&&(this.wasRangeRequest(i)?this.notifyRangeItemsError(e):this.wasNewItemsRequest(i)||this.wasOldItemsRequest(i)&&this.notifyOldItemsError(e))},this.possiblyShowBackToTop=function(){var e=this.select("lastItemSelector").position();e&&e.top>=t(window).height()&&this.select("backToTopSelector").show()},this.scrollToTop=function(){Object(l.a)(0,"fast")},this.getTimelinePosition=function(t){return t.closest(this.attr.genericItemSelector).index()},this.updateHighlighting=function(e,i){var s=this;this.select("highlightedSelector").each(function(e,n){var o=t(n),a=s.extractTimestamp(o);o.toggleClass("highlighted",a>i),a<=i&&o.removeClass("highlighted")})},this.handleTweetRemoved=function(){this.select("genericItemSelector").length||this.select("timelineEndSelector").removeClass("has-items")},this.handleTweetDelete=function(e,i){this.$node.find('[data-tweet-id="'+i.sourceEventData.id+'"]').toArray().forEach(function(e,s){var n=t(e);this.trigger(n,"uiBeforeTweetRemoved",i),n.closest(this.attr.tweetContainerSelector).remove(),this.trigger("uiTweetRemoved",i)},this)},this.reloadTimeline=function(t,e){t.preventDefault(),this.trigger("uiNearTheBottom")},this.injectDeferredItems=function(){var t=this.$node.find('script[type="text/twitter-deferred-timeline-stream-items"]');t.length&&(this.injectItems("append",t.html(),"uiHasInjectedOldTimelineItems"),t.remove())},this.after("initialize",function(){this.on("dataGotMoreTimelineItems",this.inspectItemsFromServer),this.on("dataGotMoreTimelineItemsError",this.investigateDataError),this.on(document,"uiUpdateActivityHighlighting",this.updateHighlighting),this.on("uiTweetRemoved",this.handleTweetRemoved),this.on("uiReplyToTweet","uiOpenReplyDialog"),this.on(document,"dataDidDeleteTweet",this.handleTweetDelete),this.on("click",{backToTopSelector:this.scrollToTop,reloadTimelineSelector:this.reloadTimeline}),this.possiblyShowBackToTop(),window.requestIdleCallback(this.injectDeferredItems.bind(this))})}var n=i("DBjh"),o=i("JdPb"),a=i("alSu"),r=i("UNvB"),c=i("lRgq"),l=i("lV5l"),h=i("aO66"),d=i("UcHL");e.a=Object(n.default)(s,o.a,a.a,c.a,h.a,d.a)}).call(e,i("4kSj"))},"4Th6":function(t,e,i){"use strict";function s(){this.defaultAttrs({challengeSelector:"#recaptcha_challenge_field",responseSelector:"#recaptcha_response_field",submitSelector:"#recaptcha_submit",captchaName:"Captcha",bodyTextSelector:".modal-text",captchaFormSelector:"#captcha-challenge-form",recaptchaPublicKey:"6LfbTAAAAAAAAE0hk8Vnfd1THHnn9lJuow6fgulO"}),this.refreshCaptchaDialog=function(t,e){this.reloadCaptcha(),this.open()},this.reloadCaptcha=function(){window.Recaptcha&&window.Recaptcha.reload()},this.submitCaptcha=function(){var t=this.select("challengeSelector").val(),e=this.select("responseSelector").val();this.trigger("uiSubmitSpamChallenge",{challenge:t,response:e,challengeName:this.attr.captchaName})},this.getRecaptcha=function(t,e){this.isRecaptchaDefined()&&window.Recaptcha.create(this.attr.recaptchaPublicKey,"captcha-challenge-form",{theme:"clean",callback:function(){window.Recaptcha.focus_response_field(),t&&e.select("bodyTextSelector").text(t),e.open()}})},this.isRecaptchaDefined=function(){return void 0!==window.Recaptcha},this.openCaptchaDialog=function(t,e){this.getRecaptcha(e.message,this)},this.after("initialize",function(){this.on("click",{submitSelector:this.submitCaptcha}),this.on(document,"uiOpenSpamCaptchaChallenge",this.openCaptchaDialog),this.on(document,"uiCloseSpamCaptchaChallenge",this.blurAndCloseImmediately),this.on(document,"uiRefreshSpamCaptchaChallenge",this.refreshCaptchaDialog)})}var n=i("DBjh"),o=i("UHc7");e.a=Object(n.default)(s,o.a)},"4iWu":function(t,e,i){"use strict";var s=i("TX0g"),n=i("DBjh");e.a=Object(n.default)(function(){this.triggerCommand=function(){var t=this.attr.href,e=s.a.queryMap(t);switch(e.action){case"compose":this.trigger("uiOpenTweetDialog",this._trimParams(["action","mode"],e)),this._removeQueryStringFromUrl();break;case"overlay":e.screen_name&&e.tweet_id&&(this.trigger("uiOverlayNavigate",{href:e.screen_name+"/status/"+e.tweet_id}),this._removeQueryStringFromUrl())}},this._removeQueryStringFromUrl=function(){if(window.history&&history.replaceState){var t=window.location.href.replace(/\?[^#]*/,"");history.replaceState({title:document.title},document.title,t)}},this._trimParams=function(t,e){var i={};return Object.getOwnPropertyNames(e).forEach(function(s){t.indexOf(s)>=0&&(i[s]=e[s])}),i},this.after("initialize",function(){"string"==typeof this.attr.href&&this.on("uiSwiftLoaded",this.triggerCommand)})})},"4oun":function(t,e,i){"use strict";e.a=function(t,e,i){return function(){if(e.apply(i||this,arguments))return t.apply(i||this,arguments)}}},"5E2Z":function(t,e,i){"use strict";function s(){this.attributes({avatarSelector:".DMUpdateAvatar-avatar",popoverSelector:".DMPopover",popoverContentSelector:".DMPopover-content",viewAvatarSelector:".DMUpdateAvatar-view",removeAvatarSelector:".DMUpdateAvatar-remove",changeAvatarSelector:".DMUpdateAvatar-change",spinnerClass:"DMSpinner",fileDataSelector:"input.file-data",fileDataString:"media_data[]",emptyFileDataString:"media_data_empty",fileInputString:"media[]",emptyFileInputString:"media_empty",fileNameSelector:"input.file-name",fileNameString:"media_file_name",fileSelector:"input.file-input",gifSupport:!1,videoSupport:!1,shouldInterceptTab:!1}),this.resetAvatar=function(t,e){this.avatarHTML=void 0,this.fullSizeUrl=void 0,this.conversationId=e.conversation_id,this.customAvatar=!1,this.isTrusted=!1,this.editAllowed=!1,this.isLoading=!1},this.updateAvatar=function(t,e){if(!e||!e.html||this.avatarHTML!==e.html){this.avatarHTML=e.html,this.fullSizeUrl=e.full_size_url,this.conversationId=e.conversation_id,this.customAvatar=e.is_custom,this.isTrusted=e.is_trusted;var i=e.is_oto||!this.customAvatar&&!this.isTrusted;this.editAllowed=!i,this.isLoading=!1}},this.showAvatar=function(){this.fullSizeUrl&&this.trigger("uiDMDialogMediaPreview",{imgUrl:this.fullSizeUrl})},this.removeAvatar=function(){this.trigger("uiDMRemoveConversationAvatar",{conversation_id:this.conversationId})},this.changeAvatar=function(){this.select("fileSelector").click()},this.handleFileSelected=function(t,e){t.preventDefault(),this.reset();var i=e.fileId;this.beginSru(i),this.trigger("uiDMUpdateConversationAvatar",{conversation_id:this.conversationId,fileId:i})},this.updateFailed=function(){this.isLoading=!1},this.addFileError=function(t){var e=Object(o.a)(t);e&&this.trigger("uiShowError",{message:e}),this.updateFailed()},this.toggleSpinner=function(t){this.$avatar.toggleClass(this.attr.spinnerClass,t)},this.disablePopover=function(){this.select("popoverSelector").trigger("uiDisableDMPopover")},this.enablePopover=function(){this.select("popoverSelector").trigger("uiEnableDMPopover")},this.render=function(){this.isLoading?(this.$avatar.empty(),this.toggleSpinner(!0),this.disablePopover()):(this.avatarHTML?this.$avatar.html(this.avatarHTML):this.$avatar.empty(),this.toggleSpinner(!1),this.editAllowed?this.enablePopover():this.disablePopover(),this.$node.toggleClass("has-defaultAvatar",!this.customAvatar),this.$node.toggleClass("has-restrictedActions",!this.isTrusted))},this.avatarLoading=function(){this.isLoading=!0},this.after("updateAvatar",this.render),this.after("updateFailed",this.render),this.after("resetAvatar",this.render),this.after("avatarLoading",this.render),this.after("initialize",function(){this.$avatar=this.select("avatarSelector"),this.on("uiDMResetConversationAvatar",this.resetAvatar),this.on("uiDMSetConversationAvatar",this.updateAvatar),this.on("uiFileSelected",this.handleFileSelected),this.on(document,"dataDMUpdateConversationAvatarFailed dataDMRemoveConversationAvatarFailed",this.updateFailed),this.on(document,"uiDMRemoveConversationAvatar uiDMUpdateConversationAvatar",this.avatarLoading),this.on("click",{viewAvatarSelector:this.showAvatar,changeAvatarSelector:this.changeAvatar,removeAvatarSelector:this.removeAvatar,popoverContentSelector:"uiCloseDropdowns"}),this.on("uiDMRequestViewConversationAvatar",this.showAvatar),this.on("uiDMRequestUploadConversationAvatar",this.changeAvatar),this.on("uiDMRequestRemoveConversationAvatar",this.removeAvatar)})}var n=i("DBjh"),o=i("YlCE"),a=i("40xB");e.a=Object(n.default)(s,a.a)},"5HSP":function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<span class="username u-dir u-textTruncate" dir="ltr" '),s.sub("wrapper_attr",t,e,i),s.b(">@<b>"),s.b(s.v(s.f("screen_name",t,e,0))),s.b("</b></span>"),s.fl()},partials:{},subs:{wrapper_attr:function(t,e,i,s){}}})}).call(e,i("jTWp"))},"5WKh":function(t,e,i){"use strict";function s(){this.dismiss=function(t,e){this.post({url:["/i/feedback/dismiss/",e.feedbackId,".json"].join(""),success:"dataB2CFeedbackDismissed",error:"dataB2CFeedbackDismissedFailed"}),this.trigger("uiDMHideError")},this.after("initialize",function(){this.on(document,"uiB2CFeedbackDismiss",this.dismiss)})}var n=i("DBjh"),o=i("VtWx"),a=Object(n.default)(s,o.a);e.a=a},"5dPv":function(t,e,i){"use strict";function s(){this.publishTyping=function(t,e){e&&e.conversation_id&&(this.trigger("dataDMTypingPublished"),this.post({url:"/i/direct_messages/publish_typing",data:{conversation_id:e.conversation_id}}))},this.after("initialize",function(){this.on("uiDMUserTyping",this.publishTyping)})}var n=i("DBjh"),o=i("VtWx");e.a=Object(n.default)(s,o.a)},"5k28":function(t,e,i){"use strict";function s(){this.defaultAttrs({authWebViewDialogIframeSelector:".auth-webview-card-iframe",authWebViewDialogTitleSelector:".modal-title",authWebViewActionSelector:".AuthWebViewCard-authWebViewAction",authWebViewCardCtaClass:"AuthWebViewCard-button",authWebViewCardImageClass:"AuthWebViewCard-productImageWrapper",authWebViewTweetSelector:".tweet",commerceCardSelector:".AuthWebViewCard",top:47}),this.openAuthWebViewDialog=function(t,e){if(this.attr.loggedIn){var i=e.webviewUrl;e.tweetId&&(i=this.appendQueryParam(i,"referringTweetId",e.tweetId)),e.impressionId&&(i=this.appendQueryParam(i,"impressionId",e.impressionId)),this.select("authWebViewDialogIframeSelector").attr("src",i),this.select("authWebViewDialogTitleSelector").html(e.webviewTitle),this.open()}else this.trigger(document,"uiOpenSignupDialog")},this.appendQueryParam=function(t,e,i){var s=document.createElement("a");s.href=t;var n=encodeURIComponent(e)+"="+encodeURIComponent(i);""===s.search?s.search=n:s.search+="&"+n;var o=s.href;return s=null,o},this.closeDialog=function(t,e){this.select("authWebViewDialogIframeSelector").attr("src","about:blank"),this.off(window,"message",this.adjustIframeHeight),this.off(window,"message",this.proxyIframeEvents)},this.adjustIframeHeight=function(t){this.fitIframeHeight(t,{iframeSelector:this.attr.authWebViewDialogIframeSelector,isQualified:function(t){return t.name&&"auth_webview"===t.name&&t.height}})},this.setActiveViewSelector=function(t,e){this.activeViewSelector=e.selector||""},this.setupMessageListener=function(){this.on(window,"message",this.adjustIframeHeight),this.on(window,"message",this.proxyIframeEvents)},this.after("initialize",function(){this.activeViewSelector="",this.on("uiDialogOpened",this.setupMessageListener),this.on("uiDialogClosed",this.closeDialog),this.on(window,"uiOpenAuthWebViewDialog",this.openAuthWebViewDialog),this.on(document,"uiCommerceSetActiveViewSelector",this.setActiveViewSelector)})}var n=i("DBjh"),o=i("UHc7"),a=i("zvXx"),r=i("ipYT"),c=i("TBNR"),l=i("Vuuo"),h=Object(n.default)(s,o.a,a.a,r.a,c.a,l.a);e.a=h},"5kfR":function(t,e,i){"use strict";function s(){this.rewriteEventName=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var s="string"==typeof e[0]||e[0].defaultBehavior?0:1,o=e[s],a=o.type||o;e[s]=Object(n.default)(a,this.attr.eventParams,!0),o.type&&(o.type=e[s],e[s]=o),t.apply(this,e)},this.around("on",this.rewriteEventName),this.around("off",this.rewriteEventName),this.around("trigger",this.rewriteEventName)}var n=i("8JB6");e.a=s},"5lAn":function(t,e,i){"use strict";function s(){this.defaultAttrs({topbarSpacerSelector:".topbar-spacer"}),this.adjustHeight=function(t,e){this.select("topbarSpacerSelector").css("padding-top","-="+e.height)},this.after("initialize",function(){this.on("uiBannerDismissed",this.adjustHeight)})}var n=i("DBjh");e.a=Object(n.default)(s)},"6+U0":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({top:90,contentSelector:".list-membership-content",createListSelector:".create-a-list",membershipSelector:".list-membership-container li"}),this.openListMembershipDialog=function(t,e){this.userId=e.userId,this.userId&&this.trigger("uiNeedsListMembershipContent",{userId:this.userId}),this.$content.empty(),this.$node.removeClass("has-content"),this.open()},this.addListMembershipContent=function(t,e){this.$node.addClass("has-content"),this.$content.html(e.html)},this.handleNoListMembershipContent=function(t,e){this.close(),this.trigger("uiShowError",e)},this.toggleListMembership=function(e,i){var s=t(e.target),n={userId:s.closest("[data-user-id]").attr("data-user-id"),listId:s.closest("[data-list-id]").attr("data-list-id")},o=t("#list_"+n.listId);o.is(":visible")&&(o.closest(this.attr.membershipSelector).addClass("pending"),o.data("is-checked")?this.trigger("uiRemoveUserFromList",n):this.trigger("uiAddUserToList",n))},this.updateMembershipState=function(e){var i=this;return function(s,n){var o=t("#list_"+n.sourceEventData.listId);o.closest(i.attr.membershipSelector).removeClass("pending"),o.prop("checked",e),o.data("is-checked",e),o.attr("data-is-checked",e)}},this.openListCreateDialog=function(){this.close(),this.trigger("uiOpenCreateListDialog",{userId:this.userId})},this.after("initialize",function(){this.$content=this.select("contentSelector"),this.on("click",{createListSelector:this.openListCreateDialog,membershipSelector:this.toggleListMembership}),this.on(document,"uiListAction uiOpenListMembershipDialog",this.openListMembershipDialog),this.on(document,"dataGotListMembershipContent",this.addListMembershipContent),this.on(document,"dataFailedToGetListMembershipContent",this.handleNoListMembershipContent),this.on(document,"dataDidAddUserToList dataFailedToRemoveUserFromList",this.updateMembershipState(!0)),this.on(document,"dataDidRemoveUserFromList dataFailedToAddUserToList",this.updateMembershipState(!1))})}var n=i("DBjh"),o=i("UHc7"),a=Object(n.default)(s,o.a);e.a=a}).call(e,i("4kSj"))},"6Ej1":function(t,e,i){"use strict";function s(){this.scribeOpen=function(t,e){this.scribeEmbedAction("open",e)},this.scribeOembedError=function(t,e){this.scribeEmbedAction("request_failed",e)},this.scribeEmbedCopy=function(t,e){this.scribeEmbedAction("copy",e)},this.scribeEmbedError=function(t,e){this.scribeEmbedAction("embed_request_failed")},this.scribeEmbedAction=function(t,e){this.scribeInteraction(t,r({},e,{scribeContext:{component:"embed_tweet_dialog"}}))},this.after("initialize",function(){this.on("uiEmbedRequestFailed",this.scribeEmbedError),this.on("uiNeedsEmbedTweetDialog uiNeedsEmbedVideoDialog",this.scribeOpen),this.on("uiOembedError",this.scribeOembedError),this.on("uiUserCopiedEmbedCode",this.scribeEmbedCopy)})}var n=i("DBjh"),o=i("3oDc"),a=i("gcfh"),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=Object(n.default)(s,o.a,a.a)},"6L6I":function(t,e,i){"use strict";function s(){this.defaultAttrs({createOrUpdateEventName:"uiCreateCustomTimeline",orderSelector:"[name=create-timeline-order]:checked"}),this.around("params",function(t){var e=t();return e.tweetId=this.tweetId,e.impressionId=this.impressionId,e}),this.openDialog=function(t,e){this.tweetId=e.tweetId,this.impressionId=e.impressionId;var i={is_create_dialog:!0,id_prefix:"create",curation_reverse_chron:!0},s=l.a.render(i);this.$node.html(s),this.$dialog=this.$dialogContainer.find(this.attr.modalSelector),this.open()},this.after("open",function(){o.a.attachTo(".custom-timeline-name-field",{maxLength:25,superwarnLength:20,warnLength:15,textSelector:"#custom-timeline-name",counterSelector:".custom-timeline-name-count"}),o.a.attachTo(".custom-timeline-description-field",{maxLength:160,superwarnLength:150,warnLength:140,textSelector:"#custom-timeline-description",counterSelector:".custom-timeline-description-count"})}),this.after("initialize",function(){this.on(document,"uiOpenCreateCustomTimelineDialog",this.openDialog)})}var n=i("DBjh"),o=i("7Xpg"),a=i("UHc7"),r=i("SJmD"),c=i("jmwl"),l=i.n(c);e.a=Object(n.default)(a.a,r.a,s)},"6MBd":function(t,e,i){"use strict";e.a={path:"/flash/1/"}},"6N1L":function(t,e,i){"use strict";function s(){this.allowTeardown=function(t,e){this.attr.noTeardown=!1},this.after("initialize",function(){this.on("uiAllowTeardown",this.allowTeardown)})}e.a=s},"6PRL":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({dialogSelector:"#embed-tweet-dialog",dialogContentSelector:"#embed-tweet-dialog .modal-content",previewContainerSelector:".embed-preview",embedCodeDestinationSelector:".embed-destination",triggerSelector:".js-embed-tweet",overlaySelector:".embed-overlay",spinnerOverlaySelector:".embed-overlay-spinner",errorOverlaySelector:".embed-overlay-error",tryAgainSelector:".embed-overlay-error .retry-embed",includeParentTweetContainerSelector:".embed-include-parent-tweet",includeParentTweetSelector:".include-parent-tweet",includeCardContainerSelector:".embed-include-card",includeCardSelector:".include-card",embedTweetTitleSelector:".embed-tweet-title",embedVideoTitleSelector:".embed-video-title",embedTweetInstructionsSelector:".embed-tweet-instructions",embedVideoInstructionsSelector:".embed-video-instructions",embedWidth:"469px",top:"90px"}),this.didReceiveEmbedCode=function(t,e){this.select("overlaySelector").hide(),this.$embedCodeDestination.val(e.data.html),this.trigger(this.$dialog,"uiDialogContentChanged"),this.selectEmbedCode()},this.retryEmbedCode=function(t,e){this.select("overlaySelector").hide(),this.select("spinnerOverlaySelector").show(),this.trigger("uiOembedError",this.tweetData)},this.failedToReceiveEmbedCode=function(t,e){this.select("overlaySelector").hide(),this.select("embedCodeDestinationSelector").hide(),this.select("errorOverlaySelector").show(),this.clearOembed(),this.trigger(this.$dialog,"uiDialogContentChanged")},this.updateEmbedCode=function(){this.select("embedCodeDestinationSelector").show(),this.select("overlaySelector").hide(),this.trigger("uiNeedsOembed",this.getOptions()),this.trigger(this.$dialog,"uiDialogContentChanged")},this.requestTweetEmbed=function(){if(this.widgetsAreLoaded()){var t=this.getOptions();"tweet"===this.widgetType?this.widgets.widgets.createTweet(this.tweetId(),this.$previewContainer[0],this.receivedTweetEmbed.bind(this),{width:this.attr.embedWidth,conversation:t.data.hide_thread?"none":"all",cards:t.data.hide_media?"hidden":"shown",lang:t.data.lang}):"video"===this.widgetType&&this.widgets.widgets.createVideo(this.tweetId(),this.$previewContainer[0],this.receivedTweetEmbed.bind(this),{width:this.attr.embedWidth,status:"shown"})}},this.clearTweetEmbed=function(){this.$previewContainer.empty()},this.clearOembed=function(){this.$embedCodeDestination.val("")},this.tearDown=function(){this.clearTweetEmbed(),this.clearOembed()},this.embedCodeCopied=function(){this.trigger("uiUserCopiedEmbedCode")},this.receivedTweetEmbed=function(t){t||this.trigger("uiEmbedRequestFailed")},this.includeParentTweet=function(){return this.$includeParentTweet.prop("checked")},this.showCard=function(){return this.$includeCard.prop("checked")},this.getOptions=function(){var t={lang:this.lang};return"tweet"===this.widgetType?(t.hide_thread=!this.includeParentTweet(),t.hide_media=!this.showCard()):"video"===this.widgetType&&(t.widget_type="video"),{data:t,retry:!0,tweetId:this.tweetId(),screenName:this.screenName()}},this.selectEmbedCode=function(){this.$embedCode.select()},this.setUpDialog=function(t,e){this.position(),this.eventData=t,this.tweetData=e,this.toggleIncludeParent(),this.toggleShowCard(),this.toggleTitle(),this.toggleInstructions(),this.resetIncludeParent(),this.resetShowCard(),this.updateEmbedCode(),this.requestTweetEmbed(),this.open(),this.fixPosition(),this.widgetsAreLoaded()||this.getWidgets()},this.setUpDialogForTweet=function(){this.widgetType="tweet",this.setUpDialog.apply(this,arguments)},this.setUpDialogForVideo=function(){this.widgetType="video",this.setUpDialog.apply(this,arguments)},this.fixPosition=function(){this.$dialog.css({position:"relative",top:this.attr.top})},this.resetIncludeParent=function(){this.$includeParentTweet.prop("checked",!0)},this.resetShowCard=function(){this.$includeCard.prop("checked",!0)},this.toggleIncludeParent=function(){this.$includeParentCheckboxContainer.toggle("tweet"===this.widgetType&&!!this.tweetHasParent())},this.toggleShowCard=function(){this.$includeCardCheckboxContainer.toggle("tweet"===this.widgetType&&!!this.hasCard())},this.toggleTitle=function(){this.$embedTweetTitle.toggle("tweet"===this.widgetType),this.$embedVideoTitle.toggle("video"===this.widgetType)},this.toggleInstructions=function(){this.$embedTweetInstructions.toggle("tweet"===this.widgetType),this.$embedVideoInstructions.toggle("video"===this.widgetType)},this.tweetId=function(){return this.tweetData.tweetId},this.tweetHasParent=function(){return this.tweetData.hasParentTweet},this.hasCard=function(){return this.getCardDataFromContainer(t(this.eventData.target)).hasCard},this.screenName=function(){return this.tweetData.screenName},this.widgetsReady=function(){this.$dialogContainer&&this.isOpen()&&this.requestTweetEmbed()},this.onOptionChange=function(){this.trigger("uiNeedsOembed",this.getOptions()),this.requestTweetEmbed()},this.restoreFocusToTweet=function(e){t(e.target).is(this.$dialog)&&this.activeEl&&this.trigger(t(this.activeEl).closest(".tweet"),"uiShouldAddFocusStyle")},this.after("initialize",function(){this.$previewContainer=this.select("previewContainerSelector"),this.$includeParentTweet=this.select("includeParentTweetSelector"),this.$embedCodeDestination=this.select("embedCodeDestinationSelector"),this.$includeParentCheckboxContainer=this.select("includeParentTweetContainerSelector"),this.$includeCard=this.select("includeCardSelector"),this.$includeCardCheckboxContainer=this.select("includeCardContainerSelector"),this.$embedCode=this.select("embedCodeDestinationSelector"),this.$embedTweetTitle=this.select("embedTweetTitleSelector"),this.$embedVideoTitle=this.select("embedVideoTitleSelector"),this.$embedTweetInstructions=this.select("embedTweetInstructionsSelector"),this.$embedVideoInstructions=this.select("embedVideoInstructionsSelector"),this.on(document,"uiNeedsEmbedTweetDialog",this.setUpDialogForTweet),this.on(document,"uiNeedsEmbedVideoDialog",this.setUpDialogForVideo),this.on("uiDialogCloseRequested",this.tearDown),this.on(document,"uiBeforePageChanged",this.tearDown),this.on(document,"uiDialogRestorePreviousFocus",this.restoreFocusToTweet),this.on(document,"dataOembedSuccess",this.didReceiveEmbedCode),this.on(document,"dataOembedError",this.failedToReceiveEmbedCode),this.on(document,"dataOembedRetry",this.retryEmbedCode),this.on(this.$embedCodeDestination,"copy cut",this.embedCodeCopied),this.on(this.$embedCode,"click",this.selectEmbedCode),this.on("click",{tryAgainSelector:this.updateEmbedCode}),this.on("change",{includeParentTweetSelector:this.onOptionChange,includeCardSelector:this.onOptionChange}),this.widgetType="tweet",this.lang=document.documentElement.getAttribute("lang")})}var n=i("DBjh"),o=i("UHc7"),a=i("Vuuo"),r=i("1jcW"),c=Object(n.default)(s,o.a,a.a,r.a);e.a=c}).call(e,i("4kSj"))},"6ob2":function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<strong title="'),s.b(s.v(s.f("localized_number",t,e,0))),s.b('" class="js-mini-profile-stat">'),s.b(s.v(s.f("localized_compact_number",t,e,0))),s.b("</strong>"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},"6ycc":function(t,e,i){"use strict";function s(){this.defaultAttrs({currentUserPath:""}),this.navigateToProfilePath=function(){this.trigger("uiNavigate",{href:this.attr.currentUserPath})},this.after("initialize",function(){this.on("uiNavigateToProfile",this.navigateToProfilePath)})}var n=i("DBjh"),o=Object(n.default)(s);e.a=o},"78RH":function(t,e,i){"use strict";function s(){this.markDMSeen=function(t,e){e=e||{};var i=e.trusted_last_seen_event_id,s=e.untrusted_last_seen_event_id;if(!(!i&&!s)){var n={last_seen_event_id:e.last_seen_event_id,trusted_last_seen_event_id:e.trusted_last_seen_event_id,untrusted_last_seen_event_id:e.untrusted_last_seen_event_id};this.post({url:"https://api.twitter.com/1.1/dm/update_last_seen_event_id.json",data:n,success:"dataDMSeenSuccess",error:function(){return Promise.resolve()},useOAuthSessionAuth:!0})}},this.after("initialize",function(){this.on("uiDMInboxTabOpened",this.markDMSeen)})}var n=i("DBjh"),o=i("VtWx");e.a=Object(n.default)(s,o.a)},"7Ks6":function(t,e,i){"use strict";function s(){this.defaultAttrs({noShowError:!0}),this.toggleNotifications=function(t,e){e=e||{};var i=c(r(t.target,"dataDMConversationResult"),r(t.target,e.enable_notifications?"dataNotificationsEnabled":"dataNotificationsDisabled")),s=r(t.target,e.enable_notifications?"dataNotificationsEnableFailed":"dataNotificationsDisableFailed");this.post({url:"/i/direct_messages/notifications",data:{id:e.conversation_id,enable_notifications:e.enable_notifications,mute_duration:e.mute_duration},eventData:e,success:i,error:s})},this.toggleMentions=function(t,e){e=e||{};var i=c(r(t.target,"dataDMConversationResult"),r(t.target,e.disable_mentions?"dataMentionsDisabled":"dataMentionsEnabled")),s=r(t.target,e.disable_mentions?"dataMentionsDisableFailed":"dataMentionsEnableFailed"),n="https://api.twitter.com/1.1/dm/conversation/"+e.conversation_id+"/update_mention_notifications_setting.json";this.post({url:n,data:{mention_notifications_disabled:e.disable_mentions},eventData:e,success:i,error:s,useOAuthSessionAuth:!0})},this.after("initialize",function(){this.on("uiToggleNotifications",this.toggleNotifications),this.on("uiToggleMentions",this.toggleMentions)})}var n=i("DBjh"),o=i("VtWx"),a=i("ldNY"),r=a.a.triggerFn,c=a.a.chain,l=Object(n.default)(s,o.a);e.a=l},"7SIb":function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<p class="PromptbirdPrompt-explanation">'),s.b(s.t(s.f("explanation",t,e,0))),s.b("</p>\n"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},"7TGm":function(t,e,i){"use strict";function s(){this.scribeActivityPopupOpen=function(t,e){var i=e.sourceEventData;this.scribe("open",e,{items:[{id:i.contentId,item_type:o.a.tweet}],item_count:1})},this.after("initialize",function(){this.on(document,"dataActivityPopupSuccess",this.scribeActivityPopupOpen)})}var n=i("DBjh"),o=i("rbkv"),a=i("3oDc");e.a=Object(n.default)(s,a.a)},"7VCw":function(t,e,i){"use strict";(function(t){function s(){this.attributes({textSelector:"textarea.TokenizedMultiselect-input",selectedClass:"is-selected",suggestionClass:"DMTypeaheadSuggestions-item",suggestionSelector:".DMTypeaheadSuggestions-item",highlightedClass:"is-highlighted",highlightedSelector:".is-highlighted",suggestionsContainerSelector:".DMTypeaheadSuggestions",tokenIdDelimiter:"::",topAccountsLength:5,accountsDatasource:"dmAccounts",conversationsDatasource:"dmConversations",typeaheadSrc:"compose_message",preselectedItems:[],maxItems:50}),this.buildAccountTemplateData=function(t){var e=t.id_str,i=this.generateTokenId(this.attr.accountsDatasource,e),s=this.isItemSelected(i),n=this.isPreSelected(e),o=n?"":this.attr.suggestionClass,r=this.hasBusinessContext(t),c={emojified_text_as_html:a.a.emojifyText(t.name)};return{data_token_id:i,data_token_text:t.name,suggestion_class:o,title:{text:t.name,rich_text:c,screen_name:t.screen_name,verified:t.verified,protected:!(!t.is_protected&&!t.protected)},avatar:{images:{src:t.profile_image_url_https,alt:t.name}},selected:s,preselected:n,is_group:!1,has_business_context:r}},this.buildGroupTemplateData=function(t){return{data_token_id:this.generateTokenId(this.attr.conversationsDatasource,t.id),data_token_text:t.emojified_title,suggestion_class:this.attr.suggestionClass,html:t.html,is_group:!0}},this.buildTemplateDataFromDMConversation=function(t){return t.is_group?this.buildGroupTemplateData(t):1===t.participants.length?this.buildAccountTemplateData(t.participants[0]):void 0},this.processEmptyQuerySuggestions=function(t){var e=t.suggestions.dmConversations||[],i=e.map(this.buildTemplateDataFromDMConversation.bind(this)),s=h.a.render({suggestions:i,has_suggestions:Boolean(i.length)});this.trigger("uiTokenizedMultiselectSuggestions",{html:s,preserve_previous_hightlight:!1})},this.processNonEmptyQuerySuggestions=function(t){var e=(t.suggestions.dmAccounts||[]).map(this.buildAccountTemplateData.bind(this)),i=(t.suggestions.dmConversations||[]).map(this.buildGroupTemplateData.bind(this)),s=i.length?e.slice(0,this.attr.topAccountsLength):e,n=u.a.render({accounts:s,groups:i,has_accounts:s.length,has_groups:i.length});this.trigger("uiTokenizedMultiselectSuggestions",{html:n,preserve_previous_hightlight:!0})},this.processSuggestions=function(t,e){var i=e.queryData&&e.queryData.query;e.suggestions&&this.currentQuery===i&&(""===i?this.processEmptyQuerySuggestions(e):this.processNonEmptyQuerySuggestions(e))},this.requestEmptyQuerySuggestions=function(){var t=this.attr.preselectedItems||[],e={id:this.typeaheadId,queryData:{query:"",dmConversationsOptions:{excludeGroups:this.selectedItems.length||t.length,sortBySortId:!0,excludeOneToOnes:!1}},datasources:[this.attr.conversationsDatasource]};this.trigger("uiNeedsTypeaheadSuggestions",e)},this.requestSuggestions=function(t,e){if(this.currentQuery=e.text,""===this.currentQuery)return void this.requestEmptyQuerySuggestions();var i=this.attr.preselectedItems||[],s=this.selectedItems.length||i.length,n=s?[this.attr.accountsDatasource]:[this.attr.accountsDatasource,this.attr.conversationsDatasource],o={id:this.typeaheadId,queryData:{query:e.text,typeaheadSrc:this.attr.typeaheadSrc,dmConversationsOptions:{excludeGroups:s,sortBySortId:!1,excludeOneToOnes:!s}},datasources:n};this.trigger("uiNeedsTypeaheadSuggestions",o)},this.splitTokenId=function(t){var e=t.split(this.attr.tokenIdDelimiter);return{datasource:e[0],id:e[1]}},this.handleItemSelected=function(t,e){this.selectedItems=e.selected_items||[];var i=this.selectedItems.map(function(t){var e=this.splitTokenId(t.id);return{datasource:e.datasource,id:e.id,text:t.text}},this),s=i.filter(function(t){return t.datasource===this.attr.accountsDatasource},this).map(function(t){return{id:t.id,name:t.text}}),n=i.filter(function(t){return t.datasource===this.attr.conversationsDatasource},this).map(function(t){return{id:t.id,name:t.text}});this.trigger("uiDMTypeaheadSelectedItemsChanged",{accounts:s,groups:n})},this.generateTokenId=function(t,e){return t+this.attr.tokenIdDelimiter+e},this.isItemSelected=function(e){var i=this.selectedItems.map(function(t){return t.id});return t.inArray(e+"",i||[])>=0},this.isPreSelected=function(e){return t.inArray(e+"",this.attr.preselectedItems||[])>=0},this.hasBusinessContext=function(t){return"enabled"===t.customer_service_state},this.resetAndInitialize=function(t,e){this.select("suggestionsContainerSelector").empty(),this.trigger("uiResetTokenizedMultiselect"),this.attr.preselectedItems=e&&e.preselectedItems&&e.preselectedItems.length?e.preselectedItems:[],e&&e.maxItems&&(this.attr.maxItems=e.maxItems,this.trigger("uiTokenizedMultiSelectMaxItems",{maxItems:e.maxItems})),this.selectedItems=[],this.requestEmptyQuerySuggestions(),this.currentQuery=""},this.after("handleItemSelected",this.requestEmptyQuerySuggestions),this.handleTokenChangeAccessibility=function(t,e){if(this.splitTokenId(e.id).datasource===this.attr.accountsDatasource){var i="uiTokenizedMultiselectTokenAdded"===t.type?Object(n.default)("Added {{user}}",{user:e.text}):Object(n.default)("Removed {{user}}",{user:e.text});this.trigger("uiShouldSpeakMessage",{message:i})}},this.after("initialize",function(){this.typeaheadId="dm_typeahead"+Math.floor(1e6*Math.random()),this.attachChild(r.a,this.$node,this.attr),this.on("uiTokenizedMultiselectTokenAdded uiTokenizedMultiselectTokenRemoved",this.handleTokenChangeAccessibility),this.on("uiTokenizedMultiselectTextChanged",this.requestSuggestions),this.on(document,"dataTypeaheadSuggestionsResults",this.processSuggestions),this.on("uiTokenizedMultiselectItemSelectionChanged",this.handleItemSelected),this.on("uiInitializeDMTypeahead",this.resetAndInitialize),this.selectedItems=[],this.requestEmptyQuerySuggestions()})}var n=i("0d4m"),o=i("DBjh"),a=i("tLYs"),r=i("hZQJ"),c=i("AJAn"),l=i("xH9u"),h=i.n(l),d=i("HTfI"),u=i.n(d),p=Object(o.default)(s,c.a);e.a=p}).call(e,i("4kSj"))},"7Xpg":function(t,e,i){"use strict";function s(){this.after("initialize",function(){this.initTextNode()})}var n=i("DBjh"),o=i("pUl/"),a=i("FBSA"),r=Object(n.default)(s,o.a,a.a);e.a=r},"7j8l":function(t,e,i){var s;!function(n,o){void 0!==(s=function(){return n.TwitterVideoPlayer=o()}.call(e,i,e,t))&&(t.exports=s)}(this,function(){function t(t){if(t&&t.data&&t.data.params&&t.data.params[0]){var e=t.data.params[0],i=t.data.id;if(e&&e.context&&"TwitterVideoPlayer"===e.context){var s=e.playerId;delete e.playerId,delete e.context;var n=r[s];n&&n.processMessage(t.data.method,e,i)}}}function e(t,e,i){var s=Object.keys(i).filter(function(t){return null!=i[t]}).map(function(t){var e=i[t];return encodeURIComponent(t)+"="+encodeURIComponent(e)}).join("&");return s&&(s="?"+s),t+e+s}function i(i,n,o,c,l){i.ownerDocument.defaultView.addEventListener("message",t),this.playerId=a++;var h={embed_source:"clientlib",player_id:this.playerId,rpc_init:1};if(this.scribeParams={},this.scribeParams.suppressScribing=c&&c.suppressScribing,!this.scribeParams.suppressScribing){if(!c.scribeContext)throw"video_player: Missing scribe context";if(!c.scribeContext.client)throw"video_player: Scribe context missing client property";this.scribeParams.client=c.scribeContext.client,this.scribeParams.page=c.scribeContext.page,this.scribeParams.section=c.scribeContext.section,this.scribeParams.component=c.scribeContext.component}this.scribeParams.debugScribe=c&&c.scribeContext&&c.scribeContext.debugScribing,this.scribeParams.scribeUrl=c&&c.scribeContext&&c.scribeContext.scribeUrl,this.promotedLogParams=c.promotedContext,this.adRequestCallback=c.adRequestCallback,c.languageCode&&(h.language_code=c.languageCode);var d=e(s,n,h);return this.videoIframe=document.createElement("iframe"),this.videoIframe.setAttribute("src",d),this.videoIframe.setAttribute("allowfullscreen",""),this.videoIframe.setAttribute("id",o),this.videoIframe.setAttribute("style","width: 100%; height: 100%; position: absolute; top: 0; left: 0;"),this.domElement=i,this.domElement.appendChild(this.videoIframe),r[this.playerId]=this,this.eventCallbacks={},this.emitEvent=function(t,e){var i=this.eventCallbacks[t];void 0!==i&&i.forEach(function(t){t.apply(this.playerInterface,[e])}.bind(this))},this.jsonRpc=function(t){var e=this.videoIframe.contentWindow;t.jsonrpc="2.0",e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")},this.jsonRpcCall=function(t,e){this.jsonRpc({method:t,params:e})},this.jsonRpcResult=function(t,e){this.jsonRpc({result:t,id:e})},this.processMessage=function(t,e,i){switch(t){case"requestPlayerConfig":this.jsonRpcResult({scribeParams:this.scribeParams,promotedLogParams:this.promotedLogParams,squareCorners:c.squareCorners,borderRadius:c.borderRadius,hideControls:c.hideControls,embedded:c.addTwitterBranding,ignoreFineGrainGeoblocking:c.ignoreFineGrainGeoblocking},i);break;case"videoPlayerAdStart":this.emitEvent("adStart",e);break;case"videoPlayerAdEnd":this.emitEvent("adEnd",e);break;case"videoPlayerPlay":this.emitEvent("play",e);break;case"videoPlayerPause":this.emitEvent("pause",e);break;case"videoPlayerMute":this.emitEvent("mute",e);break;case"videoPlayerUnmute":this.emitEvent("unmute",e);break;case"videoPlayerPlaybackComplete":this.emitEvent("playbackComplete",e);break;case"videoPlayerReady":this.emitEvent("ready",e);break;case"videoView":this.emitEvent("view",e);break;case"debugLoggingEvent":this.emitEvent("logged",e);break;case"requestDynamicAd":"function"==typeof this.adRequestCallback?this.jsonRpcResult(this.adRequestCallback(),i):this.jsonRpcResult({},i);break;case"videoPlayerError":e&&"NO_COOKIES_ERROR"===e.error_category?this.emitEvent("noCookiesError",e):e&&"GEOBLOCK_ERROR"===e.error_category&&this.emitEvent("geoblockError",e)}},this.playerInterface={on:function(t,e){return void 0===this.eventCallbacks[t]&&(this.eventCallbacks[t]=[]),this.eventCallbacks[t].push(e),this.playerInterface}.bind(this),off:function(t,e){if(void 0===e)delete this.eventCallbacks[t];else{var i=this.eventCallbacks[t];if(void 0!==i){var s=i.indexOf(e);s>-1&&i.splice(s,1)}}return this.playerInterface}.bind(this),play:function(){return this.jsonRpcCall("play"),this.playerInterface}.bind(this),pause:function(){return this.jsonRpcCall("pause"),this.playerInterface}.bind(this),mute:function(){return this.jsonRpcCall("mute"),this.playerInterface}.bind(this),unmute:function(){return this.jsonRpcCall("unmute"),this.playerInterface}.bind(this),playPreview:function(){return this.jsonRpcCall("autoPlayPreview"),this.playerInterface}.bind(this),pausePreview:function(){return this.jsonRpcCall("autoPlayPreviewStop"),this.playerInterface}.bind(this),updatePosition:function(t){return this.jsonRpcCall("updatePosition",[t]),this.playerInterface}.bind(this),updateLayoutBreakpoint:function(t){return this.jsonRpcCall("updateLayoutBreakpoint",[t]),this.playerInterface}.bind(this),enterFullScreen:function(){return this.jsonRpcCall("enterFullScreen"),this.playerInterface}.bind(this),exitFullScreen:function(){return this.jsonRpcCall("exitFullScreen"),this.playerInterface}.bind(this),teardown:function(){this.eventCallbacks={},i.removeChild(this.videoIframe),this.videoIframe=void 0,delete r[this.playerId]}.bind(this)},this.playerInterface}var s="https://twitter.com",n=/^https?:\/\/([a-zA-Z0-9]+\.)*twitter.com(:\d+)?$/,o={suppressScribing:!1,squareCorners:!1,hideControls:!1,addTwitterBranding:!1},a=0,r={};return{setBaseUrl:function(t){n.test(t)?s=t:window.console.error("newBaseUrl "+t+" not allowed")},createPlayerForTweet:function(t,e,s){return new i(t,"/i/videos/tweet/"+e,"player_tweet_"+e,s||o)},createPlayerForDm:function(t,e,s){return new i(t,"/i/videos/dm/"+e,"player_dm_"+e,s||o)},createPlayerForLiveVideo:function(t,e,s){return new i(t,"/i/videos/live_video/"+e,"player_live_video_"+e,s||o)},findPlayerForElement:function(t){for(var e in r)if(r.hasOwnProperty(e)){var i=r[e];if(i&&i.domElement===t)return i.playerInterface}return null}}})},"7tcb":function(t,e,i){"use strict";function s(){this.defaultAttrs({dropdownThresholdSelector:".dropdown-threshold"}),this.scrollIntoView=function(){var t=this.$node.closest(this.attr.dropdownThresholdSelector),e=void 0,i=void 0;t.length&&(e=this.$node.find(this.attr.dropDownSelector),(i=e.offset().top+e.outerHeight()-(t.offset().top+t.height()))>0&&t.animate({scrollTop:t.scrollTop()+i}))},this.after("initialize",function(){this.on("uiDropdownOpened",this.scrollIntoView),this.on(document,"uiHasInjectedNewTimeline uiHasInjectedOldTimelineItems uiHasInjectedRangeTimelineItems",this.applyARIAAttrs)})}var n=i("DBjh"),o=i("mGri"),a=Object(n.default)(o.a,s);e.a=a},"8/gf":function(t,e,i){"use strict";var s=i("0d4m"),n=i("9TDk"),o=i("IAMj"),a=i("9eqS"),r=i.n(a);e.a=function(t){var e=r.a.render({article_number:"20172128"});switch(t){case n.a.INVALID_MEDIA:return Object(s.default)("Your video file could not be processed. Please see tips for uploading video files. {{learnMoreLink}}",{learnMoreLink:e});case n.a.FILE_TOO_LARGE:return Object(s.default)("Your video file is too large. Videos should be less than {{maxSize}} MB. {{learnMoreLink}}.",{maxSize:o.a.getDeciderValue("upload_video_size"),learnMoreLink:e});case n.a.UNSUPPORTED_MEDIA:return Object(s.default)("Your video file is not compatible. Please see tips for uploading video files. {{learnMoreLink}}",{learnMoreLink:e})}}},"84/5":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({richEditorTextSelector:"div.rich-editor",linksSelector:"a",hashtagSelector:".twitter-hashtag",pictographsSelector:".RichEditor-pictographs",pictographTextSelector:".RichEditor-pictographText",pictographImageSelector:".RichEditor-pictographImage",richEditorSelector:".RichEditor",pictographTextClass:"RichEditor-pictographText",tempTextAreaClass:"RichEditor-tempTextArea",fakeFocusClass:"is-fakeFocus",singleLineClass:"is-singleLine",plainTextClass:"is-plainText",hashflagsEnabled:!1,twitterTextOptions:g.a.version1}),this.linkify=function(t){var e=this,i={urlTarget:null,textWithSymbolTag:k?"b":"",linkAttributeBlock:function(t,i){var s=t.screenName||t.url;s&&(e.urlAndMentionsCharCount+=s.length+2),delete i.title,delete i["data-screen-name"],i.dir=t.hashtag&&e.shouldBeRTL(t.hashtag,0)?"rtl":"ltr",i.role="presentation"}};return this.urlAndMentionsCharCount=0,p.a.linkify(t,i)},this.setSelection=function(t){t&&this.setSelectionIfFocused(t)},this.getSelection=function(){return this.previousSelection||this.htmlRich.getSelectionOffsets()},this.around("setCursorPosition",function(t,e){void 0===e&&(e=this.cursorPosition),void 0===e&&(e=O),this.setSelectionIfFocused([e]),this.detectUpdatedCursorPosition(e)}),this.isInputMethodEditorInComposition=function(){return this.$text.attr("data-in-composition")},this.isEmoji=function(t){return c.a.regex.lastIndex=0,c.a.regex.test(t)},this.around("detectUpdatedText",function(t,e,i){var s=this.htmlRich.getHtml(),n=this.htmlRich.getSelectionOffsets()||this.previousSelection||[O],o=void 0!==i;if(s!==this.prevHtml||e||o){var a=o?i:this.htmlRich.getText(),r=a.replace(I,"");if(2===n.length&&this.isInputMethodEditorInComposition()){var c=a.substr(n[0],n[1]-n[0]),l=a.substr(n[1]);if(R.test(l)){this.caughtIMEBug=!0;for(var h=R.exec(l)[1],d=c+h,u=c,p=1;p<c.length;p++){var f=c.substr(0,p)+h.substr(0,c.length-p);if(this.isEmoji(f)){u=f;break}}r=a.replace(d,u),this.htmlRich.setHtml(s.replace(d,u)),this.setSelectionIfFocused(n)}}this.caughtIMEBug&&1===n.length&&(this.$text.removeAttr("data-in-composition"),this.caughtIMEBug=!1),this.isSingleLine&&(r=r.replace(P," ")),o||(s||this.hasFocus())&&!this.isInputMethodEditorInComposition()?this.reformatHtml(r,s,n,o):this.prevHtml=void 0,this.generatePictographs(),(e||this.cleanedText!==r)&&this.updateCleanedTextAndPosition(r,n[0])}this.detectUpdatedCursorPosition(n[0])}),this.emojifyPlainTextSpans=function(t){return t.replace(x,function(t,e,i){return e+r.a.emojifyPreEscapedText(i,r.a.EMOJIFY_FOR_COMPOSER,A)})},this.reformatHtml=function(e,i,s,n){this.$normalizer||(this.$normalizer=t("<div>",{css:{position:"absolute",visibility:"hidden"}}).appendTo(this.$node),this.htmlNormalizer=Object(d.a)(this.$normalizer[0],this.userAgent()));var o=this.linkify(e),a=this.isPlainText||this.isNoMarkup?m.a.htmlEscape(e):o,r=this.isNoMarkup||this.isPlainText?a:this.emojifyPlainTextSpans(a);this.htmlNormalizer.setTextWithMarkup(r),this.interceptDataImageInContent();var c=this.shouldBeRTL(e,this.urlAndMentionsCharCount||0);this.$text.attr("dir",c?"rtl":"ltr"),this.$normalizer.find(c?"[dir=rtl]":"[dir=ltr]").removeAttr("dir");var l=this.$normalizer.find(".twitter-timeline-link");if(l.length>0){var h=l.map(function(t,e){return e.href}).get();this.trigger("uiGotUrlInText",{urls:h})}k&&this.$normalizer.find(".twitter-timeline-link").wrapInner("<b>").addClass("pretty-link"),this.hashflagsEnabled&&this.addHashflags(this.$normalizer);var u=this.getMaxLengthOffset(e);u>=0&&(this.htmlNormalizer.emphasizeText([u,O]),this.$normalizer.find("em").each(function(){this.innerHTML=this.innerHTML.replace(M," ")}));var p=this.htmlNormalizer.getHtml();if(p!==i){var f=n&&!this.isFocusing&&this.hasFocus()&&!this.hasFakeFocus();f&&(this.toggleFakeFocus(!0),this.$text.blur()),this.htmlRich.setHtml(p),f&&(this.$text.focus(),this.toggleFakeFocus(!1)),this.setSelectionIfFocused(s)}this.prevHtml=p},this.generatePictographs=function(){var t=this.$text.find(this.attr.pictographTextSelector).map(function(t,e){return{left:e.offsetLeft,top:e.offsetTop,imageUrl:e.getAttribute("data-pictograph-image")}}).get(),e=C.a.render({pictographs:t});e!==this.previousPictographsHtml&&(this.previousPictographsHtml=e,this.$pictographs.html(e))},this.generatePictographsDeferred=function(){setTimeout(this.generatePictographs.bind(this),0)},this.addHashflags=function(e){e.find(this.attr.hashtagSelector).each(function(e,i){var s=t(i),o=s.text().slice(1),a=h.a.getImageUrl(o);a&&s.append(T.a.render({imageUrl:a,description:Object(n.default)("Twitter Emoji")}))})},this.interceptDataImageInContent=function(){var t=this;if(this.triggerGotImageData){var e=this.$text.find("img").filter(function(t,e){return e.src.match(/^data:/)})[0];if(e){var i=l.a.getBlobFromDataUri(e.src);return l.a.getFileInfo("pasted.png",i).then(function(e){return t.triggerGotImageData([e])})}}},this.getMaxLengthOffset=function(t){var e=m.a.parseTweet(t,D({},this.attr.twitterTextOptions,{maxWeightedTweetLength:this.attr.maxLength})),i=e.validRangeEnd;return e.weightedLength<=this.attr.maxLength?-1:i+1},this.setSelectionIfFocused=function(t){this.hasFocus()&&!this.hasFakeFocus()?(this.previousSelection=null,this.htmlRich.setSelectionOffsets(t)):this.previousSelection=t},this.augmentShiftEnter=function(t){t.which!==u.a.ENTER||t.metaKey||!t.shiftKey||t.altKey||t.ctrlKey||this.temporarilyFocusPlainText()},this.maybeBlockCommandArrow=function(t){!this.isFirefoxLessThan29||!t.metaKey||t.shiftKey||t.ctrlKey||t.altKey||t.which!==u.a.LEFT&&t.which!==u.a.RIGHT||this.stopEvent(t)},this.stopEvent=function(t){t.preventDefault(),t.stopPropagation()},this.handleKeyDown=function(t){this.augmentShiftEnter(t),this.maybeBlockCommandArrow(t)},this.temporarilyFocusPlainText=function(){var e=this;if(this.hasFocus()&&!this.isInputMethodEditorInComposition()){this.$tempTextArea||(this.$tempTextArea=t("<textarea>",{class:this.attr.tempTextAreaClass,tabindex:-1}).appendTo(document.body));var i=this.getVisibleText(),s=this.getSelection()||[i.length],n=this.$tempTextArea[0];this.toggleFakeFocus(!0),this.$tempTextArea.focus().val(i),n.setSelectionRange(s[0],s[s.length-1]),setTimeout(function(){var t=e.$tempTextArea.val(),s=i.length-t.length,o=n.selectionStart,a=n.selectionEnd;s>0&&t===i.slice(0,o)+i.slice(o+s)&&e.htmlRich.deleteText([o,o+s]),e.setVisibleText(t),e.$text.focus(),e.toggleFakeFocus(!1),e.setSelectionIfFocused([o,a])},0)}},this.temporarilyRemoveMarkup=function(){var t=this;this.isNoMarkup=!0,this.detectUpdatedText(!0),setTimeout(function(){t.isNoMarkup=!1,t.detectUpdatedText(!0)},0)},this.itemIsImage=function(t){return"file"===t.kind&&"image/png"===t.type},this.interceptPastedImage=function(t){var e=this,i=t.originalEvent||{},s=i.clipboardData;if(this.triggerGotImageData&&s){for(var n=s.items||[],o=null,a=0;a<n.length;a++)this.itemIsImage(n[a])&&(o=n[a]);if(o){var r=o.getAsFile();this.pendingPastedFileInfo=l.a.getFileInfo("pasted.png",r).then(function(t){return e.triggerGotImageData([t]),delete e.pendingPastedFileInfo,t}),t.preventDefault()}}},this.clearSelectionOnBlur=function(t){if(window.getSelection){var e=this.htmlRich.getSelectionOffsets();e&&(this.previousSelection=e,getSelection().removeAllRanges())}},this.restoreSelectionOnFocus=function(){var t=this;this.previousSelection&&setTimeout(function(){t.htmlRich.setSelectionOffsets(t.previousSelection),t.previousSelection=null},0)},this.setFocusingState=function(){var t=this;this.isFocusing=!0,setTimeout(function(){return t.isFocusing=!1},0)},this.insertText=function(t,e){var i=this.getVisibleText(),s=this.getSelection()||[i.length],n=s[0],o=s[s.length-1],a=!this.hasFocus();a&&this.toggleFakeFocus(!0),this.setVisibleText(i.slice(0,n)+e.text+i.slice(o)),this.setSelection([n+e.text.length]),a&&this.toggleFakeFocus(!1),e.noFocus||this.focus()},this.filterKey=function(t){this.isSingleLine&&t.which===u.a.ENTER&&t.preventDefault()},this.setContentEditablePlainTextOnly=function(){this.isPlainTextOnlySupported&&"true"===this.$text.attr(E)&&this.$text.attr(E,j)},this.around("setEditability",function(t,e){this.$text.prop(E,e),this.setContentEditablePlainTextOnly()}),this.updateScrollContainerFocus=function(t){this.select("richEditorSelector").toggleClass(this.attr.fakeFocusClass,this.hasFocus())},this.userAgent=function(){return navigator.userAgent},this.temporarilyFocusPlainTextOnEmojiTextInput=function(t){var e=t&&t.originalEvent&&t.originalEvent.data;c.a.regex.lastIndex=0,e&&c.a.regex.test(e)&&this.temporarilyFocusPlainText()},this.around("initTextNode",function(e){var i=this.userAgent().toLowerCase();this.isIELessThan12=!/opera/.test(i)&&/msie|trident/.test(i),this.isIELessThan11=this.isIELessThan12&&!/trident\/7/.test(i),this.isFirefox=!/webkit|chrome|trident|msie|compatible/.test(i)&&/mozilla/.test(i),this.isFirefoxLessThan29=this.isFirefox&&parseFloat(i.replace(/^.* rv:([\w.]+).*$/,"$1"))<29,this.isChrome=!/edge/.test(i)&&/chrome\/\d+/.test(i),this.isMacChromeLessThan55=this.isChrome&&/macintosh;/.test(i)&&i.replace(/^.*chrome\/(\d+).*$/,"$1")<55,this.isPlainTextOnlySupported=v.a.getDeciderValue("contentEditablePlainTextOnly")&&t("<div>").attr(E,j)[0].contentEditable===j,this.$text=this.select("richEditorTextSelector"),this.$pictographs=this.select("pictographsSelector"),this.previousPictographsHtml="",this.hashflagsEnabled=this.attr.hashflagsEnabled&&h.a.isEnabled(),this.htmlRich=Object(d.a)(this.$text[0],this.userAgent());var s=navigator.platform;this.isMac=-1!==s.indexOf("Mac"),this.isWin=-1!==s.indexOf("Win"),this.isSingleLine=this.$text.hasClass(this.attr.singleLineClass),this.isPlainText=this.$text.hasClass(this.attr.plainTextClass),this.on(this.$text,"click",{linksSelector:this.stopEvent}),this.on(this.$text,"focusin",this.setFocusingState),this.on(this.$text,"keydown",this.handleKeyDown),this.on(this.$text,"focusout",this.clearSelectionOnBlur),this.on(this.$text,"focusin",this.restoreSelectionOnFocus),this.on(this.$text,"cut copy paste",this.isFirefox||this.isIELessThan11?this.temporarilyRemoveMarkup:this.temporarilyFocusPlainText),this.on(this.$text,"paste",this.interceptPastedImage),this.on(this.$text,"keypress",this.filterKey),this.isMacChromeLessThan55&&this.on(this.$text,"textInput",this.temporarilyFocusPlainTextOnEmojiTextInput),this.on(this.$text,"focusin focusout",this.ignoreDuringFakeFocus(this.updateScrollContainerFocus)),this.updateScrollContainerFocus(),this.on("uiInsertText",this.insertText),this.on("uiComposerHadFocus",this.temporarilyFocusPlainText),this.on("focusin uiComposerHadFocus",this.setContentEditablePlainTextOnly),this.isIELessThan12?this.on(this.$text,"DOMSubtreeModified",this.generatePictographsDeferred):this.on(this.$text,"input",this.generatePictographs),this.on("uiTweetBoxExpanded uiTweetBoxCondensed",this.generatePictographs),this.on(this.$node,"mousedown",{pictographImageSelector:this.stopEvent}),this.detectUpdatedText()}),this.after("teardown",function(){this.$normalizer&&this.$normalizer.remove(),this.$tempTextArea&&this.$tempTextArea.remove()}),a.default.mixin(this,[b.a,w.a])}var n=i("0d4m"),o=i("RW6J"),a=i("q9/C"),r=i("tLYs"),c=i("FUxd"),l=i("+dWm"),h=i("y3HV"),d=i("dzUb"),u=i("i3qs"),p=i("iH6C"),f=i("CZTd"),m=i.n(f),g=i("cXIp"),v=i("IAMj"),b=i("BtBL"),w=i("cl8q"),S=i("/81G"),C=i.n(S),y=i("MFJV"),T=i.n(y),D=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=s;var I=/[\uFFFE\uFEFF\uFFFF\u200E\u200F\u202A-\u202E\x00-\x09\x0B\x0C\x0E-\x1F]/g,x=/(<[^>]*>|^)([^<]+)/g,k=Object(o.a)().mozilla&&parseInt(Object(o.a)().version,10)<2,M=/ $/,P=/\r\n|\n\r|\n/g,A=1e3,O=Number.MAX_VALUE,E="contenteditable",j="plaintext-only",R=/^([\udc00-\udfff]+)/}).call(e,i("4kSj"))},"859Q":function(t,e,i){"use strict";function s(){this.drop=function(t){t.preventDefault(),t.stopImmediatePropagation();var e=o.a.getFileHandles(t.originalEvent.dataTransfer);this.trigger("uiDrop",{files:e}),e.length>1&&this.trigger("uiDropMany"),this.trigger("uiDragEnd")},this.after("initialize",function(){this.on("drop",n.a.onlyHandleEventsWithFiles(this.drop))})}var n=i("wAPH"),o=i("+dWm");e.a=s},"8N88":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({geoPickerSelector:".geo-picker",inlineGeoPickerSelector:".inline-geo-picker",buttonSelector:"button.geo-picker-btn",placeIdSelector:"input[name=place_id]",statusSelector:"span.geo-status",dropdownContainerSelector:"span.dropdown-container",dropdownDisabledSelector:"#geo-disabled-dropdown",enableButtonSelector:"button.geo-turn-on",notNowButtonSelector:"button.geo-not-now",dropdownEnabledSelector:"#geo-enabled-dropdown",geoSearchSelector:".geo-query-location .icon",dropdownStatusSelector:".geo-dropdown-status",searchResultsSelector:".GeoSearch-result--search",placeResultsSelector:".GeoSearch-result--place",turnOffButtonSelector:".geo-turn-off-item",hasInlineGeoPickerClass:"has-inline-geo-picker",disabledClass:"disabled",inComposer:!0}),this.selectGeoAction=function(t){if(this.dropdownIsOpen)return void this.closeDropdown();switch(this.geoState.state){case"disabled":this.disable(),this.trigger("uiGeoPickerOffer");break;case"enableIsUnavailable":this.trigger("uiGeoPickerOffer");break;case"locateIsUnavailable":case"enabledTurnedOn":this.requestGeoState();break;case"enabledTurnedOff":this.turnOn();break;case"changing":case"locating":case"located":case"locationUnknown":this.trigger("uiGeoPickerOpen")}},this.prepare=function(e,i){var s=void 0,n=void 0;"uiGeoPickerOpen"===e.type?(s=this.attr.dropdownEnabledSelector,n=1,this.geoDetails&&!this.geoDetails.interacted_poi_list&&(this.geoDetails.interacted_poi_list=!0)):(s=this.attr.dropdownDisabledSelector,n=0),n!==this.dropdownState&&(this.select("dropdownContainerSelector").html(t(s).html()),this.dropdownState=n),this.showGeoState(),this.applyAriaAttrsToResultsAndAnnounceNumResults(),this.lastQuery="",this.geoQueryFieldChanged=!1},this.after("openDropdown",function(){var t=this.select("enableButtonSelector");t.length||(t=this.select("querySelector").filter(":visible")),t.focus(),this.applyAriaAttrsToDropdown(),this.applyAriaAttrsToResultsAndAnnounceNumResults()}),this.after("closeDropdown",function(){this.select("querySelector").val("")}),this.enable=function(){this.closeDropdown(),this.trigger("uiGeoPickerEnable")},this.turnOn=function(){this.trigger("uiGeoPickerTurnOn")},this.turnOff=function(t){this.closeDropdown(),this.trigger("uiGeoPickerTurnOff")},this.changeLocation=function(t,e){var i=this.select("querySelector").filter(":visible").val(),s=e.placeId,n=e.placeName,o="search"===e.resultType,a=e.placeOffset;if(this.closeDropdown(),s&&s!==this.lastPlaceId){this.lastGeoPlace&&(this.discardLastGeoPlace(),this.lastGeoPlace={place_name:n,place_id:s,offset:a,is_autotag:!1,query:""!==i?i:null,source:o?"search":"default",last_interaction_time:(new Date).getTime()});var r={placeId:s,scribeData:{items:[{name:s}]}};this.lastPlaceId&&r.scribeData.items.push({name:this.lastPlaceId}),o&&this.lastQueryData&&(r.scribeData.query=this.lastQueryData.query),this.trigger("uiGeoPickerChange",r)}},this.updateState=function(t,e){this.geoState=e,this.showGeoState()},this.showGeoState=function(){var t=Object(n.default)("Add location"),e="",i=!1,s=!1,o="",a=this.geoState;switch("enabling"===a.state&&this.select("buttonSelector").removeClass(this.attr.disabledClass),a.state){case"enabling":case"locating":t=Object(n.default)("Getting location..."),i=!0;break;case"enableIsUnavailable":case"locateIsUnavailable":t=Object(n.default)("Location service unavailable");break;case"changing":t=Object(n.default)("Changing location..."),i=!0;break;case"locationUnknown":t=Object(n.default)("Unknown location");break;case"located":t=a.place_name,e=a.place_id,o=a.places_html;var c=Object(r.a)();o+=p.a.render({id:c}),i=!0,s=!0,this.initializeGeoScribeData(a);break;case"enabledTurnedOff":this.discardLastGeoPlace();break;case"disabled":s=!0,this.disable(),t=Object(n.default)("Location disabled")}this.select("geoPickerSelector").toggleClass("active",i),this.select("inlineGeoPickerSelector").length>0&&(this.select("inlineGeoPickerSelector").toggle(i),this.$node.toggleClass(this.attr.hasInlineGeoPickerClass,i)),this.select("buttonSelector").toggleClass("enabled",i).toggleClass("js-dropdown-toggle",s).attr("aria-haspopup",s),this.select("statusSelector").text(t),this.select("buttonSelector").attr("data-original-title",t),this.select("placeResultsSelector").add(this.select("searchResultsSelector")).remove(),this.select("dropdownStatusSelector").text(t).toggle(!i),this.select("dropdownSelector").html(o),this.select("placeIdSelector").val(e),this.lastPlaceId=e,this.applyAriaAttrsToResultsAndAnnounceNumResults()},this.initializeGeoScribeData=function(t){this.geoDetails||this.resetGeoDetails(),this.lastGeoPlace&&this.lastGeoPlace.place_id||!t.place_id||(this.lastGeoPlace={place_name:t.place_name,place_id:t.place_id,source:"default",is_autotag:!0,last_interaction_time:(new Date).getTime()})},this.resetGeoDetails=function(){this.geoDetails={interacted_poi_list:!1,interacted_server_search:!1,geo_place_details:[]}},this.discardLastGeoPlace=function(){this.lastGeoPlace&&this.lastGeoPlace.place_id&&(this.lastGeoPlace.state="discarded",this.geoDetails.geo_place_details.push(this.lastGeoPlace),this.lastGeoPlace={})},this.sendTweetScribeData=function(t){if(this.geoDetails){this.lastGeoPlace&&this.lastGeoPlace.place_id&&(this.lastGeoPlace.state="geotag",this.geoDetails.geo_place_details.push(this.lastGeoPlace));var e={scribeData:{items:[{item_type:a.a.geoDetails,geo_details:this.geoDetails}]}};this.trigger("uiGeoPickerSendTweet",e),this.resetGeoDetails(),this.lastGeoPlace={}}},this.requestGeoState=function(){this.trigger("uiRequestGeoState")},this.searchIfQueryChanged=function(t){var e=this.select("querySelector").filter(":visible").val()||"";t&&this.lastQuery===e||(this.geoDetails.interacted_server_search||(this.geoDetails.interacted_server_search=!0),this.lastIsPrefix=t,this.lastQuery=e,this.select("dropdownStatusSelector").text(Object(n.default)("Searching places...")).show(),this.geoQueryFieldChanged||(this.geoQueryFieldChanged=!0,this.trigger("uiGeoPickerInteraction")),this.trigger("uiGeoPickerSearch",{placeId:this.lastPlaceId,query:e,isPrefix:t}))},this.searchExactMatch=function(){this.searchIfQueryChanged(!1)},this.searchAutocomplete=function(){var t=this;setTimeout(function(){return t.searchIfQueryChanged(!0)},0)},this.searchResults=function(t,e){var i=e.sourceEventData;!i||i.placeId!==this.lastPlaceId||i.query!==this.select("querySelector").filter(":visible").val()||i.isPrefix&&!this.lastIsPrefix||(this.lastQueryData=i,this.select("searchResultsSelector").remove(),this.select("dropdownStatusSelector").hide(),this.select("dropdownSelector").prepend(e.html),this.applyAriaAttrsToResultsAndAnnounceNumResults())},this.searchUnavailable=function(t,e){this.select("dropdownStatusSelector").text(Object(n.default)("Location service unavailable")).show()},this.disable=function(){this.select("buttonSelector").addClass(this.attr.disabledClass).addClass("js-dropdown-toggle").attr("aria-haspopup",!0).attr("data-original-title",Object(n.default)("Location disabled")),this.select("statusSelector").text(Object(n.default)("Location disabled"))},this.after("initialize",function(){this.geoState={},this.skipFocusManager=!0,this.on("uiPrepareGeoPicker",this.requestGeoState),this.attr.inComposer&&(this.on("uiComposerActive",this.requestGeoState),this.on("uiTweetSent",this.sendTweetScribeData)),this.on("dataGeoState",this.updateState),this.on(document,"dataGeoSearchResults",this.searchResults),this.on(document,"dataGeoSearchResultsUnavailable",this.searchUnavailable),this.on("uiDropdownOpenRequested",{geoPickerSelector:this.selectGeoAction}),this.on("click",{buttonSelector:this.selectGeoAction,enableButtonSelector:this.enable,notNowButtonSelector:this.closeDropdown,turnOffButtonSelector:this.turnOff,geoSearchSelector:this.searchExactMatch}),this.on("mousedown",{buttonSelector:this.preventFocusLoss}),this.on("uiGeoSearchSelect",{turnOffButtonSelector:this.turnOff}),this.on("uiGeoPickerOpen uiGeoPickerOffer",this.prepare),this.on("uiGeoSearchEnter",this.searchExactMatch),this.on("uiGeoSearchChangeLocation",this.changeLocation),this.on("uiGeoSearchAutocomplete",this.searchAutocomplete);var t="already_did_reset";!0===c.a.getDeciderValue("geo_picker_incident_reset")&&(this.resetGeoStore=new d.a("reset_geo_picker_incident"),this.resetGeoStore.getItem(t)||(this.turnOff(),this.resetGeoStore.setItem(t,!0),this.scribe({component:"tweet_box",element:"geo_picker",action:"incident_reset"})))})}var n=i("0d4m"),o=i("DBjh"),a=i("rbkv"),r=i("dSEw"),c=i("IAMj"),l=i("q+ee"),h=i("3oDc"),d=i("WODX"),u=i("vfpM"),p=i.n(u);e.a=Object(o.default)(l.a,h.a,s)}).call(e,i("4kSj"))},"8QxQ":function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("icon_class",t,e,1),t,e,0,15,99,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('  <span class="PromptbirdPrompt-icon Icon Icon--extraLarge '),i.b(i.v(i.f("icon_class",t,e,0))),i.b('"></span>\n')}),t.pop()),s.s(s.f("icon_class",t,e,1),t,e,1,0,0,"")||s.b('  <span class="PromptbirdPrompt-icon PromptbirdPrompt-icon--default Icon Icon--extraLarge Icon--bird"></span>\n'),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},"8S9K":function(t,e,i){"use strict";var s=i("DBjh"),n=i("UHc7"),o=i("TX0g");e.a=Object(s.default)(n.a,function(){this.defaultAttrs({whyThisAdIframeSelector:"#why-this-ad-frame",spinnerSelector:".why-this-ad-spinner"}),this.setUpDialog=function(t,e){this.$spinner.show(),this.$iframe.hide(),this.eventData=e,this.setWhyThisAdFrame(),this.open()},this.setWhyThisAdFrame=function(){var t="/about-ads?"+o.a.encode({aid:this.eventData.impressionId});this.$iframe.attr("src",t)},this.around("close",function(t){this.$iframe.attr("src",""),t()}),this.after("initialize",function(){var t=this;this.$iframe=this.select("whyThisAdIframeSelector"),this.$spinner=this.select("spinnerSelector"),this.on(document,"uiNeedsWhyThisAdDialog",this.setUpDialog),this.$iframe.on("load",function(){t.$iframe.show(),t.$spinner.hide()})})})},"8T/I":function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("second_call_to_action_text",t,e,1),t,e,0,247,794,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.b('  <div class="PromptbirdPrompt-action">\n'),s.s(s.f("second_call_to_action_url",t,e,1),t,e,0,322,754,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.b('      <a href="'),s.b(s.v(s.f("second_call_to_action_url",t,e,0))),s.b('" '),s.s(s.f("second_call_to_action_is_external",t,e,1),t,e,0,407,423,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('target="_blank" ')}),t.pop()),s.b('class="btn-link js-promptAction '),s.b(s.v(s.f("custom_js_class",t,e,0))),s.b('" data-prompt-action-type="'),s.b(s.v(s.f("second_call_to_action_type",t,e,0))),s.b('" data-scribe-component="'),s.b(s.v(s.f("scribe_component",t,e,0))),s.b('" data-scribe-element="'),s.b(s.v(s.f("scribe_element",t,e,0))),s.b('" data-prompt-scribe-action="secondary_cta">\n        '),s.b(s.v(s.f("second_call_to_action_text",t,e,0))),s.b("\n"+i),s.b("      </a>\n")}),t.pop()),s.b("  </div>\n")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},"8XKX":function(t,e,i){"use strict";function s(){this.prefetch=function(t,e,i,s){var n=this,o={prefetch:!0,result_type:e,count:this.getPrefetchCount(),media_tagging_in_prefetch:this.shouldIncludeCanMediaTag()};return this.storage&&(o[e+"_cache_age"]=this.storage.getCacheAge(this.attr.storageHash,this.attr.ttl_ms)),new Promise(function(e,a){n.get({url:t,data:o,eventData:{},success:i,error:s}).then(e).fail(a)})},this.useStaleData=function(){this.storage&&(this.extendTTL(),this.getDataFromLocalStorage())},this.extendTTL=function(){for(var t=this.getStorageKeys(),e=0;e<t.length;e++)this.storage.updateTTL(t[e],this.attr.ttl_ms)},this.loadData=function(t,e){this.getStorageKeys().some(function(t){return this.storage.isExpired(t)},this)||this.isMetadataExpired()?this.prefetch(t,e,this.processResults.bind(this),this.useStaleData.bind(this)):this.getDataFromLocalStorage()},this.getProtocol=function(){return window.location.protocol},this.shouldIncludeCanMediaTag=function(){return n.a.getDecider("enable_media_tag_prefetch")}}var n=i("IAMj");e.a=s},"8Xx6":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({mediaItemSelector:".MomentMediaItem",mediaEntitySelector:".MomentMediaItem-entity",dataShowableSelector:'[data-showable="true"]',dataShowableAttr:"data-showable",dataCropAspectRatio:"data-crop-aspect-ratio",cropSquare:"square",cropPortrait3x4:"portrait-three-by-four"}),this.loadAllMedia=function(){this.select("mediaItemSelector").not(this.attr.dataShowableSelector).each(this.loadMedia.bind(this))},this.loadMedia=function(e,i){var s=t(i),n=s.find(this.attr.mediaEntitySelector);n.length&&s.length&&n.css(this.getCssForLoading(s,n)),s.attr(this.attr.dataShowableAttr,!0)},this.getCssForLoading=function(t,e){var i=this.getMediaDimensions(e),s=this.getTargetDimensions(t),n=t.attr(this.attr.dataCropAspectRatio),a=n===this.attr.cropSquare,r=n===this.attr.cropPortrait3x4;if(a||r){var c=this.getCropData(e,n)||o.a.getDefaultCropRect(i,s);return o.a.calculateCrop(i,s,c)}return this.calculateScalingCss(s,i)},this.getCropData=function(t,e){var i={x:parseInt(t.data(e+"-crop-x"),10),y:parseInt(t.data(e+"-crop-y"),10),width:parseInt(t.data(e+"-crop-width"),10),height:parseInt(t.data(e+"-crop-height"),10)};if(this.validateCropData(i))return i},this.validateCropData=function(t){return Object.keys(t).every(function(e){return!isNaN(t[e])})},this.getMediaDimensions=function(t){return"img"===t.get(0).nodeName.toLowerCase()?this.getImageDimensions(t):this.getIframeDimensions(t)},this.getImageDimensions=function(t){var e=t.get(0);return{width:t.data("width")||e.naturalWidth,height:t.data("height")||e.naturalHeight}},this.getIframeDimensions=function(t){return{width:t.data("width"),height:t.data("height")}},this.getTargetDimensions=function(t){return{width:t.width(),height:t.height()}},this.calculateScalingCss=function(t,e){return{width:"100%",height:t.width/e.width*e.height+"px"}},this.after("initialize",function(){this.loadAllMedia(),this.on("uiMomentsHasInjectedNewItems uiActivityPopupRendered uiMomentAnalyticsRendered",this.loadAllMedia)})}var n=i("DBjh"),o=i("eMOG");e.a=Object(n.default)(s)}).call(e,i("4kSj"))},"8jxu":function(t,e,i){"use strict";var s=i("0d4m"),n=i("9TDk"),o=i("9eqS"),a=i.n(o);e.a=function(t){var e=a.a.render({article_number:"20156423"});switch(t){case n.a.INVALID_MEDIA:return Object(s.default)("Your GIF file could not be processed. Please see tips for uploading GIFs. {{learnMoreLink}}",{learnMoreLink:e});case n.a.FILE_TOO_LARGE:return Object(s.default)("Your GIF file is too large. GIFs should be less than 3 MB. {{learnMoreLink}}.",{learnMoreLink:e});case n.a.UNSUPPORTED_MEDIA:return Object(s.default)("Your GIF file is not compatible. Please see tips for uploading GIFs. {{learnMoreLink}}",{learnMoreLink:e})}}},"8tPW":function(t,e,i){"use strict";var s={};e.a={get:function(t){return s[t]},set:function(t){s=t||{}},clear:function(){this.set({})}}},"8z7v":function(t,e,i){"use strict";function s(){this.defaultAttrs({delay:3e3,submitSelector:".gdpr-soft-bounce-submit"}),this.softBounceCheck=function(){var t=this;this.trigger(document,"dataExpectSoftBounce"),setTimeout(function(){return t.get({url:"https://api.twitter.com/1.1/account/verify_credentials.json",useOAuthSessionAuth:!0})},this.attr.delay)},this.showDialog=function(t,e){this.bounceLocation=e.bounceLocation,this.open(),this.scribeImpression()},this.scribeImpression=function(){this.scribe({component:"gdpr_bounce_dialog",action:"impression"})},this.bouncerRedirect=function(){this.close(),window.location=this.bounceLocation},this.after("initialize",function(){this.bounceLocation=null,this.on(document,"uiWantsGdprSoftBounceCheck",this.softBounceCheck),this.on(document,"dataSoftBounce",this.showDialog),this.on("click",{submitSelector:this.bouncerRedirect})})}var n=i("DBjh"),o=i("VtWx"),a=i("UHc7"),r=i("3oDc"),c=Object(n.default)(s,o.a,a.a,r.a);e.a=c},"97D5":function(t,e,i){"use strict";function s(){this.defaultAttrs({basePrefetchEndpointUrl:"/i/cards/preview/v1",cardPrefetchInterval:1e4,prefetchOnLeadingEdge:!0}),this.filterCachedUri=function(t){return!this.prefetchedUri[t]},this.prefetchCardWithUri=function(t){this.prefetchedUri[t]=!0,this.get({url:this.attr.basePrefetchEndpointUrl,data:{card_uri:t},dataType:this.DATA_TYPES.TEXT})},this.setCardUriParam=function(t,e){var i=e&&e.urls;Array.isArray(i)&&(1===i.length?this.trigger("uiSetDmCreateCardUriParam",{cardUri:i[0]}):this.trigger("uiResetDmCreateCardUriParam"))},this.prefetchCard=function(t,e){var i=e&&e.urls;Array.isArray(i)&&1===i.length&&i.filter(this.filterCachedUri,this).forEach(this.prefetchCardWithUri,this)},this.after("initialize",function(){this.prefetchedUri={},this.on("uiGotUrlInText",this.setCardUriParam),this.on("uiGotUrlInText",Object(a.a)(this.prefetchCard,this.attr.cardPrefetchInterval,this.attr.cardPrefetchInterval,this.attr.prefetchOnLeadingEdge))})}var n=i("DBjh"),o=i("VtWx"),a=i("ZYtG"),r=Object(n.default)(s,o.a);e.a=r},"9F29":function(t,e,i){"use strict";function s(t){if(!t)return null;var e=t.replace(r,"$1$1$2$2$3$3");return e.match(c)?e.match(l).map(function(t){return parseInt(t,16)}):null}function n(t,e){var i=s(t),n=a(i,3);return"rgba("+n[0]+", "+n[1]+", "+n[2]+", "+e+")"}function o(t,e,i){var n=s(t),o=s(i),a=1-e;return n&&o&&n.map(function(t,i){return(Math.floor(t*e+o[i]*a)+256).toString(16).slice(1)}).join("")}i.d(e,"b",function(){return s}),i.d(e,"c",function(){return n}),i.d(e,"a",function(){return o});var a=function(){function t(t,e){var i=[],s=!0,n=!1,o=void 0;try{for(var a,r=t[Symbol.iterator]();!(s=(a=r.next()).done)&&(i.push(a.value),!e||i.length!==e);s=!0);}catch(t){n=!0,o=t}finally{try{!s&&r.return&&r.return()}finally{if(n)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=/^(.)(.)(.)$/,c=/^[0-9a-f]{6}$/i,l=/.{2}/g},"9OOz":function(t,e,i){"use strict";function s(){this.defaultAttrs({noShowError:!0,dmDialogSelector:"#dm_dialog",throttleInterval:3e3,foregroundPollInterval:3e3,burstPollInterval:3e3,burstPollDuration:3e5,maxPollInterval:6e4}),this.dispatch=function(t){t&&(c.a.updateNotificationState(t.note),this.trigger("dataNotificationsReceived",t.note))},this.makeToastRequest=function(t,e,i){this.get({url:"/i/toast_poll",data:i,eventData:e,success:this.dispatch.bind(this),headers:{"X-Twitter-Polling":!0},returnNotificationData:!0})},this.requestUserUpdates=function(){this.get({url:"/i/direct_messages/user_updates",data:{cursor:this.dmCursor,active_conversation:this.activeConversationVisible?this.activeConversation:void 0},success:"dataDMUserUpdates"})},this.requestConversationList=function(t,e){var i={};c.a.addDMData(i),this.makeToastRequest(t,e,i)},this.attachBackgroundPoller=l.default.once(function(){this.attachChild(n.a,document,{burstPollInterval:this.attr.burstPollInterval,burstDuration:this.attr.burstPollDuration,maxPollInterval:this.attr.maxPollInterval})}),this.updateActiveConversation=function(t,e){this.activeConversation=e.conversation_id},this.updateActiveConversationVisibility=function(t,e){"uiDMActivityOpened"===t.type?this.activeConversationVisible="conversation"===e.activity||"convoSettings"===e.activity||"addParticipants"===e.activity:this.activeConversationVisible=!1},this.after("initialize",function(){this.attachChild(a.a,document,{dmDialogSelector:this.attr.dmDialogSelector,pollingInterval:this.attr.foregroundPollInterval}),o.a.get("notifications")&&"Notification"in window&&"granted"===Notification.permission&&this.attachBackgroundPoller(),this.on("uiNativeNotificationPermissionGranted",this.attachBackgroundPoller),this.on("uiDMPoll",this.requestConversationList),this.on("uiDMRequestUserUpdates",l.default.throttle(this.requestUserUpdates,this.attr.throttleInterval)),this.on("dataDMUpdate",this.requestUserUpdates),this.on("uiDMConversationUpdated",this.updateActiveConversation),this.on(document,"uiDMDialogClosed uiDMActivityOpened",this.updateActiveConversationVisibility)})}var n=i("GVV3"),o=i("8tPW"),a=i("hIlQ"),r=i("DBjh"),c=i("5VLS"),l=i("YzIt"),h=i("9np9"),d=i("VtWx"),u=i("9Uwv"),p=i("AJAn"),f=Object(r.default)(s,d.a,h.a,u.a,p.a);e.a=f},"9Qtu":function(t,e,i){"use strict";function s(){this.createStyleSheet=function(t){var e=document.createElement("style");return e.type="text/css",t&&(e.id=t),document.getElementsByTagName("head")[0].appendChild(e),e.sheet||new n},this.rules=function(t){return t.cssRules?t.cssRules:t.rules},this.insertCSSRule=function(t,e){return t.insertRule(e,this.rules(t).length)},this.removeCSSRule=function(t,e){t.deleteRule(e)}}e.a=s;var n=function(){function t(){this.cssRules=[]}return t.prototype.insertRule=function(t,e){return this.cssRules[e]={cssText:t},e},t.prototype.deleteRule=function(t){delete this.cssRules[t],this.cssRules=this.cssRules.filter(function(t){return null!=t})},t}()},"9RxZ":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({unEllipsifiedTextClass:"js-ellipsis",unEllipsifiedTextSelector:".js-ellipsis",maxCharsRemoveEnsureEndOnWordBreak:5}),this.after("initialize",function(){void 0!==document.createRange&&this.on(document,"uiSwiftLoaded uiPageChanged uiHasInjectedNewTimeline uiHasInjectedOldTimelineItems uiHasInjectedRangeTimelineItems uiOverlayUpdate uiTrendsDisplayed uiShowMoreTrends uiTriggerEllipsis",this.addEllipses)}),this.addEllipses=function(){var t=this.select("unEllipsifiedTextSelector").filter(":visible");t.removeClass(this.attr.unEllipsifiedTextClass),t.each(this.addEllipsis.bind(this))},this.addEllipsis=function(e,i){var s=t(i),n=this.createRange(s);if(n.hasOverflow()){s.data("full-text",s.text()),n.shortenToVisibleContent(),n.ensureLastLineAvailableWidth(this.maxEllipsisWidth(s)),n.shortenToNearestWordBreak({maxCharsToRemove:this.attr.maxCharsRemoveEnsureEndOnWordBreak});var o=n.toDocumentFragment();o.appendChild(document.createTextNode("…")),s.html(o),this.trigger(s,"uiEllipsisAdded")}},this.maxEllipsisWidth=function(t){return 2*parseInt(t.css("font-size"))},this.createRange=function(t){return new o.a(t)}}var n=i("DBjh"),o=i("Dt6B");e.a=Object(n.default)(s)}).call(e,i("4kSj"))},"9TDk":function(t,e,i){"use strict";e.a={FILE_TOO_LARGE:2,INTERNAL_ERROR:131,INVALID_MEDIA:1,RATE_LIMIT:88,TIMEOUT:67,UNSUPPORTED_MEDIA:3,ZERO_FILE_LENGTH:4}},"9UDm":function(t,e,i){"use strict";var s=i("DBjh"),n=i("rbkv"),o=i("JFPI"),a=i("FUxd"),r=i("IAMj"),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=Object(s.default)(function(){this.TweetSentSuccessScribe=function(t,e){var i=e.sentTweet,s=e.response,l={};i.mediaType===o.h.VIDEO&&r.a.getDeciderValue("web_upload_video_advanced")?l={metadata:i.additional_media_info}:i.mediaType===o.h.GIF&&i.gifInfo&&(l={photo_count:1,found_media_provider:i.gifInfo.provider});var h={scribeContext:{component:"tweet_box"},scribeData:{items:[{id:s.id_str,item_type:n.a.tweet,media_details:l}]}},d=i&&i.tweetData&&i.tweetData.status;if(this.trigger("uiTweetboxTweetSuccess",c({},h,{text:d})),i.mediaType===o.h.PHOTO)this.trigger("uiTweetboxPhotoTweetSuccess",h),i.hasAltText?this.trigger("uiTweetboxPhotoTweetWithAltTextSuccess",h):this.trigger("uiTweetboxPhotoTweetWithoutAltTextSuccess",h);else if(i.mediaType===o.h.GIF){var u=i.gifInfo?"uiTweetboxRemoteGifTweetSuccess":"uiTweetboxLocalGifTweetSuccess";this.trigger(u,h)}else i.mediaType===o.h.VIDEO?(this.trigger("uiTweetboxVideoTweetSuccess",h),r.a.getDeciderValue("web_upload_video_advanced")&&this.trigger("uiTweetboxProVideoTweetSuccess",h)):i.hasPoll&&this.trigger("uiTweetboxPollTweetSuccess",h);i.tweetData.place_id&&this.trigger("uiTweetboxGeotaggedTweetSuccess",h),i.tweetData.status.match(a.a.regex)&&this.trigger("uiTweetboxEmojiTweetSuccess")},this.TweetstormUploadSuccessScribe=function(t,e){this.trigger("scribe",{scribeContext:"tweet_box",scribeEvent:{action:"thread_send_success"},scribeData:{items:[{item_type:n.a.selfThread,self_thread_details:e}]}})},this.TweetstormUploadErrorScribe=function(t,e){this.trigger("scribe",{scribeContext:"tweet_box",scribeEvent:{action:"thread_send_failure"},scribeData:{items:[{item_type:n.a.selfThread,self_thread_details:e}]}})},this.after("initialize",function(){this.on("dataTweetstormTweetSentSuccessScribe",this.TweetSentSuccessScribe),this.on(o.b.tweet.SEND_ERROR,"uiTweetboxTweetError"),this.on("dataTweetstormUploadSuccessScribe",this.TweetstormUploadSuccessScribe),this.on("dataTweetstormUploadErrorScribe",this.TweetstormUploadErrorScribe)})})},"9Uwv":function(t,e,i){"use strict";function s(){this.storeDmCursor=function(t,e){e&&e.cursor&&(this.dmCursor=e.cursor,this.trigger("dataDMCursorUpdated",{cursor:this.dmCursor}))},this.storeDmCursorFromUpdates=function(t,e){e&&e.inbox_updates&&e.inbox_updates.cursor&&(this.dmCursor=e.inbox_updates.cursor,this.trigger("dataDMCursorUpdated",{cursor:this.dmCursor}))},this.after("initialize",function(){this.on(document,"dataDMCursor",this.storeDmCursor),this.on(document,"dataDMUserUpdates",this.storeDmCursorFromUpdates)})}e.a=s},"9eqS":function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<a href="https://support.twitter.com/articles/'),s.b(s.v(s.f("article_number",t,e,0))),s.b('#import-web" target="_blank" rel="noopener">Learn more</a>\n'),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},"9hTR":function(t,e,i){"use strict";var s={OPTIONS_TYPE:"options",TEXT_INPUT_TYPE:"text_input",LOCATION_TYPE:"location"};e.a=s},"9naX":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({autoSubscribe:!1,allowRegistration:!0,serviceWorkerPath:"/push_service_worker.js",pushCheckinTTL:864e5}),this.subscriptionChangeRequested=function(t,e){var i=this,s=Promise.resolve();if(!this.serviceWorkerRegistration||!this.attr.allowRegistration)return s;var n=!this.subscription&&e.subscribe,o=this.subscription&&!e.subscribe,a=void 0;if(n)a=this.subscribe(this.serviceWorkerRegistration);else if(o){var r=function(){i.subscription=null,i.storeUnregister(),i.trigger("uiBrowserPushUnsubscribe"),i.sendCurrentStatus()};a=this.subscription.unsubscribe().then(r,r)}return a||s},this.showInitialNotification=function(){this.trigger("uiDisplayNativeNotification",{title:Object(l.default)("Customize your notifications"),body:Object(l.default)("Click to visit your settings and choose which web notifications you receive"),displayDuration:15e3,click:{eventName:"uiPushSettingsNotificationClicked"}})},this.subscribe=function(t){if(!t||!this.attr.allowRegistration)return Promise.resolve();var e="granted"===this.getNotificationPermission();e?this.trigger("uiBrowserSilentSubscribeAttempt"):this.trigger("uiBrowserPushPromptImpression");var i=r.a.getDecider("allowWebPushVapidUpgrade"),s={userVisibleOnly:!0};return i&&(s.applicationServerKey=d),t.pushManager.subscribe(s).then(this.subscribeSuccess.bind(this,e),this.subscribeFailure.bind(this,e))},this.subscribeSuccess=function(t,e){t?this.trigger("uiBrowserSilentSubscribeSuccess"):this.trigger("uiBrowserPushPromptAllow"),this.subscription=e,this.storeSubscription(this.subscription,!0),this.sendCurrentStatus(),this.showInitialNotification()},this.subscribeFailure=function(t){"denied"===this.getNotificationPermission()?this.trigger("uiBrowserPushPromptDeny"):"default"===this.getNotificationPermission()?this.trigger("uiBrowserPushPromptDismiss"):t?this.trigger("uiBrowserSilentSubscribeError"):this.trigger("uiBrowserPushPromptError")},this.isServiceWorkerSupported=function(){return"serviceWorker"in navigator},this.isPushSupported=function(){var t="PushManager"in window,e=this.isServiceWorkerSupported();return e&&"showNotification"in ServiceWorkerRegistration.prototype&&t&&e},this.isRememberMeOn=function(){return"1"===Object(n.a)("remember_checked_on")},this.supportsVapid=function(){return"PushSubscriptionOptions"in window&&window.PushSubscriptionOptions.prototype.hasOwnProperty("applicationServerKey")},this.serviceWorkerReady=function(t){var e=this;if(this.pushSupported)return this.serviceWorkerRegistration=t,this.serviceWorkerRegistration.pushManager.getSubscription().then(function(i){if(!(i||e.isRememberMeOn()&&e.supportsVapid()))return e.pushSupported=!1,e.sendCurrentStatus();e.subscription=i;var s=r.a.getDecider("allowWebPushVapidUpgrade");if("granted"===e.getNotificationPermission()&&!i&&e.attr.autoSubscribe&&e.supportsVapid())e.subscribe(t);else{if(i&&!e.isVapidSubscription(i)&&e.supportsVapid()&&s)return e.subscription.unsubscribe().then(function(){return e.subscribe(t)});e.sendCurrentStatus()}e.storeSubscription(e.subscription)})},this.getNotificationPermission=function(){return"Notification"in window&&Notification.permission},this.isVapidSubscription=function(t){if(!t||!t.options||!t.options.applicationServerKey)return!1;var e=new Uint8Array(t.options.applicationServerKey);return 65===e.byteLength&&4===e[0]},this.storeSubscription=function(e,i){var s=this;if(e&&(!this.storage.getItem("isSaved")||i)){var n=h({subscribe:!0,token:e.endpoint,useWebClientId:this.isVapidSubscription(e)},e.toJSON());e.subscriptionId&&-1===e.endpoint.indexOf(e.subscriptionId)&&(n.token=e.endpoint+"/"+e.subscriptionId),this.post({url:"/i/push_destinations",data:n,success:function(){return s.storage.setItem("isSaved",!0,s.attr.pushCheckinTTL)},error:t.noop})}},this.storeUnregister=function(){this.storage.clear(),this.post({url:"/i/push_destinations/destroy",success:t.noop,error:t.noop})},this.sendCurrentStatus=function(){this.trigger("dataPushSubscriptionState",{permissionDenied:"denied"===this.getNotificationPermission(),supported:this.attr.allowRegistration&&this.pushSupported,subscribed:!!this.subscription})},this.navigateToSettings=function(t,e){this.trigger("uiNavigate",{href:"/settings/web_notifications"})},this.after("initialize",function(){var t=this;if(this.serviceWorkerRegistration=null,this.subscription=null,this.on("uiPushSettingsNotificationClicked",this.navigateToSettings),this.on("uiWantsPushSubscriptionState",this.sendCurrentStatus),this.pushSupported=this.isPushSupported(),this.serviceWorkerSupported=this.isServiceWorkerSupported(),this.pushSupported){var e=Object(o.a)({withExpiry:!0});this.storage=new e("push_notifications"),this.on("uiPushSubscriptionChangeRequested",this.subscriptionChangeRequested)}else"denied"===this.getNotificationPermission()&&this.trigger("uiBrowserPushPermissionDenied"),this.sendCurrentStatus();if(this.serviceWorkerSupported){var i=navigator.serviceWorker;i.register(this.attr.serviceWorkerPath).then(function(){return i.ready}).then(this.serviceWorkerReady.bind(this)).catch(function(){t.serviceWorkerSupported=!1,t.pushSupported&&(t.pushSupported=!1,t.sendCurrentStatus())})}})}var n=i("dsp6"),o=i("rWgq"),a=i("DBjh"),r=i("IAMj"),c=i("VtWx"),l=i("0d4m"),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},d=new Uint8Array([4,94,104,18,141,49,13,74,96,202,82,131,78,91,29,242,150,102,197,0,53,149,230,8,54,38,62,173,43,28,89,130,191,222,213,128,147,62,21,49,187,95,212,194,196,253,140,157,234,34,8,234,143,158,221,15,83,8,222,111,100,204,213,48,75]);e.a=Object(a.default)(s,c.a)}).call(e,i("4kSj"))},A1LW:function(t,e,i){"use strict";function s(){this.defaultAttrs({rwebOptInCookieName:"",rwebOptInCookieNewValue:"on",testMode:!1}),this.logOptIn=function(t,e){this.scribe({component:e&&e.component,element:"delight_opt_in",action:"click"}),this.scribe({component:e&&e.component,element:"delight_opt_in_"+this.attr.rwebOptInCookieNewValue,action:"click"}),this.post({url:"/i/delight_opt_in",success:"dataLogDelightOptInSuccess",error:"dataLogDelightOptInSuccess"})},this.setCookieAndReload=function(t,e){var i=this.attr.testMode?null:".twitter.com";Object(n.a)(this.attr.rwebOptInCookieName,this.attr.rwebOptInCookieNewValue,{path:"/",domain:i,expires:365}),this.reload()},this.reload=function(){this.attr.testMode||(window.location.href="/")},this.scribeOptInModuleImpression=function(t,e){this.scribe({component:"delight_opt_in_module",action:"impression"})},this.scribeDismissOptInModule=function(t,e){this.scribe({component:"delight_opt_in_module",element:"dismiss",action:"click"})},this.after("initialize",function(){this.on("uiDelightOptInClick",this.logOptIn),this.on("uiDismissDelightOptInModule",this.scribeDismissOptInModule),this.on("uiDelightOptInModuleImpression",this.scribeOptInModuleImpression),this.on("dataLogDelightOptInSuccess",this.setCookieAndReload)})}var n=i("dsp6"),o=i("DBjh"),a=i("VtWx"),r=i("3oDc");e.a=Object(o.default)(s,a.a,r.a)},A1Ox:function(t,e,i){"use strict";(function(t){function s(){this.viewportHelpers=a.a,this.staticCardsTypes=c.a,this.defaultAttrs({containerSelector:"body",cardContainerSelector:".tweet, .js-stream-tweet",scrollThrottle:100,viewportThreshold:800,fullscreenResetHeight:100,iframeContainerSelector:".js-macaw-cards-iframe-container",unloadedCardsSelector:'.js-macaw-cards-iframe-container[data-watched!="true"]',unloadedCardsFilter:".cards-forward .js-macaw-cards-iframe-container"}),this.shouldUnloadCard=function(t){return-1===this.staticCardsTypes.indexOf(t.data("card-name"))},this.watchUnloadedCards=function(){var t=this.$container.find(this.attr.unloadedCardsFilter).filter(function(){return 0===this.children.length});t.attr("data-watched",!0),this.watchedCards=this.watchedCards.concat(t.toArray()),this.throttledProcessWatchedCards()},this.processWatchedCards=function(){if(!this.isInFullscreen()){for(var e=void 0,i=0;i<this.watchedCards.length;)e=this.watchedCards[i],a.a.isWithinBounds(this.$viewport,t(e),this.attr.viewportThreshold)?(this.loadCard(e),this.loadedCards.push(e),this.watchedCards.splice(i,1)):i+=1;for(i=0;i<this.loadedCards.length;)if(e=this.loadedCards[i],a.a.isWithinBounds(this.$viewport,t(e),this.attr.viewportThreshold))i+=1;else{var s=t(e),n=s.find("iframe").attr("height");n&&s.css("min-height",n+"px"),this.shouldUnloadCard(s)&&(this.unloadCard(e),this.watchedCards.push(e)),this.loadedCards.splice(i,1)}}},this._getCardContainer=function(e){return t(e).closest(this.attr.cardContainerSelector)},this.loadCard=function(t){this.createCard(this._getCardContainer(t)),this.trigger("uiDynamicCardLoaded")},this.unloadCard=function(t){this.destroyCard(this._getCardContainer(t)),this.trigger("uiDynamicCardUnloaded")},this.handleUnloadCards=function(t){t.stopPropagation(),this.destroyAllCards(),this.watchedCards=[],this.loadedCards=[],this.$container.find(this.attr.iframeContainerSelector).removeAttr("data-watched")},this.resetWatchedCards=function(){this.watchedCards=[],this.$container.find(this.attr.iframeContainerSelector).removeAttr("data-watched"),this.watchUnloadedCards()},this.isInFullscreen=function(){return document.webkitFullscreenElement||document.msFullscreenElement||document.fullscreenElement||document.mozFullScreenElement},this.fullScreenChange=function(e){var i=this;this.isInFullscreen()?(this.bindingTimeout&&(clearTimeout(this.bindingTimeout),this.bindingTimeout=void 0),this.$fullscreenTweet=t(e.target).closest(this.attr.cardContainerSelector),this.off("scroll",this.throttledProcessWatchedCards),this.off(this.$viewport,"resize",this.throttledProcessWatchedCards)):(this.$fullscreenTweet&&1===this.$fullscreenTweet.length&&(window.scrollTo(0,this.$fullscreenTweet.offset().top-this.attr.fullscreenResetHeight),this.$fullscreenTweet=void 0),this.bindingTimeout=setTimeout(function(){i.on("scroll",i.throttledProcessWatchedCards),i.on(i.$viewport,"resize",i.throttledProcessWatchedCards)},1e3))},this.reloadAllCards=function(t,e){this.handleUnloadCards(t,e),this.watchUnloadedCards()},this.cleanup=function(){this.watchedCards.forEach(this.unloadCard.bind(this)),this.loadedCards.forEach(this.unloadCard.bind(this)),this.$container=null,this.off(document,"uiPageChanged"),this.off("scroll"),this.off(this.$viewport,"resize")},this.before("teardown",function(){this.cleanup()}),this.after("initialize",function(){this.$container=this.node===window?t(this.attr.containerSelector):this.select("containerSelector"),this.$container.length||(this.$container=this.$node),this.watchedCards=[],this.loadedCards=[],this.on(document,"uiPageChanged",this.resetWatchedCards),this.on(document,"uiReloadAllCards",this.reloadAllCards),this.on(this.$container,"uiUnloadAllCards",this.handleUnloadCards),this.throttledProcessWatchedCards=r.default.throttle(this.processWatchedCards.bind(this),this.attr.scrollThrottle),this.on("scroll",this.throttledProcessWatchedCards),this.$viewport=this.node===document?t(window):this.$node,this.on(this.$viewport,"resize",this.throttledProcessWatchedCards),this.on(document,"uiWatchUnloadedCards",this.watchUnloadedCards),this.on(document,"webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",this.fullScreenChange),this.watchUnloadedCards()})}var n=i("DBjh"),o=i("dUMM"),a=i("/LRg"),r=i("YzIt"),c=i("ZDao");e.a=Object(n.default)(o.a,s)}).call(e,i("4kSj"))},AHbL:function(t,e,i){"use strict";(function(t){function s(){this.showTooltip=function(e){this.getStore().setItem("seen_add_Tweet_tooltip","1"),t(e.target).tooltip("show"),this.off("uiMaybeShowAddAnotherTweetTooltip")},this.getStore=function(){return this.tweetstormStore||(this.tweetstormStore=new o.a("tweetstorm_"+a.a.user.id)),this.tweetstormStore},this.after("initialize",function(){this.getStore().getItem("seen_add_Tweet_tooltip")||this.on("uiShowAddAnotherTweetTooltip",this.showTooltip)})}var n=i("DBjh"),o=i("WODX"),a=i("IAMj");e.a=Object(n.default)(s)}).call(e,i("4kSj"))},Ac9p:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({pastedContentSelector:".feedback-json-output",debugKeySelectorSelector:"select[name=debug-key]",debugDataText:"",dialogToggleSelector:".feedback-dialog .feedback-data-toggle"}),this.toggleDebugEnabled=function(e,i){this.trigger("uiToggleDebugFeedback",{enabled:t(i.el).is(".off")})},this.prepareDialog=function(t,e){this.trigger("uiNeedsFeedbackData")},this.openDialog=function(t,e){this.debugData=e,this.refreshAvailableDataKeys(),this.open()},this.refreshAvailableDataKeys=function(){var e=this.select("debugKeySelectorSelector");e.empty(),Object.keys(this.debugData).forEach(function(i){var s=t("<option>"+i+"</option>");e.append(s)}),this.refreshDebugJSON()},this.refreshDebugJSON=function(t){var e=this.select("debugKeySelectorSelector").val();if(e&&this.debugData[e]){var i=this.debugData[e].map(function(t){return t.data});this.select("pastedContentSelector").html(JSON.stringify(i,void 0,2))}},this.after("initialize",function(){this.on(document,"dataFeedback",this.openDialog),this.on(document,"uiPrepareFeedbackDialog",this.prepareDialog),this.on("change",{debugKeySelectorSelector:this.refreshDebugJSON}),this.on("click",{dialogToggleSelector:this.toggleDebugEnabled})})}var n=i("DBjh"),o=i("UHc7");e.a=Object(n.default)(s,o.a)}).call(e,i("4kSj"))},B55N:function(t,e,i){"use strict";function s(t,e){if(t=t||{enabled:!1,title:null},t.enabled){var i=n(t.title,"resolved","info"),s=n(t.title,"rejected","warn");return e.then(i,function(t){throw s(t)})}return e}function n(t,e,i){return function(i){("["+e+"] "+(t||"")).trim();return i}}e.a=s},BDSG:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div id="kb-shortcuts-msg" class="visuallyhidden">\n  <h2>Keyboard Shortcuts</h2>\n  <p>\n    Keyboard shortcuts are available for common actions and site navigation.\n'),s.b('    <button id="show-shortcuts-btn" type="button" tabindex="-1">View Keyboard Shortcuts</button>\n    <button id="dismiss-shortcuts-btn" type="button" tabindex="-1">Dismiss this message</button>\n  </p>\n</div>'),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},Bcvv:function(t,e,i){"use strict";function s(){this.defaultAttrs({defaultAjaxData:{include_entities:1,include_available_features:1},noShowError:!0,startPollingInterval:7500,maxPollingInterval:6e4}),this.requestItems=function(t,e){t&&t.stopPropagation();var i=function(i){this.hasTornDown||(e.isNewItemRequest?this.hasActiveNewItemsRequest=!1:this.hasActiveOldItemsRequest=!1,this.trigger(t.target,"dataGotMoreTimelineItems",i),this.trigger("uiHideGlobalLoadingIndicator"))},s=this.requestInterval,n=function(i){this.hasTornDown||(i&&i.xhr&&"timeout"===i.xhr.statusText&&s===this.requestInterval&&(this.requestInterval=Math.min(2*this.requestInterval,this.attr.maxPollingInterval)),e.isNewItemRequest?this.hasActiveNewItemsRequest=!1:this.hasActiveOldItemsRequest=!1,this.trigger(t.target,"dataGotMoreTimelineItemsError",i),this.trigger("uiHideGlobalLoadingIndicator"))},o=e&&e.headers||{};e&&e.fromPolling&&(o["X-Twitter-Polling"]=!0);var r={contextual_tweet_id:e.contextual_tweet_id,cursor:e.cursor,cursor_index:e.cursor_index,cursor_offset:e.cursor_offset,min_position:e.min_position,max_position:e.max_position,is_forward:e.is_forward,latent_count:e.latent_count,composed_count:e.composed_count,composed_ids:e.composed_ids,include_new_items_bar:e.include_new_items_bar,interval:e.interval,count:e.count,timeline_empty:e.timeline_empty,reset_error_state:e.reset_error_state};e.query&&(r.q=e.query),e.curated_timeline_since_id&&(r.curated_timeline_since_id=e.curated_timeline_since_id),e.scroll_cursor&&(r.scroll_cursor=e.scroll_cursor),e.refresh_cursor&&(r.refresh_cursor=e.refresh_cursor),e.excluded&&(r.excluded=e.excluded),e.isNewItemRequest&&this.hasActiveNewItemsRequest||!e.isNewItemRequest&&this.hasActiveOldItemsRequest||(this.hasActiveNewItemsRequest=!(!this.hasActiveNewItemsRequest&&!e.isNewItemRequest),this.hasActiveOldItemsRequest=!(!this.hasActiveOldItemsRequest&&e.isNewItemRequest),this.get({url:this.attr.endpoint,headers:o,timeout:this.requestInterval,data:a({},this.attr.defaultAjaxData,r),eventData:e,success:i.bind(this),error:n.bind(this)}))},this.before("teardown",function(){this.hasTornDown=!0}),this.after("initialize",function(){this.hasActiveNewItemsRequest=!1,this.hasActiveOldItemsRequest=!1,this.requestInterval=this.attr.startPollingInterval,this.on("uiWantsMoreTimelineItems",this.requestItems)})}var n=i("DBjh"),o=i("VtWx"),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=Object(n.default)(s,o.a)},BsGa:function(t,e,i){"use strict";function s(){var t=0;this.triggerUnreadCount=function(e,i){i=i||{},t=i.msgCount,t>0?this.trigger(e.target,"dataUserHasUnreadDMsWithCount",{msgCount:t}):this.trigger(e.target,"dataUserHasNoUnreadDMsWithCount")},this.dispatchUnreadNotification=function(t,e){var i=e&&e.d||{};"ok"===i.status&&null!=i.response&&this.triggerUnreadCount(t,{msgCount:i.response})},this.checkForEnvelope=function(e,i){i&&"profile"===i.section&&this.triggerUnreadCount(e,{msgCount:t})},this.after("initialize",function(){this.on("uiReadStateChanged",this.triggerUnreadCount),this.on("dataNotificationsReceived",this.dispatchUnreadNotification),this.on("uiPageChanged",this.checkForEnvelope)})}var n=i("DBjh");e.a=Object(n.default)(s)},BtBL:function(t,e,i){"use strict";function s(){n.default.mixin(this,[r.a]),this.defaultAttrs({emojiPickerSelector:".EmojiPicker"}),this.insertEmoji=function(t,e){this.trigger("uiInsertText",{text:e.unicode,noFocus:!0})},this.after("reset",function(){this.select("emojiPickerSelector").each(function(t,e){e.style.display="none",e.offsetHeight,e.style.display=""})}),this.after("initialize",function(){var t=a.default.merge(this.attr.eventData,{scribeContext:{element:"emoji_picker"}},!0);this.attachChild(o.a,this.select("emojiPickerSelector"),{eventData:t,preferredGravity:this.attr.preferredGravity,preferredWeight:this.attr.preferredWeight,preventDropdownsOpeningUp:this.attr.preventDropdownsOpeningUp,restoreFocusOnClose:!0,additionalTopBarPositionSelector:this.attr.additionalTopBarPositionSelector}),this.on("uiEmojiPicked",this.insertEmoji);var e=this.select("emojiPickerSelector");e.length&&this.on(e,"uiDropdownClosed",this.focus)})}var n=i("q9/C"),o=i("IunQ"),a=i("YzIt"),r=i("AJAn");e.a=s},Bugu:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={"dialogs/close_button":i("38hD")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div id="confirm_dialog" class="modal-container">\n  <div class="modal draggable">\n    <div class="modal-content">\n'),s.b(s.rp("<dialogs/close_button0",t,e,"      ")),s.b('      <div class="modal-header">\n        <h3 class="modal-title">'),s.b(s.v(s.f("title_text",t,e,0))),s.b("</h3>\n      </div>\n"),s.s(s.f("body_text",t,e,1),t,e,0,264,374,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('        <div class="modal-body">\n          <p class="modal-body-text">'),i.b(i.v(i.f("body_text",t,e,0))),i.b("</p>\n        </div>\n")}),t.pop()),s.b('      <div class="modal-footer">\n        <button class="EdgeButton EdgeButton--tertiary js-close" id="confirm_dialog_cancel_button">'),s.b(s.v(s.f("cancel_text",t,e,0))),s.b('</button>\n        <button id="confirm_dialog_submit_button" class="EdgeButton '),s.s(s.f("danger",t,e,1),t,e,0,625,643,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("EdgeButton--danger")}),t.pop()),s.b(" "),s.s(s.f("danger",t,e,1),t,e,1,0,0,"")||s.b("EdgeButton--primary"),s.b(' modal-submit">'),s.b(s.v(s.f("submit_text",t,e,0))),s.b("</button>\n      </div>\n    </div>\n  </div>\n</div>\n"),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},Bz2s:function(t,e,i){"use strict";function s(t){this.attr={id:null,items:[],limit:0,searchPathWithQuery:"/search?src=savs&q=",querySource:"saved_search_click"},this.attr=n.default.merge(this.attr,t),this.getRemoteSuggestions=function(t,e,i){return i},this.requiresRemoteSuggestions=function(t){return!1},this.getLocalSuggestions=function(t,e){if(t&&t.query){e(this.attr.items.filter(function(e){return 0===e.name.indexOf(t.query)}).slice(0,this.attr.limit))}else e(this.attr.items)},this.addSavedSearch=function(t){t&&t.query&&this.attr.items.push({id:t.id,id_str:t.id_str,name:t.name,query:t.query,saved_search_path:this.attr.searchPathWithQuery+encodeURIComponent(t.query),search_query_source:this.attr.querySource})},this.removeSavedSearch=function(t){if(t&&t.query)for(var e=this.attr.items,i=0;i<e.length;i++)if(e[i].query===t.query||e[i].name===t.query)return void e.splice(i,1)}}var n=i("YzIt");e.a=s},CA0f:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({timestampSelector:".tweet-timestamp",relativeTimestampSelector:".js-relative-timestamp",relativeTimestampClass:"js-relative-timestamp"}),this.currentTimeSecs=function(){return new Date/1e3},this.updateAccessibleShortTimestamp=function(e,i){var s=this.currentTimeSecs();if(!(Math.floor(s-i)<3)){var n=r.format(i-s),o=e.closest(this.attr.timestampSelector),a=o.find(".u-hiddenVisually");a.length||(o.find(this.attr.relativeTimestampSelector).removeAttr("data-aria-label-part").attr("aria-hidden","true"),a=t(l),o.append(a)),a.text(n)}},this.updateTimestamps=function(){var e=this;this.select("relativeTimestampSelector").each(function(i,s){var n=t(s),o=n.data("time"),a=e.formatTimestamp(o);a.relative||n.removeClass(e.attr.relativeTimestampClass),n.text(a.text),e.updateAccessibleShortTimestamp(n,o)})},this.formatTimestamp=function(t){var e=this,i=this.currentTimeSecs(),s=Math.floor(i-t),n=void 0;return s<3?n=c:(n=r.format(s,{direction:"none",type:this.timespanType}),this.localizedDigits&&(n=n.replace(/\d/g,function(t){return e.localizedDigits.charAt(t.charCodeAt(0)-"0".charCodeAt(0))}))),{text:n,relative:!0}},this.after("initialize",function(){var e=t("html").attr("lang");this.timespanType="en"===e||"en-gb"===e?"abbreviated":"short",this.localizedDigits={ar:"٠١٢٣٤٥٦٧٨٩",fa:"۰۱۲۳۴۵۶۷۸۹"}[e],this.on(document,"uiWantsToRefreshTimestamps uiPageChanged",this.updateTimestamps)})}var n=i("0d4m"),o=i("ZVSr"),a=i.n(o),r=new a.a.TimespanFormatter,c=Object(n.default)("now"),l='<span class="u-hiddenVisually" data-aria-label-part="last"></span>';e.a=s}).call(e,i("4kSj"))},CDlE:function(t,e,i){"use strict";function s(){this.attributes({nextButtonSelector:".dm-initiate-conversation",dmTypeaheadSelector:".DMDialogTypeahead",maxParticipants:50,currentUserId:null}),this.enable=function(){this.select("nextButtonSelector").removeClass("disabled").prop("disabled",!1)},this.disable=function(){this.select("nextButtonSelector").addClass("disabled").prop("disabled",!0)},this.isGroupSelected=function(t,e){return e&&e.groups&&e.groups.length},this.initiateConversationFromSelectedGroup=function(t,e){var i=e.groups[0];this.initiateConversation("uiRenderConversationView",{conversation_id:i.id,name:i.name})},this.isNextButtonSelected=function(t,e){return"click"===t.type||"keydown"===t.type&&t.which===r.a.ENTER},this.initiateConversationFromSelectedAccounts=function(){var t=void 0,e=void 0;switch(this.selectedAccounts.length){case 0:t="uiRenderNewConversationView",e={name:"@"+this.manualScreenName,screen_names:this.manualScreenName?[this.manualScreenName]:[]};break;case 1:var i=this.selectedAccounts[0];t="uiRenderConversationView",e={conversation_id:o.a.generateConversationId(this.attr.currentUserId,i.id),name:i.name,is_oto:!0};break;default:var s=this.selectedAccounts.map(function(t){return t.id});t="uiRenderNewConversationView",e={name:o.a.generateConversationName(this.selectedAccounts),recipient_ids:s}}this.initiateConversation(t,e)},this.reset=function(t,e){this.trigger("uiInitializeDMTypeahead"),this.defaultComposerText=e&&e.default_composer_text||"",this.hasTweetAttachment=e&&e.has_tweet_attachment||!1},this.storeSelectedAccounts=function(t,e){this.selectedAccounts=e.accounts||[]},this.handleTextChange=function(t,e){var i=(e.text||"").replace(/^@/,"");this.manualScreenName=l.a.isValidUsername("@"+i)?i:""},this.initiateConversation=function(t,e){this.trigger(t,u({},e,{default_composer_text:this.defaultComposerText,has_tweet_attachment:this.hasTweetAttachment,retain_tweet_attachment:!0})),this.reset()},this.updateState=function(t,e){var i=this.manualScreenName,s=this.selectedAccounts.length;i||s?this.enable():this.disable()},this.after("handleTextChange",this.updateState),this.after("storeSelectedAccounts",this.updateState),this.after("reset",this.updateState),this.after("initialize",function(){this.attachChild(h.a,this.$node,{maxItems:this.attr.maxParticipants-1}),this.selectedAccounts=[],this.on("uiDMTypeaheadSelectedItemsChanged",this.storeSelectedAccounts),this.on("uiDMTypeaheadSelectedItemsChanged",Object(a.a)(this.initiateConversationFromSelectedGroup,this.isGroupSelected)),this.on("uiTextChanged",this.handleTextChange),this.on("click keydown",{nextButtonSelector:Object(a.a)(this.initiateConversationFromSelectedAccounts,this.isNextButtonSelected)}),this.on(document,"uiOpenNewDM",this.reset)})}var n=i("DBjh"),o=i("WRDM"),a=i("4oun"),r=i("i3qs"),c=i("CZTd"),l=i.n(c),h=i("7VCw"),d=i("AJAn"),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},p=Object(n.default)(s,d.a);e.a=p},CGr6:function(t,e,i){"use strict";(function(t){function s(){n.default.mixin(this,[c.a]),this.defaultAttrs({pollCreatorSelector:".PollCreator",pollingCardComposeViewSelector:".PollingCardComposer",pollComposeViewOptionsSelector:".PollingCardComposer-option",pollComposeViewOptionsInputSelector:".PollingCardComposer-optionInput",pollComposeViewRemoveSelector:".PollingCardComposer-remove",pollComposeViewAddOptionSelector:".PollingCardComposer-addOption",pollComposeViewDefaultDurationSelector:".PollingCardComposer-defaultDuration",pollComposeViewCustomDurationDaysSelector:".PollingCardComposer-customDuration--days",pollComposeViewCustomDurationHoursSelector:".PollingCardComposer-customDuration--hours",pollComposeViewCustomDurationMinutesSelector:".PollingCardComposer-customDuration--minutes",hiddenClass:"u-hidden",pollComposeViewActiveClass:"is-cardComposerOn is-pollingCardComposerOn",composerRowsAttr:"data-poll-composer-rows",pollOption3FlagAttr:"data-poll-option-3",pollOption4FlagAttr:"data-poll-option-4",customDurationAttr:"data-custom-duration",minimalDurationAttr:"data-poll-min-duration",maximalDurationAttr:"data-poll-max-duration",durationTargetAttr:"data-duration-target"});this.hasPoll=!1,this.currentPoll={},this.pollDurationMin=0,this.pollDurationMax=0,this.durationDays=0,this.durationHours=0,this.durationMinutes=0,this.togglePollComposer=function(){this.hasPoll?(this.trigger("uiResetPollComposer"),this.focus()):this.trigger("uiActivatePollComposer")},this.activatePoll=function(t,e){var i="object"===(void 0===e?"undefined":l(e))&&e.pollDataOverride;"object"===(void 0===i?"undefined":l(i))&&r.a.putPoll(this.getTweetboxId(),i),this.hasPoll=!0,this.currentPoll=r.a.getPoll(this.getTweetboxId()),this._setOptions(),this.toggleComposeView(),this.focusOnInput(),"number"==typeof this.currentPoll.customDuration&&this.renderCustomDurationFromData(),this.trigger("uiPollActivated")},this.resetPoll=function(){this.hasPoll=!1,r.a.deletePoll(this.getTweetboxId()),this.currentPoll={},this.$composeOptions.trigger("uiPollOptionReset"),this.toggleComposeView(),this.turnOffCustomDuration()},this.overridePollData=function(t,e){r.a.putPoll(this.getTweetboxId(),e)},this.toggleComposeView=function(){this.$composeView.toggleClass(this.attr.hiddenClass),this.$node.toggleClass(this.attr.pollComposeViewActiveClass),this.detectUpdatedText(!0)},this.focusOnInput=function(t){var e=t||0;this.trigger(this.$composeOptions.eq(e),"uiPollOptionFocus")},this.addPollOption=function(){this.currentPoll.addPollOption(),this._setOptions(),this.trigger("uiPollOptionAdd"),this.focusOnInput(this.currentPoll.length),this.select("pollComposeViewAddOptionSelector").blur()},this.removePollOption=function(t,e){this.currentPoll.deletePollOption(e.index),this._setOptions(),this.focusOnInput(this.currentPoll.length-1)},this.updateOption=function(t,e){e.index<this.currentPoll.length&&this.currentPoll.updatePollOption(e.index,e.text)},this.getPollData=function(){return this.currentPoll.createData},this._setOptions=function(){var t=this;switch(this.currentPoll.length){case 2:this.$node.attr(this.attr.composerRowsAttr,3),this.$composeView.attr(this.attr.pollOption3FlagAttr,!1),this.$composeView.attr(this.attr.pollOption4FlagAttr,!1);break;case 3:case 4:this.$node.attr(this.attr.composerRowsAttr,4),this.$composeView.attr(this.attr.pollOption3FlagAttr,!0),this.$composeView.attr(this.attr.pollOption4FlagAttr,4===this.currentPoll.length)}this.currentPoll.pollOptions.forEach(function(e,i){t.$composeOptions.eq(i).trigger("uiPollOptionUpdate",{option:e})})},this.renderCustomDurationFromData=function(){this.$composeView.attr(this.attr.customDurationAttr,!0),this._calculateSettingsFromCustomDuration(),this._updateCustomDurationElementsFromSettings()},this.turnOnCustomDuration=function(){this.currentPoll.customDuration||(this.currentPoll.customDuration=1440,this.renderCustomDurationFromData(),this.select("pollComposeViewCustomDurationDaysSelector").focus(),this.trigger("uiTurnOnCustomPollDuration"))},this.turnOffCustomDuration=function(){this.currentPoll.customDuration=null,this.$composeView.attr(this.attr.customDurationAttr,!1)},this._updateCustomDuration=function(e){var i=e&&e.target?t(e.target).attr(this.attr.durationTargetAttr):"";if(this._updateCustomDurationSettingsFromElements(),this._calculateCustomDurationFromSettings(),this.currentPoll.customDuration<this.pollDurationMin){var s=this.pollDurationMin-this.currentPoll.customDuration;"days"===i&&(0===this.durationMinutes||s>=60)?(this.durationHours=Math.max(1,Math.floor(this.pollDurationMin/60)),this.durationMinutes=Math.max(0,this.pollDurationMin-60*this.durationHours)):(this.durationHours=Math.floor(this.pollDurationMin/60),this.durationMinutes=Math.max(1,this.pollDurationMin-60*this.durationHours)),this._calculateCustomDurationFromSettings(),this._updateCustomDurationElementsFromSettings()}else this.currentPoll.customDuration>this.pollDurationMax&&(this.currentPoll.customDuration=this.pollDurationMax,this._calculateSettingsFromCustomDuration(),this._updateCustomDurationElementsFromSettings());this._disableUnavailableDurationOptions()},this._disableUnavailableDurationOptions=function(){var t=Math.max(0,this.pollDurationMin-1440*this.durationDays),e=this.pollDurationMax-1440*this.durationDays,i=Math.floor(t/60),s=Math.floor(e/60);this.select("pollComposeViewCustomDurationHoursSelector").children().toArray().forEach(function(t,e){return t.disabled=t.value<i||t.value>s}),t-=60*this.durationHours,e-=60*this.durationHours,this.select("pollComposeViewCustomDurationMinutesSelector").children().toArray().forEach(function(i,s){return i.disabled=i.value<t||i.value>e})},this._updateCustomDurationElementsFromSettings=function(){this.select("pollComposeViewCustomDurationDaysSelector").val(this.durationDays),this.select("pollComposeViewCustomDurationHoursSelector").val(this.durationHours),this.select("pollComposeViewCustomDurationMinutesSelector").val(this.durationMinutes)},this._updateCustomDurationSettingsFromElements=function(){this.durationDays=Number(this.select("pollComposeViewCustomDurationDaysSelector").val()||0),this.durationHours=Number(this.select("pollComposeViewCustomDurationHoursSelector").val()||0),this.durationMinutes=Number(this.select("pollComposeViewCustomDurationMinutesSelector").val()||0)},this._calculateCustomDurationFromSettings=function(){this.currentPoll.customDuration=1440*this.durationDays+60*this.durationHours+this.durationMinutes},this._calculateSettingsFromCustomDuration=function(){this.durationDays=Math.floor(this.currentPoll.customDuration/1440),this.durationHours=Math.floor(this.currentPoll.customDuration%1440/60),this.durationMinutes=this.currentPoll.customDuration%60},this.around("isEmpty",function(t){return t()&&!this.hasPoll}),this.around("hasValidContent",function(t){return this.hasPoll?""!==this.getVisibleText().trim()&&this.currentPoll.isValid&&!this.dmMode&&t():t()}),this.after("reset",function(){this.hasPoll&&this.trigger("uiResetPollComposer")}),this.after("initialize",function(){this.$composeView=this.select("pollingCardComposeViewSelector"),this.$composeOptions=this.select("pollComposeViewOptionsSelector"),this.pollDurationMin=Number(this.$composeView.attr(this.attr.minimalDurationAttr)),this.pollDurationMax=Number(this.$composeView.attr(this.attr.maximalDurationAttr)),this.on("uiActivatePollComposer",this.activatePoll),this.on("uiResetPollComposer",this.resetPoll),this.on("uiTogglePollComposer",this.togglePollComposer),this.on("uiPollOptionTextChange",this.updateOption),this.on("uiPollOptionRemove",this.removePollOption),this.on("click",{pollComposeViewRemoveSelector:"uiResetPollComposer",pollComposeViewAddOptionSelector:this.addPollOption,pollComposeViewDefaultDurationSelector:this.turnOnCustomDuration}),this.on("change",{pollComposeViewCustomDurationDaysSelector:this._updateCustomDuration,pollComposeViewCustomDurationHoursSelector:this._updateCustomDuration,pollComposeViewCustomDurationMinutesSelector:this._updateCustomDuration}),this.attachChild(a.a,this.select("pollCreatorSelector"),{eventData:{scribeContext:{element:"poll_composer"}}}),this.attachChild(o.a,this.$composeOptions,{maxLength:r.a.MAX_OPTION_LENGTH,richEditorTextSelector:this.attr.pollComposeViewOptionsInputSelector})})}var n=i("q9/C"),o=i("VX1t"),a=i("XPsf"),r=i("LYwl"),c=i("AJAn"),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a=s}).call(e,i("4kSj"))},CNhr:function(t,e,i){"use strict";(function(t){function i(){this.defaultAttrs({adaptivePhotoContainer:".js-adaptive-photo",adaptiveMediaContainer:".AdaptiveMedia"}),this.getPermalinkPath=function(t){return t.closest(this.attr.streamItemSelector).find(this.attr.permalinkSelector).attr("href")},this.openAdaptiveMediaGallery=function(e,i){e.preventDefault(),e.stopPropagation();var s=t(e.target).closest(this.attr.adaptivePhotoContainer);this.trigger(e.target,"uiOpenGallery",{timelineSelector:this.attr.adaptiveMediaContainer,inOverlay:this.attr.inOverlay});var n=s.closest("[data-impression-id]");n.length&&(n.attr("data-embedded-media-logged",!0),this.trigger("uiEmbeddedMedia",{impressionId:n.data("impression-id"),disclosureType:n.data("disclosure-type")})),i&&i.skipClickScribe||this.trigger("uiMediaThumbnailClick",{url:s.attr("data-image-url"),mediaType:"photo"})},this.openSelectedTweetAdaptiveMediaGallery=function(e){this.trigger(t(e.target).find(this.attr.adaptivePhotoContainer),"uiKeyboardOpenAdaptiveGallery",{skipClickScribe:!0})},this.after("initialize",function(){this.on(document,"uiOpenSelectedPhoto",this.openSelectedTweetAdaptiveMediaGallery),this.on("click uiKeyboardOpenAdaptiveGallery",{adaptivePhotoContainer:this.openAdaptiveMediaGallery})})}e.a=i}).call(e,i("4kSj"))},CsBf:function(t,e,i){"use strict";function s(){this.attributes({maxCharacters:20,displayedHeaderSelector:".DMUpdateName-header",displayedNameSelector:".DMUpdateName-name",beginEditModeSelector:".DMUpdateName-name.edit-allowed",confirmButtonSelector:".DMUpdateName-confirm",inputGroupSelector:".DMUpdateName-form",spinnerSelector:".DMUpdateName-spinner",displayedScreenNameSelector:".DMUpdateName-screenName",textSelector:".DMUpdateName-input",updateNameContainerSelector:".DMUpdateName-controls",verifiedBadgeSelector:".js-verified",protectedBadgeSelector:".js-protected",isRichHeaderClass:"is-richHeader",hiddenClass:"u-hidden",legacyHiddenClass:"hidden",invalidInputClass:"is-invalid"}),this.getCurrentName=function(){return this.$displayedName.data("raw-name")},this.handleCommandInputs=function(t,e){switch(t.keyCode){case l.a.ESC:t.stopPropagation(),this.hideEditMode();break;case l.a.ENTER:t.stopPropagation(),this.requestUpdateConversationName(t)}},this.showEditMode=function(){this.select("displayedHeaderSelector").addClass(this.attr.hiddenClass),this.select("inputGroupSelector").removeClass(this.attr.hiddenClass),this.select("textSelector").focus().val(this.getCurrentName()),this.inEditMode=!0},this.hideEditMode=function(t,e){this.select("displayedHeaderSelector").removeClass(this.attr.hiddenClass),this.select("inputGroupSelector").addClass(this.attr.hiddenClass),this.inEditMode=!1},this.showSpinner=function(){this.select("textSelector").unbind("blur"),this.hideEditMode(),this.select("displayedHeaderSelector").addClass(this.attr.hiddenClass),this.select("spinnerSelector").removeClass(this.attr.hiddenClass)},this.hideSpinner=function(){this.on(this.attr.textSelector,"blur",this.hideEditMode),this.hideEditMode(),this.select("spinnerSelector").addClass(this.attr.hiddenClass),this.select("displayedHeaderSelector").removeClass(this.attr.hiddenClass)},this.requestUpdateConversationName=function(t){if(this.inEditMode&&!this.select("inputGroupSelector").hasClass(this.attr.invalidInputClass)){var e=this.select("textSelector").val();this.trigger("uiUpdateConversationName",{conversation_id:this.conversationId,name:e}),this.showSpinner()}},this.updateDisplayedName=function(t,e){this.$displayedName.html(e.conversation.title.html),this.hideSpinner()},this.prepareUpdateNameUI=function(t){void 0===t.is_oto||t.is_oto||!t.is_trusted?(this.hideSpinner(),this.select("updateNameContainerSelector").addClass(this.attr.hiddenClass),this.select("displayedNameSelector").removeClass("edit-allowed js-tooltip").removeAttr("title")):this.inEditMode||(this.hideSpinner(),this.select("updateNameContainerSelector").removeClass(this.attr.hiddenClass),this.select("displayedNameSelector").attr("title",Object(n.default)("Click to edit group name")).addClass("edit-allowed js-tooltip"))},this.handleInputChange=function(t,e){var i=r.a.getUnicodeTextLength(e.text)>this.attr.maxCharacters;this.select("inputGroupSelector").toggleClass(this.attr.invalidInputClass,i)},this.detectInputChange=function(){var t=this.select("textSelector").val();this.previousText!==t&&(this.trigger("uiTextChanged",{text:t}),this.previousText=t)},this.initName=function(t,e){this.inEditMode=!1,this.conversationId=e.conversation_id;var i=e.is_oto&&void 0===this.conversationId,s=e.name||e.generated_name,n=i?"text":"html";this.$displayedName.empty().removeData("raw-name"),s&&this.$displayedName[n](s),this.$dmUpdateName.removeClass(this.attr.isRichHeaderClass),this.select("verifiedBadgeSelector").addClass(this.attr.legacyHiddenClass),this.select("protectedBadgeSelector").addClass(this.attr.legacyHiddenClass),this.prepareUpdateNameUI(e)},this.updateName=function(t,e){if(this.conversationId=e.conversation_id,!this.inEditMode){if(this.$displayedName.html(e.html).data("raw-name",e.raw),e.is_oto){this.$dmUpdateName.addClass(this.attr.isRichHeaderClass),this.select("verifiedBadgeSelector").toggleClass(this.attr.legacyHiddenClass,!e.verified),this.select("protectedBadgeSelector").toggleClass(this.attr.legacyHiddenClass,!e.protected);var i=e.screen_name?"@"+e.screen_name:null;this.$displayedScreenName.text(i)}this.prepareUpdateNameUI(e)}},this.after("initialize",function(){this.$dmUpdateName=this.$node,this.$displayedScreenName=this.select("displayedScreenNameSelector"),this.$displayedName=this.select("displayedNameSelector"),this.on("click",{beginEditModeSelector:this.showEditMode}),this.on("mousedown",{confirmButtonSelector:this.requestUpdateConversationName}),this.on(this.attr.textSelector,"blur",this.hideEditMode),this.on(this.attr.textSelector,"keydown",this.handleCommandInputs),this.on("uiEditConversationName",this.showEditMode),this.on("dataUpdateConversationNameSuccess",this.updateDisplayedName),this.on("dataUpdateConversationNameFailure",this.hideSpinner),this.on("uiTextChanged",this.handleInputChange),this.on("uiInputPoll",this.detectInputChange),this.on("uiDMUpdateConversationName",this.updateName),this.on("uiDMInitConversationName",this.initName),c.a.attachTo(this.select("textSelector"))})}var n=i("0d4m"),o=i("DBjh"),a=i("CZTd"),r=i.n(a),c=i("ZWfe"),l=i("i3qs"),h=Object(o.default)(s);e.a=h},CtjH:function(t,e,i){"use strict";function s(){this.after("initialize",function(){this.scribeOnEvent("uiPromptbirdPromptWasShown",{action:"impression"}),this.scribeOnEvent("uiInlinePromptScrolledIn",{action:"impression"}),this.scribeOnEvent("uiPromptbirdClick",{action:"click"}),this.scribeOnEvent("uiPromptbirdDismissPrompt",{action:"dismiss"}),this.scribeOnEvent("uiPromptbirdPreviewPromotedAccount",{action:"preview"}),this.scribeOnEvent("uiShowDashboardProfilePromptbird",{action:"show"})})}var n=i("DBjh"),o=i("3oDc");e.a=Object(n.default)(s,o.a)},Cy9X:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({addTweetSelector:".js-add-tweet",composerThumbnailSelector:".ComposerThumbnail",shadowTextSelector:".tweet-box-shadow",messagingClass:"messaging",tweetActionSelector:".tweet-action",placeIdSelector:"input[name=place_id]",replyFormSelector:".tweet-form.is-reply",tweetBoxDialogSelector:null,tweetFormSelector:".tweet-form",tweetBoxDialogType:null,overrides:{},condensable:!1,suppressFlashMessage:!1,suppressSuccessMessage:!1,customData:{},canTweetDefaultText:!1,gifSupport:!0,videoSupport:!0,sruAllMedia:!1,composeAltText:!1}),this.confirmAndSendTweet=function(){this.sendTweet()},this.geoPlaceId=function(){return this.select("placeIdSelector").val()},this.createDataForSending=function(){return{status:this.addHiddenText(this.getVisibleText()),card_uri:this.cardUri?this.cardUri:void 0,place_id:this.geoPlaceId(),tweet_stat_count:this.overrides.tweetStatCount,impression_id:this.impressionId,earned:this.disclosureType?"earned"===this.disclosureType:void 0,is_permalink_page:t(".permalink").length>0,semantic_annotation_ids:this.semanticAnnotationIds,engagement_metadata:this.overrides.engagementMetadata,batch_mode:this.overrides.canBeSelfThreaded?"subsequent":"off"}},this.isEmpty=function(){var t=this.getVisibleText().trim();return!(t&&(this.canTweetDefaultText||t!==this.defaultText.trim())||this.hasAttachment())},this.hasAttachment=function(){return!1},this.hasValidContent=function(){return!this.isEmpty()&&!this.maxReached()},this.sendTweet=function(){var t=this.getTweetboxId();this.detectUpdatedText(),this.$node.attr("id",t);var e="uiSendTweet",i=void 0,s="",o="";this.hasMedia?e="uiSendTweetWithMedia":this.hasPoll&&(e="uiSendTweetWithCard",i=this.getPollData(),s=Object(n.default)("Sorry, there was a problem creating your poll."),o=Object(n.default)("Sorry, there was a problem creating your poll. Please try again later.")),this.setTweeting(!0),this.disable(),this.trigger(e,{tweetboxId:t,tweetData:k({},this.createDataForSending()),customData:this.customData,cardData:i,clientErrorMsg:s,serverErrorMsg:o})},this.alertMedia=function(t){var e=Object(n.default)("Your Tweet has not been sent. Are you sure you wish to leave the page?");if("beforeunload"!==t.type&&"uiBeforeUnload"!==t.type){"uiDialogCloseRequested"===t.type&&(e=Object(n.default)("Are you sure you wish to close the dialog and cancel sending the Tweet?"));confirm(e)?this.trigger("dataTweetCancel",{tweetboxId:this.getTweetboxId()}):t.preventDefault()}return e},this.getTweetboxId=function(){return this.tweetboxId||(this.tweetboxId="swift_tweetbox_"+ +new Date),this.tweetboxId},this.setTweetBoxOverrides=function(t,e){var i=this,s=l.default.merge(e||this.attr.overrides,!0);this.overrides=s;var n=s.defaultText;void 0===n&&(n=this.$node.attr("data-default-text")),void 0===n&&(n=this.attr.defaultText||""),this.defaultText=n,"string"==typeof s.cardUri&&(this.cardUri=s.cardUri),this.semanticAnnotationIds=s.semanticAnnotationIds||this.$node.closest("[data-semantic-annotation-ids]").attr("data-semantic-annotation-ids"),this.canTweetDefaultText=void 0!==s.canTweetDefaultText?s.canTweetDefaultText:this.attr.canTweetDefaultText,this.impressionId=s.impressionId||this.attr.impressionId,this.disclosureType=s.disclosureType||this.attr.disclosureType,this.customData=s.customData||this.attr.customData,void 0!==s.cursorPosition?(this.cursorPosition=s.cursorPosition,setTimeout(function(){return i.setCursorPosition(i.cursorPosition)})):this.cursorPosition=this.attr.cursorPosition},this.updateTweetStateOnTextChanged=function(t,e){this.select("shadowTextSelector").val(e.text),this.updateButtons()},this.updateButtons=function(){!this.hasValidContent()||this.$node.hasClass("tweeting")?this.disable():this.enable(),this.validateAddTweetButton(),this.maybeTriggerTooltip()},this.notifyImageTweetSuccess=function(t,e){this.attr.composeAltText&&(t.tweetData.has_alt_text?this.trigger("uiTweetboxPhotoTweetWithAltTextSuccess",e):this.trigger("uiTweetboxPhotoTweetWithoutAltTextSuccess",e)),this.trigger("uiTweetboxPhotoTweetSuccess",e)},this.notifyGIFTweetSuccess=function(t){var e=this.foundMediaInfo?"uiTweetboxRemoteGifTweetSuccess":"uiTweetboxLocalGifTweetSuccess";this.trigger(e,t)},this.notifyVideoTweetSuccess=function(t){c.a.getDeciderValue("web_upload_video_advanced")&&this.trigger("uiTweetboxProVideoTweetSuccess",t),this.trigger("uiTweetboxVideoTweetSuccess",t)},this.notifyMediaTweetSuccess=function(t,e){this.isVideo&&this.notifyVideoTweetSuccess(e),this.isGif&&this.notifyGIFTweetSuccess(e),this.isVideo||this.isGif||this.notifyImageTweetSuccess(t,e)},this.getMediaDetailsForScribing=function(t){if(this.foundMediaInfo)return{photo_count:1,found_media_provider:this.foundMediaInfo.provider}},this.tweetSent=function(t,e){if((e.tweetboxId||e.sourceEventData.tweetboxId)===this.getTweetboxId()){e.customData=this.customData,!e.message||this.attr.suppressSuccessMessage&&!e.unusual||this.trigger(e.unusual?"uiShowError":"uiShowMessage",{message:e.message});var i="uiTweetboxTweetSuccess",s={id:e.tweet_id,item_type:r.a.tweet};s.media_details=this.getMediaDetailsForScribing(e);var n={scribeData:{items:[s],event_value:(this.overrides.screenNames||[]).length}};this.overrides.id?(this.notifyReplyButtonTweetSuccess(),this.excludeReplyUserIds.length&&this.trigger("uiTweetboxReplyEditedSuccess",n),i="uiTweetboxReplySuccess"):this.dmMode&&(i="uiTweetboxDMSuccess"),"uiTweetboxReplySuccess"===i||"uiTweetboxTweetSuccess"===i?this.trigger(i,k({},n,{text:this.getVisibleText()})):this.trigger(i,n),this.hasMedia?this.notifyMediaTweetSuccess(e,n):this.hasPoll&&this.trigger("uiTweetboxPollTweetSuccess",n),this.getVisibleText().match(a.a.regex)&&this.trigger("uiTweetboxEmojiTweetSuccess"),this.geoPlaceId()&&this.trigger("uiTweetboxGeotaggedTweetSuccess",n),this.setTweeting(!1),this.trigger("uiTweetSent",e),this.clear()}},this.tweetError=function(t,e){(e.tweetboxId||e.sourceEventData.tweetboxId)===this.getTweetboxId()&&(this.attr.suppressFlashMessage||e.spamChallenge||this.trigger("uiShowError",{message:e.error||e.message}),this.setTweeting(!1),this.enable(),this.trigger("uiTweetboxTweetError"))},this.tweetCancel=function(t,e){(e.tweetboxId||e.sourceEventData.tweetboxId)===this.getTweetboxId()&&(this.setTweeting(!1),this.trigger("uiTweetCancelled",e),this.clear())},this.enable=function(){this.select("tweetActionSelector").removeClass("disabled").prop("disabled",!1),this.$node.trigger("uiEnableTweetAction")},this.disable=function(){this.select("tweetActionSelector").addClass("disabled").prop("disabled",!0),this.$node.trigger("uiDisableTweetAction")},this.clear=function(){this.reset()},this.reset=function(){this.resetTweetText()},this.resetAndFocus=function(){this.reset(),this.focus(),this.setCursorPosition(),this.composerActive(),this.trigger("uiCloseDropdowns")},this.composerActive=function(){this.trigger("uiComposerActive")},this.resetTweetText=function(){this.trigger("uiClearUndoState"),this.setVisibleText(this.defaultText)},this.handleCmdEnterSubmit=function(){this.select("tweetActionSelector").hasClass("disabled")||this.confirmAndSendTweet()},this.setTweeting=function(e){e?(this.on(window,"beforeunload uiBeforeUnload",this.alertMedia),this.on(document,"uiBeforeNavigate",this.alertMedia),this.attr.tweetBoxDialogSelector&&this.on(t(this.attr.tweetBoxDialogSelector),"uiDialogCloseRequested",this.alertMedia)):(this.off(window,"beforeunload uiBeforeUnload",this.alertMedia),this.off(document,"uiBeforeNavigate",this.alertMedia),this.attr.tweetBoxDialogSelector&&this.off(t(this.attr.tweetBoxDialogSelector),"uiDialogCloseRequested",this.alertMedia)),this.$node.toggleClass("tweeting",e),this.trigger(this.$text,e?"uiDisableEditing":"uiEnableEditing")},this.keyShortcutTooltip=function(t){if(9===t.which){var e=-1!==navigator.platform.toLowerCase().indexOf("mac"),i=e?Object(n.default)("You can also press cmd-enter"):Object(n.default)("You can also press ctrl-enter");this.select("tweetActionSelector").attr("data-original-title",i).filter(document.activeElement).tooltip("show")}},this.reenableForBouncedUser=function(){this.setTweeting(!1),this.enable()},this.triggerTweetstormDialogFromInline=function(e){"tweet_box_dialog"===this.attr.tweetBoxDialogType&&this.trigger(this.$node,"uiCloseDialog"),e.preventDefault();var i=t(e.target).closest(this.attr.replyFormSelector).attr("data-previous-status-id-in-thread"),s=this.$node.find(this.attr.composerThumbnailSelector),n=s.toArray().map(function(e){return t(e).attr("data-file-id")}),o=this.currentPoll;this.$node.closest(this.attr.tweetFormSelector).attr("data-file-reuse-in-thread",!0),this.trigger("uiOpenTweetstormDialog",{tweetText:this.getVisibleText(),addAnotherTweet:!0,previousStatusIdInThread:i,mediaFileIds:n,currentPoll:o}),this.clear()},this.after("initialize",function(){this.setTweetBoxOverrides(),this.on("uiTextChanged",this.updateTweetStateOnTextChanged),this.initDraftTweets(),this.initTextNode(),this.on(this.select("tweetActionSelector"),"click",this.confirmAndSendTweet),this.on(this.select("addTweetSelector"),"click",this.triggerTweetstormDialogFromInline),this.on("uiShortcutCmdEnter",this.handleCmdEnterSubmit),this.on(document,"dataTweetSuccess",this.tweetSent),this.on(document,"dataTweetError",this.tweetError),this.on(document,"dataTweetCancel",this.tweetCancel),this.on(document,"uiBouncerCancelled",this.reenableForBouncedUser),this.on(this.$text,"dragover",this.focus),this.on("uiComposerResetAndFocus",this.resetAndFocus),this.on("keyup",this.keyShortcutTooltip),this.on("uiOverrideTweetBoxOptions",this.setTweetBoxOverrides),this.on(this.$text,"focusin",this.ignoreDuringFakeFocus(this.composerActive)),this.hasFocus()?(this.composerActive(),this.trigger("uiComposerHadFocus")):this.reset()})}var n=i("0d4m"),o=i("DBjh"),a=i("FUxd"),r=i("rbkv"),c=i("IAMj"),l=i("YzIt"),h=i("pRwu"),d=i("6N1L"),u=i("HpDd"),p=i("SWJ0"),f=i("tAXt"),m=i("fdtV"),g=i("02iH"),v=i("LcyA"),b=i("pUl/"),w=i("ZG5A"),S=i("1qJr"),C=i("x8V/"),y=i("4Oxf"),T=i("CGr6"),D=i("+HBl"),I=i("LVMq"),x=i("Nkyg"),k=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},M=Object(o.default)(s,h.a,b.a,u.a,v.a,p.a,f.a,w.a,m.a,d.a,S.a,y.a,g.a,T.a,D.a,I.a,C.a,x.a);e.a=M}).call(e,i("4kSj"))},D6Di:function(t,e,i){"use strict";function s(t){this.attr={id:null,items:[],searchPathWithQuery:"/search?src=fols&q=",querySource:"follow_search"},this.attr=n.default.merge(this.attr,t),this.getRemoteSuggestions=function(t,e,i){return i},this.requiresRemoteSuggestions=function(t){return!1},this.getLocalSuggestions=function(t,e){e(t&&t.query?[]:this.attr.items)},this.addItems=function(t){var e=t.entries,i=!0,s=!1,n=void 0;try{for(var o,a=e[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var r=o.value;try{var c=r.content.item.content.followSearch.displayQuery;r.sortIndex&&c&&this.attr.items.push({id_str:r.sortIndex,query:c,followed_search_path:this.attr.searchPathWithQuery+encodeURIComponent(c),search_query_source:this.attr.querySource})}catch(t){}}}catch(t){s=!0,n=t}finally{try{!i&&a.return&&a.return()}finally{if(s)throw n}}},this.removeItem=function(t){this.attr.items=this.attr.items.filter(function(e){return e.query!==t.query})}}var n=i("YzIt");e.a=s},DR2D:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({tweetSelector:".tweet",tweetActionSelector:".ProfileTweet-action",favoriteCountSelector:".ProfileTweet-action--favorite .ProfileTweet-actionCount",retweetCountSelector:".ProfileTweet-action--retweet .ProfileTweet-actionCount",replyCountSelector:".ProfileTweet-action--reply .ProfileTweet-actionCount",actionCountForPresentationSelector:".ProfileTweet-actionCountForPresentation",actionCountForAriaSelector:".ProfileTweet-actionCountForAria",zeroCountClass:"ProfileTweet-actionCount--isZero"}),this.updateTweetStats=function(t,e){var i=this;e.stats&&e.stats.forEach(function(t){var e=i.findTweetOrRetweet(t.status_id),s=e.find(i.statElementSelectorFor(t.name));i.updateAria(s,t.count,t.title),i.updatePresentation(s,t.count,t.compact_count)})},this.initializeTweetStats=function(e,i){var s=this;this.findUninitializedTweetOrRetweet().each(function(e,i){return s.renderTweetStats(t(i))})},this.renderTweetStats=function(t){var e=this;t.attr("data-tweet-stat-initialized","true"),["favorite","retweet","reply"].forEach(function(i){var s=i,n=t.find(e.statElementSelectorFor(s)),r=n&&n.attr("data-tweet-stat-count");if(void 0!==r){var c=a.a.compactOrCommaize(r,o.a.language);e.updatePresentation(n,r,c)}})},this.updatePresentation=function(t,e,i){var s=t.find(this.attr.actionCountForPresentationSelector);t.attr("data-tweet-stat-count",Math.max(e,0)),e<=0?(t.addClass(this.attr.zeroCountClass),s.empty()):(t.removeClass(this.attr.zeroCountClass),s.text(i))},this.updateAria=function(t,e,i){var s=t.find(this.attr.actionCountForAriaSelector);s.text(i),e<=0?(t.attr("aria-hidden","true"),s.removeAttr("data-aria-label-part")):(t.removeAttr("aria-hidden"),s.attr("data-aria-label-part","0"))},this.findTweetOrRetweet=function(t){var e=this.select("tweetSelector").filter("[data-tweet-id="+t+"]");return e.length||(e=this.select("tweetSelector").filter("[data-retweet-id="+t+"]")),e},this.findUninitializedTweetOrRetweet=function(){return this.select("tweetSelector").filter(":not([data-tweet-stat-initialized=true])")},this.statElementSelectorFor=function(t){return{favorite:this.attr.favoriteCountSelector,retweet:this.attr.retweetCountSelector,reply:this.attr.replyCountSelector}[t]},this.after("initialize",function(){this.on("uiSwiftLoaded uiPageChanged uiNeedUpdateInjectedTweetStats",this.initializeTweetStats),this.on("dataGotTweetStats",this.updateTweetStats)})}var n=i("DBjh"),o=i("v9EU"),a=i("ZNUT"),r=i("KUNr");e.a=Object(n.default)(s,r.a)}).call(e,i("4kSj"))},DrJY:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({leftDashboardSelector:".dashboard-left",rightDashboardSelector:".dashboard-right",roamingSelector:".roaming-module:not(.roaming-top-module)",roamingTopSelector:".roaming-module.roaming-top-module",dashboardLeftBottomSelector:".dashboard-left-bottom-module",threeColWidth:1236}),this.setWindowWidth=function(t){if(this.windowWidth=this.$window.width(),this.windowWidth<this.attr.threeColWidth){if(this.threeCol||t){this.$dashboardLeft.prepend(this.$dashboardRight.find(this.attr.roamingTopSelector));var e=this.$dashboardRight.find(this.attr.roamingSelector);this.$dashboardLeftBottomModule.length?this.$dashboardLeftBottomModule.before(e):this.$dashboardLeft.append(e),this.$body.removeClass("three-col"),this.threeCol=!1}}else this.threeCol&&!t||(this.$dashboardRight.prepend(this.$dashboardLeft.find(this.attr.roamingTopSelector)),this.$dashboardRight.append(this.$dashboardLeft.find(this.attr.roamingSelector)),this.$body.addClass("three-col"),this.threeCol=!0)},this.after("initialize",function(){this.$dashboardRight=this.select("rightDashboardSelector"),this.$dashboardRight.length&&(this.$window=t(window),this.$body=t(document.body),this.$dashboardLeft=this.select("leftDashboardSelector"),this.$dashboardLeftBottomModule=this.$dashboardLeft.find(this.attr.dashboardLeftBottomSelector),this.threeCol=!1,this.setWindowWidth(!0),this.on(window,"resize",o.default.debounce(this.setWindowWidth.bind(this),100)))})}var n=i("DBjh"),o=i("YzIt");e.a=Object(n.default)(s)}).call(e,i("4kSj"))},Dt6B:function(t,e,i){"use strict";function s(t){function e(t){return 3===t.nodeType||4===t.nodeType}function i(){for(var t=s(),e=null,i=null,n=null,o=null,a=0;a<t.length;a++){var r=t[a];(null===i||r.bottom>i)&&(i=r.bottom),(null===e||r.top<e)&&(e=r.top),(null===n||r.left<n)&&(n=r.left),(null===o||r.right>o)&&(o=r.right)}return{top:e,bottom:i,left:n,right:o,width:Math.abs(o-n),height:Math.abs(i-e)}}function s(){for(var t=f.getClientRects(),e=[],i=0;i<t.length;i++)e.push(t[i]);return e.filter(function(t){return t.width>0})}function c(t){return e(t)?t.nodeValue.length:t.childNodes.length}function l(){return t.width()-h()}function h(){var t=i(),e=s(),n=e[e.length-1];return 0===e.length?0:n.right-t.left}function d(t){var e=t.match(a);if(null!==e){var i=e[e.length-1],s=t.lastIndexOf(i);return{startIndex:s,endIndex:s+i.length}}return null}function u(t){return!!t.match(o)}function p(t){return(t.match(n)||[]).length}var f=function(){var e=document.createRange(),i=t.contents(),s=t.contents().last()[0];return i.length>0&&(e.setStart(i[0],0),e.setEnd(s,c(s))),e}();this.shortenToVisibleContent=function(){for(var i=t.contents(),s=i.length-1;s>=0;s--){var n=i[s];if(e(n)){for(var o=n.nodeValue.length;o>=0;o--)if(f.setEnd(n,o),!this.hasOverflow())return}else if(f.setEnd(n,n.childNodes.length),!this.hasOverflow())return}},this.shortenToNearestWordBreak=function(t){var i=f.endContainer,s=t.maxCharsToRemove;if(e(i)&&(i.nodeValue.match(r)||f.endOffset!==i.nodeValue.length&&!u(i.nodeValue[f.endOffset]))){var n=i.nodeValue.slice(0,f.endOffset),o=d(n);null!==o&&(void 0!==s&&p(n.substring(o.endIndex))>s||f.setEnd(i,o.startIndex))}},this.ensureLastLineAvailableWidth=function(t){for(;l()<=t;){var i=f.endContainer;if(e(i)&&f.endOffset>1)f.setEnd(i,f.endOffset-1);else{var s=i.previousSibling;if(null===s)break;f.setEnd(s,c(s))}}},this.hasOverflow=function(){var e=i(),s=parseFloat(t.css("line-height"));return Math.round(e.height/s)>Math.round(t.height()/s)},this.toDocumentFragment=function(){return f.cloneContents()},this.setEnd=function(t,e){f.setEnd(t,e)}}var n=/([\uD800-\uDBFF][\uDC00-\uDFFF]|[\S\s])/g,o=/\s/,a=/\s+/g,r=/^\n$/;e.a=s},DuHP:function(t,e,i){"use strict";function s(){this.updateRetweetState=function(t,e){var i=e.tweet_id||e.id,s=e.retweet_id||e.id_str;this.$node.find('div.tweet[data-tweet-id="'+i+'"]').attr("data-my-retweet-id",s)},this.updateUnRetweetState=function(t,e){var i=e.tweet_id||e.id_str;this.$node.find('div.tweet[data-tweet-id="'+i+'"]').removeAttr("data-my-retweet-id data-retweet-id data-retweeter")},this.after("initialize",function(){this.attr.loggedIn&&(this.on(document,"dataDidRetweet",this.updateRetweetState),this.on(document,"dataDidUnretweet",this.updateUnRetweetState))})}var n=i("DBjh"),o=Object(n.default)(s);e.a=o},DzHJ:function(t,e,i){"use strict";(function(t){function s(){var e=n.a.OPTIONS_TYPE,i=n.a.TEXT_INPUT_TYPE;this.defaultAttrs({hasTextInputQuickReplyClass:"has-text-input-quick-reply",composerEditorSelector:".DMComposer-editor",qrTextInputPlaceholderDataAttr:"data-qr-text-input-placeholder",dismissSelector:".QuickReplyDismiss",timeToDismissSelectedQRInMS:2e3}),this.getQuickReplyResponseData=function(){var t={};switch(this.quickReplyState.type){case i:t={"quick_reply_response[text_input][id]":this.quickReplyState.id};break;case e:this.quickReplyState.optionData&&(t={"quick_reply_response[options][id]":this.quickReplyState.id,"quick_reply_response[options][selected_id]":this.quickReplyState.optionData.optionId,text:this.quickReplyState.optionData.optionText})}return t},this.handleTextInputQuickReply=function(t){this.quickReplyState.id=t&&t.id;var e=t&&t.label||"";this.$node.addClass(this.attr.hasTextInputQuickReplyClass),this.select("composerEditorSelector").attr(this.attr.qrTextInputPlaceholderDataAttr,e)},this.handleOptionQuickReply=function(t){var e=t&&t.id;this.quickReplyState&&this.quickReplyState.id===e||(this.quickReplyState.id=e,this.trigger("uiShowQuickReplyOptionPanel",t))},this.handleShowQuickReply=function(t){if(t)switch(this.quickReplyState.data=t,this.quickReplyState.type=t.type&&t.type.name,this.quickReplyState.type){case e:this.handleOptionQuickReply(t);break;case i:this.handleTextInputQuickReply(t)}},this.removeOptionsQuickReply=function(t,e){(e&&e.text&&e.text.length)>0&&!this.$node.hasClass(this.attr.hasTextInputQuickReplyClass)&&this.removeQuickReply()},this.removeTextInputQuickReply=function(){this.quickReplyState.type===i&&this.removeQuickReply()},this.handleSendQROptionResponse=function(t,e){this.quickReplyState.optionData=e,this.trigger("uiSendQROptionResponse")},this.scheduleClearQROptions=function(){var t=this,e=this.quickReplyState.id;this.timer=setTimeout(function(){return t.trigger("uiRemoveQuickReplyWithId",{id:e})},this.attr.timeToDismissSelectedQRInMS)},this.removeQuickReply=function(){if(!t.isEmptyObject(this.quickReplyState)){this.$node.removeClass(this.attr.hasTextInputQuickReplyClass);this.select("composerEditorSelector").removeAttr(this.attr.qrTextInputPlaceholderDataAttr),this.quickReplyState={},this.trigger("uiQuickReplyRemoved")}},this.removeQuickReplyWithId=function(t,e){var i=e&&e.id;i&&i===this.quickReplyState.id&&this.removeQuickReply()},this.removeTimer=function(){clearTimeout(this.timer)},this.handleSendQRFailed=function(){this.removeTimer(),this.trigger("uiUpdateQR")},this.removeQuickReplyPanelIfPureDM=function(){t.isEmptyObject(this.getQuickReplyResponseData())&&this.trigger("uiRemoveQuickReply")},this.after("initialize",function(){this.quickReplyState={},this.on(document,"uiQROptionClicked",this.handleSendQROptionResponse),this.on(document,"dataDMSendFailed",this.handleSendQRFailed),this.on(document,"uiQROptionClicked",this.scheduleClearQROptions),this.on(document,"uiRemoveQuickReply uiDMDialogClosed",this.removeQuickReply),this.on(document,"uiRemoveQuickReplyWithId",this.removeQuickReplyWithId),this.on("uiDMSendMessage",this.removeQuickReplyPanelIfPureDM),this.on("click",{dismissSelector:this.removeQuickReply})})}var n=i("9hTR");e.a=s}).call(e,i("4kSj"))},"E+fT":function(t,e,i){"use strict";(function(t){function s(){n.default.mixin(this,[o.a]),this.defaultAttrs({tweetSelector:".tweet",tweetTranslationSelector:".tweet-translation",tweetTranslationTextSelector:".tweet-translation-text",translateTweetSelector:".js-translate-tweet",needsTranslationClass:"needs-translation",permalinkContainerSelector:".permalink-tweet-container",permalinkClass:".permalink-tweet",languageSelector:".tweet-language",galleryTranslateButtonSelector:".Gallery .GalleryTweet .tweet .translate-button",translateButtonSelector:".translate-button",translationFeedbackButtonSelector:".js-translation-feedback-button",translationsLoadingSelector:".tweet-translation-loading"}),this.translateTweet=function(t){var e=this.tweetFromEvent(t);if(e.find(this.attr.tweetTranslationSelector).hasClass(this.attr.needsTranslationClass)){var i=this.interactionData(e);i.dest=e.find(this.attr.tweetTranslationSelector).data("destLang"),e.find(this.attr.translationsLoadingSelector).show(),this.trigger(e,"uiNeedsTweetTranslation",i)}},this.showTranslationFeedbackDialog=function(t){var e=this.tweetFromEvent(t),i=e.find(this.attr.tweetTranslationSelector);this.trigger(e,"uiNeedsTranslationFeedbackDialog",{tweetId:e.data("tweetId"),translation:i.data("translationText"),sourceLang:i.data("sourceLang"),destLang:i.data("destLang")})},this.tweetFromEvent=function(e){return t(e.target).closest(this.attr.tweetSelector)},this.showTweetTranslation=function(e,i){if(this.select("translationsLoadingSelector").hide(),i.item_html){var s=this.findTweetById(t(e.target),i.id_str);s.find(this.attr.translateButtonSelector).hide();var n=s.find(this.attr.tweetTranslationSelector);if(!i.translated_lang)return void s.find(this.attr.translateTweetSelector).hide();n.find(this.attr.languageSelector).html(i.translated_lang),n.data({translationText:i.text,sourceLang:i.source_lang}).removeClass(this.attr.needsTranslationClass).find(this.attr.tweetTranslationTextSelector).html(i.item_html),s.find(this.attr.translateTweetSelector).toArray().forEach(function(e){var i=t(e);i.is(this.attr.galleryTranslateButtonSelector)&&i.hide()},this)}},this.findTweetById=function(t,e){var i=this.tweetSelectorById(e);return t.is(i)?t:t.find(i)},this.tweetSelectorById=function(t){return this.attr.tweetSelector+"[data-tweet-id="+t.replace(/\D/g,"")+"]"},this.showError=function(t,e){this.select("translationsLoadingSelector").hide(),this.trigger("uiShowMessage",{message:Object(a.default)("Unable to translate this Tweet. Please try again later.")})},this.after("initialize",function(){this.on("dataTweetTranslationSuccess",this.showTweetTranslation),this.on("dataTweetTranslationError",this.showError),this.on("click",{translationFeedbackButtonSelector:this.showTranslationFeedbackDialog,translateTweetSelector:this.translateTweet})})}var n=i("q9/C"),o=i("alSu"),a=i("0d4m");e.a=s}).call(e,i("4kSj"))},E3dh:function(t,e,i){"use strict";function s(){this.defaultAttrs({tweetActionSelector:".retweet-action",tweetboxId:"retweet",isWithCommentClass:"is-withComment",defaultTitle:void 0}),this.dmRegex=/^\s*(?:d|m|dm)\s+[@＠]?(\S+)\s*(.*)/i,this.createDataForSending=function(){return{status:this.getVisibleText(),impression_id:this.impressionId,earned:this.earned,attachment_url:this.urlToRetweet}},this.isEmpty=function(){return!this.getVisibleText().trim()},this.hasAttachment=function(){return!0},this.sendRetweet=function(){this.detectUpdatedText(),this.isEmpty()||(this.trigger("uiSendTweet",{tweetboxId:this.attr.tweetboxId,tweetData:this.createDataForSending()}),this.$node.addClass("tweeting"),this.disable())},this.updateTweetStateOnTextChanged=function(t){var e=!this.isEmpty();this.maxReached()||this.$node.hasClass("tweeting")||this.getVisibleText().match(this.dmRegex)?this.disable():this.enable(),this.$node.toggleClass(this.attr.isWithCommentClass,e),e?this.trigger("uiDialogUpdateTitle",{title:Object(n.default)("Quote Tweet")}):this.trigger("uiDialogUpdateTitle",{title:this.attr.defaultTitle}),this.maybeTriggerTooltip(),this.validateAddTweetButton()},this.retweetSent=function(t,e){(e.tweetboxId||e.sourceEventData.tweetboxId)===this.attr.tweetboxId&&(this.trigger("uiShowMessage",{message:Object(n.default)("Your Tweet was posted!")}),this.trigger("uiRetweetWithCommentSuccess",e),this.$node.removeClass("tweeting"),this.clear())},this.retweetError=function(t,e){(e.tweetboxId||e.sourceEventData.tweetboxId)===this.attr.tweetboxId&&(this.$node.removeClass("tweeting"),this.enable())},this.enable=function(){this.$tweetButton.removeClass("disabled").prop("disabled",!1)},this.disable=function(){this.$tweetButton.addClass("disabled").prop("disabled",!0)},this.clear=function(){this.reset()},this.reset=function(){this.resetTweetText()},this.resetAndFocus=function(){this.reset(),this.focus()},this.resetTweetText=function(){this.trigger("uiClearUndoState"),this.setVisibleText("")},this.handleCmdEnterSubmit=function(){this.$tweetButton.hasClass("disabled")||this.$tweetButton.click()},this.overrideOptions=function(t,e){this.urlToRetweet=e.urlToRetweet,this.impressionId=e.impressionId,this.earned=e.earned},this.triggerTweetstormDialogFromInline=function(t,e){this.trigger("uiCloseDialog");var i=void 0,s=void 0;"object"===(void 0===e?"undefined":m(e))&&(i=e.quotedTweetId,s=e.quotedUserScreenName),this.trigger("uiOpenTweetstormDialog",{tweetText:this.getVisibleText(),addAnotherTweet:!0,quotedTweetId:i,quotedUserScreenName:s}),this.clear()},this.after("initialize",function(){this.$tweetButton=this.select("tweetActionSelector"),this.on("uiTextChanged",this.updateTweetStateOnTextChanged),this.on("uiComposerResetAndFocus",this.resetAndFocus),this.initDraftTweets(),this.initTextNode(),this.on(this.$tweetButton,"click",this.sendRetweet),this.on("uiShortcutCmdEnter",this.handleCmdEnterSubmit),this.on(document,"dataTweetSuccess",this.retweetSent),this.on(document,"dataTweetError",this.retweetError),this.on("uiOverrideTweetBoxOptions",this.overrideOptions),this.on("uiClickAddMoreTweetOnQuoteRetweet",this.triggerTweetstormDialogFromInline),this.reset()})}var n=i("0d4m"),o=i("DBjh"),a=i("pRwu"),r=i("HpDd"),c=i("SWJ0"),l=i("+HBl"),h=i("LcyA"),d=i("pUl/"),u=i("84/5"),p=i("4Oxf"),f=i("Nkyg"),m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a=Object(o.default)(s,a.a,d.a,u.a,r.a,h.a,c.a,p.a,l.a,f.a)},EC06:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({composeAltText:!1}),this.createTweetBoxAtTarget=function(t,e){this.createTweetBox(t.target,e)},this.createTweetBox=function(e,i){var s=t(e);if(!((i.eventData||{}).scribeContext||{}).component)throw new Error("Please specify scribing component for tweet box.");s.find(".geo-picker").length>0&&a.a.attachTo(s,i,{eventData:{scribeContext:{element:"geo_picker"}},restoreFocusOnClose:!0,skipFocusManager:!0});var r=s.find("div.rich-editor").length>0?[l.a]:[],h=(i.dmOnly?o.a:n.a).mixin.apply(this,r),d=!i.dmOnly&&this.attr.composeAltText,u=c.a.getConfig(),p={typeaheadData:this.attr.typeaheadData,hashflagsEnabled:!i.dmOnly,composeAltText:d,mediaCategoryPrefix:i.dmOnly?"dm_":"tweet_",twitterTextOptions:u,maxLength:u.maxWeightedTweetLength};h.attachTo(s,p,i)},this.after("initialize",function(){this.on("uiInitTweetbox",this.createTweetBoxAtTarget)})}var n=i("Cy9X"),o=i("T2Va"),a=i("8N88"),r=i("DBjh"),c=i("cXIp"),l=i("84/5"),h=Object(r.default)(s);e.a=h}).call(e,i("4kSj"))},EEc2:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={"promptbird/templates/dismiss_button":i("02mS"),"promptbird/templates/title":i("orcd")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="PromptbirdPrompt PromptbirdPrompt--dashboardProfile" data-prompt-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('">\n  <span class="PromptbirdPrompt-arrow"></span>\n'),s.b(s.rp("<promptbird/templates/dismiss_button0",t,e,"  ")),s.b(s.rp("<promptbird/templates/title1",t,e,"  ")),s.b('  <p class="PromptbirdPrompt-explanation">\n    <a class="js-promptAction" href="'),s.b(s.v(s.f("call_to_action_url",t,e,0))),s.b('" target="_blank">\n      '),s.b(s.v(s.f("call_to_action_text",t,e,0))),s.b("\n"+i),s.b("    </a>\n    "),s.b(s.v(s.f("explanation",t,e,0))),s.b("\n"+i),s.b('    <button type="button" class="btn-link js-previewAccount">'),s.b(s.v(s.f("preview_text",t,e,0))),s.b("</button>\n  </p>\n</div>\n"),s.fl()},partials:{"<promptbird/templates/dismiss_button0":{name:"promptbird/templates/dismiss_button",partials:{},subs:{}},"<promptbird/templates/title1":{name:"promptbird/templates/title",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},EXHZ:function(t,e,i){!function(e,i){t.exports=i()}(0,function(){return function(t){function e(s){if(i[s])return i[s].exports;var n=i[s]={exports:{},id:s,loaded:!1};return t[s].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function s(t){return t=t||{},function(){var e=this;return Object.keys(t).reduce(function(i,s){var n=t[s];return i[s]="function"==typeof n?n.call(e):n,i},{})}}function n(){this.initialState=function(t){if(this._stateDef)throw new Error("initialState can only be defined once");this._stateDef="function"==typeof t?t:s(t)},this.replaceState=function(t){if(t&&"object"==typeof t){var e=this.state;return this.state=t,this.stateChanged(this.state,e),this.state}},this.mergeState=function(t){return this.replaceState((0,a.default)({},this.state,t))},this.fromState=function(t){return function(){return this.state[t]}},this.toState=function(t){return function(e){var i={};i[t]=e,this.mergeState(i)}},this.fromAttr=function(t){return function(e){return this.attr[t]}},this.stateChanged=function(t,e){},this.after("initialize",function(){this._stateDef=this._stateDef||r,this.replaceState(this._stateDef())})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;var o=i(2),a=function(t){return t&&t.__esModule?t:{default:t}}(o),r=function(){return{}};t.exports=e.default},function(t,e,i){function s(t){return null!=t&&o(v(t))}function n(t,e){return t="number"==typeof t||u.test(t)?+t:-1,e=null==e?g:e,t>-1&&t%1==0&&e>t}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&g>=t}function a(t){for(var e=c(t),i=e.length,s=i&&t.length,a=!!s&&o(s)&&(d(t)||h(t)),r=-1,l=[];++r<i;){var u=e[r];(a&&n(u,s)||f.call(t,u))&&l.push(u)}return l}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function c(t){if(null==t)return[];r(t)||(t=Object(t));var e=t.length;e=e&&o(e)&&(d(t)||h(t))&&e||0;for(var i=t.constructor,s=-1,a="function"==typeof i&&i.prototype===t,c=Array(e),l=e>0;++s<e;)c[s]=s+"";for(var u in t)l&&n(u,e)||"constructor"==u&&(a||!f.call(t,u))||c.push(u);return c}var l=i(9),h=i(10),d=i(11),u=/^\d+$/,p=Object.prototype,f=p.hasOwnProperty,m=l(Object,"keys"),g=9007199254740991,v=function(t){return function(e){return null==e?void 0:e[t]}}("length"),b=m?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&s(t)?a(t):r(t)?m(t):[]}:a;t.exports=b},function(t,e,i){function s(t,e,i){for(var s=-1,n=a(e),o=n.length;++s<o;){var r=n[s],c=t[r],l=i(c,e[r],r,t,e);(l===l?l===c:c!==c)&&(void 0!==c||r in t)||(t[r]=l)}return t}var n=i(3),o=i(5),a=i(1),r=o(function(t,e,i){return i?s(t,e,i):n(t,e)});t.exports=r},function(t,e,i){function s(t,e){return null==e?t:n(e,o(e),t)}var n=i(4),o=i(1);t.exports=s},function(t,e){function i(t,e,i){i||(i={});for(var s=-1,n=e.length;++s<n;){var o=e[s];i[o]=t[o]}return i}t.exports=i},function(t,e,i){function s(t){return a(function(e,i){var s=-1,a=null==e?0:i.length,r=a>2?i[a-2]:void 0,c=a>2?i[2]:void 0,l=a>1?i[a-1]:void 0;for("function"==typeof r?(r=n(r,l,5),a-=2):(r="function"==typeof l?l:void 0,a-=r?1:0),c&&o(i[0],i[1],c)&&(r=3>a?void 0:r,a=1);++s<a;){var h=i[s];h&&t(e,h,r)}return e})}var n=i(6),o=i(7),a=i(8);t.exports=s},function(t,e){function i(t,e,i){if("function"!=typeof t)return s;if(void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 3:return function(i,s,n){return t.call(e,i,s,n)};case 4:return function(i,s,n,o){return t.call(e,i,s,n,o)};case 5:return function(i,s,n,o,a){return t.call(e,i,s,n,o,a)}}return function(){return t.apply(e,arguments)}}function s(t){return t}t.exports=i},function(t,e){function i(t){return null!=t&&o(l(t))}function s(t,e){return t="number"==typeof t||r.test(t)?+t:-1,e=null==e?c:e,t>-1&&t%1==0&&e>t}function n(t,e,n){if(!a(n))return!1;var o=typeof e;if("number"==o?i(n)&&s(e,n.length):"string"==o&&e in n){var r=n[e];return t===t?t===r:r!==r}return!1}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&c>=t}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var r=/^\d+$/,c=9007199254740991,l=function(t){return function(e){return null==e?void 0:e[t]}}("length");t.exports=n},function(t,e){function i(t,e){if("function"!=typeof t)throw new TypeError(s);return e=n(void 0===e?t.length-1:+e||0,0),function(){for(var i=arguments,s=-1,o=n(i.length-e,0),a=Array(o);++s<o;)a[s]=i[e+s];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,i[0],a);case 2:return t.call(this,i[0],i[1],a)}var r=Array(e+1);for(s=-1;++s<e;)r[s]=i[s];return r[e]=a,t.apply(this,r)}}var s="Expected a function",n=Math.max;t.exports=i},function(t,e){function i(t){return!!t&&"object"==typeof t}function s(t,e){var i=null==t?void 0:t[e];return a(i)?i:void 0}function n(t){return o(t)&&u.call(t)==r}function o(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){return null!=t&&(n(t)?p.test(h.call(t)):i(t)&&c.test(t))}var r="[object Function]",c=/^\[object .+?Constructor\]$/,l=Object.prototype,h=Function.prototype.toString,d=l.hasOwnProperty,u=l.toString,p=RegExp("^"+h.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=s},function(t,e){function i(t){return n(t)&&f.call(t,"callee")&&(!g.call(t,"callee")||m.call(t)==h)}function s(t){return null!=t&&a(v(t))&&!o(t)}function n(t){return c(t)&&s(t)}function o(t){var e=r(t)?m.call(t):"";return e==d||e==u}function a(t){return"number"==typeof t&&t>-1&&t%1==0&&l>=t}function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function c(t){return!!t&&"object"==typeof t}var l=9007199254740991,h="[object Arguments]",d="[object Function]",u="[object GeneratorFunction]",p=Object.prototype,f=p.hasOwnProperty,m=p.toString,g=p.propertyIsEnumerable,v=function(t){return function(e){return null==e?void 0:e[t]}}("length");t.exports=i},function(t,e){function i(t){return!!t&&"object"==typeof t}function s(t){return"number"==typeof t&&t>-1&&t%1==0&&m>=t}function n(t){return o(t)&&u.call(t)==r}function o(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){return null!=t&&(n(t)?p.test(h.call(t)):i(t)&&c.test(t))}var r="[object Function]",c=/^\[object .+?Constructor\]$/,l=Object.prototype,h=Function.prototype.toString,d=l.hasOwnProperty,u=l.toString,p=RegExp("^"+h.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),f=function(t,e){var i=null==t?void 0:t[e];return a(i)?i:void 0}(Array,"isArray"),m=9007199254740991,g=f||function(t){return i(t)&&s(t.length)&&"[object Array]"==u.call(t)};t.exports=g}])})},EYue:function(t,e,i){"use strict";var s=0,n=10,o={UNKNOWN:s,TOP_LEFT:1,TOP_RIGHT:2,BOTTOM_RIGHT:3,BOTTOM_LEFT:4,LEFT_TOP:5,RIGHT_TOP:6,RIGHT_BOTTOM:7,LEFT_BOTTOM:8,detectOrientation:function(t,e,i){function o(n,o,a){var r=n-l,h=r+o;if(r>=0&&h<=c.length)a(c.subarray(r,h),n);else{var d=new FileReader;d.onload=function(){c=new Uint8Array(this.result),l=n,a(c.subarray(0,o),n)},d.onerror=e.bind(null,s),d.readAsArrayBuffer(t.slice(n,n+Math.max(i,o)))}}function a(t){function i(e,i){for(var s=0,n=0;n<i;n++)s=(s<<8)+t[e+(o?n:i-1-n)];return s}var n=String.fromCharCode.apply(null,t.subarray(0,4)),o={"MM\0*":!0,"II*\0":!1}[n];if(void 0===o)return void e(s);var a=t.length>8&&i(4,4);if(!a||a+2>t.length)return void e(s);var r=i(a,2);if(a+12*r+6>t.length)return void e(s);for(var c=a+2;r--;){if(274===i(c,2)&&3===i(c+2,2)&&1===i(c+4,4))return void e(i(c+8,2));c+=12}e(s)}function r(t,i){var c=t[1];if(t.length<4||255!==t[0]||217===c)return void e(s);var l=c<208||c>217?(t[2]<<8)+t[3]:0;225===c&&l>8&&"Exif\0\0"===String.fromCharCode.apply(null,t.subarray(4,10))?o(i+10,l-8,a):o(i+2+l,n,r)}i=i||65536;var c=[],l=0;t instanceof Blob?o(0,n,r):e(s)}};e.a=o},EhJk:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("intnumber_one",t,e,1),t,e,0,26,54,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" retweet")}),t.pop()),s.s(s.f("intnumber_other",t,e,1),t,e,0,100,129,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" retweets")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},El2S:function(t,e,i){"use strict";(function(t){function s(){n.default.mixin(this,[a.a,h.a]),this.defaultAttrs({followButtonSelector:".follow-button, .follow-link, .ProfileTweet-follow-button",topicLinkSelector:".user-topic-link",userInfoSelector:".user-actions",dropdownSelector:".user-actions .dropdown",blockOrUnblockSelector:".block-text, .unblock-text",dropdownItemSelector:".user-actions .dropdown.open .dropdown-menu li",blockOrReportButtonSelector:".block-or-report-text",tweetItemSelector:".tweet",reportButtonSelector:".blocked-report-text",unmuteButtonSelector:".unmute-button",muteButtonSelector:".mute-button",showThreadLinkSelector:".show-thread-link",followStates:["not-following","following","blocked","pending"],userActionClassesToEvents:{"mention-text":["uiMentionAction","mentionUser"],"dm-text":["uiDmAction","dmUser"],"list-text":["uiListAction"],"block-text":["uiNeedsBlockDialog","attachUserData"],"report-text":["uiNeedsReportDialog","attachUserData"],"unblock-text":["uiUnblockAction"],"hide-suggestion-text":["uiHideSuggestionAction"],"retweet-on-text":["uiRetweetOnAction"],"retweet-off-text":["uiRetweetOffAction"],"device-notifications-on-text":["uiDeviceNotificationsOnAction","deviceNotificationsOn"],"device-notifications-off-text":["uiDeviceNotificationsOffAction"],"embed-profile":["uiEmbedProfileAction","redirectToEmbedProfile"]}}),this.getClassNameFromList=function(t,e){return e.filter(function(e){return t.hasClass(e)})[0]},this.getUserActionEventNameAndMethod=function(t){var e=this.getClassNameFromList(t.closest("li"),Object.keys(this.attr.userActionClassesToEvents));return this.attr.userActionClassesToEvents[e]},this.getFollowState=function(t){return this.getClassNameFromList(t,this.attr.followStates)},this.getInfoElementFromEvent=function(e){return t(e.target).closest(this.attr.userInfoSelector)},this.findInfoElementForUser=function(t){var e=this.attr.userInfoSelector+"[data-user-id="+c.a.parseBigInt(t)+"]";return this.$node.find(e)},this.getEventName=function(t){return{"not-following":"uiFollowAction",following:"uiUnfollowAction",blocked:"uiUnblockAction",pending:"uiCancelFollowRequestAction"}[t]},this.addCancelHoverStyleClass=function(t){t.addClass("cancel-hover-style"),t.one("mouseleave",function(){return t.removeClass("cancel-hover-style")});var e=t.closest(this.attr.userInfoSelector);e.addClass("show-more-actions-button"),t.one("mouseleave",function(){return e.removeClass("show-more-actions-button")})},this.handleFollowButtonClick=function(e){e.stopPropagation(),this.trigger(t(e.target),"uiCloseDropdowns");var i=this.getInfoElementFromEvent(e),s=t(e.target).closest(this.attr.followButtonSelector),n=this.getTweetForEvent(e,"closest");this.addCancelHoverStyleClass(s);var a=this.getFollowState(i),r=!s.closest(".stream").length;"not-following"===a&&i.data("protected")&&this.trigger("uiShowMessage",{message:Object(o.default)("A follow request has been sent to @{{screen_name}} and is pending their approval.",{screen_name:i.data("screen-name")})});var c=this.getEventName(a),l={originalFollowState:a,shouldRefreshTimeline:r,mediaType:this.getMediaType(n),screenName:i.data("screen-name")};this.trigger(c,this.interactionDataWithCard(e,l))},this.handleTopicLinkClick=function(t){var e=this.interactionData(t);this.trigger("uiUserTopicClickAction",e)},this.blockFollowWithSignupDialog=function(e){e.stopPropagation(),this.trigger(t(e.target),"uiCloseDropdowns"),this.trigger("uiOpenSignupDialog",{signUpOnly:!0,screenName:this.getInfoElementFromEvent(e).data("screen-name")}),this.trigger("uiLoggedOutFollowAttempt",this.interactionData(e))},this.getBlockOrReportDataFromEvent=function(t){var e=this.getInfoElementFromEvent(t),i=e.data("screen-name"),s=e.data("user-id").toString(),n=this.getFollowState(e);return d({},this.interactionData(t),{screenName:i,userId:s,target:"user",viewerFollowsAuthor:"following"===n,viewerBlocksAuthor:"blocked"===n})},this.handleBlockOrReportClick=function(t){this.trigger("uiNeedsBlockOrReportDialog",this.getBlockOrReportDataFromEvent(t))},this.handleBlockOrUnblockClick=function(t){var e=this.getBlockOrReportDataFromEvent(t),i=this.getInfoElementFromEvent(t);"blocked"===this.getFollowState(i)?this.trigger("uiUnblockAction",e):this.trigger("uiNeedsBlockDialog",e)},this.handleUserAction=function(e){var i=t(e.target),s=this.getUserActionEventNameAndMethod(i);if(s){e.stopPropagation();var n=this.getInfoElementFromEvent(e),o=s[0],a=s[1],r=this.getFollowState(n),c={originalFollowState:r};a&&(c=this[a](n,o,c)),c&&this.trigger(o,this.interactionData(e,c)),this.trigger(i,"uiCloseDropdowns")}},this.deviceNotificationsOn=function(t,e,i){return this.attr.deviceEnabled?i:(this.attr.smsDeviceVerified||this.attr.hasPushDevice?this.trigger("uiOpenConfirmDialog",{titleText:Object(o.default)("Enable mobile notifications for Tweets"),bodyText:Object(o.default)("Before you can receive mobile notifications for @{{screenName}}'s Tweets, you need to enable the Tweet notification setting.",{screenName:t.data("screen-name")}),cancelText:Object(o.default)("Close"),submitText:Object(o.default)("Enable Tweet notifications"),action:this.attr.hasPushDevice?"ShowPushTweetsNotifications":"ShowMobileNotifications",top:this.attr.top}):this.trigger("uiOpenConfirmDialog",{titleText:Object(o.default)("Setup mobile notifications"),bodyText:Object(o.default)("Before you can receive mobile notifications for @{{screenName}}'s Tweets, you need to set up your phone.",{screenName:t.data("screen-name")}),cancelText:Object(o.default)("Cancel"),submitText:Object(o.default)("Set up phone"),action:"ShowMobileNotifications",top:this.attr.top}),!1)},this.redirectToMobileNotifications=function(){window.location="/settings/devices"},this.redirectToPushNotificationsHelp=function(){window.location="//support.twitter.com/articles/20169887"},this.redirectToEmbedProfile=function(t,e,i){return this.trigger("uiNavigate",{href:"/settings/widgets/new/user?screen_name="+t.data("screen-name")}),!0},this.mentionUser=function(t,e,i){this.trigger("uiOpenTweetDialog",{screenName:t.data("screen-name"),title:Object(o.default)("Tweet to {{name}}",{name:t.data("name")})})},this.attachUserData=function(t,e,i){return d({},this.interactionData(i),{screenName:l.a.getScreenName(t),userId:l.a.getId(t),target:"user"})},this.dmUser=function(t,e,i){return this.trigger("uiNeedsDMDialog",{id:l.a.getId(t),screen_name:l.a.getScreenName(t),name:l.a.getName(t),oto_only:!0}),i},this.hideSuggestion=function(t,e,i){return d({},i,{feedbackToken:t.data("feedback-token")})},this.followStateChange=function(t,e){this.updateFollowState(e.userId,e.newState),e.fromShortcut&&("not-following"===e.newState?this.trigger("uiShowMessage",{message:Object(o.default)("You have unblocked {{username}}",{username:e.username})}):"blocked"===e.newState&&this.trigger("uiUpdateAfterBlock",{userId:e.userId}))},this.updateFollowState=function(t,e){var i=this.findInfoElementForUser(t),s=this.getFollowState(i);s&&i.removeClass(s),i.addClass(e),"blocked"===e?this.trigger("uiUpdateAfterBlock",{userId:t}):"not-following"===e&&this.trigger("uiShowProfileTweets")},this.follow=function(t,e){var i=this.findInfoElementForUser(e.userId),s=i.data("protected")?"pending":"following";this.updateFollowState(e.userId,s),i.addClass("including")},this.unfollow=function(t,e){var i=this.findInfoElementForUser(e.userId);this.updateFollowState(e.userId,"not-following"),i.removeClass("including notifying")},this.cancel=function(t,e){this.updateFollowState(e.userId,"not-following")},this.block=function(t,e){var i=this.findInfoElementForUser(e.userId);this.trigger("jsClearReinjectionCookiesForUser",{userId:e.userId}),this.updateFollowState(e.userId,"blocked"),i.removeClass("including notifying")},this.unblock=function(t,e){this.updateFollowState(e.userId,"not-following")},this.retweetsOn=function(t,e){this.findInfoElementForUser(e.userId).addClass("including")},this.retweetsOff=function(t,e){this.findInfoElementForUser(e.userId).removeClass("including")},this.notificationsOn=function(t,e){var i=this.findInfoElementForUser(e.userId),s=i.find(this.attr.deviceFollowCheckboxSelector);i.addClass("notifying"),s.prop("checked",!0)},this.notificationsOff=function(t,e){var i=this.findInfoElementForUser(e.userId),s=i.find(this.attr.deviceFollowCheckboxSelector);i.removeClass("notifying"),s.prop("checked",!1)},this.blockUserConfirmed=function(t,e){t.stopImmediatePropagation(),this.trigger("uiBlockAction",e.sourceEventData)},this.preventFocus=function(t,e){t.preventDefault()},this.handleMuteButtonClick=function(t){return function(e,i){i=this.interactionData(e),i.scribeContext={element:"muted_button"},this.trigger(e.target,t,i)}},this.updateMuteButtonState=function(t,e){var i=this.$node.find(this.attr.userInfoSelector+"[data-user-id="+e.userId+"]"),s=i.find(this.attr.unmuteButtonSelector),n=i.find(this.attr.muteButtonSelector),o=s.is(":focus"),a=n.is(":focus");i[e.modOp](e.modClass),n.removeClass("first-load"),o?n.focus():a&&s.focus()},this.isHomePage=function(){return"/"===window.location.pathname},this.after("initialize",function(){if(r.a.attachTo(this.$node),this.on("click",{showThreadLinkSelector:"uiShowThreadCTAClicked"}),!this.attr.loggedIn)return void this.on("click",{followButtonSelector:this.blockFollowWithSignupDialog});this.on(document,"uiFollowStateChange dataFollowStateChange dataBulkFollowStateChange",this.followStateChange),this.on(document,"uiFollowAction",this.follow),this.on("click",{followButtonSelector:this.handleFollowButtonClick}),this.attr.loggedIn&&(this.on("click",{topicLinkSelector:this.handleTopicLinkClick,dropdownItemSelector:this.handleUserAction,unmuteButtonSelector:this.handleMuteButtonClick("uiDidUnmuteUser"),muteButtonSelector:this.handleMuteButtonClick("uiDidMuteUser"),blockOrReportButtonSelector:this.handleBlockOrReportClick,blockOrUnblockSelector:this.handleBlockOrUnblockClick,reportButtonSelector:this.handleBlockOrReportClick}),this.on("mousedown",{unmuteButtonSelector:this.preventFocus,muteButtonSelector:this.preventFocus}),this.on(document,"uiUnfollowAction",this.unfollow),this.on(document,"uiCancelFollowRequestAction",this.cancel),this.on(document,"uiUnblockAction",this.unblock),this.on(document,"uiRetweetOnAction dataRetweetOnAction",this.retweetsOn),this.on(document,"uiRetweetOffAction dataRetweetOffAction",this.retweetsOff),this.on(document,"uiDeviceNotificationsOnAction dataDeviceNotificationsOnAction",this.notificationsOn),this.on(document,"uiDeviceNotificationsOffAction dataDeviceNotificationsOffAction",this.notificationsOff),this.on(document,"uiShowMobileNotificationsConfirm",this.redirectToMobileNotifications),this.on(document,"uiShowPushTweetsNotificationsConfirm",this.redirectToPushNotificationsHelp),this.on(document,"uiUpdateMuteButtonState",this.updateMuteButtonState),this.on(document,"uiBlockAction",this.block),this.on(document,"uiDidBlockUser",this.blockUserConfirmed),this.on(document,"uiDidTriggerBlockingAction",this.block))})}var n=i("q9/C"),o=i("0d4m"),a=i("alSu"),r=i("7tcb"),c=i("lUIe"),l=i("UXvI"),h=i("RhwY"),d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=s}).call(e,i("4kSj"))},Eq71:function(t,e,i){"use strict";function s(){this.scribeGalleryOpened=function(t,e){this.scribe({element:"gallery",action:"open"},e)},this.scribeGalleryClosed=function(t,e){this.scribe({element:"gallery",action:"close"},e)},this.scribeGalleryMediaLoaded=function(t,e){var i={url:e.url};this.scribe({element:"photo",action:"impression"},e,i)},this.scribeGalleryMediaFailed=function(t,e){var i={url:e.url};this.scribe({element:"photo",action:"error"},e,i)},this.scribeGalleryNavigateNext=function(t,e){this.scribe({element:"next",action:"click"},e)},this.scribeGalleryNavigatePrev=function(t,e){this.scribe({element:"prev",action:"click"},e)},this.scribeGridPaged=function(t,e){this.scribe({element:"grid",action:"page"},e)},this.scribeGridOpened=function(t,e){this.scribe({element:"grid",action:"impression"},e)},this.after("initialize",function(){this.on(document,"uiGalleryOpened",this.scribeGalleryOpened),this.on(document,"uiGalleryClosed",this.scribeGalleryClosed),this.on(document,"uiGalleryMediaLoaded",this.scribeGalleryMediaLoaded),this.on(document,"uiGalleryMediaFailed",this.scribeGalleryMediaFailed),this.on(document,"uiGalleryNavigateNext",this.scribeGalleryNavigateNext),this.on(document,"uiGalleryNavigatePrev",this.scribeGalleryNavigatePrev),this.on(document,"uiGridPaged",this.scribeGridPaged),this.on(document,"uiGridOpened",this.scribeGridOpened)})}var n=i("DBjh"),o=i("3oDc");e.a=Object(n.default)(s,o.a)},Er8D:function(t,e,i){"use strict";function s(){this.scribeAjaxDuration=function(t,e){this.scribeClientStats(t,e,"perf")},this.scribeApiStats=function(t,e){this.scribeClientStats(t,e,"api")},this.scribeClientStats=function(t,e,i){if(!e.statsName)throw new Error("statsName is required for stats logging.");var s=["stats","ajax",i,e.statsName];e.statsSubcategory&&s.push(e.statsSubcategory);var n=e.requestData||{};n.interval?s.push("polling"):n.min_position?s.push("newer"):n.max_position&&s.push("older"),e.status&&s.push(e.status),e.statusCode&&s.push(e.statusCode),e.apiErrorName&&s.push(e.apiErrorName);var o=s.join(":"),a={url:e.url,browser:Object(r.a)(),response_size:(e.responseText||{}).length};this.scribePerftown(o,e.duration,a)},this.after("initialize",function(){a.a.getDecider("web_perftown_stats")&&this.on("dataAjaxDuration",this.scribeAjaxDuration),a.a.getDecider("web_client_api_stats")&&this.on("dataApiStats",this.scribeApiStats)})}var n=i("DBjh"),o=i("2CoY"),a=i("IAMj"),r=i("RW6J");e.a=Object(n.default)(s,o.a)},EsrD:function(t,e,i){"use strict";function s(){this.defaultAttrs({noShowError:!0,defaultCategory:"trending"}),this.updateFetchMoreParameters=function(t,e){this.fetchingMore=!1,this.fetchMoreParameters.url=t.url,this.fetchMoreParameters.data={cursor:e.cursor,y:e.y||0},t.data&&t.data.q&&(this.fetchMoreParameters.data.q=t.data.q)},this.fetchCategories=function(t){var e=this;this.fetchMoreParameters={},this.get({retryIfUnavailable:!0,url:"/i/found_media/categories",success:function(i){i.error?e.error(t):e.trigger(t.target,"dataFoundMediaCategories",i)},error:function(){return e.error(t)}})},this.fetchCategoryItems=function(t,e){var i=this,s=e&&e.categoryName||this.attr.defaultCategory,n={retryIfUnavailable:!0,url:"/i/found_media/category_items?category="+s,success:function(e){e.error?i.error(t):(i.updateFetchMoreParameters(n,e),i.fetchMoreParametersCategory[s]=r({},i.fetchMoreParameters),i.successCategoryItems(t,e))},error:function(){return i.error(t)}};this.get(n)},this.successCategoryItems=function(t,e){this.trigger(t.target,"dataFoundMediaCategoryItems",e)},this.error=function(t){this.trigger(t.target,"dataFoundMediaError")},this.dispatchPendingSearch=function(t){var e=!1;return this.pendingSearchData&&(this.search(t,this.pendingSearchData),e=!0),e},this.search=function(t,e){var i=this;if(this.searching)return void(this.pendingSearchData=e);this.pendingSearchData=null;var s=e.query.trim();if(!s)return this.fetchMoreParameters.data&&this.fetchMoreParameters.data.q?this.fetchMoreParameters=r({},this.fetchMoreParametersCategory.trending):this.fetchMoreParameters={},void this.trigger(t.target,"dataFoundMediaSearchClear");var n=s,o={retryIfUnavailable:!0,url:"/i/found_media/search",data:{q:s},eventData:e,success:function(s){s.error?i.searchError(t):(i.updateFetchMoreParameters(o,s),i.searchSuccess(t,n,e,s))},error:function(){return i.searchError(t)}},a=this.searchCache[n];if(a)return void o.success(a);this.searching=!0,this.get(o)},this.searchSuccess=function(t,e,i,s){this.searching=!1,this.searchCache[e]=s,s=r({},s,{sourceEventData:i}),this.dispatchPendingSearch(t)||this.trigger(t.target,"dataFoundMediaSearchResults",s)},this.searchError=function(t){this.searching=!1,this.dispatchPendingSearch(t)||this.trigger(t.target,"dataFoundMediaSearchResultsUnavailable")},this.isRequestUpToDate=function(t){return t.url===this.fetchMoreParameters.url&&this.fetchMoreParameters.data.q===t.data.q},this.fetchMore=function(t){var e=this;if(!this.fetchingMore&&!this.searching&&this.fetchMoreParameters.data&&"string"==typeof this.fetchMoreParameters.data.cursor){this.fetchingMore=!0;var i=r({success:function(s){e.isRequestUpToDate(i)&&(s.error?e.fetchMoreError(t,i):(e.updateFetchMoreParameters(i,s),e.fetchMoreSuccess(t,i,s)))},error:function(){e.isRequestUpToDate(i)&&e.fetchMoreError(t,i)}},this.fetchMoreParameters);this.isRequestUpToDate(i)&&this.get(i)}},this.fetchMoreSuccess=function(t,e,i){this.fetchingMore=!1,this.trigger(t.target,"dataFoundMediaFetchMoreResults",i)},this.fetchMoreError=function(t,e){this.fetchingMore=!1,this.trigger(t.target,"dataFoundMediaFetchMoreUnavailable")},this.getFileDataForMedia=function(t,e){var i={sourceUrl:e.skipSourceUrl?"":e.url,attribution:e.attribution,detailsUrl:e.detailsUrl,foundMediaOrigin:e.origin,mediaCategoryPrefix:e.mediaCategoryPrefix};return o.a.getFileInfo("file.gif",t,i)},this.notifyGotFileData=function(t,e){this.trigger(t,"dataImageAttachBinaryData",{fileId:e.fileId})},this.gotBlob=function(t,e,i){this.getFileDataForMedia(i,e).then(this.notifyGotFileData.bind(this,t))},this.failedToGetBlob=function(t){this.trigger(t,"dataImageAttachFailed")},this.attachImageUrl=function(t,e){var i=t.target,s=this.gotBlob.bind(this,i,e),n=this.failedToGetBlob.bind(this,i);o.a.fetchAsBlob(e.url).then(s,n)},this.after("initialize",function(){this.fetchMoreParametersCategory={},this.fetchMoreParameters={},this.searchCache={},this.on("uiRequestFoundMediaTrending uiRequestFoundMediaCategoryItems",this.fetchCategoryItems),this.on("uiRequestFoundMediaCategories",this.fetchCategories),this.on("uiFoundMediaSearch",this.search),this.on("uiFoundMediaFetchMore",this.fetchMore),this.on("uiAttachImageUrl",this.attachImageUrl)})}var n=i("DBjh"),o=i("+dWm"),a=i("VtWx"),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=Object(n.default)(s,a.a)},"F+GD":function(t,e,i){"use strict";function s(){this.reset=function(){this.convoId=null},this.setUpDialog=function(t,e){var i=e.is_group;this.convoId=e.conversation_id;var s=i?Object(o.default)("Leave Conversation"):Object(o.default)("Delete Conversation"),n=i?Object(o.default)("Leave"):Object(o.default)("Delete");this.trigger("uiOpenConfirmDialog",{titleText:s,bodyText:Object(o.default)("This conversation history will be deleted from your inbox."),cancelText:Object(o.default)("Cancel"),submitText:n,action:"LeaveConversation",danger:!0})},this.confirm=function(){this.convoId&&this.trigger("uiDeleteConversation",{conversation_id:this.convoId}),this.reset(),this.trigger("uiDMInboxWantsRefreshed")},this.after("initialize",function(){this.on("uiShowDMDeleteConversationConfirmation",this.setUpDialog),this.on("uiLeaveConversationConfirm",this.confirm)})}var n=i("DBjh"),o=i("0d4m");e.a=Object(n.default)(s)},"F/Mh":function(t,e,i){"use strict";(function(t){function s(){this.getSize=function(t,e){var i=e.attr("data-width"),s=e.attr("data-height"),n=e.width();return{h:s*(n/i),w:n}},this.createMediaElement=function(t,e,i){return new MediaElement(t,{pluginPath:n.a.path,flashName:"flashmediaelement.swf",loop:!0,defaultVideoHeight:e.h,defaultVideoWidth:e.w,pluginHeight:e.h,pluginWidth:e.w,success:i})},this.prepareMediaElement=function(t,e){var i=this,s=function(t){i.setCurrentTime(t,0),t.play()},n=this.createMediaElement(t,e,function(t){t.addEventListener("ended",function(){t&&s(t)},!1),t.addEventListener("timeupdate",function(){if("native"===n.pluginType&&t.duration<=t.currentTime){var e=function e(){s(t),t.removeEventListener("loadeddata",e)};t.addEventListener("loadeddata",e),t.load()}},!1),t.play()});return n},this.getPlayer=function(t){if(t.length){if(t.find(this.attr.animatedGifSelector).length)return this.players[t.attr("data-tweet-id")]}return null},this.setCurrentTime=function(t,e){"native"===t.pluginType?t.currentTime=e:t.setCurrentTime(e)},this.autoplayGif=function(e){this.startGif(t(e.target).closest(".tweet"))},this.startGifOnEvent=function(e){this.startGif(t(e.target))},this.startGif=function(t){var e=this;if(t=t.filter(":not(.animated-gif-playing)").has(this.attr.animatedGifSelector),t.length){var i=t.attr("data-tweet-id");if(!this.players[i]){var s=t.find(this.attr.animatedGifSelector),n=s.find("[video-src]");n.attr("src",n.attr("video-src"));var o=s.get(0),a=this.getSize(t,s);this.players[i]=this.prepareMediaElement(o,a),this.players[i].load()}t.addClass("animated-gif-playing"),setTimeout(function(){return e.players[i]&&e.players[i].play&&e.players[i].play()},1)}},this.stopAutoplayingGif=function(e){this.stopGif(t(e.target).closest(".tweet"))},this.stopGifOnEvent=function(e){this.stopGif(t(e.target))},this.stopGif=function(t){var e=t.hasClass("animated-gif-playing")&&this.getPlayer(t);e&&(t.removeClass("animated-gif-playing"),t.find(".me-plugin").remove(),e.pause&&e.pause())},this.pauseGif=function(e){var i=t(e.target),s=i.hasClass("animated-gif-playing")&&this.getPlayer(i);s&&s.pause&&s.pause()},this.seekGif=function(e,i){var s=t(e.target),n=s.hasClass("animated-gif-playing")&&this.getPlayer(s);if(n){var o=i.position*n.duration;isNaN(n.duration)||(this.setCurrentTime(n,Math.min(o,n.duration)),n.pause())}},this.after("initialize",function(){this.players={},this.on("uiAutoplayMedia",this.autoplayGif),this.on("uiStartGif",this.startGifOnEvent),this.on("uiStopAutoplayingMedia",this.stopAutoplayingGif),this.on("uiStopGif",this.stopGifOnEvent),this.on("uiPauseGif",this.pauseGif),this.on("uiSeekGif",this.seekGif)})}var n=i("6MBd");e.a=s}).call(e,i("4kSj"))},FBSA:function(t,e,i){"use strict";function s(){n.default.mixin(this,[r.a]),this.defaultAttrs({counterSelector:".tweet-counter",maxLength:140,warnLength:120,superwarnClass:"superwarn",warnClass:"warn",maxReachedClass:"max-reached",dmOnly:!1}),this.updateCounter=function(){var t=this.getLength(),e=t>=this.attr.warnLength,i=this.maxReached(),s=this.attr.maxLength-t;this.$counter.html(s).toggleClass(this.attr.warnClass,e).toggleClass(this.attr.maxReachedClass,i),e&&this.trigger("uiCharCountWarningVisible",{charCount:s})},this.parseTweet=function(t){t=this.addHiddenText(void 0===t?this.getVisibleText():t),this.prevCounterText=t;var e=a.a.parseTweet(t,this.attr.twitterTextOptions);return this.prevCounterLength=e.weightedLength,e},this.getLength=function(t){return this.parseTweet(t,this.twitterTextOptions).weightedLength},this.maxReached=function(){return this.getLength()>this.attr.maxLength},this.after("initialize",function(){this.$counter=this.select("counterSelector"),this.on("uiTextChanged uiAttachmentChanged",this.updateCounter),this.updateCounter()})}var n=i("q9/C"),o=i("CZTd"),a=i.n(o),r=i("AJAn");e.a=s},FUor:function(t,e,i){"use strict";function s(){this.defaultAttrs({allowThreading:!0,draftTweetIdAttr:"draft-tweet-id",dialogTitleAttr:"dialog-title",cursorPositionAttr:"cursor-position",cursorPosition:void 0,canTweetDefaultTextAttr:"can-tweet-default-text",defaultTextAttr:"default-text",defaultText:void 0,isGlobalTweetButton:!1}),this.openTweetDialog=function(){this.scribe({element:"tweet_button",action:"click"},this.attr.eventData),r.a.getDecider("enable_tweetstorm_creation")&&this.attr.allowThreading?this.trigger("uiOpenTweetstormDialog",this.tweetstormDialogData()):this.trigger("uiOpenTweetDialog",this.tweetDialogData())},this.tweetDialogData=function(){return{draftTweetId:this.$node.data(this.attr.draftTweetIdAttr)||"global",screenName:a.a.getScreenName(this.$node),canTweetDefaultText:this.$node.data(this.attr.canTweetDefaultTextAttr),cursorPosition:void 0!==this.attr.cursorPosition?this.attr.cursorPosition:this.$node.data(this.attr.cursorPositionAttr),title:this.$node.data(this.attr.dialogTitleAttr),text:void 0!==this.attr.defaultText?this.attr.defaultText:this.$node.data(this.attr.defaultTextAttr)}},this.tweetstormDialogData=function(){var t=void 0,e=void 0,i=a.a.getScreenName(this.$node),s=this.attr.defaultText,n=this.$node.data(this.attr.defaultTextAttr);return s?(t=" "+s,e=0):n?(t=" "+n,e=0):i&&(t="@"+i+" "),{tweetText:t,cursorPosition:e}},this.after("initialize",function(){this.on("click",this.openTweetDialog),this.attr.isGlobalTweetButton&&this.on(document,"uiShortcutShowTweetbox",this.openTweetDialog)})}var n=i("DBjh"),o=i("3oDc"),a=i("UXvI"),r=i("IAMj");e.a=Object(n.default)(s,o.a)},FaNE:function(t,e,i){"use strict";function s(){this.defaultAttrs({noShowError:!0}),this.deleteMessage=function(t,e){e=e||{},this.post({url:"/i/direct_messages/destroy",eventData:e,data:{id:e.id,conversation_id:e.conversation_id,cursor:this.dmCursor},success:c(t.target,["dataDMDeleteSuccess","dataDMUserUpdates"]),error:l(c(t.target,"dataDMDeleteFailed",e),c(t.target,"dataDMError"))})},this.after("initialize",function(){this.on("uiDMDialogDeleteMessage",this.deleteMessage)})}var n=i("DBjh"),o=i("ldNY"),a=i("VtWx"),r=i("9Uwv"),c=o.a.triggerFn,l=o.a.chain;e.a=Object(n.default)(s,a.a,r.a)},FrDP:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={emojified_text:i("mDLQ")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<li\n  class="'),s.b(s.v(s.f("token_class",t,e,0))),s.b('"\n  tabindex="-1"\n  data-token-id="'),s.b(s.v(s.f("token_id",t,e,0))),s.b('"\n  data-token-text="'),s.b(s.v(s.f("token_text",t,e,0))),s.b('"\n  aria-label="'),s.b(s.v(s.f("token_text",t,e,0))),s.b('">\n'),s.s(s.f("emojified_token_text",t,e,1),t,e,0,170,189,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<emojified_text0",t,e,""))}),t.pop()),s.b('  <span class="'),s.b(s.v(s.f("token_delete_class",t,e,0))),s.b(' Icon Icon--close" aria-hidden="true"></span>\n</li>'),s.fl()},partials:{"<emojified_text0":{name:"emojified_text",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},"G/SW":function(t,e,i){"use strict";(function(t){function i(){this.isOldItem=function(t){return void 0!==t.min_position},this.isNewItem=function(t){return void 0!==t.max_position},this.isInitialItem=function(t){return!!t.max_position&&!!t.min_position},this.getInitialItemsData=function(){return{}},this.getNewItemsData=function(){return{min_position:this.max_position,isNewItemRequest:!0}},this.getOldItemsData=function(){return{max_position:this.min_position,reset_error_state:void 0===this.min_position&&void 0===this.max_position&&!t(".permalink-container").length}},this.resetStateVariables=function(t){void 0!==t.max_position&&(this.max_position=t.max_position,this.select("containerSelector").attr("data-max-position",this.max_position)),void 0!==t.min_position&&(this.min_position=t.min_position,this.select("containerSelector").attr("data-min-position",this.min_position))},this.wasRangeRequest=function(){return!1},this.wasNewItemsRequest=function(t){return this.isOldItem(t)},this.wasOldItemsRequest=function(t){return this.isNewItem(t)},this.shouldGetOldItems=function(){return null!==this.min_position},this.shouldGetNewItems=function(){return null!==this.max_position},this.after("initialize",function(){this.min_position=this.select("containerSelector").attr("data-min-position")||void 0,this.max_position=this.select("containerSelector").attr("data-max-position")||void 0})}e.a=i}).call(e,i("4kSj"))},G3AD:function(t,e,i){"use strict";var s=i("0d4m"),n=i("DBjh"),o=i("EXHZ"),a=i.n(o),r=i("JFPI");e.a=Object(n.default)(a.a,function(){this.initialState({isThread:!1,percentage:0,reloadPageOnSuccess:!1,perItemPercentage:{}}),this.resetState=function(){this.mergeState({isThread:!1,percentage:0,reloadPageOnSuccess:!1,perItemPercentage:{}})},this.initUploadUI=function(t,e){var i=e.mediaTotal,s=e.pollTotal,n=e.tweetTotal,o=e.reloadPageOnSuccess;this.state.percentage=0,this.state.isThread=n>1,this.state.reloadPageOnSuccess=o;var a=i>0?r.k.MEDIA:0,c=s>0?r.k.POLL:0,l=r.k.TWEET,h=a+c+l;this.state.perItemPercentage[r.l.TWEET]=100*l/h/n,this.state.perItemPercentage[r.l.MEDIA]=i>0?100*a/h/i:0,this.state.perItemPercentage[r.l.POLL]=s>0?100*c/h/s:0,this.trigger("uiShowStickyMessage",{message:this.uploadMessage()})},this.updateUploadUI=function(t,e){var i=e.stage,s=e.count;this.state.percentage+=this.state.perItemPercentage[i]*s,this.trigger("uiUpdateMessage",{message:this.uploadMessage()})},this.reloadPageWithDelay=function(){setTimeout(function(){return location.reload()},800)},this.successUploadUI=function(t,e){this.trigger("uiHideMessage");var i=this.state.isThread?Object(s.default)("Your Tweets were sent."):Object(s.default)("Your Tweet was sent.");this.trigger("uiShowMessage",{message:i}),this.state.reloadPageOnSuccess&&this.reloadPageWithDelay(),this.resetState()},this.uploadMessage=function(){var t=Math.round(this.state.percentage).toString();return this.state.isThread?Object(s.default)("Sending your Tweets – {{percentage}}%",{percentage:t}):Object(s.default)("Sending your Tweet – {{percentage}}%",{percentage:t})},this.after("initialize",function(){this.on("dataTweetstormUploadStart",this.initUploadUI),this.on("dataTweetstormUploadUpdate",this.updateUploadUI),this.on("dataTweetstormUploadSuccess",this.successUploadUI)})})},G7MZ:function(t,e,i){"use strict";(function(t){function s(e,i){this.attr={id:null,ttlMilliseconds:1728e5,itemCount:1e3,limit:6,version:1,localQueriesEnabled:!1,remoteQueriesEnabled:!1,onlyDMable:!1,onlyShowUsersWithCanMediaTag:!1,currentUserId:null,remotePath:"/i/search/typeahead.json",remoteType:"users",prefetchPath:"/i/search/typeahead.json",prefetchType:"users",storageBlackList:"userBlackList",maxLengthBlacklist:100,dbName:i.dbName||"accounts_typeahead",dbVersion:20150128,datastores:{MetadataStore:{name:"MetadataStore",keyPath:"key"},AccountTokensToIds:{name:"AccountTokensToIds",keyPath:"token"},IdsToAccounts:{name:"IdsToAccounts",keyPath:"id"}}},this.attr=h.default.merge(this.attr,e),this.after=t.noop,this.defaultAttrs=t.noop,l.default.mixin(this,[r.a,d.a,c.a]),this.initialize=function(t){var e=t||this.openIndexedDB.bind(this);this.isUsingIndexedDB=!0,this.initializeSocialContextBlacklist();var i=[this.attr.datastores.MetadataStore,this.attr.datastores.AccountTokensToIds,this.attr.datastores.IdsToAccounts],s=this;return e(this.attr.dbName,this.attr.dbVersion,i).then(this.checkIfLocalDataHasExpired.bind(this)).then(this.fetchDataIfExpired.bind(this)).then(this.repopulateDataStore.bind(this)).then(function(){return s.database}).catch(this.onInitializationError.bind(this))},this.openIndexedDB=function(t,e,i){var s=this;return o.a.open(t,e,i).then(function(t){return s.database=t})},this.close=function(){this.database&&this.database.close()},this.checkIfLocalDataHasExpired=function(){var t=this;return this.getData(this.attr.datastores.MetadataStore.name,this.attr.datastores.MetadataStore.keyPath).then(function(e){return t.isMetadataExpired(e)})},this.fetchDataIfExpired=function(t){return t&&this.attr.localQueriesEnabled&&this.prefetch(this.attr.prefetchPath,this.attr.prefetchType)},this.getData=function(t,e){return this.database.get(t,e)},this.repopulateDataStore=function(t){return t&&this.database.clear().then(this.populateDataStore.bind(this,t))},this.populateDataStore=function(t){return t&&this.database.put(this.processData(t))},this.onInitializationError=function(t){!this.isHttpError(t)&&this.close()},this.getPrefetchCount=function(){return this.attr.itemCount},this.initializeSocialContextBlacklist=function(){var t=Object(u.a)({withExpiry:!0});this.storage=new t("typeahead"),this.socialContextBlackList=this.storage.getItem(this.attr.storageBlackList)||{}},this.isMetadataExpired=function(t){if(!t)return!0;var e=t.version!==this.attr.version,i=this.hasTTLExpired(t.expirationTime),s=t.protocol!==this.getProtocol();return e||i||s},this.processData=function(t){var e=t[this.attr.prefetchType].filter(function(t){return!this.isAccountMalformedAndScribe(t,"typeahead_local")},this);t[this.attr.prefetchType]=e;var i={};return i[this.attr.datastores.AccountTokensToIds.name]=this.createItemsForAccountTokensToIdsObjectstore(t),i[this.attr.datastores.IdsToAccounts.name]=this.createItemsForIdsToAccountsObjectstore(t),i[this.attr.datastores.MetadataStore.name]=this.createItemsForMetadataObjectstore(t),i},this.createItemsForIdsToAccountsObjectstore=function(t){return t[this.attr.prefetchType].map(function(t){t.prefetched=!0;var e={};return e[this.attr.datastores.IdsToAccounts.keyPath]=t.id,e.account=t,e},this)},this.createItemsForAccountTokensToIdsObjectstore=function(t){var e=this.attr.datastores.AccountTokensToIds.keyPath,i={},s=[];t[this.attr.prefetchType].forEach(function(t){t.tokens.forEach(function(e){var s=e.token;""!==s&&(Array.isArray(i[s])?i[s].push(t.id):i[s]=[t.id])},this)},this);for(var n in i)if(i.hasOwnProperty(n)){var o={};o.ids=i[n],o[e]=n,s.push(o)}return s},this.createItemsForMetadataObjectstore=function(t){var e={};return e[this.attr.datastores.MetadataStore.keyPath]=this.attr.datastores.MetadataStore.keyPath,e.expirationTime=this.attr.ttlMilliseconds+(new Date).getTime(),e.version=this.attr.version,e.protocol=this.getProtocol(),[e]},this.addAccount=function(t){return this.getTokenIdsForAccount(t).then(this.addTokenIdsForAccount.bind(this,t)).then(this.addToIdsToAccounts.bind(this,t))},this.getTokenIdsForAccount=function(t){t=t.account||t;var e=t.tokens.map(function(t){var e=this.standardizeToken(t);return this.database.get(this.attr.datastores.AccountTokensToIds.name,e)},this);return Promise.all(e)},this.addTokenIdsForAccount=function(t,e){var i=n.a.compact(e);i=this.addNewTokenIds(t,i),i=this.addIdToTokenIds(t,i);var s={};return s[this.attr.datastores.AccountTokensToIds.name]=i,this.database.put(s)},this.standardizeToken=function(t){return"string"==typeof t?t:t.token},this.addNewTokenIds=function(t,e){var i=[];return t.tokens.forEach(function(t){e.some(function(e){return e.token===t})||i.push(this.createTokenId(t))},this),e.concat(i)},this.addIdToTokenIds=function(t,e){return e.forEach(function(e){return e.ids.push(t.id)}),e},this.createTokenId=function(t){var e={};return e[this.attr.datastores.AccountTokensToIds.keyPath]=t,e.ids=[],e},this.removeAccount=function(t){return this.database.destroy(this.attr.datastores.IdsToAccounts.name,t)},this.createAddAccountOptions=function(t){var e={},i={};return e[this.attr.datastores.IdsToAccounts.keyPath]=t.id,e.account=t,i[this.attr.datastores.IdsToAccounts.name]=[e],i},this.addToIdsToAccounts=function(t){var e=this.createAddAccountOptions(t);return this.database.put(e)},this.getLocalSuggestions=function(t,e){var i=a.a.tokenizeText(t.query.replace("@",""));if(!this.attr.localQueriesEnabled||""===t.query)return void e([]);this.search(i).then(e,e)},this.search=function(t){return this.getIds(t).then(this.filterForRelevantIds.bind(this)).then(this.getAccounts.bind(this)).then(this.filterAndSortAccounts.bind(this))},this.filterForRelevantIds=function(t){if(0===t.length)return[];var e=this.createIdGroups(t),i=h.default.uniqueArray(e.candidateIds);return this.getCandidateIdsFoundInAllTermGroups(i,e.allIdGroupsByTerm)},this.getAccounts=function(t){var e=t.map(function(t){return this.database.get(this.attr.datastores.IdsToAccounts.name,t)},this);return Promise.all(e)},this.filterAndSortAccounts=function(t){return t=n.a.compact(t).map(function(t){return t.account}).filter(function(t){return!(this.attr.onlyDMable&&!t.is_dm_able||!this.isEligibleForMediaTagSuggestion(t))},this),t.sort(this.sorter),t.slice(0,this.attr.limit)},this.sorter=function(t,e){var i=t.prefetched,s=e.prefetched;return i&&!s?-1:s&&!i?1:function(t,e){var i=t.score_boost?t.score_boost:0,s=e.score_boost?e.score_boost:0,n=t.rounded_score?t.rounded_score:0;return(e.rounded_score?e.rounded_score:0)+s-(n+i)}(t,e)},this.getIds=function(t){var e=t.map(function(t){return this.database.getByPrefix(this.attr.datastores.AccountTokensToIds.name,t)},this);return Promise.all(e)},this.getCandidateIdsFoundInAllTermGroups=function(t,e){return t.filter(function(t){return e.every(function(e){return-1!==e.indexOf(t)})})},this.createIdGroups=function(t){var e=[],i=[];return t.forEach(function(t){var s=[];t.forEach(function(t){e=e.concat(t.ids),s=s.concat(t.ids)}),i.push(s)}),{candidateIds:e,allIdGroupsByTerm:i}},this.processRemoteSuggestions=function(t,e,i){var s=i[this.attr.id]||[],n={};return s.forEach(function(t){return n[t.id_str]=!0},this),this.requiresRemoteSuggestions(t.queryData)&&e[this.attr.remoteType]&&e[this.attr.remoteType].forEach(function(t){!n[t.id_str]&&(!this.attr.onlyDMable||t.is_dm_able)&&this.isEligibleForMediaTagSuggestion(t)&&!this.isAccountMalformedAndScribe(t,"typeahead_remote")&&s.push(t)},this),i[this.attr.id]=s.slice(0,this.attr.limit),i[this.attr.id].forEach(function(t){this.removeBlacklistSocialContext(t)},this),i},this.requiresRemoteSuggestions=function(t){return!(!t||!t.query)&&(t.accountsWithoutAtSignLocalOnly?this.attr.remoteQueriesEnabled&&("@"===a.a.getFirstChar(t.query)||t.atSignRemoved):this.attr.remoteQueriesEnabled)},this.isHttpError=function(t){return t&&t.status&&t.status>=400&&t.status<600},this.hasTTLExpired=function(t){return t-this.now()<=0},this.now=function(){return(new Date).getTime()},this.removeBlacklistSocialContext=function(t){t.first_connecting_user_id in this.socialContextBlackList&&(t.first_connecting_user_name=void 0,t.first_connecting_user_id=void 0)},this.isEligibleForMediaTagSuggestion=function(t){return!this.attr.onlyShowUsersWithCanMediaTag||t.can_media_tag||t.id===this.attr.currentUserId},this.isAccountMalformedAndScribe=function(t,e){var i=a.a.isAccountMalformed(t);return i&&this.scribe({component:"indexeddb",element:e,action:"empty"}),i}}var n=i("KgvP"),o=i("b6Cp"),a=i("pFsH"),r=i("VtWx"),c=i("3oDc"),l=i("q9/C"),h=i("YzIt"),d=i("8XKX"),u=i("rWgq");e.a=s}).call(e,i("4kSj"))},GCFA:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<span class="UserNameBreak">&nbsp;</span>'),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},GGGP:function(t,e,i){"use strict";function s(){this.defaultAttrs({endpoint:"/i/users/prompts",format:""}),this.fetchPrompts=function(t,e){e=e||{};var i={format:this.attr.format,tweet_ids:e.tweetIds,force_prompt_id:this.getForcePromptIdParam()};this.get({url:this.attr.endpoint,eventData:i,data:i,success:"dataPromptbirdManagerHasPrompts",error:"dataPromptbirdManagerPollFailure"})},this.getForcePromptIdParam=function(){return a.a.decode(window.location.search.replace(/^\?/,"")).force_prompt_id},this.after("initialize",function(){this.on("uiPromptbirdManagerWantsPrompts",this.fetchPrompts)})}var n=i("DBjh"),o=i("VtWx"),a=i("TX0g");e.a=Object(n.default)(s,o.a)},GKfl:function(t,e,i){"use strict";function s(){this.scribeTweetAction=function(t,e,i){var s=i&&i.scribeContext&&i.scribeContext.component;this.scribe({component:s,element:"moment",action:t})},this.after("initialize",function(){this.on("uiMomentMakerAddTweet",this.scribeTweetAction.bind(this,"add")),this.on("uiMomentMakerRemoveTweet",this.scribeTweetAction.bind(this,"remove")),this.on("dataMomentMakerAddTweetFailure",this.scribeTweetAction.bind(this,"add_failure")),this.scribeOnEvent("uiOpenAddToMomentDialog",{component:"add_to_moment_dialog",action:"open"})})}var n=i("DBjh"),o=i("3oDc");e.a=Object(n.default)(s,o.a)},GLfs:function(t,e,i){"use strict";function s(){this.defaultAttrs({feedbackCookie:"debug_data",data:{}}),this.getFeedbackData=function(t,e){this.trigger("dataFeedback",this.attr.data)},this.toggleFeedbackCookie=function(t,e){var i=!!e.enabled||null;Object(o.a)(this.attr.feedbackCookie,i),this.refreshPage(),this.checkDebugEnabled()},this.refreshPage=function(){document.location.reload(!0)},this.checkDebugEnabled=function(){this.trigger("dataDebugFeedbackChanged",{enabled:!!Object(o.a)(this.attr.feedbackCookie)})},this.addFeedbackData=function(t,e){var i=this.attr.data;for(var s in e)i[s]?i[s]=[].concat.apply(i[s],e[s]):i[s]=e[s]},this.logNavigation=function(t,e){this.addFeedbackData(t,{pushState:[{data:{href:e.href,module:e.module,title:e.title}}]}),e.init_data&&e.init_data.debugData&&this.addFeedbackData(t,e.init_data.debugData.data||{})},this.after("initialize",function(){this.data=this.attr.data||{},this.on("uiNeedsFeedbackData",this.getFeedbackData),this.on("uiToggleDebugFeedback",this.toggleFeedbackCookie),this.on("dataSetDebugData",this.addFeedbackData),this.on("uiPageChanged",this.logNavigation),this.checkDebugEnabled()})}var n=i("DBjh"),o=i("dsp6"),a=i("VtWx");e.a=Object(n.default)(s,a.a)},GVV3:function(t,e,i){"use strict";function s(){this.attributes({burstDuration:5,burstPollInterval:3e3,dmToastType:"direct_message",maxPollInterval:6e4,noTeardown:!0}),this.possiblyStartBurstPolling=function(t,e){e.should_request_inbox||e.is_empty||(clearTimeout(this.stopTimeout),this.timer.resume(),this.stopTimeout=setTimeout(this.timer.pause.bind(this.timer),this.attr.burstDuration))},this.after("initialize",function(){this.timer=n.default.setIntervalEvent("uiDMRequestUserUpdates",this.attr.burstPollInterval,{},this.attr.noTeardown),this.timer.pause(),n.default.setIntervalEvent("uiDMRequestUserUpdates",this.attr.maxPollInterval,{},this.attr.noTeardown),this.on("uiSwiftLoaded","uiDMRequestUserUpdates"),this.on("dataDMUserUpdates",this.possiblyStartBurstPolling)})}var n=i("r8Bt"),o=i("DBjh"),a=Object(o.default)(s);e.a=a},GXXu:function(t,e,i){"use strict";(function(t){var s=i("n85Q"),n=i("Pqps"),o=i.n(n),a=i("wPVw"),r=i.n(a),c=i("MjOY"),l=i.n(c),h={PROFILE_FORMATS:["ProfileOther","ProfileSelf"],TIMELINE_LAYOUT_TYPES:["inline","inline_pointer"],timelinePromptOptions:function(t){return this.isProfileFormat(t)?{timelineSelector:".GridTimeline-items",promptOptions:{streamItemSelector:".Grid .Grid-cell .js-stream-item",streamItemContainerSelector:"> .Grid"}}:{timelineSelector:"#stream-items-id",promptOptions:{streamItemSelector:"> .js-stream-item",streamItemContainerSelector:"> .js-stream-item"}}},DEFAULT_LAYOUT:o.a,GRID_TIMELINE_LAYOUT:r.a,LIST_TIMELINE_LAYOUT:l.a,getPromptLayout:function(t,e){return this.hasTimelineLayout(t)?this.isProfileFormat(e)?h.GRID_TIMELINE_LAYOUT:h.LIST_TIMELINE_LAYOUT:h.DEFAULT_LAYOUT},getPromptHtml:function(e,i){var n=this.getPromptLayout(e.type,i),o=n.render(e.renderData),a=s.a[e.template].render(e.renderData),r=t("<div></div>");return r.html(o),r.find(".js-prompt-layout-content").html(a),r.html()},isProfileFormat:function(t){return this.PROFILE_FORMATS.indexOf(t)>-1},hasTimelineLayout:function(t){return this.TIMELINE_LAYOUT_TYPES.indexOf(t)>-1}};e.a=h}).call(e,i("4kSj"))},GaHX:function(t,e,i){"use strict";(function(t){function s(){r.default.mixin(this,[u.a,o.default.withAdvice,f.a,p.a]),this.defaultAttrs({scribeContext:{},attachGifSelector:"button[data-gif-url]",resultUpClass:"FoundMediaSearch--top",contentSelector:".FoundMediaSearch-content",contentRightClass:"FoundMediaSearch-content--right",caretSelector:".Caret",caretUpClass:"Caret--top",caretDownClass:"Caret--bottom",preferredGravity:void 0,preferredWeight:void 0,preventDropdownsOpeningUp:void 0,tweetFormSelector:".tweet-form",foundMediaSearchSelector:".js-found-media-search-trigger",queryInputSelector:".FoundMediaSearch-queryInput",queryLoadingClass:"FoundMediaSearch-queryInput--loading",dropdownSelector:".FoundMediaSearch-dropdownMenu",resultSelector:".FoundMediaSearch-results",itemsSelector:".FoundMediaSearch-items",focusableSelector:".FoundMediaSearch-focusable",firstFocusableSelector:".FoundMediaSearch-focusable:first",focusedSelector:".FoundMediaSearch-focusable.is-focused",focusedClass:"is-focused",dropdownContainerSelector:"span.dropdown-menu",categorySelector:".FoundMediaSearch-category",animatedFoundMediaSelector:".FoundMediaSearch-item",itemVisibleClass:"FoundMediaSearch-item--visible",columnSelector:".FoundMediaSearch-column",paginationSelector:".FoundMediaSearch-pagination",presentedClass:"js-presented",presentedSelector:".js-presented",keyboardClass:"FoundMediaSearch--keyboard",emptyStateClass:"FoundMediaSearch--emptyState",reloadSearchTriggerSelector:".js-found-media-reload-search-trigger"}),this.randomItemClasses=function(){return a.a.shuffleInPlace(["FoundMediaSearch-itemContainer--bg1","FoundMediaSearch-itemContainer--bg2","FoundMediaSearch-itemContainer--bg3","FoundMediaSearch-itemContainer--bg4","FoundMediaSearch-itemContainer--bg5","FoundMediaSearch-itemContainer--bg6"])},this.randomCategoryClasses=function(){return a.a.shuffleInPlace(["FoundMediaSearch-categoryContainer--bg1","FoundMediaSearch-categoryContainer--bg2","FoundMediaSearch-categoryContainer--bg3","FoundMediaSearch-categoryContainer--bg4","FoundMediaSearch-categoryContainer--bg5","FoundMediaSearch-categoryContainer--bg6"])},this.prepareDropdown=function(t,e){this.$node.addClass(this.attr.emptyStateClass),this.hasMoreItems(!0),this.select("itemsSelector").empty(),this.trigger("uiRequestFoundMediaCategories")},this.showCategories=function(e,i){var s=this;this.select("queryInputSelector").removeClass(this.attr.queryLoadingClass),this.$node.removeClass(this.attr.emptyStateClass),this.defaultResults=this.defaultResults||{html:i.html},this.select("itemsSelector").html(i.html),this.select("resultSelector").scrollTop(0),this.$focusables=this.select("focusableSelector");var n=this.randomCategoryClasses();this.$focusables.each(function(e,i){var o=n.pop();o||(n=s.randomCategoryClasses(),o=n.pop()),t(i).addClass(o)}),this.hasMoreItems(!1),this.trigger("uiFoundMediaGalleryImpression")},this.updateCategoryItems=function(t,e){this.select("queryInputSelector").removeClass(this.attr.queryLoadingClass),this.$node.removeClass(this.attr.emptyStateClass),this.defaultResults||(this.defaultResults={html:e.html,cursor:e.cursor}),this.presentFoundMediaItems(this.select("itemsSelector").html(e.html),"string"==typeof e.cursor),this.select("resultSelector").scrollTop(0),this.trigger(this.scribeEvents.itemsImpression)},this.errorState=function(){this.trigger("uiShowError",{message:Object(n.default)("Failed to load GIFs. Please try again later.")})},this.attachTarget=function(t){var e=t.closest(this.attr.attachGifSelector),i=e.data("gif-url");if(i){this.trigger(this.scribeEvents.itemSelect);var s=this.$node.closest(this.attr.tweetFormSelector),n=e.data(),o={url:i,origin:n.origin,provider:n.providerName,attribution:{name:n.attributionName,image:n.attributionImage},detailsUrl:n.detailsUrl,thumbnail:{src:n.stillUrl,width:n.width,height:n.height},isGif:!0,mediaCategoryPrefix:this.attr.mediaCategoryPrefix};this.itemWasAttached=!0,this.trigger(s,"uiPreviewThumbnailPlaceholderAdd",o),this.trigger("uiAttachImageUrl",o),this.closeDropdown()}},this.selectItem=function(t){if(t.has(this.attr.animatedFoundMediaSelector).length)this.attachTarget(t.find(this.attr.animatedFoundMediaSelector));else if(t.has(this.attr.categorySelector).length){var e=t.find(this.attr.categorySelector),i=e.data("display-name");this.trigger("uiRequestFoundMediaCategoryItems",{categoryName:e.data("name")}),this.lastQuery=i,this.select("queryInputSelector").val(i).focus().addClass(this.attr.queryLoadingClass)}},this.selectFocusedItem=function(){this.selectItem(this.select("focusedSelector"))},this.selectClickedItem=function(e){this.selectItem(t(e.target).closest(this.attr.focusableSelector))},this.getElementTopOffset=function(t){var e=t[0],i=0;return e&&(i=e.getBoundingClientRect().top),i},this.getWindowHeight=function(){return t(window).height()},this.showDropdownPosition=function(t){this.$node.toggleClass(this.attr.resultUpClass,t),this.select("caretSelector").toggleClass(this.attr.caretUpClass,!t).toggleClass(this.attr.caretDownClass,t)},this.positionDropdownUp=function(){this.showDropdownPosition(!0)},this.positionDropdownDown=function(){this.showDropdownPosition(!1);var t=this.select("resultSelector"),e=this.getElementTopOffset(this.select("foundMediaSearchSelector"))+S,i=this.getWindowHeight();t.css({height:Math.max(i-e-w,C)})},this.positionDropdown=function(){this.positionDropdownDown();var t=this.adjacent(this.select("dropdownSelector"),this.select("foundMediaSearchSelector"),{gravity:this.attr.preferredGravity||"vertical-north",weight:this.attr.preferredWeight});this.select("contentSelector").toggleClass(this.attr.contentRightClass,"right"===t.weight),this.$dropdown.find(this.attr.dropDownMenuSelector).toggleClass(this.attr.dropDownMenuAlignRightClass,"right"===t.weight),"south"!==t.gravity||this.attr.preventDropdownsOpeningUp||this.positionDropdownUp(),this.animateVisibleGifs()},this.positionDropdownDebounced=d.default.debounce(this.positionDropdown,100),this.gotFoundMediaBinaryData=function(t,e){this.trigger(this.scribeEvents.itemAdd),this.trigger("uiGotImageData",{fileIds:[e.fileId]})},this.failedFoundMediaBinaryData=function(t,e){this.trigger(this.scribeEvents.itemError),this.trigger("uiShowError",{message:Object(n.default)("Failed to attach GIF. Please try again later.")})},this.onFoundMediaDropdownOpened=function(){this.itemWasAttached=!1,this.positionDropdown(),this.select("itemsSelector").html('<div class="FoundMediaSearch-pagination"></div>'),this.select("foundMediaSearchSelector").addClass("enabled"),this.select("queryInputSelector").focus(),this.on(window,"resize",this.positionDropdownDebounced)},this.onFoundMediaDropdownClosed=function(){this.itemWasAttached||this.trigger(this.scribeEvents.itemCancel),this.off(window,"resize",this.positionDropdownDebounced),this.select("queryInputSelector").val(""),this.select("foundMediaSearchSelector").removeClass("enabled"),this.select("itemsSelector").empty()},this.searchQuery=function(t){""!==t&&this.select("queryInputSelector").addClass(this.attr.queryLoadingClass),this.trigger("uiFoundMediaSearch",{query:t||""})},this.searchRetry=function(){var t=this.select("queryInputSelector").val()||"";this.lastQuery===t&&(this.searchQuery(t),this.select("queryInputSelector").focus())},this.searchIfQueryChanged=function(){var t=this.select("queryInputSelector").val()||"";this.lastQuery!==t&&(this.lastQuery=t,this.searchQuery(t))},this.searchAutocomplete=function(){var t=this;setTimeout(function(){return t.searchIfQueryChanged()},0)},this.buildFocusIndex=function(){var e=this.select("focusableSelector");this.$focusables=e.sort(function(e,i){var s=t(e).offset(),n=t(i).offset();return s.top>n.top||s.top===n.top&&s.left>n.left?1:-1})},this.searchReset=function(){this.select("queryInputSelector").removeClass(this.attr.queryLoadingClass),this.select("resultSelector").scrollTop(0),this.defaultResults?this.presentFoundMediaItems(this.select("itemsSelector").html(this.defaultResults.html),"string"==typeof this.defaultResults.cursor):this.prepareDropdown()},this.searchResults=function(t,e){var i=e.sourceEventData;i&&i.query===this.select("queryInputSelector").val()&&(this.select("queryInputSelector").removeClass(this.attr.queryLoadingClass),this.lastQueryData=i,this.presentFoundMediaItems(this.select("itemsSelector").html(e.html),"string"==typeof e.cursor),this.select("resultSelector").scrollTop(0))},this.searchUnavailable=function(t,e){this.select("queryInputSelector").removeClass(this.attr.queryLoadingClass);var i=b.a.render({});this.select("itemsSelector").html(i),this.hasMoreItems(!1),this.buildFocusIndex()},this.presentFoundMedia=function(t,e,i,s){var n=[i,this.attr.presentedClass];s&&n.push("FoundMediaSearch-slideIn"),e.addClass(n.join(" "))},this.presentFoundMediaItems=function(e,i){var s=this;this.buildFocusIndex();var n=this.randomItemClasses();if(this.$focusables.not(this.attr.presentedSelector).each(function(e,i){var o=n.pop();o||(n=s.randomItemClasses(),o=n.pop()),s.presentFoundMedia(e,t(i),o,e<10)}),this.hasMoreItems(i),i){this.select("paginationSelector").offset().top-e.offset().top<this.select("resultSelector").height()&&this.trigger("uiNearTheBottom")}this.animateVisibleGifs()},this.moveFocus=function(e){var i=this.select("focusedSelector"),s=void 0;if(0===i.length)s=t(this.$focusables.get(0));else{var n=this.$focusables.index(i)+e;s=n<0||n>=this.$focusables.length?i:t(this.$focusables.get(n))}if(i.removeClass(this.attr.focusedClass),s.addClass(this.attr.focusedClass),s.length>0){var o=this.select("resultSelector"),a=s.offset().top-o.offset().top,r=s.height(),c=o.height();c<a+r?o.scrollTop(o.scrollTop()+a-c+r):a<=0&&o.scrollTop(o.scrollTop()+a)}},this.queryKeyDown=function(t){switch(t.which){case h.a.UP:t.preventDefault(),this.moveFocus(-1),this.$node.addClass(this.attr.keyboardClass);break;case h.a.DOWN:t.preventDefault(),this.moveFocus(1),this.$node.addClass(this.attr.keyboardClass);break;case h.a.LEFT:case h.a.RIGHT:break;case h.a.ENTER:t.preventDefault(),this.trigger("uiFoundMediaSearchEnter");break;default:this.trigger("uiFoundMediaSearchAutocomplete")}},this.changeQuery=function(t){this.trigger("uiFoundMediaSearchAutocomplete")},this.enableButton=function(){this.select("foundMediaSearchSelector").prop("disabled",!1).removeClass("disabled")},this.disableButton=function(){this.select("foundMediaSearchSelector").prop("disabled",!0).addClass("disabled")},this.hasMoreItems=function(t){this.select("paginationSelector").toggle(t)},this.moreResults=function(e,i){var s=this.select("columnSelector"),n=t(i.html),o=n.filter(this.attr.columnSelector);s.first().append(o.first().children()),s.last().append(o.last().children()),this.presentFoundMediaItems(this.select("itemsSelector"),"string"==typeof i.cursor),this.animateVisibleGifs()},this.isContainedInViewport=function(t,e){return g.a.isPartiallyContainedInViewport({topThreshold:-500,bottomThreshold:500,fractionInViewport:0,containerRect:t,elementRect:e.rect})},this.animateVisibleGifs=function(){var e=this,i=this.select("resultSelector"),s=i[0].getBoundingClientRect(),n=this.select("animatedFoundMediaSelector").map(function(){return{item:t(this),rect:this.getBoundingClientRect()}}),o=n.filter(function(t,i){return e.isContainedInViewport(s,i)});o.sort(function(t,e){return t.rect.top-e.rect.top}).each(function(t,i){var s=i.item;if(s.find("img").attr("src",s.data("thumbnail-url")),!s.hasClass(e.attr.itemVisibleClass)){var n=40*t+"ms";s.parent().css({animationDelay:n}),s.addClass(e.attr.itemVisibleClass)}}),n.not(o).each(function(t,i){return i.item.removeClass(e.attr.itemVisibleClass).find("img").attr("src","")})},this.setFocus=function(e){this.$node.removeClass(this.attr.keyboardClass);var i=t(e.target).closest(this.attr.focusableSelector);i.hasClass(this.attr.focusedClass)||(this.$node.removeClass(this.attr.keyboardClass),this.select("focusedSelector").removeClass(this.attr.focusedClass),i.addClass(this.attr.focusedClass))},this.clearFocus=function(e){t(e.target).closest(this.attr.focusableSelector).removeClass(this.attr.focusedClass)},this.after("initialize",function(){var t=this.$node.closest(this.attr.tweetFormSelector);this.attachChild(l.a,this.select("resultSelector"),{contentSelector:this.attr.itemsSelector}),this.$node.toggleClass("autoplay-disabled",!!this.attr.autoplayDisabled),this.scribeEvents={itemsImpression:"uiFoundMediaCategoryImpression",itemSelect:"uiFoundMediaCategorySelect",itemAdd:"uiFoundMediaCategoryAdd",itemError:"uiFoundMediaCategoryError",itemCancel:"uiFoundMediaCategoryCancel"},this.skipFocusManager=!0,this.scribeContext=this.attr.scribeContext,this.on("uiDropdownOpenRequested",this.prepareDropdown),this.on("click",{focusableSelector:this.selectClickedItem,reloadSearchTriggerSelector:this.searchRetry}),this.on("mouseover",{focusableSelector:this.setFocus}),this.on("mouseout",{focusableSelector:this.clearFocus}),this.on("uiFoundMediaSearchEnter",this.selectFocusedItem),this.on("dataFoundMediaError",this.errorState),this.on("dataFoundMediaCategories",this.showCategories),this.on("dataFoundMediaCategoryItems",this.updateCategoryItems),this.on("dataFoundMediaSearchResults",this.searchResults),this.on("dataFoundMediaSearchResultsUnavailable",this.searchUnavailable),this.on("dataFoundMediaSearchClear",this.searchReset),this.on("dataFoundMediaFetchMoreResults",this.moreResults),this.on("dataImageAttachBinaryData",this.gotFoundMediaBinaryData),this.on("dataImageAttachFailed",this.failedFoundMediaBinaryData),this.on("uiFoundMediaSearchAutocomplete",this.searchAutocomplete),this.on("uiFoundMediaSearchSelect",{resultSelector:this.selectResult}),this.on("change paste cut input",{queryInputSelector:this.changeQuery}),this.on("keydown",{queryInputSelector:this.queryKeyDown}),this.on(this.attr.resultSelector,"scroll",d.default.debounce(this.animateVisibleGifs.bind(this),50)),this.on("uiNearTheBottom","uiFoundMediaFetchMore"),this.on(t,"uiComposerEnableExclusiveAttachments",this.enableButton),this.on(t,"uiComposerDisableExclusiveAttachments",this.disableButton),this.on(t,"uiPreviewThumbnailAdded",this.closeDropdown),this.on("uiDropdownOpened",this.onFoundMediaDropdownOpened),this.on("uiDropdownClosed",this.onFoundMediaDropdownClosed)})}var n=i("0d4m"),o=i("GUGq"),a=i("KgvP"),r=i("q9/C"),c=i("DBjh"),l=i("Kjck"),h=i("i3qs"),d=i("YzIt"),u=i("1hKY"),p=i("oHsY"),f=i("zvXx"),m=i("AJAn"),g=i("/LRg"),v=i("+Y9g"),b=i.n(v);e.a=Object(c.default)(s,m.a);var w=40,S=87,C=270}).call(e,i("4kSj"))},GbBZ:function(t,e,i){"use strict";(function(t){function i(){function e(t){return t.removeClass("u-hidden").show()}function i(t){return t.addClass("u-hidden").hide()}this.defaultAttrs({endOfStreamSelector:".stream-footer",errorMessageSelector:".stream-fail-container",tryAgainSelector:".try-again-after-whale"}),this.getOldItems=function(t){t&&t.stopPropagation(),this.shouldGetOldItems()&&this.trigger("uiWantsMoreTimelineItems",this.getOldItemsData())},this.injectOldItems=function(t){this.hideWhaleEnd(),this.resetStateVariables(t),t.has_more_items?this.showMoreSpinner():this.hideMoreSpinner(),this.injectItems("append",t.items_html,"uiHasInjectedOldTimelineItems"),this.possiblyShowBackToTop()},this.notifyOldItemsError=function(t){this.showWhaleEnd()},this.showWhaleEnd=function(){e(this.select("errorMessageSelector")),i(this.select("endOfStreamSelector")),this.select("timelineEndSelector").addClass("has-items-error")},this.hideWhaleEnd=function(){i(this.select("errorMessageSelector")),e(this.select("endOfStreamSelector")),this.select("timelineEndSelector").removeClass("has-items-error")},this.showMoreSpinner=function(){this.select("timelineEndSelector").addClass("has-more-items")},this.hideMoreSpinner=function(){this.select("timelineEndSelector").removeClass("has-more-items")},this.tryAgainAfterWhale=function(t){t.preventDefault(),this.hideWhaleEnd(),this.getOldItems()},this.after("initialize",function(){var e=this.attr.inOverlay?".PermalinkOverlay":window;this.on(e,"uiNearTheBottom",this.getOldItems),this.$document=t(document),this.$window=t(window),this.on("click",{tryAgainSelector:this.tryAgainAfterWhale})})}e.a=i}).call(e,i("4kSj"))},Gg8t:function(t,e,i){"use strict";(function(t){function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(){this.defaultAttrs({millisecInDay:864e5,ageGateingErrorCode:250,ageGateCookieKey:"age-gated"}),this.hasBeenAgeGatedWithin24Hr=function(){var t=Object(r.a)(this.attr.ageGateCookieKey);return!!t&&(new Date).getTime()-parseInt(t,10)<this.attr.millisecInDay},this.getUserAction=function(t){var e;return(e={"/i/user/block":"block","/i/user/unblock":"unblock","/i/user/hide":"dismiss"},s(e,this.apiEndpointUrl("/friendships/create.json"),"follow"),s(e,this.apiEndpointUrl("/friendships/destroy.json"),"unfollow"),e)[t]},this.updateFollowStatus=function(t,e){function i(i){i.message&&this.trigger("uiShowMessage",i);var s=i.new_state,n=i.is_follow_back,a=void 0;if(o&&(i.protected&&"follow"===r?(s="pending",a=0):"follow"===r?(s="following",a=1):(a=-1,s="not-following"),n=i.followed_by&&"follow"===r),this.trigger("dataFollowStateChange",u({},i,t,{userId:t.userId,newState:s,requestUrl:e,isFollowBack:n,action:r,username:t.screenName})),o){var c={stats:[{stat:"following",user_id:h.a.user.id,delta:a},{stat:"follower",user_id:t.userId,delta:a}]};this.trigger(document,"dataGotProfileStats",c)}else this.trigger(document,"dataGotProfileStats",{stats:i.profile_stats})}function n(i){var n,o=this,r=(n={},s(n,a.a.CurrentUserSuspended,function(){return o.showApiErrorToast(f)}),s(n,a.a.FollowBlockedUserError,function(){return o.showApiErrorToast(m)}),s(n,a.a.UserMustBeAlcoholAgeScreened,function(){var e=o.getApiErrorDataField(i,"timestamp");o.trigger("uiNeedsAgeGateDialog",{originalData:t,newState:h,ageGated:o.hasBeenAgeGatedWithin24Hr(),minBirthDate:parseInt(e,10),errorCode:a.a.UserMustBeAlcoholAgeScreened})}),s(n,a.a.CannotFollowFromCountry,function(){o.trigger("uiNeedsGdprAgeGateDialog",{errorCode:a.a.CannotFollowFromCountry})}),s(n,a.a.BirthdateRequired,function(){o.trigger("uiNeedsGdprAgeGateDialog",{errorCode:a.a.BirthdateRequired})}),n),c=t.userId,h=t.originalFollowState;return i.new_state&&(h=i.new_state),this.trigger("dataFollowStateChange",u({},i,{userId:c,newState:h,action:this.getUserAction(e),username:t.screenName})),Object(l.a)(r,i)}var o=this.isApiRequest(e),r=this.getUserAction(e),c=t.disclosureType?"earned"===t.disclosureType:void 0,d=u({user_id:t.userId,impression_id:t.impressionId,earned:c,fromShortcut:t.fromShortcut,handles_challenges:1},t.additionalPostData);t.lifeline&&(d.lifeline=1),d.challenges_passed=!!t.passedAgeGating,this.post({url:e,data:d,eventData:t,success:i.bind(this),error:n.bind(this),retryIfUnavailable:!0,useOAuthSessionAuth:t.useOAuthSessionAuth})},this.reversibleAjaxCall=function(t,e,i){function s(i){this.trigger("dataUserActionSuccess",u({},i,{userId:t.userId,requestUrl:e,action:this.getUserAction(e)})),i.message&&this.trigger("uiShowMessage",i)}function n(e){this.trigger(i,t)}this.post({url:e,data:{user_id:t.userId,impression_id:t.impressionId},eventData:t,success:s.bind(this),error:n.bind(this)})},this.normalAjaxCall=function(t,e,i){function s(i){this.trigger("dataUserActionSuccess",u({},i,{userId:t.userId,requestUrl:e,action:this.getUserAction(e)})),i.message&&this.trigger("uiShowMessage",i)}var n=u({user_id:t.userId,token:t.feedbackToken,impression_id:t.impressionId},i);this.post({url:e,data:n,eventData:t,success:s.bind(this),error:"dataUserActionError"})};var e={include_blocking:!0,include_blocked_by:!0,include_can_dm:!0,include_followed_by:!0,include_mute_edge:!0,skip_status:!0};this.followAction=function(i,s){var n=this.apiEndpointUrl("/friendships/create.json");this.updateFollowStatus(t.extend(s,{useOAuthSessionAuth:!0,additionalPostData:e}),n)},this.unfollowAction=function(t,i){var s=this.apiEndpointUrl("/friendships/destroy.json");this.updateFollowStatus(Object.assign(i,{useOAuthSessionAuth:!0,additionalPostData:e}),s)},this.cancelAction=function(t,e){this.updateFollowStatus(e,"/i/user/cancel")},this.blockAction=function(t,e){this.updateFollowStatus(e,"/i/user/block")},this.unblockAction=function(t,e){this.updateFollowStatus(e,"/i/user/unblock")},this.reportSpamAction=function(t,e){this.normalAjaxCall(e,"/i/user/report_spam",{screen_name:e.screenName,report_type:e.reportType,block_user:e.blockUser,impression_id:e.impressionId})},this.hideSuggestionAction=function(t,e){this.normalAjaxCall(e,"/i/user/hide")},this.retweetOnAction=function(t,e){this.reversibleAjaxCall(e,"/i/user/retweets_on","dataRetweetOffAction")},this.retweetOffAction=function(t,e){this.reversibleAjaxCall(e,"/i/user/retweets_off","dataRetweetOnAction")},this.deviceNotificationsOnAction=function(t,e){this.reversibleAjaxCall(e,"/i/user/device_notifications_on","dataDeviceNotificationsOffAction")},this.deviceNotificationsOffAction=function(t,e){this.reversibleAjaxCall(e,"/i/user/device_notifications_off","dataDeviceNotificationsOnAction")},this.after("initialize",function(){this.on(document,"uiFollowAction",this.followAction),this.on(document,"uiUnfollowAction",this.unfollowAction),this.on(document,"uiCancelFollowRequestAction",this.cancelAction),this.on(document,"uiBlockAction",this.blockAction),this.on(document,"uiUnblockAction",this.unblockAction),this.on(document,"uiReportSpamAction uiReportUserAction",this.reportSpamAction),this.on(document,"uiHideSuggestionAction",this.hideSuggestionAction),this.on(document,"uiRetweetOnAction",this.retweetOnAction),this.on(document,"uiRetweetOffAction",this.retweetOffAction),this.on(document,"uiDeviceNotificationsOnAction",this.deviceNotificationsOnAction),this.on(document,"uiDeviceNotificationsOffAction",this.deviceNotificationsOffAction),this.on(document,"uiAgeGatePassed",this.followAction)})}var o=i("0d4m"),a=i("2Doy"),r=i("dsp6"),c=i("DBjh"),l=i("bWsk"),h=i("IAMj"),d=i("VtWx"),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},p=Object(c.default)(n,d.a),f=Object(o.default)("Your account is suspended and is not permitted to follow users."),m=Object(o.default)("You have been blocked from following this user at their request.");e.a=p}).call(e,i("4kSj"))},"GpU+":function(t,e,i){"use strict";(function(t){function s(){this.attributes({popover:".DMPopover",popoverButton:".DMPopover-button",enabledPopoverButton:".DMPopover-button:not(:disabled)",popoverContent:".DMPopover-content",openClass:"is-open",openSelector:".is-open",focusOnOpen:".js-focus-on-open"}),this.getClosestOpenPopover=function(t){return this.getClosestPopover(t).filter(this.attr.openSelector)},this.getClosestPopover=function(e){return t(e).closest(this.attr.popover)},this.toggle=function(t){var e=this.getClosestPopover(t.target);e.hasClass(this.attr.openClass)?this.close(e):(this.closeAll(),e.addClass(this.attr.openClass).find(this.attr.focusOnOpen).focus())},this.closeAll=function(t){this.select("popover").removeClass(this.attr.openClass)},this.close=function(t){t.removeClass(this.attr.openClass).find(this.attr.enabledPopoverButton).focus()},this.disable=function(t){this.getClosestPopover(t.target).find(this.attr.popoverButton).prop("disabled",!0)},this.enable=function(t){this.getClosestPopover(t.target).find(this.attr.popoverButton).prop("disabled",!1)},this.handleEscape=function(t){var e=this.getClosestOpenPopover(t.target);e.length&&(t.stopImmediatePropagation(),this.close(e))},this.handleBlur=function(t){this.getClosestOpenPopover(t.target).length||this.closeAll()},this.after("initialize",function(){this.on(o.a.GLOBAL_FORCE_CLOSE_EVENTS,this.closeAll),this.on(o.a.GLOBAL_REQUEST_CLOSE_EVENTS,this.closeAll),this.on("uiShortcutEsc",this.handleEscape),this.on("click",this.handleBlur),this.on("click",{enabledPopoverButton:this.toggle}),this.on("uiDisableDMPopover",this.disable),this.on("uiEnableDMPopover",this.enable)})}var n=i("DBjh"),o=i("SNS+");e.a=Object(n.default)(s)}).call(e,i("4kSj"))},GsHY:function(t,e,i){"use strict";function s(){function t(){if("running"!==i&&e.length>0){var s=e.shift();i="running";var n=function(e,s){if(i="idle",t(),e)return s;throw s},o=s();o.queuedPromise().then(n.bind(null,!0),n.bind(null,!1)).then(o.resolve,o.reject)}}var e=[],i="idle";return{enqueue:function(i){return new Promise(function(s,n){var o=function(){return{queuedPromise:i,resolve:s,reject:n}};e.push(o),t()})},numPending:function(){return e.length},numInProgress:function(){return"running"===i?1:0},length:function(){return this.numPending()+this.numInProgress()}}}e.a=s},H6fk:function(t,e,i){"use strict";var s=i("YzIt"),n={},o=0,a={add:function(t){var e=++o;return n[e]=t,e},update:function(t,e){var i=this.get(t);return n[t]=s.default.merge(i,e,!0)},remove:function(t){delete n[t]},removeAll:function(){n={}},get:function(t){return n[t]},keys:function(){return Object.keys(n)}};e.a=a},HEdP:function(t,e,i){"use strict";function s(){this.curateTweets=function(t,e){function i(t){var i=this;e.added.forEach(function(){return i.scribe({component:"tweet",action:"add_to_timeline"},t)});var s=Object(c.default)("Tweet successfully added/removed.");this.trigger("uiShowMessage",{message:s}),this.trigger("dataTweetsCurated",t)}function s(t){var e=Object(c.default)("Failed to add/remove Tweet.");this.trigger("uiShowError",{message:e})}var n={added:e.added,removed:e.removed,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/batch",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.addTweet=function(t,e){function i(t){var e=Object(c.default)("Added Tweet to <a href='{{url}}'>{{name}}</a>",{url:t.timeline_url,name:t.timeline_name});this.trigger("uiShowMessage",{message:e,timeout:1e4}),this.trigger("dataTweetAddedToTimeline",t),this.scribe({component:"tweet",action:"quick_add_to_timeline"},t)}function s(t){this.trigger("uiShowError",t),this.trigger("dataTweetNotAddedToTimeline",t)}var n={timeline_id:e.timelineId,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/add_tweet",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.removeTweet=function(t,e){function i(t){this.trigger("dataTweetRemovedFromTimeline",t),this.trigger("uiShowMessage",{message:Object(c.default)("Tweet successfully removed.")}),this.trigger("dataTweetRemovedFromTimeline",t)}function s(t){this.trigger("uiShowError",{message:Object(c.default)("Error removing tweet.")}),this.trigger("dataTweetNotRemovedFromTimeline",t)}var n={timeline_id:e.timelineId,tweet_id:e.tweetId,id:e.tweetId};this.post({url:"/i/curate/remove_tweet",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.createCustomTimeline=function(t,e){function i(t){this.scribe({component:"custom_timeline",action:"create"},t),this.trigger("uiNavigate",{href:t.timeline_url})}function s(t){this.trigger("uiShowError",{message:Object(c.default)("Error creating collection.")})}var n={name:e.name,description:e.description,order:e.order,tweet_id:e.tweetId,impression_id:e.impressionId};this.post({url:"/i/curate/create",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.updateCustomTimeline=function(t,e){function i(t){this.scribe({element:"custom_timeline",action:"update"},t);var e=Object(c.default)("Collection updated. <a href='{{url}}'>Click here to refresh.</a>",{url:t.timeline_url});this.trigger("uiShowMessage",{message:e,timeout:5e3}),this.trigger("dataCustomTimelineUpdated",t)}function s(t){this.trigger("uiShowError",{message:Object(c.default)("Error updating collection.")})}var n={timeline_id:e.id,name:e.name,description:e.description,order:e.order};this.post({url:"/i/curate/update",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.deleteCustomTimeline=function(t,e){function i(t){this.scribe({element:"custom_timeline",action:"delete"},t),this.trigger("uiNavigate",{href:this.attr.timelines_url})}function s(t){this.trigger("uiShowError",{message:Object(c.default)("Error deleting collection.")})}this.post({url:"/i/curate/destroy",data:{timeline_id:e.timeline_id},eventData:e,success:i.bind(this),error:s.bind(this)})},this.getFullCustomTimelines=function(t,e){this.get({url:"/i/curate/all_timelines",eventData:e,data:{tweet_id:e.tweetId},success:"dataGotFullCustomTimelines",error:"dataFailedToGetFullCustomTimelines"})},this.getCustomTimelinesForDropdown=function(t,e){e.tweetId&&this.get({url:"/i/curate/timelines",eventData:e,data:{tweet_id:e.tweetId},success:"dataGotCustomTimelines",error:"dataFailedToGetCustomTimelines"})},this.after("initialize",function(){a.a.getDecider("custom_timeline_curation")&&(this.on("uiCurateTweets",this.curateTweets),this.on("uiCurateAddTweet",this.addTweet),this.on("uiCurateRemoveTweet",this.removeTweet),this.on("uiNeedsCustomTimelines",this.getCustomTimelinesForDropdown),this.on("uiNeedsFullCustomTimelines",this.getFullCustomTimelines),this.on("uiCreateCustomTimeline",this.createCustomTimeline),this.on("uiUpdateCustomTimeline",this.updateCustomTimeline),this.on("uiDeleteCustomTimeline",this.deleteCustomTimeline))})}var n=i("DBjh"),o=i("VtWx"),a=i("IAMj"),r=i("3oDc"),c=i("0d4m"),l=Object(n.default)(s,o.a,r.a);e.a=l},HTfI:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={"dm/dm_typeahead_account_suggestion":i("koaM"),"dm/dm_typeahead_group_suggestion":i("afWj")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("has_accounts",t,e,1),t,e,0,45,111,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('  <li class="DMTypeaheadHeader">\n    <span>People</span>\n  </li>\n')}),t.pop()),s.s(s.f("accounts",t,e,1),t,e,0,142,185,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<dm/dm_typeahead_account_suggestion0",t,e,"  "))}),t.pop()),s.b("\n"+i),s.s(s.f("has_groups",t,e,1),t,e,0,240,306,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('  <li class="DMTypeaheadHeader">\n    <span>Groups</span>\n  </li>\n')}),t.pop()),s.s(s.f("groups",t,e,1),t,e,0,333,374,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<dm/dm_typeahead_group_suggestion1",t,e,"  "))}),t.pop()),s.fl()},partials:{"<dm/dm_typeahead_account_suggestion0":{name:"dm/dm_typeahead_account_suggestion",partials:{},subs:{}},"<dm/dm_typeahead_group_suggestion1":{name:"dm/dm_typeahead_group_suggestion",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},HWHS:function(t,e,i){"use strict";function s(){this.defaultAttrs({promptType:"inline",promptItemSelector:".PromptbirdPrompt--inline",defaultInsertionIndex:0}),this.insertPrompt=function(t){var e=t.renderData.insertionIndex||this.attr.defaultInsertionIndex,i=t.renderData.shouldInsertAbove||!1;this.insertPromptAtIndex(t,e,i)}}var n=i("Tuog"),o=i("QwUm");e.a=n.a.mixin(s,o.a)},Hc4n:function(t,e,i){"use strict";var s=["twitter.com","donate.twitter.com"],n=function(t,e){return[t,e].join("//")};e.a=function(t,e){return s.reduce(function(i,s){return i||t===n(e.protocol,s)},t===n(e.protocol,e.host))}},Hotm:function(t,e,i){"use strict";(function(t){var i=function(){return{galleryWidth:function(e,i){var s=t(window).width()-116,n=Math.min(s,e.width());return Math.max(i.width(),n)},resetMinSize:function(t){this.galW=592,this.galH=300,t.width(this.galW),t.css("min-height",this.galH)},resizeMedia:function(e,i,s,n,o){var a=i.find(n).add(i.find(".modal-header")).map(function(){return t(this).outerHeight()}).get().reduce(function(t,e){return t+e},0),r=t(window).height()-24,c=t(window).width()-116,l=r-a,h=c,d=e[0].getBoundingClientRect(),u=d.bottom-d.top,p=d.right-d.left,f=p/u;s&&(p+=130,u+=100),u>l&&(p=Math.ceil(p*(l/u)),u=l,e.width(p).height(u)),p>h&&(p=h,u=Math.ceil(p/f),e.width(p).height(u)),(!i.find(".GalleryNav").hasClass("enabled")||p>this.galW)&&(this.galW=p,i.width(this.galW)),u+a>this.galH?(this.galH=u+a,i.css("min-height",this.galH),e.css("margin-top",0)):o?i.css("min-height",0):(e.css("margin-top",(this.galH-a-u)/2),e.css("margin-bottom",(this.galH-a-u)/2))}}}();e.a=i}).call(e,i("4kSj"))},HpDd:function(t,e,i){"use strict";function s(){n.default.mixin(this,[c.a]),this.defaultAttrs({composeCounterSelector:".js-character-counter",maxLength:280,warnLength:260}),this.updateCounter=function(){var t=this.parseTweet(),e=t.weightedLength,i=t.permillage;this.$composeCharacterCounter.trigger("uiUpdateCounter",{tweetLength:e,percent:i/10})},this.parseTweet=function(t){t=this.addHiddenText(void 0===t?this.getVisibleText():t),this.prevCounterText=t;var e=r.a.parseTweet(t,this.attr.twitterTextOptions);return this.prevCounterLength=e.weightedLength,e},this.getLength=function(t){return this.parseTweet(t,this.twitterTextOptions).weightedLength},this.maxReached=function(){return this.getLength()>this.attr.maxLength},this.after("initialize",function(){this.$composeCharacterCounter=this.select("composeCounterSelector"),this.attachChild(o.a,this.$composeCharacterCounter,{maxLength:this.attr.maxLength}),this.on("uiTextChanged uiAttachmentChanged",this.updateCounter),this.updateCounter()})}var n=i("q9/C"),o=i("0UXa"),a=i("CZTd"),r=i.n(a),c=i("AJAn");e.a=s},Hpo3:function(t,e,i){"use strict";function s(){this.deleteMediaTag=function(t,e){var i=function(t){this.trigger("dataMediaTagRemoveSuccess",t)},s=function(t,i,s){this.trigger("dataMediaTagRemoveFailure",{id:e.id,status:i,errorThrown:s})},n={status_id:e.id};this.post({url:"/i/media/media_tags/delete",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.after("initialize",function(){this.on("uiDidRemoveMediaTag",this.deleteMediaTag)})}var n=i("DBjh"),o=i("VtWx"),a=Object(n.default)(s,o.a);e.a=a},HzyY:function(t,e,i){"use strict";function s(){this.defaultAttrs({cache_limit:10}),this.getCachedSuggestions=function(t){return this.cache[t]?this.cache[t].value:null},this.clearCache=function(){this.cache={NEWEST:null,OLDEST:null,COUNT:0,LIMIT:this.attr.cache_limit}},this.deleteCachedSuggestions=function(t){return!!this.cache[t]&&(this.cache.COUNT>1&&(t===this.cache.NEWEST.query?(this.cache.NEWEST=this.cache.NEWEST.before,this.cache.NEWEST.after=null):t===this.cache.OLDEST.query?(this.cache.OLDEST=this.cache.OLDEST.after,this.cache.OLDEST.before=null):(this.cache[t].after.before=this.cache[t].before,this.cache[t].before.after=this.cache[t].after)),delete this.cache[t],this.cache.COUNT-=1,!0)},this.setCachedSuggestions=function(t,e){0!==this.cache.LIMIT&&(this.deleteCachedSuggestions(t),this.cache.COUNT>=this.cache.LIMIT&&this.deleteCachedSuggestions(this.cache.OLDEST.query),0===this.cache.COUNT?(this.cache[t]={query:t,value:e,before:null,after:null},this.cache.NEWEST=this.cache[t],this.cache.OLDEST=this.cache[t]):(this.cache[t]={query:t,value:e,before:this.cache.NEWEST,after:null},this.cache.NEWEST.after=this.cache[t],this.cache.NEWEST=this.cache[t]),this.cache.COUNT+=1)},this.aroundGetSuggestions=function(t,e,i){var s=i.id+":"+i.query,n=this.getCachedSuggestions(s);if(n)return void this.triggerSuggestionsEvent(i.id,i.query,n);t(e,i)},this.afterTriggerSuggestionsEvent=function(t,e,i,s){if(!s){var n=t+":"+e;this.setCachedSuggestions(n,i)}},this.after("triggerSuggestionsEvent",this.afterTriggerSuggestionsEvent),this.around("getSuggestions",this.aroundGetSuggestions),this.after("initialize",function(){this.clearCache(),this.on("uiTypeaheadDeleteRecentSearch",this.clearCache)})}e.a=s},IBie:function(t,e,i){"use strict";function s(){n.default.mixin(this,[o.a]),this._buildData=function(t,e){var i={card_data:JSON.stringify(t)};return void 0!==e&&(i.guid=e),i},this.createCard=function(t,e){var i=this;return new Promise(function(s,n){var o={url:"/i/cards/create/v1",data:i._buildData(t,e),isMutation:!1,dataType:"json",timeout:3e4,retryIfUnavailable:!0};i.post(o).done(function(t){return s(t.card_uri)}).fail(function(){return n()})})}}var n=i("q9/C"),o=i("VtWx");e.a=s},IQ7T:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="ComposerVideoInfo">\n  <div class="ComposerVideoInfo-title">'),s.b(s.v(s.f("title",t,e,0))),s.b('</div>\n  <div class="ComposerVideoInfo-description">'),s.b(s.v(s.f("description",t,e,0))),s.b("</div>\n"),s.s(s.f("has_cta",t,e,1),t,e,0,168,580,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('    <div class="ComposerVideoInfo-cta">\n'),i.s(i.f("is_cta_visit_site",t,e,1),t,e,0,237,364,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <span class="ComposerVideoInfo-ctaType">Visit:</span> <span class="ComposerVideoInfo-ctaUrl">'),i.b(i.v(i.f("cta_url",t,e,0))),i.b("</span>\n")}),t.pop()),i.s(i.f("is_cta_watch_now",t,e,1),t,e,0,414,545,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('        <span class="ComposerVideoInfo-ctaType">Watch now:</span> <span class="ComposerVideoInfo-ctaUrl">'),i.b(i.v(i.f("cta_url",t,e,0))),i.b("</span>\n")}),t.pop()),i.b("    </div>\n")}),t.pop()),s.b('  <div class="ComposerVideoInfo-embeddable">\n    <span class="ComposerVideoInfo-embeddableValue">\n'),s.s(s.f("embeddable",t,e,1),t,e,0,712,807,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('        <span class="ComposerVideoInfo-embeddableLabel">Video embedding:</span> allowed\n')}),t.pop()),s.s(s.f("embeddable",t,e,1),t,e,1,0,0,"")||s.b('        <span class="ComposerVideoInfo-embeddableLabel">Video embedding:</span> not allowed\n'),s.b("    </span>\n  </div>\n</div>\n"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},"IT+l":function(t,e,i){"use strict";function s(){this.postFunction=function(t,e,i,s,n){var o={prompt_id:n.prompt_id,scribe_action:n.prompt_scribe_action},a=n.prompt_action_type||t;this.post({url:"/i/users/prompts/"+a,eventData:o,data:o,success:e,error:i})},this.after("initialize",function(){this.on("uiPromptbirdDismissPrompt",this.postFunction.bind(this,"dismiss","dataPromptbirdPromptDismissed","dataPromptbirdPromptDismissalError")),this.on("uiPromptbirdClick",this.postFunction.bind(this,"click","dataPromptbirdPromptClicked","dataPromptbirdPromptClickError")),this.on("uiPromptbirdPromptWasShown uiInlinePromptScrolledIn",this.postFunction.bind(this,"impress","dataPromptbirdPromptImpressed","dataPromptbirdPromptImpressError")),this.on("uiPromptbirdPromptWasShown uiInlinePromptScrolledIn","uiItemsInjected")})}var n=i("DBjh"),o=i("VtWx");e.a=Object(n.default)(s,o.a)},Ibme:function(t,e,i){"use strict";function s(){this.defaultAttrs({promptType:"inline_pointer",promptItemSelector:".PromptbirdPrompt--inlinePointer",pointerArrowSelector:".PromptbirdPrompt-arrow",pointerTargetSelectors:{favorite_action:".ProfileTweet-action .js-actionFavorite .Icon, .ProfileTweet-action .js-actionFavorite .HeartAnimation",reply_action:".ProfileTweet-action .js-actionReply .Icon",retweet_action:".ProfileTweet-action .js-actionRetweet .Icon",more_action:".ProfileTweet-action .js-dropdown-toggle .Icon"}}),this.insertPrompt=function(t){this.trigger("uiPromptNeedsInsertionIndex",{prompt:t})},this.insertPromptWithIndex=function(t,e){var i=e.prompt;this.insertPromptAtIndex(i,e.insertionIndex,e.shouldInsertAbove),this.setPointerArrowOffset(i)},this.setPointerArrowOffset=function(t){var e=this.attr.pointerTargetSelectors[t.renderData.pointerTarget],i=this.getPromptByPromptId(t.id,!0),s=i.find(this.attr.pointerArrowSelector),n=i.prev(),o=n.find(e),a=o.offset().left-n.offset().left;a<=i.width()&&s.css({left:a+"px"})},this.after("initialize",function(){this.on("uiPromptHasInsertionIndex",this.insertPromptWithIndex)})}var n=i("Tuog"),o=i("QwUm");e.a=n.a.mixin(s,o.a)},IhyL:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={"compose/reply_users_button":i("hlo1")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("Replying to "),s.b(s.rp("<compose/reply_users_button0",t,e,"")),s.fl()},partials:{"<compose/reply_users_button0":{name:"compose/reply_users_button",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},IqRg:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({promoCTASelector:".stream-items .leadgen-card-forward .promotion-cta",leadgenDialogIframeSelector:".cards2-promotion-iframe",tweetSelector:".leadgen-card-forward",macawCardsIframeContainerSelector:".js-macaw-cards-iframe-container"});var e={OPEN_DIALOG:"uiOpenLeadGenConfirmDialog",DIALOG_CLOSED:"uiDialogClosed"};this.setUpDialogWithElement=function(e,i){this.$tweet=t(i.el).closest(this.attr.tweetSelector);var s=this.$tweet.closest("[data-impression-id]").attr("data-impression-id"),n=this.$tweet.closest("[data-impression-id]").attr("data-disclosure-type"),o=t(i.el).data("card-url");this.leadgenDialogIframe.attr("src",o),this.setUpDialog(e,this.$tweet,s,n)},this.setUpDialogWithData=function(e,i){this.$tweet=t(this.attr.tweetSelector+"[data-tweet-id="+i.tweetId+"]"),this.macawCardsIframeContainer.attr(this.attr.srcAttr,i.fullCardIframeUrl),this.macawCardsIframeContainer.attr(this.attr.cardUrl,i.cardUrl),this.macawCardsIframeContainer.attr(this.attr.publisherId,i.publisherId),this.macawCardsIframeContainer.attr(this.attr.creatorId,i.creatorId),this.leadgenDialogIframe.hide(),this.macawCardsIframeContainer.length&&(this.createCard(t(this.macawCardsIframeContainer[0].parentElement)||this.$tweet),this.setUpDialog(e,this.$tweet,i.impressionId,i.disclosureType))},this.cleanUpDialog=function(t,e){this.macawCardsIframeContainer.removeData(this.attr.srcDataAttr),this.macawCardsIframeContainer.removeData(this.attr.cardUrlDataAttr),this.macawCardsIframeContainer.removeData(this.attr.publisherIdDataAttr),this.macawCardsIframeContainer.removeData(this.attr.creatorIdDataAttr),this.destroyCard(this.$tweet)},this.after("initialize",function(){this.leadgenDialogIframe=this.select("leadgenDialogIframeSelector"),this.macawCardsIframeContainer=this.select("macawCardsIframeContainerSelector"),this.on(document,"click",{promoCTASelector:this.setUpDialogWithElement}),this.on(document,e.OPEN_DIALOG,this.setUpDialogWithData),this.on(e.DIALOG_CLOSED,this.cleanUpDialog)}),this.setUpDialog=function(t,e,i,s){t.preventDefault(),this.open()}}var n=i("DBjh"),o=i("UHc7"),a=i("dUMM"),r=Object(n.default)(s,o.a,a.a);e.a=r}).call(e,i("4kSj"))},IsXp:function(t,e,i){"use strict";(function(t){function s(){this.attributes({quickReplySelector:".DMQuickReply",optionSelector:".DMQuickReply-optionItem",unSelectedOptionSelector:".DMQuickReply:not(.is-selected) .DMQuickReply-optionItem",optionTextSelector:".DMQuickReply-optionText",selectedClass:"is-selected"}),this.handleClick=function(e){var i=t(e.target),s=i.closest(this.attr.quickReplySelector),n=i.closest(this.attr.optionSelector),o=i.closest(this.attr.optionTextSelector),a=n.data();s.addClass(this.attr.selectedClass),o.addClass(this.attr.selectedClass),this.trigger("uiQROptionClicked",a)},this.handleShowQRPanel=function(t,e){var i=a.a.render(e);this.$node.html(i)},this.handleEmptyQRPanel=function(){this.$node.empty()},this.after("initialize",function(){this.on(document,"uiShowQuickReplyOptionPanel",this.handleShowQRPanel),this.on(document,"uiQuickReplyRemoved",this.handleEmptyQRPanel),this.on("click",{unSelectedOptionSelector:this.handleClick})})}var n=i("DBjh"),o=i("grs/"),a=i.n(o),r=Object(n.default)(s);e.a=r}).call(e,i("4kSj"))},ItX7:function(t,e,i){"use strict";function s(){this.attributes({notice:".DMReportConversation",abuseConfirmation:".DMReportConversation-abuse",spamConfirmation:".DMReportConversation-spam",cancel:".DMReportConversation-cancel",messageContainer:".DMReportConversation-message"}),this.showConfirmation=function(t,e){var i=e&&e.is_group,s=Object(o.default)("The conversation will be deleted from your inbox, and @{{reported_user_screen_name}} cannot message you until you message them first.",{reported_user_screen_name:e.report_screen_name}),n=Object(o.default)("The conversation will be deleted from your inbox, and you cannot be added to this group again."),a=i?n:s;this.select("messageContainer").text(a),this.select("notice").trigger("uiShowDMNotice")},this.hideConfirmation=function(){this.select("notice").trigger("uiDismissDMNotice")},this.state=function(t,e){return this._state=e||this._state||{},this._state},this.reportConversation=function(t){var e=this.state();this.trigger("uiReportConversation",{conversation_id:e.conversation_id,report_as:t});var i=Object(o.default)("Marked as spam"),s=Object(o.default)("Report sent. @{{screen_name}} can no longer message you.",{screen_name:e.report_screen_name}),n=Object(o.default)("Marked as abusive. You cannot be added to this group again."),a=e.is_group?n:s,r="spam"===t?i:a;this.hideConfirmation(),this.trigger("uiDMShowToast",{message:r}),this.trigger("uiDMInboxWantsRefreshed")},this.launchReportingWebview=function(t,e){var i={userId:e.reported_user_id,reportedDirectMessageConversationId:e.conversation_id,target:"dm-conversation"};this.trigger("uiNeedsReportDialog",i)},this.after("initialize",function(){this.on("uiDMLaunchConversationReportWebView",this.launchReportingWebview),this.on("uiShowDMReportConversationConfirmation",this.state),this.on("uiShowDMReportConversationConfirmation",this.showConfirmation),this.on("click",{abuseConfirmation:this.reportConversation.bind(this,"abuse"),spamConfirmation:this.reportConversation.bind(this,"spam"),cancel:this.hideConfirmation})})}var n=i("DBjh"),o=i("0d4m"),a=Object(n.default)(s);e.a=a},IunQ:function(t,e,i){"use strict";(function(t){function s(){r.default.mixin(this,[f.a,o.default.withAdvice,g.a,m.a]),this.defaultAttrs({clearRecentSelector:".EmojiPicker-clearRecent",recentsSelector:".EmojiPicker-categoryItems:first",queryInputSelector:".EmojiPicker-queryInput",skinToneSelector:".EmojiPicker-skinTone",itemSelector:".EmojiPicker-item",itemWithTooltipSelector:".EmojiPicker-item.js-tooltip",categoryHeaderSeletor:".EmojiPicker-categoryHeader",categoryItemsSelector:".EmojiPicker-categoryItems",categoryIconSelector:".EmojiCategoryIcon",categoryResultSelector:".EmojiPicker-categoryResult",newCategorySelector:".EmojiCategoryIcon--new",scrollableRowSelector:".EmojiPicker-scrollableRow",emojiPickerTriggerSelector:".EmojiPicker-trigger",clearQuerySelector:".EmojiPicker-clearQuery",dropdownSelector:".EmojiPicker-dropdownMenu",resultUpClass:"EmojiPicker--top",contentSelector:".EmojiPicker-content",contentRightClass:"EmojiPicker-content--right",caretSelector:".Caret",caretUpClass:"Caret--top",caretDownClass:"Caret--bottom",focusableSelector:".EmojiPicker-item:not(.u-hidden)",firstFocusableSelector:".EmojiPicker-item:not(.u-hidden):first",focusedSelector:".EmojiPicker-item.is-focused",focusedClass:"is-focused",activeClass:"is-active",keyboardClass:"EmojiPicker--keyboard",maxRecents:14,scrollThrottleDelayInMs:100,extraPixelsToScrollIntoView:20,temporarilyActivateDelayInMs:100,textUserColorClass:"u-textUserColor",queryChangeThrottleDelayInMs:100}),this.prepareDropdown=function(t,e){if(!this.hasRendered){var i=w.a.render({categories:[{id:"recent",title:Object(n.default)("Recently used"),is_recent:!0},{id:"new",title:Object(n.default)("New!")},{id:"people",title:Object(n.default)("Smileys & people")},{id:"nature",title:Object(n.default)("Animals & nature")},{id:"food",title:Object(n.default)("Food & drink")},{id:"activity",title:Object(n.default)("Activity")},{id:"travel",title:Object(n.default)("Travel & places")},{id:"objects",title:Object(n.default)("Objects")},{id:"symbols",title:Object(n.default)("Symbols")},{id:"flags",title:Object(n.default)("Flags")}],skin_tones:[{value:"",title:Object(n.default)("No skin tone")},{value:"1f3fb",title:Object(n.default)("Light skin tone")},{value:"1f3fc",title:Object(n.default)("Medium light skin tone")},{value:"1f3fd",title:Object(n.default)("Medium skin tone")},{value:"1f3fe",title:Object(n.default)("Medium dark skin tone")},{value:"1f3ff",title:Object(n.default)("Dark skin tone")}]});this.select("contentSelector").html(i),this.hasRendered=!0,this.on(this.select("scrollableRowSelector"),"scroll",{scrollableRowSelector:p.default.throttle(this.checkScrollPosition.bind(this),this.attr.scrollThrottleDelayInMs)})}this.skinTone=this.getEmojiStore().getItem("skin_tone")||"",this.updateDiversityRow(),this.setRecentCategoryItems(),this.setNewCategoryItems(),this.lastQuery="",this.updateResults(),this.select("focusedSelector").removeClass(this.attr.focusedClass),this.$node.hasClass("is-loading")&&this.trigger("uiEmojiInfoLoad")},this.continueInitializing=function(t,e){e&&Array.isArray(e.categories)&&this.$node.hasClass("is-loading")&&(this.emojiInfo=e,this.$node.removeClass("is-loading"),this.insertNextCategory(2))},this.setCategoryItems=function(t,e){var i=C.a.render({items:e});this.select("categoryResultSelector").filter('[data-category="'+t+'"]').find(this.attr.categoryItemsSelector).html(i)},this.insertNextCategory=function(t){if(t<this.emojiInfo.categories.length){var e=this.emojiInfo.categories[t],i=e.items.split(" ");this.setCategoryItems(e.id,this.addItemFlags(i)),this.updateResults(),requestAnimationFrame(this.insertNextCategory.bind(this,t+1))}},this.updateResults=function(){this.updateImages(),this.updateCategoryVisibility()},this.getQueryWords=function(){return(this.select("queryInputSelector").val()||"").split(" ").map(h.a.normalizeKeyword).filter(Boolean).slice(0,y)},this.isQueryMatched=function(t,e){return t.every(function(t){return e.some(function(e){return!e.indexOf(t)})})},this.updateImages=function(){var e=this,i=this.getQueryWords();i.length&&!this.hasSearched&&(this.hasSearched=!0,this.trigger("uiEmojiPickerResults")),this.select("itemSelector").each(function(s,n){var o=!1,a=t(n),r=a.attr("data-key"),c=e.skinToneForItem(a);c&&(r=e.updateKeyWithSkinTone(r,c));var l=h.a.infoFromSingleEmoji(h.a.hexCodePointsToUnicode(r));e.isQueryMatched(i,l.keywords)&&(o=!0,a.attr("title",l.description).css("background-image",'url("'+l.imageUrl+'")')),a.toggleClass("u-hidden",!o)})},this.updateDiversityRow=function(){this.select("skinToneSelector").filter('[value="'+this.skinTone+'"]').prop("checked",!0)},this.skinToneForItem=function(t){return t.hasClass("is-diversity")&&this.skinTone},this.updateKeyWithSkinTone=function(t,e){return e?t.replace(/(?:-fe0f)?(?=-200d-)|(?:-fe0f)?$/,"-"+e):t},this.changeSkinTone=function(){this.skinTone=this.select("skinToneSelector").filter(":checked").val()||"",this.updateDiversityRow(),this.updateResults(),this.getEmojiStore().setItem("skin_tone",this.skinTone||""),this.hasChangedSkinTone||(this.hasChangedSkinTone=!0,this.trigger("uiEmojiPickerChangeSkinTone"))},this.getEmojiStore=function(){return this.emojiStore||(this.emojiStore=new c.a("emoji_"+u.a.user.id)),this.emojiStore},this.setCategoryIcon=function(t){this.select("categoryIconSelector").removeClass(this.attr.activeClass).filter('[data-category="'+t+'"]').addClass(this.attr.activeClass)},this.checkScrollPosition=function(){if(this.$node.hasClass(this.attr.keyboardClass)){var e=this.select("focusedSelector").closest(this.attr.categoryResultSelector).attr("data-category");e&&this.setCategoryIcon(e)}else{var i=this.select("scrollableRowSelector");this.select("categoryResultSelector").toArray().some(function(e){var s=t(e),n=e.offsetTop-i[0].offsetTop,o=!1;return n+s.height()>i[0].scrollTop&&(this.setCategoryIcon(s.attr("data-category")),o=!0),o},this)}},this.updateCategoryVisibility=function(){var e=this;this.select("categoryIconSelector").each(function(i,s){var n=t(s),o=t(s).attr("data-category"),a=e.$node.find(e.attr.categoryResultSelector+'[data-category="'+o+'"]'),r=!a.find(e.attr.itemSelector+":not(.u-hidden)").length;a.toggleClass("u-hidden",r),n.prop("disabled",r)}),this.checkScrollPosition()},this.scrollCategoryResultIntoView=function(t){var e=this.select("scrollableRowSelector");e[0].scrollTop=t[0].offsetTop-e[0].offsetTop,this.checkScrollPosition()},this.pickCategory=function(e){var i=t(e.target).attr("data-category"),s=this.$node.find(this.attr.categoryResultSelector+'[data-category="'+i+'"]');this.scrollCategoryResultIntoView(s)},this.getRecentArray=function(){var t=this.getEmojiStore().getItem("recent");return(Array.isArray(t)?t:[]).slice(0,this.attr.maxRecents)},this.setRecentCategoryItems=function(){this.setCategoryItems("recent",this.getRecentArray().map(function(t){return{key:t}}))},this.clearRecent=function(t){this.getEmojiStore().removeItem("recent"),this.setRecentCategoryItems(),this.updateCategoryVisibility()},this.setNewCategoryItems=function(){var t=[];u.a.getDeciderValue("emojiNewCategory")&&(t=["1f468-200d-1f9b0*","1f468-200d-1f9b1*","1f468-200d-1f9b2*","1f468-200d-1f9b3*","1f469-200d-1f9b0*","1f469-200d-1f9b1*","1f469-200d-1f9b2*","1f469-200d-1f9b3*","1f6f9","1f94d","1f94e","1f94f","1f96c","1f96d","1f96e","1f96f","1f970","1f973","1f974","1f975","1f976","1f97a","1f97c","1f97d","1f97e","1f97f","1f998","1f999","1f99a","1f99b","1f99c","1f99d","1f99e","1f99f","1f9a0","1f9a1","1f9a2","1f9b4","1f9b5*","1f9b6*","1f9b7","1f9b8-200d-2640-fe0f*","1f9b8-200d-2642-fe0f*","1f9b9-200d-2640-fe0f*","1f9b9-200d-2642-fe0f*","1f9c1","1f9c2","1f9e7","1f9e8","1f9e9","1f9ea","1f9eb","1f9ec","1f9ed","1f9ee","1f9ef","1f9f0","1f9f1","1f9f2","1f9f3","1f9f4","1f9f5","1f9f6","1f9f7","1f9f8","1f9f9","1f9fa","1f9fb","1f9fc","1f9fd","1f9fe","1f9ff","265fT","267e"]),this.select("newCategorySelector").toggleClass("u-hidden",!u.a.getDeciderValue("emojiNewCategory")),this.setCategoryItems("new",this.addItemFlags(t))},this.addItemFlags=function(t){return t.map(function(t){return{key:t.replace(/[*=T]/g,""),is_diversity:t.indexOf("*")>=0,is_variant:t.indexOf("=")>=0,is_text_default:t.indexOf("T")>=0}})},this.pickItem=function(e){var i=t(e.target),s=i.attr("data-key");e.shiftKey&&e.preventDefault();var n=this.skinToneForItem(i);n?s=this.updateKeyWithSkinTone(s,n):!e.shiftKey&&i.hasClass("is-variant")&&(s+="-fe0f");var o=h.a.hexCodePointsToUnicode(s);this.hasAdded||(this.hasAdded=!0,this.trigger("uiEmojiPickerAdd")),this.trigger("uiEmojiPicked",{key:s,unicode:o});var r=a.a.unique([s].concat(this.getRecentArray())).slice(0,this.attr.maxRecents);this.getEmojiStore().setItem("recent",r)},this.scrolIntoView=function(t){var e=t.closest(this.attr.scrollableRowSelector);if(e.length){var i=e[0],s=t[0].offsetTop-i.offsetTop,n=i.scrollTop,o=e.height()-t.outerHeight(),a=this.attr.extraPixelsToScrollIntoView;s<n+a?i.scrollTop=Math.max(0,s-a):s-o>n-a&&(i.scrollTop=Math.min(s-o+a,i.scrollHeight-e.height()))}},this.moveFocus=function(t,e){var i=this.select("focusedSelector"),s=this.select("focusableSelector"),n=s.index(i),o=s.length-1,a=void 0,r=e?o:0;do{n+=t,n<0?n=o:n>o&&(n=0),a=s.eq(n)}while(r-- >0&&!a.parent().children(":visible:first").is(a));if(i.removeClass(this.attr.focusedClass),e){var c=a.closest(this.attr.categoryResultSelector);this.scrollCategoryResultIntoView(c)}else this.scrolIntoView(a);this.toggleKeyboardFocus(!0),a.addClass(this.attr.focusedClass+" js-tooltip").tooltip("enable").tooltip("show");var l=a.attr("title");l&&a.attr("data-original-title",l).removeAttr("title"),this.checkScrollPosition()},this.preventDefaultAndUpdateQueryResults=function(t){t.preventDefault(),this.updateResultsIfQueryChanges()},this.queryKeyDown=function(e){switch(!e.metaKey&&!e.ctrlKey&&e.which){case d.a.UP:this.preventDefaultAndUpdateQueryResults(e),this.moveFocus(-1);break;case d.a.DOWN:this.preventDefaultAndUpdateQueryResults(e),this.moveFocus(1);break;case d.a.PAGE_UP:this.preventDefaultAndUpdateQueryResults(e),this.moveFocus(-1,!0);break;case d.a.PAGE_DOWN:this.preventDefaultAndUpdateQueryResults(e),this.moveFocus(1,!0);break;case d.a.ENTER:this.preventDefaultAndUpdateQueryResults(e);var i=t.Event("click",{shiftKey:e.shiftKey}),s=this.select("focusedSelector");s.trigger(i),s.length>0?this.closeDropdown():this.temporarilyActivateItem(s);break;case d.a.LEFT:case d.a.RIGHT:default:this.toggleKeyboardFocus(!1)}},this.temporarilyActivateItem=function(t){var e=this;t.addClass(this.attr.activeClass),setTimeout(function(){return t.removeClass(e.attr.activeClass)},this.attr.temporarilyActivateDelayInMs)},this.toggleKeyboardFocus=function(t){this.$node.hasClass(this.attr.keyboardClass)!==t&&(this.$node.toggleClass(this.attr.keyboardClass,t),t||this.select("itemWithTooltipSelector").removeClass("js-tooltip").tooltip("hide").tooltip("disable"))},this.setFocus=function(e){this.toggleKeyboardFocus(!1);var i=t(e.target).closest(this.attr.focusableSelector);i.hasClass(this.attr.focusedClass)||(this.select("focusedSelector").removeClass(this.attr.focusedClass),i.addClass(this.attr.focusedClass))},this.clearFocus=function(e){t(e.target).closest(this.attr.focusableSelector).removeClass(this.attr.focusedClass)},this.updateResultsIfQueryChanges=function(){var t=this.select("queryInputSelector").val()||"";this.lastQuery!==t&&(this.lastQuery=t,this.updateResults())},this.clearQuery=function(){this.select("queryInputSelector").val("").focus(),this.updateResultsIfQueryChanges()},this.positionDropdown=function(){var t=this.adjacent(this.select("dropdownSelector"),this.select("emojiPickerTriggerSelector"),{gravity:this.attr.preferredGravity||"vertical-north",weight:this.attr.preferredWeight,allowGravitySwitch:this.attr.allowGravitySwitch}),e="south"===t.gravity&&!this.attr.preventDropdownsOpeningUp;this.$node.toggleClass(this.attr.resultUpClass,e),this.select("caretSelector").toggleClass(this.attr.caretUpClass,!e).toggleClass(this.attr.caretDownClass,e);var i="right"===t.weight;this.select("contentSelector").toggleClass(this.attr.contentRightClass,i),this.$dropdown.find(this.attr.dropDownMenuSelector).toggleClass(this.attr.dropDownMenuAlignRightClass,i)},this.positionDropdownDebounced=p.default.debounce(this.positionDropdown,100),this.toggleTriggerActive=function(t){this.select("emojiPickerTriggerSelector").toggleClass(this.attr.textUserColorClass,t)},this.onEmojiDropdownOpened=function(){this.positionDropdown(),this.select("queryInputSelector").focus(),this.on(window,"resize",this.positionDropdownDebounced),this.checkScrollPosition(),this.activeEl=null,this.trigger("uiEmojiPickerOpen"),this.hasAdded=!1,this.hasSearched=!1,this.hasChangedSkinTone=!1,this.toggleTriggerActive(!0)},this.onEmojiDropdownClosed=function(){this.off(window,"resize",this.positionDropdownDebounced),this.toggleKeyboardFocus(!1),this.select("queryInputSelector").val(""),this.hasAdded||this.trigger("uiEmojiPickerCancel"),this.toggleTriggerActive(!1)},this.after("initialize",function(){this.on("uiDropdownOpenRequested",this.prepareDropdown),this.on("click",{categoryIconSelector:this.pickCategory,itemSelector:this.pickItem,clearRecentSelector:this.clearRecent,clearQuerySelector:this.clearQuery}),this.on("change",{skinToneSelector:this.changeSkinTone}),this.on("mousedown",{skinToneSelector:this.preventFocusLoss,categoryIconSelector:this.preventFocusLoss,itemSelector:this.preventFocusLoss,clearRecentSelector:this.preventFocusLoss}),this.on("mouseover",{focusableSelector:this.setFocus}),this.on("mouseout",{focusableSelector:this.clearFocus}),this.on("input",{queryInputSelector:p.default.debounce(this.updateResultsIfQueryChanges,this.attr.queryChangeThrottleDelayInMs)}),this.on("keydown",{queryInputSelector:this.queryKeyDown}),this.on("dataEmojiInfoLoaded",this.continueInitializing),this.on("uiDropdownOpened",this.onEmojiDropdownOpened),this.on("uiDropdownClosed",this.onEmojiDropdownClosed)})}var n=i("0d4m"),o=i("GUGq"),a=i("KgvP"),r=i("q9/C"),c=i("WODX"),l=i("DBjh"),h=i("tLYs"),d=i("i3qs"),u=i("IAMj"),p=i("YzIt"),f=i("1hKY"),m=i("oHsY"),g=i("zvXx"),v=i("AJAn"),b=i("lcsn"),w=i.n(b),S=i("d2kF"),C=i.n(S);e.a=Object(l.default)(s,v.a);var y=4}).call(e,i("4kSj"))},JFPI:function(t,e,i){"use strict";function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,"c",function(){return r}),i.d(e,"g",function(){return c}),i.d(e,"i",function(){return l}),i.d(e,"l",function(){return h}),i.d(e,"h",function(){return d}),i.d(e,"k",function(){return u}),i.d(e,"b",function(){return p}),i.d(e,"j",function(){return f}),i.d(e,"d",function(){return m}),i.d(e,"a",function(){return g}),i.d(e,"f",function(){return v}),i.d(e,"e",function(){return b});var n,o=i("0d4m"),a=i("2Doy"),r=Object.freeze({SINGLE_TWEET:"off",FIRST_TWEET:"first",SUBSEQUENT_TWEET:"subsequent"}),c=Object.freeze({HIDE_AND_SHOW:0,HIDE_ONLY:1,SHOW_ONLY:2}),l=Object.freeze({TWEETBOX:[300,"easeOutQuad"],TOOLBAR:[200,"easeOutQuad"],DELAY:0}),h=Object.freeze({NONE:"None",MEDIA:"Media",POLL:"Poll",TWEET:"Tweet"}),d=Object.freeze({PHOTO:"Photo",GIF:"Gif",VIDEO:"Video",NONE:"None"}),u=Object.freeze({MEDIA:60,POLL:10,TWEET:30}),p={card:{SEND:"dataTweetstormCardSend",SEND_SUCCESS:"dataTweetstormCardSendSuccess",SEND_ERROR:"dataTweetstormCardSendError"},media:{SEND_BATCH:"dataTweetstormMediaSendBatch",SEND_BATCH_SUCCESS:"dataTweetstormMediaSendBatchSuccess",SEND_SUCCESS:"dataTweetstormMediaSendSuccess",SEND_ERROR:"dataTweetstormMediaSendError"},tweet:{SEND:"dataTweetstormTweetSend",SEND_SUCCESS:"dataTweetstormTweetSendSuccess",SEND_ERROR:"dataTweetstormTweetSendError"}},f=Object.freeze((n={},s(n,a.a.DuplicateStatusError,Object(o.default)("You have already sent this Tweet.")),s(n,a.a.MentionLimitInTweetExceeded,Object(o.default)("The text of your Tweet exceeds the number of allowed @mentions.")),s(n,a.a.UrlLimitInTweetExceeded,Object(o.default)("The text of your Tweet exceeds the number of allowed URLs.")),s(n,a.a.HashtagLimitInTweetExceeded,Object(o.default)("The text of your Tweet exceeds the number of allowed hashtags.")),s(n,a.a.CashtagLimitInTweetExceeded,Object(o.default)("The text of your Tweet exceeds the number of allowed cashtags.")),s(n,a.a.HashtagLengthLimitInTweetExceeded,Object(o.default)("The text of your Tweet contains a hashtag that is longer than allowed.")),s(n,a.a.InReplyToTweetNotFound,Object(o.default)("You attempted to reply to a Tweet that is deleted or not visible to you.")),s(n,a.a.AttachmentTypesLimitInTweetExceeded,Object(o.default)("The Tweet exceeds the number of allowed attachment types.")),n)),m=Object.freeze({titleText:Object(o.default)("Remove this Tweet?"),bodyText:Object(o.default)("Are you sure you want to remove this Tweet from your thread?"),cancelText:Object(o.default)("Cancel"),submitText:Object(o.default)("Remove"),action:"RemoveTweetFromThread"}),g=Object.freeze({titleText:Object(o.default)("Send Twitter Alerts"),bodyText:Object(o.default)("Are you sure you want to send Twitter Alerts to your followers?"),cancelText:Object(o.default)("Cancel"),submitText:Object(o.default)("Send"),action:"SendLifelineAlert"}),v=Object.freeze({titleText:Object(o.default)("Discard this Tweet?"),bodyText:Object(o.default)("Are you sure you want to discard this Tweet?"),cancelText:Object(o.default)("Cancel"),submitText:Object(o.default)("Discard"),action:"CloseTweetstormDialog"}),b=Object.freeze({titleText:Object(o.default)("Discard this thread?"),bodyText:Object(o.default)("Are you sure you want to discard this thread?"),cancelText:Object(o.default)("Cancel"),submitText:Object(o.default)("Discard"),action:"CloseTweetstormDialog"})},JGGW:function(t,e,i){"use strict";function s(){this.requestAnimationFrame=window.requestAnimationFrame.bind(window),this.attributes({conversationContentSelector:".DMConversation-content",pageBackRange:500,scrollContainerSelector:".DMConversation-scrollContainer",spinnerSelector:".DMConversation-spinner"}),this.checkForConversationHistory=function(){var t=this;this.requestAnimationFrame(function(){!t.$spinner.hasClass("u-hidden")&&0!==t.$scrollContainer.prop("clientHeight")&&(t.$content.prop("clientHeight")<t.$scrollContainer.prop("clientHeight")||t.$scrollContainer.prop("scrollTop")<t.attr.pageBackRange)&&t.trigger("uiWantsConversationHistory")})},this.after("initialize",function(){this.$content=this.select("conversationContentSelector"),this.$scrollContainer=this.select("scrollContainerSelector"),this.$spinner=this.select("spinnerSelector"),this.on(this.$scrollContainer,"scroll",o.default.debounce(this.checkForConversationHistory,250)),this.on("uiDMConversationUpdated",this.checkForConversationHistory)})}var n=i("DBjh"),o=i("YzIt");e.a=Object(n.default)(s)},JKw3:function(t,e,i){"use strict";e.a=function(){this.matchMedia=function(t){return window.matchMedia&&window.matchMedia(t)},this.getBreakpoint=function(){return this.matchMedia("(min-width: 1271px)").matches?"wide":this.matchMedia("(min-height: 901px)").matches?"narrow_tall":"narrow_short"}}},JSdv:function(t,e,i){"use strict";e.a={FILE_TOO_LARGE:"tooLarge",FILE_UNSUPPORTED:"fileUnsupported",GIF_LIMIT:"gifLimit",GIF_TOO_LARGE:"gifTooLarge",GIF_UNSUPPORTED:"gifUnsupported",IO_ERROR:"ioError",NOT_IMAGE:"notImage",MIXED_MEDIA:"mixedMedia",VIDEO_TOO_LARGE:"videoTooLarge",TOO_MANY_VIDEOS_1:"videosTooMany1",TOO_MANY_PHOTOS_1:"photosTooMany1",TOO_MANY_PHOTOS:"photosTooMany"}},JTIh:function(t,e,i){"use strict";function s(){this.defaultAttrs({maxSizeInBytes:52428800,uploadType:"",gifSupport:!0,imageFormats:["image/gif","image/jpeg","image/jpg","image/png"]}),this.maxGifSizeInBytes=function(){return 1048576*l.a.getDeciderValue("photoSruGifLimitMb")},this.imageFormats=function(t){return t?this.attr.imageFormats.filter(function(t){return"image/gif"!==t}).join(","):this.attr.imageFormats.join(",")},this.validateImage=function(t){if(t){if(!a.a.validateFileSize(t,this.attr.maxSizeInBytes))return this.addFileError(o.a.FILE_TOO_LARGE),!1}return!0},this.validateGif=function(t){if(t){if(!this.attr.gifSupport)return this.addFileError(o.a.GIF_UNSUPPORTED),!1;if(!a.a.validateFileSize(t,this.maxGifSizeInBytes()))return this.addFileError(o.a.GIF_TOO_LARGE),!1}return!0},this.resizeImage=function(t){return t.isGif?Promise.resolve(t):r.a.resize(t.fileHandle).then(function(e){return a.a.revokeObjectUrl(t.thumbnail.src),c.a.update(t.fileId,{fileHandle:e,thumbnail:{src:a.a.getObjectUrl(e)}})}).then(n.a)},this.gotImageData=function(t){var e=this;this.resizeImage(t).then(function(t){var i=void 0,s=e.mediaItems&&e.mediaItems.length,n=s?c.a.get(e.mediaItems[0]).isGif:null,a=t.fileId;if(s&&(t.isGif&&!n||!t.isGif&&n?i=o.a.MIXED_MEDIA:t.isGif&&n?i=o.a.GIF_LIMIT:e.attr.photoLimit&&e.attr.photoLimit<=e.mediaItems.length&&(i=o.a.TOO_MANY_PHOTOS)),i)return void e.addFileError(i);e.trigger("uiImagePickerAdd",h.default.merge({message:"flash"},e.eventDataOverrides,!0)),e.select("fileNameSelector").attr("value",t.fileName),e.notifyFileSelected({fileId:a,uploadType:e.attr.uploadType})})}}var n=i("LSuw"),o=i("JSdv"),a=i("+dWm"),r=i("pSzH"),c=i("H6fk"),l=i("IAMj"),h=i("YzIt");e.a=s},JZGn:function(t,e,i){"use strict";function s(t){var e=t.altText?{alt_text:{text:t.altText}}:{},i=t.foundMediaOrigin?{found_media_origin:t.foundMediaOrigin}:{};return a({},e,i)}function n(){this.uploadMetadata=function(t,e){var i=s(e);return new Promise(function(e,s){if(i&&"{}"!==JSON.stringify(i)){var n=new XMLHttpRequest;n.open("POST",r,!0),n.withCredentials=!0,n.timeout=c,n.onload=function(){n.status>=200&&n.status<400?e(t):s(l)},n.ontimeout=n.onerror=function(){s(l)},n.send(JSON.stringify(a({media_id:t},i)))}else e(t)})}}var o=i("0d4m"),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},r="https://upload.twitter.com/i/media/metadata/create.json",c=4e3,l=Object(o.default)("Uploading media metadata failed! Please try again later.");e.a=n},JdPb:function(t,e,i){"use strict";(function(t){function s(){n.default.mixin(this,[o.a]),this.defaultAttrs({navigationActiveClass:"js-navigation-active",selectedClass:"selected-stream-item",unselectableClass:"js-unselectable-stream-item",firstItemSelector:".js-stream-item:first-child:not(.js-unselectable-stream-item)",profilePageSelector:".route-profile",profileOwnerUserIdSelector:".ProfileNav .user-actions",pushStateSelector:"a.js-nav",selectedSelector:".selected-stream-item"}),this.moveSelection=function(e){var i=this,s=t(e.target);if(!s.closest(this.attr.selectedSelector).length){var n=s.closest(this.attr.genericItemSelector);s.closest(this.attr.pushStateSelector).length&&(this.$linkClicked=n,clearTimeout(this.linkTimer),this.linkTimer=setTimeout(function(){return i.$linkClicked=t()},0)),this.$selected.length&&this.selectItem(n)}},this.clearSelection=function(){var e=t(this.attr.selectedSelector);this.$previousSelection=e,e.removeAttr("tabIndex").removeClass(this.attr.selectedClass),this.$selected=t(),this.trigger(e,"uiTimelineSelectionCleared")},this.selectTopItemHandler=function(){this.selectTopItem()},this.selectTopItem=function(t){this.clearSelection(),this.trigger("uiInjectNewItems",t||{}),this.selectAdjacentItem("next",{scrollToTop:!0})},this.injectAndPossiblySelectTopItem=function(t,e){var i=this.$selected.length;i&&this.clearSelection(),this.trigger("uiInjectNewItems",e||{}),i&&this.selectAdjacentItem("next")},this.selectTopItemByKeyboard=function(){this.selectTopItem({wasPeriodPress:!0})},this.selectPrevItem=function(){this.selectAdjacentItem("prev")},this.selectNextItem=function(t,e){this.selectAdjacentItem("next",e)},this.selectNextAdjacentItem=function(){var t=this.$selected;this.selectAdjacentItem("next"),t===this.$selected&&this.selectAdjacentItem("prev")},this.selectNextItemNotFrom=function(t){for(var e="next",i=this.$selected;this.getUserIdFromNode(this.$selected)===t;)if(this.selectAdjacentItem(e),i===this.$selected){if("next"!==e)return;e="prev"}else i=this.$selected},this.getAdjacentParentItem=function(t,e){var i=t.closest(".js-navigable-stream"),s=t;return i.length&&(t=i.closest(".js-stream-item"),s=t[e](),!s.length)?this.getAdjacentParentItem(t,e):s},this.getAdjacentChildItem=function(t,e){var i=t,s=i.hasClass("js-has-navigable-stream"),n="next"===e?"first-child":"last-child";return i.length&&s?(i=i.find(".js-navigable-stream").eq(0).find(">li:"+n),this.getAdjacentChildItem(i,e)):i},this.selectAdjacentItem=function(t,e){var i=void 0;if(i=this.$selected.length?this[t](this.$selected):this.select("firstItemSelector").eq(0),i.length||(i=this.getAdjacentParentItem(this.$selected,t)),i=this.getAdjacentChildItem(i,t),i.length&&i.hasClass(this.attr.unselectableClass))return this.$selected=i,this.selectAdjacentItem(t,e);this.selectItem(i);var s="next"===t?"uiNextItemSelected":"uiPreviousItemSelected";this.trigger(this.$selected,s),this.focusSelected(),!i.length||e&&e.maintainPosition||this.adjustScrollForSelectedItem(e)},this.next=function(t){return t.next()},this.prev=function(t){return t.prev()},this.selectItem=function(t){t.length&&this.$selected!==t&&(this.clearSelection(),this.$selected=t,this.$selected.addClass(this.attr.selectedClass),this.trigger(this.$selected,"uiTimelineItemSelected"))},this.focusSelected=function(){var t=this;this.$selected.attr("tabIndex",-1).focus(),setTimeout(function(e){return t.trigger(e,"uiAfterTimelineSelectionFocused")},0,this.$previousSelection)},this.deselect=function(e){var i=-1!==["HTML","BODY"].indexOf(e.target.tagName),s="page-outer"===e.target.id&&!t(e.target).parents("#page-container").length;(i||s)&&this.clearSelection()},this.muteUser=function(){this.triggerBlockActionOnNode(this.$selected,"uiDidMuteUser")},this.blockUser=function(){this.triggerBlockActionOnNode(this.$selected,"uiOpenBlockUserDialog")},this.updateAfterBlock=function(e,i){var s=i.userId.toString()===t(this.attr.profileOwnerUserIdSelector).attr("data-user-id"),n=0!==t(this.attr.profilePageSelector).length;s?this.trigger("uiHideProfileTweets"):n||(this.selectNextItemNotFrom(i.userId),this.trigger("uiRemoveTweetsFromUser",i))},this.removeTweetsAndEngagementsFromUser=function(t,e){this.selectNextItemNotFrom(e.userId),this.trigger("uiRemoveTweetsFromUser",e)},this.updateSelectionBeforeDelete=function(t,e){this.select("genericItemSelector").length&&this.$selected.attr("data-item-id")===e.sourceEventData.id.toString()&&this.selectNextAdjacentItem()},this.adjustScrollForItem=function(e,i){i&&i.scrollToTop?t(window).scrollTop(0):e.length&&t(window).scrollTop(e.offset().top-t(window).height()/10)},this.notifyExpansionRequest=function(e,i){var s=this.$selected.find(".tweet"),n=s.data("permalink-path"),o=s.data("conversation-id");n&&t(document).trigger("uiNavigate",{href:n,conversation_id:o})},this.adjustScrollForSelectedItem=function(t){this.adjustScrollForItem(this.$selected,t)},this.processActiveNavigation=function(){setTimeout(this.removeActiveNavigationClass.bind(this),2e3)},this.setNavigationActive=function(){this.$linkClicked.addClass(this.attr.navigationActiveClass)},this.removeActiveNavigationClass=function(){this.$node.find("."+this.attr.navigationActiveClass).removeClass(this.attr.navigationActiveClass)},this.handleEvent=function(e){return function(){t("body").hasClass("modal-enabled")||this[e].apply(this,arguments)}},this.changeSelection=function(e,i){var s=t(e.target);this.$selected.length&&(this.selectItem(s),i&&i.setFocus&&this.focusSelected())},this.after("initialize",function(){this.$selected=this.$node.find(this.attr.selectedSelector),this.$linkClicked=t(),this.on(document,"uiShortcutSelectPrev",this.handleEvent("selectPrevItem")),this.on(document,"uiShortcutSelectNext uiSelectNext",this.handleEvent("selectNextItem")),this.on(document,"uiSelectItem",this.handleEvent("changeSelection")),this.on(document,"uiShortcutEnter",this.handleEvent("notifyExpansionRequest")),this.on(document,"uiSelectTopTweet",this.handleEvent("selectTopItemHandler")),this.on(document,"uiShortcutGotoTopOfScreen",this.handleEvent("selectTopItemByKeyboard")),this.on(document,"uiGotoTopOfScreen",this.handleEvent("injectAndPossiblySelectTopItem")),this.on(document,"uiShortcutMuteUser",this.handleEvent("muteUser")),this.on(document,"uiShortcutBlock",this.handleEvent("blockUser")),this.on(document,"uiUpdateAfterBlock",this.updateAfterBlock),this.on(document,"uiRemoveTweetsAndEngagementsFromUser",this.removeTweetsAndEngagementsFromUser),this.on(document,"uiBeforeTweetRemoved",this.updateSelectionBeforeDelete),this.on(document,"uiRemovedSomeTweets",this.adjustScrollForSelectedItem),this.on(document,"uiBeforePageChanged uiClearSelection",this.clearSelection),this.on(document,"uiPageChanged",this.processActiveNavigation),this.on("click",{genericItemSelector:this.moveSelection}),this.on(document,"uiNavigate",this.setNavigationActive),this.on(document,"click",this.deselect)})}var n=i("q9/C"),o=i("xOPL");e.a=s}).call(e,i("4kSj"))},JhoL:function(t,e,i){"use strict";function s(t){var e={woeid:-1,placeTypeCode:-1,name:Object(o.default)("No results were found. Try selecting from a list.")};this.attr={id:null,items:[],limit:10},this.attr=n.default.merge(this.attr,t),this.getRemoteSuggestions=function(t,e,i){return i},this.requiresRemoteSuggestions=function(t){return!1},this.getLocalSuggestions=function(t,i){var s=this.attr.items,n=function(t){return t.replace(/\s+/g,"").toLowerCase()};if(t&&t.query){var o=n(t.query);s=this.attr.items.filter(function(t){return 0===n(t.name).indexOf(o)})}i(s.length?s.slice(0,this.attr.limit):[e])},this.setTrendLocations=function(t){this.attr.items=t.trendLocations}}var n=i("YzIt"),o=i("0d4m");e.a=s},K6LY:function(t,e,i){"use strict";function s(){this.defaultAttrs({blockUserLabelSelector:".block-user-label",blockUserTextSelector:".block-user-text",blockButtonSelector:".block-button",blockInputSelector:"input[name=block_user]"}),this.setUpDialog=function(t,e){this.eventData=e,this.setTriggeredTarget(),this.setScreenNameText(),this.isComplete=!1,this.open()},this.setTriggeredTarget=function(){"user"===this.eventData.target?this.$node.addClass("block-from-user"):this.$node.removeClass("block-from-user")},this.setScreenNameText=function(){this.select("blockUserLabelSelector").text(Object(o.default)("Block @{{screenName}}?",this.eventData)),this.select("blockUserTextSelector").text(Object(o.default)("@{{screenName}} will no longer be able to follow or message you, and you will not see notifications from @{{screenName}}.",this.eventData))},this.submitBlock=function(){this.trigger("uiBlockAction",{eventData:this.eventData,tweetId:this.eventData.tweetId,userId:this.eventData.userId,screenName:this.eventData.screenName,impressionId:this.eventData.impressionId,disclosureType:this.eventData.disclosureType,scribeContext:{component:"block_dialog",element:"user"===this.eventData.target?"user":"tweet"}}),this.trigger("uiDidTriggerBlockingAction",{userId:this.eventData.userId}),this.isComplete=!0,this.close()},this.around("close",function(t){this.isOpen()&&!this.isComplete&&this.trigger("uiBlockDialogCancel",this.eventData),t()}),this.after("initialize",function(){this.on(document,"uiNeedsBlockDialog",this.setUpDialog),this.on("click",{blockButtonSelector:this.submitBlock})})}var n=i("DBjh"),o=i("0d4m"),a=i("UHc7"),r=Object(n.default)(a.a,s);e.a=r},KQm4:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({disableKeyboardShortcuts:!0,globalTweetBoxDialogSelector:"#global-tweet-dialog",globalTweetBoxSelector:"#global-tweet-dialog form.tweet-form",globalTweetFormGifPickerSelector:".tweet-form .found-media-search",top:"20%"}),this.openReply=function(t,e){this.displayTweet(e.retweetId||e.id,{modal:"reply"});var i={},s=e.isReplyLinkClick&&e.canBeSelfThreaded;i.htmlTitle=s?Object(r.default)("Add another Tweet"):l.a.render({in_reply_to_user:e.replyToUsers[0]}),e.semanticAnnotationIds&&(i.semanticAnnotationIds=e.semanticAnnotationIds),this.openTweetDialog(t,h({},e,i))},this.openTweetDialog=function(e,i){var s=t(this.attr.globalTweetBoxSelector),n=void 0;if(i&&i.htmlTitle?this.select("modalTitleSelector").html(i.htmlTitle):this.select("modalTitleSelector").text(i&&i.title||Object(r.default)("Compose new Tweet")),this.tweetBoxReady||(n={autoplayDisabled:this.attr.autoplayDisabled,eventData:{scribeContext:{component:"tweet_box_dialog"}},thumbnailSize:"large",environment:this.attr.environment,videoSupport:!0,tweetBoxDialogSelector:this.attr.globalTweetBoxDialogSelector,tweetBoxDialogType:"tweet_box_dialog"},this.trigger(s,"uiInitTweetbox",n),this.tweetBoxReady=!0),i){if(!i.id){var o=null;i.screenNames?o=i.screenNames:i.screenName&&(o=[i.screenName]),o&&(i.defaultText="@"+o.join(" @")+" ")}i.text&&(i.defaultText=" "+i.text),this.trigger(s,"uiOverrideTweetBoxOptions",i)}if(this.open(),this.trigger(s,"uiComposerResetAndFocus"),i&&i.attachImageUrls){var a=this;t.each(i.attachImageUrls,function(t,e){a.trigger(a.select("globalTweetFormGifPickerSelector"),"uiAttachImageUrl",{url:e,isImage:!0,mediaCategoryPrefix:"tweet_",skipSourceUrl:!0})})}},this.preventDefaultDialogFocus=function(t){this.isOpen()&&this.$dialog.is(t.target)&&t.preventDefault()},this.after("initialize",function(){this.on(document,"uiDialogInitialFocus",this.preventDefaultDialogFocus),this.on(document,"uiOpenTweetDialog",this.openTweetDialog),this.on(document,"uiOpenReplyDialog",this.openReply),this.on("uiTweetSent",this.close),this.on("uiDialogClosed",this.removeTweet)})}var n=i("DBjh"),o=i("UHc7"),a=i("WqLG"),r=i("0d4m"),c=i("zLK3"),l=i.n(c),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},d=Object(n.default)(s,o.a,a.a);e.a=d}).call(e,i("4kSj"))},KUNr:function(t,e,i){"use strict";function s(){this.defaultAttrs({retweetStatSelector:".js-stat-retweets a",favoriteStatSelector:".js-stat-favorites a",tweetStatCountSelector:"data-tweet-stat-count",displayCountSelector:"strong"}),this.updateSocialProofStats=function(t,e){var i=this;t.target===document&&e.stats&&e.stats.forEach(function(t){var e=i.findTweetOrRetweet(t.status_id),s=e.find(i.socialProofStatElementSelectorFor(t.name));i.updateSocialProofStat(s,t)})},this.socialProofStatElementSelectorFor=function(t){return{retweet:this.attr.retweetStatSelector,favorite:this.attr.favoriteStatSelector}[t]},this.updateSocialProofStat=function(t,e){t.attr(this.attr.tweetStatCountSelector,e.count),t.find(this.attr.displayCountSelector).text(e.commaized_count)},this.after("initialize",function(){this.on("dataGotTweetStats",this.updateSocialProofStats)})}e.a=s},KaXq:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMSendingStateIndicator">\n  <span>Sending message '),s.b(s.v(s.f("current",t,e,0))),s.b(" of "),s.b(s.v(s.f("total",t,e,0))),s.b("</span>\n  <span>...</span>\n</div>"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},KbKg:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({dmImagePreviewSelector:".dm-media-preview",dmPreviewSelector:".dm-media"}),this.loadImage=function(e,i){var s=this,n=t('<img class="dm-media-image"/>'),o=this.select("dmImagePreviewSelector");o.empty(),n.on("load",function(t){o.empty().append(n),n.attr({"data-height":n[0].height,"data-width":n[0].width}),r.a.resizeMedia(n,s.select("dmPreviewSelector")),s.position();var e=parseFloat(n.css("margin-top"));e&&n.css("margin-bottom",e),s.trigger("uiDMMediaLoaded",{url:n.attr("src"),id:i})}),n.on("error",function(t){return s.trigger("uiDMMediaFailed",{url:n.attr("src"),id:i})}),n.attr("src",e),o.addClass("js-initial-focus")},this.openDialog=function(t,e){this.calculateScrollbarWidth(),r.a.resetMinSize(this.select("dmPreviewSelector")),this.loadImage(e.imgUrl,e.dmId),this.open()},this.renderConversation=function(t,e){this.trigger("uiDMDialogMediaPreviewClosed")},this.after("initialize",function(){this.on(document,"uiDMDialogMediaPreview",this.openDialog),this.on("uiDialogCloseRequested",this.renderConversation)})}var n=i("DBjh"),o=i("UHc7"),a=i("mRBi"),r=i("Hotm");e.a=Object(n.default)(s,o.a,a.a)}).call(e,i("4kSj"))},KczS:function(t,e,i){"use strict";function s(){this.defaultAttrs({muteButtonNotificationsSelector:".dm-mute-notifications-dialog .modal-submit",muteDurationRadioSelector:'input[name="dm[mute_notifications_duration]"]:checked',defaultCheckedRadioSelector:'input[name="dm[mute_notifications_duration]"][value="1"]'}),this.openDialog=function(t,e){this.select("defaultCheckedRadioSelector").prop("checked",!0),this.conversationId=e.conversation_id,this.open()},this.submitMuteNotifications=function(){var t=this.select("muteDurationRadioSelector").val();this.trigger("uiToggleNotifications",{conversation_id:this.conversationId,enable_notifications:!1,mute_duration:this.select("muteDurationRadioSelector").val()}),this.trigger("uiDMUpdateNotificationsState",a({},this.getMuteData(t),{is_muted:!0}))},this.getMuteData=function(t){var e={1:1,2:8,3:168},i=e[t];return{mute_expiration_time:i?Date.now()+i*r:null,is_short_interval:i?i<=24:null}},this.after("initialize",function(){this.on(document,"uiDMDialogMuteNotifications",this.openDialog),this.on(this.attr.muteButtonNotificationsSelector,"click",this.submitMuteNotifications)})}var n=i("DBjh"),o=i("UHc7"),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=Object(n.default)(s,o.a);var r=36e5},Kjck:function(t,e,i){"use strict";(function(t){function s(){this.checkScrollPosition=function(){var t=this.webkitFullscreenElement();if(!t||this.node===t||t.contains(this.$content[0])){var e=this.$content.height(),i=void 0;this.__immediatelyRequestMoreItems?(this.__immediatelyRequestMoreItems=!1,i="uiNearTheBottom",this.__lastTriggerFrom=1):this.inTriggerRange(0)&&(e>this.__lastTriggeredHeight||this.lastTriggeredFrom(1))?(i="uiNearTheTop",this.__lastTriggerFrom=0):this.inTriggerRange(1)&&(e>this.__lastTriggeredHeight||this.lastTriggeredFrom(0))&&(i="uiNearTheBottom",this.__lastTriggerFrom=1),i&&(this.__lastTriggeredHeight=e,this.trigger(i))}},this.inTriggerRange=function(t){var e=this.$content.height(),i=this.$node.scrollTop(),s=i+this.$node.height(),n=Math.abs(Math.min(s-e,0)),o=this.$node.height()/2;return i<o&&0===t||n<o&&1===t},this.lastTriggeredFrom=function(t){return this.__lastTriggerFrom===t},this.resetScrollState=function(){this.__lastTriggeredHeight=0,this.__lastTriggerFrom=-1},this.webkitFullscreenElement=function(){return document.webkitFullscreenElement},this.after("initialize",function(){this.resetScrollState(),this.__immediatelyRequestMoreItems=this.attr.immediatelyRequestMoreItems,this.$content=this.attr.contentSelector?this.select("contentSelector"):t(document),this.on("scroll",o.default.throttle(this.checkScrollPosition.bind(this),100)),this.on("uiTimelineReset",this.resetScrollState),this.on("uiSwiftLoaded uiPageChanged",this.checkScrollPosition)})}var n=i("DBjh"),o=i("YzIt"),a=Object(n.default)(s);e.a=a}).call(e,i("4kSj"))},LSuw:function(t,e,i){"use strict";function s(t){return n.a.getDimensions(t.thumbnail.src).then(function(e){var i={thumbnail:{width:e.width,height:e.height}};return o.a.update(t.fileId,i)})}var n=i("Ogfk"),o=i("H6fk");e.a=s},LVMq:function(t,e,i){"use strict";function s(){n.default.mixin(this,[a.a]),this.defaultAttrs({foundMediaSearch:".found-media-search"}),this.attachedImageUrl=function(t,e){this.foundMediaInfo=e},this.removedAttachment=function(){this.foundMediaInfo=void 0},this.after("initialize",function(t){this.attachChild(o.a,this.select("foundMediaSearch"),{autoplayDisabled:this.attr.autoplayDisabled,eventData:this.attr.eventData,preferredGravity:this.attr.preferredGravity,preferredWeight:this.attr.preferredWeight,preventDropdownsOpeningUp:this.attr.preventDropdownsOpeningUp,restoreFocusOnClose:!0,scribeContext:this.attr.scribeContext,mediaCategoryPrefix:this.attr.dmOnly?"dm_":"tweet_"}),this.on("uiAttachImageUrl",this.attachedImageUrl),this.on("uiPreviewThumbnailRemove uiPreviewThumbnailRemoveAll",this.removedAttachment)})}var n=i("q9/C"),o=i("GaHX"),a=i("AJAn");e.a=s},LYwl:function(t,e,i){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=i("CZTd"),o=i.n(n),a=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),r={},c=function(){function t(){s(this,t),this.pollOptions=["",""],this.validOptions=[],this.isValid=!1,this.customDuration=null}return a(t,[{key:"addPollOption",value:function(t){this.length<4&&(this.pollOptions.push(t||""),this._validateOptions())}},{key:"deletePollOption",value:function(t){this.length>2&&(this.pollOptions.splice(t,1),this._validateOptions())}},{key:"updatePollOption",value:function(t,e){this.pollOptions[t]=e,this._validateOptions()}},{key:"_validateOptions",value:function(){var t=this,e=this.pollOptions.some(this._invalidRule);this.validOptions=this.pollOptions.filter(function(e){return e.trim().length&&!t._invalidRule(e)}).map(function(t){return t.trim()}),this.isValid=!(e||this.validOptions.length<2)}},{key:"_invalidRule",value:function(t){return o.a.getUnicodeTextLength(t)>25}},{key:"_getCardName",value:function(t){return"poll"+t+"choice_text_only"}},{key:"_getChoiceName",value:function(t){return"twitter:string:choice"+t+"_label"}},{key:"length",get:function(){return this.pollOptions.length}},{key:"createData",get:function(){var t=this;if(this.isValid){var e={"twitter:card":this._getCardName(this.validOptions.length),"twitter:api:api:endpoint":"1"};return this.validOptions.forEach(function(i,s){e[t._getChoiceName(s+1)]=i},this),this.customDuration&&(e["twitter:long:duration_minutes"]=this.customDuration),e}}}]),t}(),l={getPoll:function(t){return t in r||(r[t]=new c),r[t]},putPoll:function(t,e){r[t]=e},deletePoll:function(t){t in r&&delete r[t]},deleteAllPoll:function(){var t=!0,e=!1,i=void 0;try{for(var s,n=Object.keys(r)[Symbol.iterator]();!(t=(s=n.next()).done);t=!0){var o=s.value;delete r[o]}}catch(t){e=!0,i=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw i}}},MAX_OPTION_LENGTH:25,MIN_OPTION_COUNT:2,MAX_OPTION_COUNT:4};e.a=l},LcyA:function(t,e,i){"use strict";(function(t){function s(t,e,i){var s=0,n="";return e(t).forEach(function(e){n+=t.slice(s,e.indices[0])+i(t.slice(e.indices[0],e.indices[1])),s=e.indices[1]}),n+t.slice(s)}function n(){this.defaultAttrs({isRTL:"rtl"===t("body").attr("dir"),rtlCharRegex:/[\u0600-\u06FF]|[\u0750-\u077F]|[\u0590-\u05FF]|[\uFE70-\uFEFF]/gm,dirMarkRegex:/\u200e|\u200f/gm,rtlThreshold:.3}),this.shouldBeRTL=function(t,e,i){void 0===i&&(i=t.match(this.attr.rtlCharRegex));var s=t.trim();if(!s)return this.attr.isRTL;if(!i)return!1;var n=s.length-e;return n>0&&i.length/n>this.attr.rtlThreshold},this.removeMarkers=function(t){return t.replace(this.attr.dirMarkRegex,"")},this.setMarkersAndRTL=function(t,e){var i=e.match(this.attr.rtlCharRegex),n=0;if(i){t=e,t=s(t,a.a.extractMentionsWithIndices,function(t){return n+=t.length+1,"‎"+t+"‏"});var o=this.attr.rtlCharRegex;t=s(t,a.a.extractHashtagsWithIndices,function(t){return t[1].match(o)?t:"‎"+t}),t=s(t,a.a.extractUrlsWithIndices,function(t){return n+=t.length+2,t+"‎"})}var r=this.shouldBeRTL(e,n,i);return this.$text.attr("dir",r?"rtl":"ltr"),t},this.erasePastMarkers=function(t){var e=void 0;if(8===t.which)e=-1;else{if(46!==t.which)return;e=0}var i=r.a.getPosition(this.$text[0]),s=this.$text.val(),n=0,o=void 0;do{(o=s[i+e]||"")&&(i+=e,n++,s=s.slice(0,i)+s.slice(i+1))}while(o.match(this.attr.dirMarkRegex));n>1&&(this.$text.val(s),r.a.setPosition(this.$text[0],i),t.preventDefault(),this.detectUpdatedText())},this.around("cleanText",function(t,e){var i=this.removeMarkers(t(e)),s=this.setMarkersAndRTL(e,i);if(s!==e){var n=this.$text[0],o=r.a.getPosition(n);this.$text.val(s),this.prevText=s,r.a.setPosition(n,o+s.length-e.length)}return i}),this.after("initTextNode",function(){this.on(this.$text,"keydown",this.erasePastMarkers)})}var o=i("CZTd"),a=i.n(o),r=i("mJ5M");e.a=n}).call(e,i("4kSj"))},LrHz:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({tcoSelector:".js-display-url",appendTarget:"head"}),this.preconnect=function(e){var i=e.target.parentNode,s=i&&i.href,n=i&&i.getAttribute("data-expanded-url");n&&s&&0===s.indexOf("https://t.co/")&&t('<link rel="preconnect">').attr({href:n}).appendTo(this.attr.appendTarget)},this.after("initialize",function(){this.on("click",{tcoSelector:this.preconnect})})}var n=i("DBjh"),o=Object(n.default)(s);e.a=o}).call(e,i("4kSj"))},LtQk:function(t,e,i){"use strict";function s(){this.defaultAttrs({hoverFetchDelay:100,noShowError:!0,statsName:"swift_profile_popup"}),this.userCache={screenNames:Object.create(null),ids:Object.create(null)},this.socialProofCache={screenNames:Object.create(null),ids:Object.create(null)},this.saveToCache=function(t,e){t.ids[e.user_id]=e,t.screenNames[e.screen_name]=e},this.retrieveFromCache=function(t,e){var i=void 0;return e.userId?i=t.ids[e.userId]:e.user_id?i=t.ids[e.user_id]:e.screenName?i=t.screenNames[e.screenName]:e.screen_name&&(i=t.screenNames[e.screen_name]),i},this.invalidateCaches=function(t,e){var i=void 0,s=void 0,n=void 0;e.userId?(i=e.userId,n=this.userCache.ids[i],s=n&&n.screen_name):(s=e.screenName,n=this.userCache.screenNames[s],i=n&&n.user_id),i&&delete this.userCache.ids[i],i&&delete this.socialProofCache.ids[i],s&&delete this.userCache.screenNames[s],s&&delete this.socialProofCache.screenNames[s]},this.getProfilePopupMain=function(t,e){var i=this,s=function(t){i.saveToCache(i.userCache,t),i.trigger("dataProfilePopupSuccess",t);var e=i.retrieveFromCache(i.socialProofCache,t);e&&i.trigger("dataSocialProofSuccess",e)},n=function(t){return i.trigger("dataProfilePopupFailure",t)},o=this.retrieveFromCache(this.userCache,t);if(o)return o.sourceEventData=t,void s(o);var a=function(){i.pendingRemoteRequest=null,i.get({url:"/i/profiles/popup",data:e,eventData:t,cache:!1,success:s,error:n})};e.wants_hovercard?this.pendingRemoteRequest=setTimeout(a,this.attr.hoverFetchDelay):a()},this.getProfilePopup=function(t,e){var i={};e.screenName?i.screen_name=e.screenName:e.userId&&(i.user_id=e.userId),e.isHoverRequest&&(i.wants_hovercard=!0),this.getProfilePopupMain(e,i)},this.hideProfileHover=function(){this.pendingRemoteRequest&&(clearTimeout(this.pendingRemoteRequest),this.pendingRemoteRequest=null)},this.after("initialize",function(){this.on("uiWantsProfilePopup",this.getProfilePopup),this.on("uiHideProfileHover",this.hideProfileHover),this.on(document,"dataFollowStateChange dataUserActionSuccess dataDidMuteUser dataDidUnmuteUser",this.invalidateCaches)})}var n=i("DBjh"),o=i("VtWx"),a=Object(n.default)(s,o.a);e.a=a},MC7r:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({supportedChallengeTypes:["Captcha"],captchaName:"Captcha",defaultCompletionMessage:Object(o.default)("Challenge completed."),recaptchaLoadTime:100,maxCaptchaLoadRetries:3}),this.hitChallengeEndpoint=function(t){this.get({url:"/account/challenge",data:{challenge:t.challenge,response:t.response,challenge_name:t.challengeName},success:this.handleSuccessResponse.bind(this),error:this.handleErrorResponse.bind(this)})},this.handleErrorResponse=function(t){this.closeCurrentChallenge(),this.resetChallengeParams()},this.closeCurrentChallenge=function(){this.currentChallenge&&this.trigger("uiCloseSpam"+this.currentChallenge+"Challenge")},this.allChallengesCompleted=function(t){return!t.challengeName},this.isValidChallengeType=function(t){return-1!==this.attr.supportedChallengeTypes.indexOf(t.challengeName)},this.needToRefreshCaptchaChallenge=function(t){return this.currentChallenge===this.attr.captchaName&&t.challengeName===this.attr.captchaName},this.handleSuccessResponse=function(t){this.allChallengesCompleted(t)?(this.closeCurrentChallenge(),this.sendCompletionMessage(),this.resetChallengeParams()):this.needToRefreshCaptchaChallenge(t)?this.trigger("uiRefreshSpamCaptchaChallenge"):this.isValidChallengeType(t)?(this.closeCurrentChallenge(),this.setAndOpenNewChallenge(t)):(this.closeCurrentChallenge(),this.resetChallengeParams())},this.setAndOpenNewChallenge=function(t){this.setChallengeParams(t.challengeName,t.completionMessage),this.trigger("uiOpenSpam"+this.currentChallenge+"Challenge",t)},this.sendCompletionMessage=function(){this.trigger("uiShowMessage",{message:this.getCompletionMessage()})},this.getCompletionMessage=function(){return this.completionMessage||this.attr.defaultCompletionMessage},this.createInitialChallenge=function(t,e){this.needToCreateRecaptchaWidget(e)?this.fetchRecaptchaScript(t,e):this.setAndOpenNewChallenge(e)},this.needToCreateRecaptchaWidget=function(t){return t.challengeName===this.attr.captchaName&&!this.isRecaptchaObjectDefined()},this.isRecaptchaObjectDefined=function(){return"undefined"!=typeof Recaptcha},this.fetchScriptDone=function(t,e,i){"success"===i?this.ensureRecaptchaCreatedAndLoadChallenge(t):this.trigger(document,"uiShowError",{message:"Internal server error."})},this.fetchScriptFailure=function(t,e,i){this.trigger(document,"uiShowError",{message:"Internal server error."})},this.fetchRecaptchaScript=function(e,i){t.getScript(this.attr.recaptchaApiUrl).done(this.fetchScriptDone.bind(this,i)).fail(this.fetchScriptFailure.bind(this))},this.ensureRecaptchaCreatedAndLoadChallenge=function(t){if(this.isRecaptchaObjectDefined())return void this.setAndOpenNewChallenge(t);this.loadAttempts=this.attr.maxCaptchaLoadRetries,this.recaptchaLoadInterval=setInterval(this.checkIfRecaptchaCreated.bind(this,t),this.attr.recaptchaLoadTime)},this.clearRecaptchLoadInterval=function(){clearInterval(this.recaptchaLoadInterval)},this.clearLoadAttempts=function(){this.loadAttempts=void 0},this.isLoadAttemptsDefined=function(){return void 0!==this.loadAttempts},this.checkIfRecaptchaCreated=function(t){this.isLoadAttemptsDefined()&&this.loadAttempts--,this.isRecaptchaObjectDefined()&&(this.clearRecaptchLoadInterval(),this.setAndOpenNewChallenge(t),this.clearLoadAttempts()),(!this.isLoadAttemptsDefined()||this.loadAttempts<=0)&&(this.clearRecaptchLoadInterval(),this.clearLoadAttempts(),this.trigger(document,"uiShowError",{message:"Internal server error."}))},this.submitChallenge=function(t,e){this.hitChallengeEndpoint(e)},this.resetChallengeParams=function(){this.setChallengeParams()},this.setChallengeParams=function(t,e){this.currentChallenge=t,this.completionMessage=e},this.after("initialize",function(){this.on("uiSubmitSpamChallenge",this.submitChallenge),this.on("dataInitialChallengeNeeded",this.createInitialChallenge)})}var n=i("DBjh"),o=i("0d4m"),a=i("VtWx");e.a=Object(n.default)(s,a.a)}).call(e,i("4kSj"))},MRdM:function(t,e,i){"use strict";function s(t,e,i){this.toCSS=function(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"rgba("+[parseInt(t),parseInt(e),parseInt(i),s].join()+")"},this.darker=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;return new s(t*n,e*n,i*n)}}function n(){this.defaultAttrs({galleryStyleSelector:".Gallery-styles"}),this.setDominantColorForMedia=function(t){var e=t?t.data("dominant-color"):[];this.dominantColor=this._getDominantColor(e),this._applyDominantColor(this.dominantColor),this._appendHoverRuleTag(this.dominantColor)},this._getDominantColor=function(t){if(Array.isArray(t)&&3===t.length)return new s(t[0],t[1],t[2])},this._applyDominantColor=function(t){t?(this.select("galleryMediaSelector").css("background-color",t.toCSS()),this.select("gallerySelector").css("background-color",t.toCSS())):(this.select("galleryMediaSelector").css("background-color",""),this.select("gallerySelector").css("background-color",""))},this._appendHoverRuleTag=function(t){var e=this.select("galleryStyleSelector")[0];if(t&&e){var i=t.toCSS(.7),s="\n        .Gallery.with-tweet .GalleryTweet .tweet,\n        .Gallery.with-tweet .Gallery-content:hover .GalleryTweet.enable-fade .tweet {\n          background-color: "+i+";\n        }\n      ";e.sheet.insertRule(s,e.sheet.cssRules.length)}else if(e)for(var n=e.sheet.cssRules.length;n>0;n--)e.sheet.deleteRule(n-1)},this.applyDominantColorToBorder=function(){var t=this.select("galleryTweetSelector");if(this.dominantColor){var e=this.dominantColor.darker(.75).toCSS(.8);t.find(".stream-item-footer").css("border-color",e)}else t.find(".stream-item-footer").css("border-color","")}}e.a=n},MZZR:function(t,e,i){"use strict";function s(){this.defaultAttrs({successFromEndpoints:{destroy:"dataDidDeleteTweet",retweet:"dataDidRetweet",like:"dataDidFavoriteTweet",unretweet:"dataDidUnretweet",unlike:"dataDidUnfavoriteTweet",report:"dataDidReportTweet",pin:"dataDidUserPinTweet",unpin:"dataDidUserUnpinTweet"},errorsFromEndpoints:{destroy:"dataFailedToDeleteTweet",retweet:"dataFailedToRetweet",like:"dataFailedToFavoriteTweet",unretweet:"dataFailedToUnretweet",unlike:"dataFailedToUnfavoriteTweet",report:"dataFailedToReportTweet",pin:"dataFailedToUserPinTweet",unpin:"dataFailedToUserUnpinTweet"},statsName:"swift_tweet_actions"});var t={like:{path:"/favorites/create.json",counterName:"favorite"},unlike:{path:"/favorites/destroy.json",counterName:"favorite"},retweet:{path:"/statuses/retweet.json",counterName:"retweet"},unretweet:{path:"/statuses/unretweet.json",counterName:"retweet"}};this.takeAction=function(e,i,s){var n=this,o=t[e],l=!!o,h=function(t){t&&t.message&&this.trigger("uiShowMessage",{message:t.message}),this.trigger(this.attr.successFromEndpoints[e],t);var i=t.profile_stats,s=t.tweet_stats;l&&(i=a.a.normalizeProfileStats(t,o,r.a.language),s=a.a.normalizeTweetStats(t,o,r.a.language)),i&&this.trigger("dataGotProfileStats",{stats:i}),s&&this.trigger("dataGotTweetStats",{stats:s})},d=void 0;d=("like"===e||"retweet"===e)&&"retweetId"in s?{id:s.retweetId}:"report"===e?{tweet_id:s.tweetId,user_id:s.userId,screen_name:s.screenName,block_user:s.blockUser,report_type:s.reportType}:{id:s.id},s.tweetStatCount&&(d.tweet_stat_count=s.tweetStatCount),s.impressionId&&(d.impression_id=s.impressionId,s.disclosureType&&(d.earned="earned"===s.disclosureType)),s.featureContext&&(d.feature_context=s.featureContext);var u={destroy:"DELETE",unretweet:"DELETE"},p={url:function(t,e){return t?n.apiEndpointUrl(o.path):"/i/tweet/"+e}(l,e),data:d,eventData:s,success:h.bind(this),error:this.attr.errorsFromEndpoints[e],retryIfUnavailable:!0,statsSubcategory:e,useOAuthSessionAuth:l};"like"===e&&(this.trigger("uiABImpression",{experiment:"like_over_http_client_6421"}),c.a.getDecider("like_over_http_client")&&(p.useHttpClient=!0,p.endpoint=e)),this.JSONRequest(p,u[e]||"POST")},this.hitEndpoint=function(t){return this.takeAction.bind(this,t)},this.getTweet=function(t,e){var i={id:e.id};e.modal&&(i.modal=e.modal),this.get({url:e.hasStickers?"/i/tweet/stickersHtml":"/i/tweet/html",statsSubcategory:"html",data:i,eventData:e,success:"dataGotTweet",error:"dataFailedToGetTweet"})},this.after("initialize",function(){this.on("uiDidRetweet",this.hitEndpoint("retweet")),this.on("uiDidUnretweet",this.hitEndpoint("unretweet")),this.on("uiDidDeleteTweet",this.hitEndpoint("destroy")),this.on("uiDidFavoriteTweet",this.hitEndpoint("like")),this.on("uiDidUnfavoriteTweet",this.hitEndpoint("unlike")),this.on("uiDidBlockOrReport uiDidReportTweet",this.hitEndpoint("report")),this.on("uiGetTweet",this.getTweet),this.on("uiDidUserPinTweet",this.hitEndpoint("pin")),this.on("uiDidUserUnpinTweet",this.hitEndpoint("unpin"))})}var n=i("DBjh"),o=i("VtWx"),a=i("YChI"),r=i("v9EU"),c=i("IAMj"),l=Object(n.default)(s,o.a);e.a=l},MjOY:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<li class="PromptbirdPrompt-streamItem js-stream-item js-prompt-layout-container separated-module" data-item-type="prompt" data-item-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('">\n  <div class="js-prompt-layout-content"></div>\n</li>'),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},MmTZ:function(t,e,i){"use strict";function s(){this.defaultAttrs({alertSelector:".lifeline-alert-status-btn.is-thread"}),this.changeAlertStatus=function(){this.hasAlert=!this.hasAlert,this.select("alertSelector").toggleClass("enabled",this.hasAlert),this.focus(),this.detectUpdatedText(!0)},this.around("addHiddenText",function(t,e){return t(e)+(this.hasAlert?n:"")}),this.before("reset",function(){this.hasAlert=!1,this.select("alertSelector").toggleClass("enabled",!1)}),this.after("initialize",function(){this.on(this.select("alertSelector"),"click",this.changeAlertStatus)})}e.a=s;var n=" #alert"},Mmtj:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({warningSelector:".suspicious-content-warning",messageSelector:".dm",conversationSelector:".js-dm-conversation",reportButtonsSelector:".suspicious-content-response",reportAsSpamSelector:".js-message-is-spam",reportAsSafeSelector:".js-message-is-safe"}),this.showMessage=function(e,i){e.preventDefault();var s=t(e.target),n=s.prev(this.attr.messageSelector);s.hide(),n.show()},this.reportMessage=function(e,i,s){var n=t(i.target),o=n.closest(this.attr.messageSelector).attr("data-message-id"),a=n.closest(this.attr.conversationSelector).attr("data-thread-id");this.trigger("uiDMDialogReportDM",{id:o,conversation_id:a,report_as:e}),this.select("reportButtonsSelector").hide(),this.trigger("uiDMInboxWantsRefreshed")},this.after("initialize",function(){this.on("uiRevealSuspiciousDM",this.showMessage),this.on("uiReportDMAsSpam",this.reportMessage.bind(this,"spam")),this.on("uiReportDMAsSafe",this.reportMessage.bind(this,"not_spam")),this.on("click",{warningSelector:"uiRevealSuspiciousDM",reportAsSpamSelector:"uiReportDMAsSpam",reportAsSafeSelector:"uiReportDMAsSafe"})})}var n=i("DBjh"),o=Object(n.default)(s);e.a=o}).call(e,i("4kSj"))},Moyp:function(t,e,i){"use strict";function s(){this.defaultAttrs({tweetSelector:".tweet",tweetFormSelector:".tweet-form",conversationModuleSelector:".conversation-module",animatedGifSelector:".animated-gif"})}var n=i("DBjh"),o=i("pREB"),a=i("dUMM"),r=i("F/Mh"),c=i("hJQC"),l=i("o/dd"),h=i("hKEr");e.a=Object(n.default)(s,o.a,r.a,c.a,a.a,h.a,l.a)},MzrW:function(t,e,i){"use strict";function s(){this.before("toggleFavorite",function(t,e,i){return i.tweetData.tweetStatCount=i.$tweet.find(".ProfileTweet-action--favorite .ProfileTweet-actionCount").attr("data-tweet-stat-count")}),this.before("toggleRetweet",function(t,e,i){return i.tweetData.tweetStatCount=i.$tweet.find(".ProfileTweet-action--retweet .ProfileTweet-actionCount").attr("data-tweet-stat-count")})}e.a=s},NWI8:function(t,e,i){"use strict";function s(){this.renderActionPrompt=function(t,e,i){this.renderDelayedPromptForAction(i.sourceEventData.id,t)},this.renderDelayedPromptForAction=function(t,e){var i=this.getDelayedPromptForAction(e);i&&(i.pointerTweetId=t,this.renderPrompt(i))},this.getDelayedPromptForAction=function(t){var e=this.attr.delayedPrompts.filter(function(e){return e.trigger===t})[0];if(e){var i=this.attr.delayedPrompts.indexOf(e);this.attr.delayedPrompts.splice(i,1)}return e},this.after("initialize",function(){this.on(document,"dataDidRetweet",this.renderActionPrompt.bind(this,"retweet")),this.on(document,"dataDidFavoriteTweet",this.renderActionPrompt.bind(this,"favorite"))})}e.a=s},Nkyg:function(t,e,i){"use strict";function s(){this.defaultAttrs({triedShowAddTweetTooltip:!1,selectorAddTweetButton:".js-add-tweet"}),this.validateAddTweetButton=function(){if(this.$addTweetButton){var t=this.isEmpty();this.$addTweetButton.toggleClass("disabled",t).prop("disabled",t)}},this.maybeTriggerTooltip=function(){!this.attr.triedShowAddTweetTooltip&&n.a.getDecider("enable_tweetstorm_tooltip")&&this.getVisibleText().length>n.a.getDeciderValue("text_length_for_tweetstorm_tooltip")&&this.$addTweetButton&&this.$addTweetButton.is(":visible")&&!this.$addTweetButton.is(":disabled")&&(this.attr.triedShowAddTweetTooltip=!0,this.trigger(this.$addTweetButton,"uiShowAddAnotherTweetTooltip"))},this.after("initialize",function(){this.$addTweetButton=this.select("selectorAddTweetButton")})}e.a=s;var n=i("IAMj")},Nqh4:function(t,e,i){"use strict";function s(){this.after("initialize",function(){this.scribeOnEvent("uiDMDialogSharedTweetClick",{element:"shared_tweet_dm",action:"click"})})}var n=i("DBjh"),o=i("3oDc"),a=Object(n.default)(s,o.a);e.a=a},NsFJ:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={emojified_text:i("mDLQ")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("emojified_name",t,e,1),t,e,0,19,38,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<emojified_text0",t,e,""))}),t.pop()),s.fl()},partials:{"<emojified_text0":{name:"emojified_text",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},"Ny+n":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({favoriteSelector:".js-toggle-fav a, .js-actionFavorite",replySelector:".js-actionReply",retweetSelector:".js-toggleRt a:not([aria-disabled=true]), .js-actionRetweet:not(:disabled)",quickPromoteSelector:".js-actionQuickPromote",permalinkSelector:".tweet .js-permalink",tweetItemSelector:".tweet",retweetInlineSelector:".js-actionInlineRetweet",togglableTweetActionsSelector:"a:visible",toggleContainerSelector:".js-toggleState",otherReplyUsersSelector:".js-other-reply-users",anyLoggedInActionSelector:".js-toggleRt a:not([aria-disabled=true]), .js-toggle-fav a, .js-actionReply, .js-actionRetweet, .js-actionFavorite, .js-actionCount",favoritedTweetClass:"favorited",retweetedTweetClass:"retweeted"}),this.handleTransition=function(e,i){var s=this;return function(n,a){var c=Object(o.b)(a);if(c!==o.a.DuplicateFavorite&&c!==o.a.AlreadyRetweeted){var l=a.id||a.sourceEventData.id,h=Object(r.a)(s.$node,s.attr.tweetItemSelector,l),d=h[0],u=document.activeElement,p=void 0;d&&t.contains(d,u)&&(p=t(u).closest(s.attr.toggleContainerSelector)),h[e](i),p&&p.find(s.attr.togglableTweetActionsSelector).focus()}}},this.getDataForReply=function(t){var e=t.closest("[data-semantic-annotation-ids]").attr("data-semantic-annotation-ids"),i=void 0;try{i=JSON.parse(t.attr("data-reply-to-users-json")||"[]")}catch(t){}return Array.isArray(i)||(i=[]),c.default.merge({isReplyLinkClick:!0,replyToUsers:i,retweetId:t.attr("data-retweet-id"),semanticAnnotationIds:e},!0)},this.toggleFavorite=function(t,e,i){var s=i.$tweet.hasClass(this.attr.favoritedTweetClass)?"uiDidUnfavoriteTweet":"uiDidFavoriteTweet";this.trigger(i.$tweet,s,i.tweetData)},this.toggleRetweet=function(t,e,i){var s=i.$tweet.hasClass(this.attr.retweetedTweetClass)?"uiDidUnretweet":"uiOpenRetweetDialog";this.trigger(i.$tweet,s,i.tweetData)},this.uiOpenSignupDialog=function(e,i,s){var n=t(i.el),o=void 0;o=n.is(this.attr.replySelector)?"reply":n.is(this.attr.retweetSelector)?"retweet":n.is(this.attr.favoriteSelector)?"favorite":"default",this.trigger("uiOpenSignupDialog",{screenName:s.tweetData.screenName,action:o})},this.handleLoggedOutFavoriteClick=function(t,e,i){this.trigger("uiLoggedOutActionAttempt",f({},i.tweetData,{action:"favorite_attempt"}))},this.handleLoggedOutRetweetClick=function(t,e,i){this.trigger("uiLoggedOutActionAttempt",f({},i.tweetData,{action:"retweet_attempt"}))},this.handleLoggedOutReplyClick=function(t,e,i){this.trigger("uiLoggedOutActionAttempt",f({},i.tweetData,{action:"reply_attempt"}))},this.otherReplyUsersPopup=function(t,e,i){this.trigger(i.$tweet,"uiRequestActivityPopup",{component:"people_in_conversation_popup",contentId:i.tweetData.tweetId,htmlTitle:Object(n.default)("People in this conversation")})},this.after("initialize",function(){var t=this.mkTweetDataCollectorForAction(this.interactionDataWithCard);if(!this.attr.loggedIn)return void this.on("click",{anyLoggedInActionSelector:this.composeHandler(this.preventDefault,this.getClosestTweet,t,this.uiOpenSignupDialog),favoriteSelector:this.composeHandler(this.preventDefault,this.getClosestTweet,t,this.handleLoggedOutFavoriteClick),retweetSelector:this.composeHandler(this.preventDefault,this.getClosestTweet,t,this.handleLoggedOutRetweetClick),replySelector:this.composeHandler(this.preventDefault,this.getClosestTweet,t,this.handleLoggedOutReplyClick)});var e=this.mkTweetDataCollectorForAction(this.interactionDataWithCard,this.getDataForReply);this.on("click",{favoriteSelector:this.composeHandler(this.preventDefault,this.getClosestTweet,t,this.toggleFavorite),retweetSelector:this.composeHandler(this.preventDefault,this.getClosestTweet,t,this.toggleRetweet),replySelector:this.composeHandler(this.preventDefault,this.getClosestTweet,e,this.triggerTweetAction("uiReplyToTweet")),quickPromoteSelector:this.composeHandler(this.preventDefault,this.getClosestTweet,this.triggerTweetAction("uiOpenQuickPromoteDialog")),permalinkSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiPermalinkClick")),otherReplyUsersSelector:this.composeHandler(this.getClosestTweet,t,this.otherReplyUsersPopup)}),this.on(document,"uiDidFavoriteTweet dataFailedToUnfavoriteTweet",this.handleTransition("addClass",this.attr.favoritedTweetClass)),this.on(document,"uiDidUnfavoriteTweet dataFailedToFavoriteTweet",this.handleTransition("removeClass",this.attr.favoritedTweetClass)),this.on(document,"uiDidRetweet dataFailedToUnretweet",this.handleTransition("addClass",this.attr.retweetedTweetClass)),this.on(document,"uiDidUnretweet dataFailedToRetweet",this.handleTransition("removeClass",this.attr.retweetedTweetClass))})}var n=i("0d4m"),o=i("2Doy"),a=i("DBjh"),r=i("xO2U"),c=i("YzIt"),l=i("RhwY"),h=i("alSu"),d=i("MzrW"),u=i("Qlgi"),p=i("OfHf"),f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},m=Object(a.default)(s,l.a,h.a,d.a,u.a,p.a);e.a=m}).call(e,i("4kSj"))},O9Cj:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<strong title="'),s.b(s.v(s.f("localized_number",t,e,0))),s.b('" class="js-mini-profile-stat">'),s.b(s.v(s.f("localized_compact_number",t,e,0))),s.b("</strong>"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},OYls:function(t,e,i){"use strict";function s(t){this.attr={id:null,maxLength:100,querySource:"typed_query",items:[]},this.attr=n.default.merge(this.attr,t),this.getRemoteSuggestions=function(t,e,i){return i},this.requiresRemoteSuggestions=function(){return!1},this.removeAllSelectedUsers=function(){this.attr.items=[]},this.getLocalSuggestions=function(t,e){e(this.attr.items.slice(0,this.attr.maxLength))},this.updateSelectedUsers=function(t){this.attr.items=t.items}}var n=i("YzIt");e.a=s},OfHf:function(t,e,i){"use strict";(function(t){function i(){this.addCancelHoverStyleClass=function(e,i,s){var n=t(e.target).closest(this.attr.tweetItemSelector),o=t(e.target).closest(this.attr.toggleContainerSelector);if("click"!==e.type||n.hasClass(this.attr.favoritedTweetClass)||n.hasClass(this.attr.retweetedTweetClass))return void o.removeClass("is-hoverStateCancelled");o.addClass("is-hoverStateCancelled"),o.one("mouseleave",function(){return o.removeClass("is-hoverStateCancelled")})},this.after("toggleFavorite",this.addCancelHoverStyleClass),this.after("toggleRetweet",this.addCancelHoverStyleClass)}e.a=i}).call(e,i("4kSj"))},Ogfk:function(t,e,i){"use strict";var s={getDimensions:function(t){return new Promise(function(e,i){var s=new Image;s.onload=function(){e({height:s.height,width:s.width})},s.onerror=i,s.src=t})},getThumbnailOffset:function(t,e,i){var s=void 0;if(e=+e,t=+t,i=+i,e===t&&e>=i&&t>=i)return{height:i,width:i,"margin-left":0,"margin-top":0};if(t<i||e<i)s={height:t,width:e,"margin-top":(i-t)/2,"margin-left":(i-e)/2};else if(e>t){var n=i/t*e;s={height:i,width:n,"margin-left":-(n-i)/2,"margin-top":0}}else if(t>e){var o=i/e*t;s={height:o,width:i,"margin-top":-(o-i)/2,"margin-left":0}}return s}};e.a=s},P2na:function(t,e,i){"use strict";var s=i("+dWm"),n={MAX_DIMENSION:4096,getUserMedia:function(){var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return!!t&&t.bind(navigator)}(),hasCanvas:function(){var t=document.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},supportsCropper:function(){return this.hasCanvas()&&s.a.hasFileReader()}};e.a=n},P9C3:function(t,e,i){"use strict";function s(){this.defaultAttrs({heartBeat:0,doc:document,isIe:Object(n.a)().msie});var t=void 0,e=!1;this.visibilityChange=function(i){var s=void 0;switch(i.type){case"focus":case"focusin":s=!1;break;case"blur":case"focusout":s=!0;break;case"beforeunload":case"uiBeforeUnload":this.trigger("uiPageUnload");break;default:t&&(s=this.attr.doc[t]&&!this.attr.doc.hasFocus())}!0===s?(e=!0,this.trigger("uiPageHidden")):!1===s&&(e=!1,this.trigger("uiPageVisible"))},this.focusTick=function(){e||this.trigger("uiPageVisible")},this.after("initialize",function(){var e={hidden:"visibilitychange",mozHidden:"mozvisibilitychange",webkitHidden:"webkitvisibilitychange",msHidden:"msvisibilitychange"},i=!1;for(var s in e)if(s in this.attr.doc){t=s,this.on(this.attr.doc,e[t],this.visibilityChange),i=!0;break}i||(this.attr.isIe?this.on(this.attr.doc,"focusin focusout",this.visibilityChange):this.on(window,"focus focusin blur focusout",this.visibilityChange)),this.on(window,"beforeunload uiBeforeUnload",this.visibilityChange),this.attr.heartBeat&&(this.timer=o.default.setIntervalEvent("uiPageFocusTick",this.attr.heartBeat),this.on("uiPageFocusTick",this.focusTick))})}var n=i("RW6J"),o=i("r8Bt"),a=i("DBjh");e.a=Object(a.default)(s)},PoM1:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({noShowError:!0,profileSearchThrottle:35}),this.isInState=function(t){return t.split(" ").indexOf(this.state)>=0},this.isEnabled=function(t){return!this.isInState("disabled enabling enableIsUnavailable")},this.setInitialState=function(){this.attr.geoEnabled?this.state="1"===l.webclientCookie()?"enabledTurnedOn":"enabledTurnedOff":this.state="disabled"},this.requestState=function(t,e){this.shouldLocate()?this.locate(t.target):this.sendState(t.target,this.state)},this.shouldLocate=function(){return this.isInState("locating changing enabledTurnedOn locateIsUnavailable")||this.isInState("located locationUnknown")&&(!this.lastLocationTime||this.now()-this.lastLocationTime>h)},this.locate=function(t,e){var i=this;this.sendState(t,e?"changing":"locating");var s=function(e){return i.sendState(t,i.locateOrEnableState(e)||"locateIsUnavailable")},n=function(){return i.sendState(t,"locateIsUnavailable")},o={override_place_id:e};this.post({url:"/account/geo_locate",data:o,echoParams:{spoof_ip:!0},eventData:o,success:s,error:n})},this.locateOrEnableState=function(t){switch(t.status){case"ok":return this.place_id=t.place_id,this.place_name=t.place_name,this.places_html=t.html,this.lastLocationTime=this.now(),"located";case"unknown":return this.lastLocationTime=this.now(),"locationUnknown"}},this.now=function(){return(new Date).getTime()},this.sendState=function(e,i){i&&(this.state=i);var s={state:this.state};"located"===this.state&&(s.place_id=this.place_id,s.place_name=this.place_name,s.places_html=this.places_html),t(e).trigger("dataGeoState",s)},this.turnOn=function(t){this.isEnabled()&&(l.webclientCookie("1"),this.locate(t.target))},this.turnOff=function(t){this.isEnabled()&&(l.webclientCookie(null),this.sendState(t.target,"enabledTurnedOff"))},this.enable=function(t,e){var i=this;if(this.isInState("disabled enableIsUnavailable")){this.sendState(t.target,"enabling");var s=function(e){l.webclientCookie("1"),i.sendState(t.target,i.locateOrEnableState(e)||"enableIsUnavailable")},n=function(){return i.sendState(t.target,"enableIsUnavailable")};this.post({url:"/account/geo_locate",data:{enable:"1"},echoParams:{spoof_ip:!0},eventData:e,success:s,error:n})}},this.change=function(t,e){this.isEnabled()&&this.locate(t.target,e.placeId)},this.search=function(t,e){var i=this;if(this.searching)return void(this.pendingSearchData=e);this.pendingSearchData=null;var s=function(){if(i.searching=!1,i.pendingSearchData)return i.search(t,i.pendingSearchData),!0},n=e.query.trim(),o=[n,e.placeId,e.isPrefix].join(","),a=function(t){i.searchCache[o]=t,t=c({},t,{sourceEventData:e}),s()||i.trigger("dataGeoSearchResults",t)},r=function(){s()||i.trigger("dataGeoSearchResultsUnavailable")};if(!n)return void a({html:""});var l=this.searchCache[o];if(l)return void a(l);this.searching=!0,this.get({url:"/account/geo_search",data:{query:n,place_id:e.placeId,is_prefix:e.isPrefix?"1":"0"},eventData:e,success:a,error:r})},this.profileSearch=function(t,e){var i=this,s=e.query.trim(),n=s,o=function(t){i.profileSearchCache[n]=t,t=c({},t,{sourceEventData:e}),i.trigger("dataProfileGeoSearchResults",t)},a=this.profileSearchCache[n];if(a)return void o(a);this.get({url:"/account/geo_profile",data:{query:s},eventData:e,success:o,error:"dataProfileGeoSearchResultsUnavailable"})},this.requestDefaultProfileLocations=function(t,e){this.get({url:"/account/geo_profile",eventData:e,success:"dataDefaultProfileLocations",error:"dataProfileGeoSearchResultsUnavailable"})},this.after("initialize",function(){this.searchCache={},this.profileSearchCache={},this.setInitialState(),this.on("uiRequestGeoState",this.requestState),this.on("uiGeoPickerEnable",this.enable),this.on("uiGeoPickerTurnOn",this.turnOn),this.on("uiGeoPickerTurnOff",this.turnOff),this.on("uiGeoPickerChange",this.change),this.on("uiGeoPickerSearch",this.search),this.on("uiRequestDefaultProfileLocations",this.requestDefaultProfileLocations),this.on("uiGeoProfileSearch",o.default.throttle(this.profileSearch.bind(this),this.attr.profileSearchThrottle))})}var n=i("DBjh"),o=i("YzIt"),a=i("dsp6"),r=i("VtWx"),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},l=Object(n.default)(s,r.a),h=9e5;e.a=l,l.webclientCookie=function(t){return void 0===t?Object(a.a)("geo_webclient"):Object(a.a)("geo_webclient",t,{expires:3650,path:"/"})}}).call(e,i("4kSj"))},"Pp1+":function(t,e,i){"use strict";function s(){this.updateYouFollow=function(t,e){this.$node.find("[data-user-id="+t+"][data-you-follow]").attr("data-you-follow",e)},this.updateYouBlock=function(t,e){this.$node.find("[data-user-id="+t+"][data-you-block]").attr("data-you-block",e)},this.setViewerFollowState=function(t){return function(e,i){this.updateYouFollow(i.userId,t)}},this.setViewerBlockState=function(t){return function(e,i){this.updateYouBlock(i.userId,t)}},this.onFollowStateChange=function(t,e){var i=e.userId,s=e.newState;"following"===s?(this.updateYouFollow(i,!0),this.updateYouBlock(i,!1)):"not-following"===s?(this.updateYouFollow(i,!1),this.updateYouBlock(i,!1)):"blocked"===s&&(this.updateYouFollow(i,!1),this.updateYouBlock(i,!0))},this.after("initialize",function(){this.on(document,"uiFollowAction",this.setViewerFollowState(!0)),this.on(document,"uiUnfollowAction uiBlockAction uiReportSpamAction uiDidTriggerBlockingAction",this.setViewerFollowState(!1)),this.on(document,"uiBlockAction uiReportSpamAction uiDidTriggerBlockingAction",this.setViewerBlockState(!0)),this.on(document,"dataFollowStateChange",this.onFollowStateChange)})}e.a=s},Pqps:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="js-prompt-layout-container">\n  <div class="js-prompt-layout-content"></div>\n</div>'),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},QFJf:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={"dialogs/close_button":i("38hD")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div id="keyboard-shortcut-dialog" class="modal-container">\n  <div class="modal modal-large draggable">\n    <div class="modal-content">\n'),s.b(s.rp("<dialogs/close_button0",t,e,"      ")),s.b("\n"+i),s.b('      <div class="modal-header">\n'),s.b('        <h3 class="modal-title">Keyboard shortcuts</h3>\n      </div>\n\n'),s.b('      <div class="modal-body">\n\n        <div class="keyboard-shortcuts clearfix" id="keyboard-shortcut-menu">\n          <p class="visuallyhidden">\n            Note: To use these shortcuts, users of screen readers may need to toggle off the virtual navigation.\n          </p>\n'),s.s(s.f("keyboard_shortcuts",t,e,1),t,e,0,780,1478,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('            <table class="modal-table" summary="'),i.b(i.v(i.f("description",t,e,0))),i.b('">\n'),i.s(i.f("name",t,e,1),t,e,0,870,1031,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                <thead>\n                  <tr>\n                    <th colspan="2">'),i.b(i.v(i.f("name",t,e,0))),i.b("</th>\n                  </tr>\n                </thead>\n")}),t.pop()),i.b("              <tbody>\n"),i.s(i.f("shortcuts",t,e,1),t,e,0,1093,1409,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                  <tr>\n                    <td class="shortcut">\n'),i.s(i.f("keys",t,e,1),t,e,0,1190,1265,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('                        <b class="sc-key">'),i.b(i.v(i.d(".",t,e,0))),i.b("</b>\n")}),t.pop()),i.b('                    </td>\n                    <td class="shortcut-label">'),i.b(i.v(i.f("description",t,e,0))),i.b("</td>\n                  </tr>\n")}),t.pop()),i.b("              </tbody>\n            </table>\n")}),t.pop()),s.b("        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n"),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},QIr8:function(t,e,i){"use strict";(function(t){function s(){this.attributes({notice:".DMNotice",dismiss:".DMNotice-dismiss, .DMNotice-cancel",needsExplicitDismiss:".DMNotice--explicitDismiss",toast:".DMNotice--toast",toastMessage:".DMNotice--toast .DMNotice-message"}),this.findNotice=function(t){return this.select("notice").filter(t)},this.show=function(e,i){this.dismissAll(!0),(i&&i.notice?this.findNotice(i.notice):t(e.target).closest(this.attr.notice)).slideDown()},this.dismiss=function(e,i){(i&&i.notice?this.findNotice(i.notice):t(e.target).closest(this.attr.notice)).slideUp()},this.dismissAll=function(t){var e=this.select("notice").not(this.attr.needsExplicitDismiss);t?e.slideUp():e.hide()},this.showToast=function(t,e){var i=e.message,s=e.timeout||3e3;this.select("toastMessage").text(i),this.dismissAll(!0);var n=this.select("toast");n.slideDown(),clearTimeout(this.toastTimeout),this.toastTimeout=setTimeout(function(){return n.slideUp()},s)},this.after("initialize",function(){this.on("uiShowDMNotice",this.show),this.on("uiDismissDMNotice",this.dismiss),this.on(document,"uiDismissAllDMNotices",this.dismissAll.bind(this,!1)),this.on(document,"uiDMShowToast",this.showToast),this.on("click",{dismiss:"uiDismissDMNotice"})})}var n=i("DBjh");e.a=Object(n.default)(s)}).call(e,i("4kSj"))},QPFA:function(t,e,i){"use strict";function s(){this.resendConfirmationEmail=function(t,e){var i=function(t){this.trigger("uiShowMessage",{message:t.messageForFlash})},s=function(){this.trigger("uiShowMessage",{message:Object(a.default)("Oops!  There was an error sending the confirmation email.")})};this.post({url:"/account/resend_confirmation_email",eventData:null,data:e&&e.unsuspend?{unsuspend:!0}:{},success:i.bind(this),error:s.bind(this)})},this.resetBounceScore=function(){var t=function(){this.trigger("uiShowMessage",{message:Object(a.default)("Your email notifications should resume shortly.")})},e=function(){this.trigger("uiShowMessage",{message:Object(a.default)("Oops! There was an error sending email notifications.")})};this.post({url:"/bouncers/reset",eventData:null,data:null,dataType:this.DATA_TYPES.TEXT,success:t.bind(this),error:e.bind(this)})},this.after("initialize",function(){this.on("uiResendConfirmationEmail",this.resendConfirmationEmail),this.on("uiResetBounceLink",this.resetBounceScore)})}var n=i("DBjh"),o=i("VtWx"),a=i("0d4m");e.a=Object(n.default)(s,o.a)},QXjX:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={"promptbird/templates/dismiss_button":i("02mS"),"promptbird/templates/title":i("orcd"),"promptbird/templates/explanation":i("7SIb"),"promptbird/templates/call_to_action":i("hK7e"),"promptbird/templates/second_call_to_action":i("8T/I")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="PromptbirdPrompt PromptbirdPrompt--aboveTimeline" data-prompt-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('">\n  <div class="PromptbirdPrompt-content '),s.b(s.v(s.f("prompt_css_class",t,e,0))),s.b(" "),s.s(s.f("background_image_url",t,e,1),t,e,0,179,189,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("with-image")}),t.pop()),s.b('"\n    '),s.s(s.f("data_attributes",t,e,1),t,e,0,240,260,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(" "),i.b(i.v(i.f("key",t,e,0))),i.b('="'),i.b(i.v(i.f("value",t,e,0))),i.b('"')}),t.pop()),s.b("\n"+i),s.b("    "),s.s(s.f("background_image_url",t,e,1),t,e,0,310,367,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(' style="background-image: url('),i.b(i.v(i.f("background_image_url",t,e,0))),i.b(');"')}),t.pop()),s.b(">\n\n"),s.b(s.rp("<promptbird/templates/dismiss_button0",t,e,"    ")),s.b(s.rp("<promptbird/templates/title1",t,e,"    ")),s.b(s.rp("<promptbird/templates/explanation2",t,e,"    ")),s.b(s.rp("<promptbird/templates/call_to_action3",t,e,"    ")),s.b(s.rp("<promptbird/templates/second_call_to_action4",t,e,"    ")),s.b("  </div>\n</div>\n"),s.fl()},partials:{"<promptbird/templates/dismiss_button0":{name:"promptbird/templates/dismiss_button",partials:{},subs:{}},"<promptbird/templates/title1":{name:"promptbird/templates/title",partials:{},subs:{}},"<promptbird/templates/explanation2":{name:"promptbird/templates/explanation",partials:{},subs:{}},"<promptbird/templates/call_to_action3":{name:"promptbird/templates/call_to_action",partials:{},subs:{}},"<promptbird/templates/second_call_to_action4":{name:"promptbird/templates/second_call_to_action",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},Qlgi:function(t,e,i){"use strict";(function(t){function i(){this.defaultAttrs({tweetActionContainerSelector:".ProfileTweet-action",animationStateClass:"is-animating",animationTweetSelector:".tweet",animationName:"heart-burst"}),this.getTweetActions=function(t){return t.find(this.attr.tweetActionContainerSelector)},this.isTweetAnimating=function(t){return this.getTweetActions(t).find(this.animationStateClass)},this.cleanupAnimation=function(t){this.isTweetAnimating(t)&&(this.getTweetActions(t).removeClass(this.attr.animationStateClass),this.trigger("uiAnimationEnd"))},this.completeAnimation=function(e){e.originalEvent&&e.originalEvent.animationName===this.attr.animationName&&this.cleanupAnimation(t(e.target).closest(this.attr.animationTweetSelector))},this.unfavoriteHandler=function(e){this.cleanupAnimation(t(e.target))},this.animateAction=function(e,i){this.getTweetActions(t(e.target)).addClass(this.attr.animationStateClass)},this.after("initialize",function(){this.on(document,"uiDidFavoriteTweet",this.animateAction),this.on(document,"uiDidUnfavoriteTweet",this.unfavoriteHandler),this.on("webkitAnimationEnd oanimationend oAnimationEnd msAnimationEnd animationend",{animationTweetSelector:this.completeAnimation})})}e.a=i}).call(e,i("4kSj"))},Qo7l:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({confirmDialogSelector:"#confirm_dialog",cancelSelector:"#confirm_dialog_cancel_button",submitSelector:"#confirm_dialog_submit_button",modalSizes:{small:"modal-small",medium:"modal-medium",large:"modal-large"}}),this.openWithOptions=function(e,i){if(!this.openState){this.attr.eventParams={action:i.action},this.attr.top=i.top,this.eventNode=e.target;var s={title_text:i.titleText,body_text:i.bodyText,cancel_text:i.cancelText,submit_text:i.submitText,danger:!!i.danger},n=c.a.render(s);t("#confirm_dialog").length?t("#confirm_dialog").replaceWith(n):t("body").append(n),this.$dialogContainer=t("#confirm_dialog"),this.$dialog=this.$dialogContainer.find(this.attr.modalSelector);var o=this.attr.modalSizes[i.modalSize];void 0!==o&&this.$dialog.addClass(o),this.open()}},this.submit=function(t,e){this.trigger(this.eventNode,"ui{{action}}Confirm"),this.close()},this.cancel=function(t,e){this.trigger(this.eventNode,"ui{{action}}Cancel"),"click"===t.type&&this.close()},this.after("initialize",function(){this.on(document,"uiOpenConfirmDialog",this.openWithOptions),this.on("click",{submitSelector:this.submit,cancelSelector:this.cancel}),this.on("uiDialogCloseRequested",{confirmDialogSelector:this.cancel})})}var n=i("DBjh"),o=i("UHc7"),a=i("5kfR"),r=i("Bugu"),c=i.n(r);e.a=Object(n.default)(s,o.a,a.a)}).call(e,i("4kSj"))},QwUm:function(t,e,i){"use strict";function s(){this.after("insertPrompt",function(){this.select("promptSelector").slideDown()})}e.a=s},"R/Ik":function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b("  "),s.s(s.f("user_count_one",t,e,1),t,e,0,22,51,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("Seen by "),i.b(i.v(i.f("user_count",t,e,0))),i.b(" person")}),t.pop()),s.b("\n"+i),s.b("  "),s.s(s.f("user_count_other",t,e,1),t,e,0,94,123,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("Seen by "),i.b(i.v(i.f("user_count",t,e,0))),i.b(" people")}),t.pop()),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},RQvs:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={"dialogs/close_button":i("38hD")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div id="copy-found-media-link-dialog" class="modal-container">\n  <div class="modal modal-medium draggable">\n'),s.b(s.rp("<dialogs/close_button0",t,e,"    ")),s.b('    <div class="modal-content">\n      <div class="modal-header">\n        <h3 class="modal-title">GIF provided by <span class="provided-by">'),s.b(s.v(s.f("attribution_name",t,e,0))),s.b('</span></h3>\n      </div>\n      <div class="modal-body">\n        <div class="copy-found-media-link-container">\n          <textarea class="found-media-link-destination js-initial-focus u-dir" readonly>'),s.b(s.v(s.f("details_url",t,e,0))),s.b("</textarea>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},RbIO:function(t,e,i){"use strict";function s(){this.defaultAttrs({noShowError:!0}),this.addParticipants=function(t,e){e=e||{},this.post({url:"/i/direct_messages/add_participants",data:{id:e.conversation_id,participant_ids:e.participant_ids},eventData:e,success:r(t.target,"dataDMConversationResult"),error:r(t.target,"dataDMError")})},this.after("initialize",function(){this.on("uiAddConversationParticipants",this.addParticipants)})}var n=i("DBjh"),o=i("VtWx"),a=i("ldNY"),r=a.a.triggerFn;e.a=Object(n.default)(s,o.a)},RgUl:function(t,e,i){"use strict";function s(){this.defaultAttrs({noShowError:!0}),this.reportMessage=function(t,e){e=e||{},this.post({url:"/i/direct_messages/report",data:{id:e.id,conversation_id:e.conversation_id,report_as:e.report_as},eventData:e,success:r(t.target,["dataDMReportSuccess","dataDMConversationResult"]),error:c(r(t.target,"dataDMReportFailed",e),r(t.target,"dataDMError"))})},this.after("initialize",function(){this.on("uiDMDialogReportDM",this.reportMessage)})}var n=i("DBjh"),o=i("ldNY"),a=i("VtWx"),r=o.a.triggerFn,c=o.a.chain;e.a=Object(n.default)(s,a.a)},RhwY:function(t,e,i){"use strict";(function(t){function i(){this.preventDefault=function(t,e,i){t.preventDefault()},this.composeHandler=function(){var t=arguments,e={};return function(i,s){for(var n=0,o=t.length;n<o&&!1!==t[n].call(this,i,s,e);n++);}},this.getTweetForEvent=function(e,i){var s=t(e.target),n=void 0;return s.is(this.attr.tweetItemSelector)&&(n=s),n||(n=s[i](this.attr.tweetItemSelector)),n},this.getClosestTweet=function(t,e,i){var s=this.getTweetForEvent(t,"closest"),n=!!s.length;return n&&(i.$tweet=s),n},this.getDataForTweet=function(t){return{id:t.attr("data-tweet-id"),screenName:t.attr("data-screen-name"),isTweetProof:"true"===t.attr("data-is-tweet-proof"),viewerFollowsAuthor:"true"===t.attr("data-you-follow"),viewerBlocksAuthor:"true"===t.attr("data-you-block"),featureContext:t.attr("data-feature-context"),mediaType:this.getMediaType(t),photoCount:t.find(".animated-gif, .js-adaptive-photo, .AdaptiveStreamGridImage").length,momentId:t.attr("data-moment-id")}},this.getMediaType=function(t){var e="";return 0!==t.find(".js-adaptive-photo").length?e="image":"player"===t.attr("data-card2-type")?e="video":(t.attr("data-has-cards")||t.hasClass("has-content"))&&(e="media"),e},this.mkTweetDataCollector=function(){var t=this,e=arguments;return function(i){for(var n={},o=0,a=e.length;o<a;o++)n=s({},n,e[o].call(t,i));n=s({},n,t.getDataForTweet(i));for(var r in n)void 0===n[r]&&delete n[r];return n}},this.mkTweetDataCollectorForAction=function(){var t=this.mkTweetDataCollector.apply(this,arguments);return function(e,i,s){return s.tweetData=t(s.$tweet),!0}},this.triggerTweetAction=function(t){return function(e,i,s){var n="function"==typeof t?t.call(this,e,i,s):t;this.trigger(s.$tweet,n,s.tweetData)}}}var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=i}).call(e,i("4kSj"))},Rxx0:function(t,e,i){"use strict";function s(){this.handleMessage=function(t){try{var e=JSON.parse(t.data),i=e.event,s=e.data;this.trigger(i,s)}catch(t){}},this.after("initialize",function(){navigator.serviceWorker&&navigator.serviceWorker.addEventListener("message",this.handleMessage.bind(this))})}var n=i("DBjh"),o=Object(n.default)(s);e.a=o},SFzM:function(t,e,i){"use strict";function s(t){n.a.attachTo(document,t),a.a.attachTo(document,t),o.a.attachTo(r,t,{initialFocusSelector:".modal-close"})}var n=i("0T9I"),o=i("1c4Y"),a=i("7TGm"),r="#activity-popup-dialog";e.a=s},SJmD:function(t,e,i){"use strict";e.a=function(){var t=/^\s*$/;this.defaultAttrs({top:90,saveSelector:".update-custom-timeline-button",nameSelector:"[name=name]",descriptionSelector:"[name=custom-timeline-description]",dialogTitleSelector:".modal-title",maxReachedSelector:".max-reached"}),this.params=function(){return{name:this.$name.val(),description:this.$description.val(),order:this.select("orderSelector").val()}},this.saveCustomTimeline=function(t,e){this.disableSaveButton(),this.trigger(this.attr.createOrUpdateEventName,this.params())},this.disableSaveButton=function(){this.$saveButton.prop("disabled",!0)},this.toggleSaveButton=function(e,i){var s=t.test(this.$name.val()),n=this.select("maxReachedSelector").length>0;this.$saveButton.prop("disabled",s||n)},this.after("open",function(){this.$saveButton=this.select("saveSelector"),this.$name=this.select("nameSelector"),this.$description=this.select("descriptionSelector"),this.toggleSaveButton()}),this.after("initialize",function(){this.on(document,"dataCustomTimelineUpdated",this.close),this.on("click",{saveSelector:this.saveCustomTimeline}),this.on("input",{nameSelector:this.toggleSaveButton}),this.on("uiTextChanged",this.toggleSaveButton)})}},"SR+T":function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_one",t,e,1),t,e,0,21,47,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Tweet")}),t.pop()),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_other",t,e,1),t,e,0,88,115,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Tweets")}),t.pop()),s.b("\n"),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},SWJ0:function(t,e,i){"use strict";var s=i("rWgq");e.a=function(){this.defaultAttrs({draftTweetTTL:864e5}),this.getDraftTweet=function(){return this.draftTweetId&&this.draftTweets().getItem(this.draftTweetId)},this.hasDraftTweet=function(){return!!this.getDraftTweet()},this.saveDraftTweet=function(t,e){if(this.draftTweetId&&this.hasFocus()){var i=e.text.trim();i&&!this.isEmpty(!0)?this.draftTweets().setItem(this.draftTweetId,i,this.attr.draftTweetTTL):this.draftTweets().removeItem(this.draftTweetId)}},this.before("clear",function(){this.draftTweetId&&this.draftTweets().removeItem(this.draftTweetId)}),this.overrideDraftTweetId=function(t,e){var i=e&&e.draftTweetId||this.attr.draftTweetId;this.draftTweetId!==i&&(this.draftTweetId=i,this.resetTweetText())},this.draftTweets=function(){if(!this.draftTweetsStore){var t=Object(s.a)({withExpiry:!0});this.draftTweetsStore=new t("draft_tweets")}return this.draftTweetsStore},this.after("resetTweetText",function(){var t=this.getDraftTweet();t&&(this.setVisibleText(t),this.trigger("uiSaveUndoState"),this.trigger("uiPrepareGeoPicker"))}),this.initDraftTweets=function(){this.draftTweetId=this.attr.draftTweetId,this.on("uiTextChanged",this.saveDraftTweet),this.on("uiOverrideTweetBoxOptions",this.overrideDraftTweetId)}}},Ss9a:function(t,e,i){"use strict";function s(){this.attributes({notice:".DMDeleteMessage",confirm:".DMDeleteMessage-confirm",cancel:".DMDeleteMessage-cancel"}),this.showConfirmation=function(){this.select("notice").trigger("uiShowDMNotice")},this.hideConfirmation=function(){this.select("notice").trigger("uiDismissDMNotice")},this.state=function(t,e){return this._state=e||this._state||{},this._state},this.deleteMessage=function(){var t=this.state();this.trigger("uiDMDialogDeleteMessage",{id:t.messageId,conversation_id:t.conversationId}),this.hideConfirmation(),this.trigger("uiDMInboxWantsRefreshed")},this.after("initialize",function(){this.on("uiShowDMDeleteMessageConfirmation",this.state),this.on("uiShowDMDeleteMessageConfirmation",this.showConfirmation),this.on("click",{confirm:this.deleteMessage,cancel:this.hideConfirmation})})}var n=i("DBjh"),o=Object(n.default)(s);e.a=o},SwEw:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({overrideUserCssSelector:"#user-style-me",screenName:"me",userColor:r.a.twitterBlue}),this.getLighterBlendColor=function(){return c.a.user.nightModeActivated?r.a.nightPanelBackground:r.a.white},this.getDarkerBlendColor=function(){return c.a.user.nightModeActivated?r.a.white:r.a.nightPanelBackground},this.getPagePanelBackgroundColor=function(){return this.getLighterBlendColor()},this.hasRequiredContrast=function(t){return Object(a.a)(t,this.getPagePanelBackgroundColor())>1.5},this.getLinkColor=function(t){return this.hasRequiredContrast(t)?t:r.a.twitterBlue},this.override=function(e,i){var s=i?i.color.replace(d,""):this.attr.userColor,n=""===s?r.a.black:s;this.attr.userColor=n;var a=this.getLinkColor(n),c={screen_name:"override-"+this.attr.screenName,logged_in:!0,user_color_lightest:Object(o.a)(a,.1,this.getLighterBlendColor()),user_color_lighter:Object(o.a)(a,.25,this.getLighterBlendColor()),user_color_light:Object(o.a)(a,.4,this.getLighterBlendColor()),user_color_medium:Object(o.a)(a,.8,this.getLighterBlendColor()),user_color:a,user_color_dark:Object(o.a)(a,.8,this.getDarkerBlendColor()),user_color_darker:Object(o.a)(a,.6,this.getDarkerBlendColor()),rgba_user_color_lightest:Object(o.c)(a,.1),rgba_user_color_lighter:Object(o.c)(a,.25),rgba_user_color_light:Object(o.c)(a,.4),rgba_user_color_medium:Object(o.c)(a,.7),page_panel_background_color:this.getPagePanelBackgroundColor()},l=h.a.render(c);t("#user-style-override-"+this.attr.screenName).remove(),t("#user-style-"+this.attr.screenName).after(l)},this.after("initialize",function(){this.on(document,"uiOverrideUserCss",this.override)})}var n=i("DBjh"),o=i("9F29"),a=i("UVly"),r=i("WmI3"),c=i("IAMj"),l=i("oPMG"),h=i.n(l),d=/^#/;e.a=Object(n.default)(s)}).call(e,i("4kSj"))},T2Va:function(t,e,i){"use strict";function s(){this.defaultAttrs({tweetBoxSelector:".tweet-box",tweetActionSelector:".tweet-action",discardTweet:".DMComposer-discardTweet",imageDataSelector:".file-data",removeTweetEvents:"uiDMDialogOpenedConversationList uiDMDialogClosed uiDMSendMessage dataFailedToGetTweet",gifSupport:!0,videoSupport:!0,sruAllMedia:!0,preferredGravity:"vertical",preferredWeight:"right",composeAltText:!1,typingPublishInterval:2e3}),this.isEmpty=function(){return!(this.hasAttachment()||this.getVisibleText().trim())},this.hasAttachment=function(){return!1},this.getMediaData=function(){var t=this.getTweetboxId(),e=r.a.keys().filter(function(e){return r.a.get(e).tweetboxId===t})[0],i=r.a.get(e)||{};return{fileId:i.fileId,fileType:i.fileType,mediaCategory:i.mediaCategory,trimRange:i.trimRange,uploadId:i.uploadId,foundMediaInfo:this.foundMediaInfo,sourceUrl:i.sourceUrl,mediaType:i.mediaType}},this.createDataForSending=function(){return T({conversation_id:this.conversationId,media_data:this.hasMedia?this.getMediaData():void 0,recipient_ids:this.conversationId?[]:this.recipientIds,screen_name:this.conversationId||this.recipientIds?[]:this.screenNames,text:this.addHiddenText(this.getVisibleText()),tweetboxId:this.getTweetboxId(),tweet_id:this.hasTweetAttachment()?this.tweetAttachmentId:void 0,message_me_scribe_data:this.messageMeScribeData,card_uri:this.cardUri},this.getQuickReplyResponseData())},this.sendDM=function(){this.detectUpdatedText(),this.trigger("uiDMSendMessage",this.createDataForSending()),this.removeTextInputQuickReply(),delete this.recipientIds,delete this.screenNames,this.revertComposer()},this.getTweetboxId=function(){return this.tweetboxId=this.tweetboxId||"swift_tweetbox_"+ +new Date,this.tweetboxId},this.isOwnTweetbox=function(t,e){return(e.tweetboxId||e.sourceEventData&&e.sourceEventData.tweetboxId)===this.getTweetboxId()},this.canSend=function(){var t=this.conversationId||this.recipientIds||this.screenNames;return!this.isEmpty()&&!this.maxReached()&&t},this.updateSendButton=function(){this.canSend()?this.enable():this.disable()},this.enable=function(){this.select("tweetActionSelector").removeClass("disabled").attr("aria-disabled",!1)},this.disable=function(){this.select("tweetActionSelector").addClass("disabled").attr("aria-disabled",!0)},this.initializeComposer=function(t,e){e=e||{},this.conversationId=e.conversation_id,this.recipientIds=e.recipient_ids,this.screenNames=e.screen_names,this.revertComposer(e.retain_tweet_attachment),this.setVisibleText(e.default_composer_text||""),this.$text.attr("aria-label",Object(n.default)("Message to {{name}}",{name:e.name})),this.focus()},this.revertComposer=function(t){!0!==t&&this.handleTweetRemoval(),this.reset(),this.updateSendButton(),this.handleAttachmentChange(),this.focus()},this.reset=function(){this.setVisibleText("")},this.handleKeyboardSubmit=function(){this.select("tweetActionSelector").hasClass("disabled")||this.sendDM()},this.handleTweetRemoval=function(){this.removeTweet(),this.removeTweetAttachment(),this.focus()},this.handleAttachmentChange=function(){var t=this.hasAttachment()?Object(n.default)("Add a comment..."):void 0,e=this.hasAttachment()?"uiComposerDisableExclusiveAttachments":"uiComposerEnableExclusiveAttachments";this.trigger("uiUpdateComposerPlaceholder",{placeholderText:t}),this.trigger(e)},this.showQuickReplyConditionally=function(t,e){var i=e&&e.qrJson,s=e&&e.isFirstResult;!this.isEmpty()&&s||this.handleShowQuickReply(i)},this.broadcastTyping=function(){this.conversationId&&this.trigger("uiDMUserTyping",{conversation_id:this.conversationId})},this.unfocus=function(){this.select("composerEditorSelector").blur()},this.after("initialize",function(){this.initTextNode(),this.updateSendButton(),this.on(this.select("tweetActionSelector"),"click",this.handleKeyboardSubmit),this.on("uiSendQROptionResponse",this.sendDM),this.on("uiShortcutEnter uiShortcutCmdEnter",this.handleKeyboardSubmit),this.on("uiEmojiSuggestion","uiInsertText"),this.on("uiTextChanged uiAttachmentChanged",this.updateSendButton),this.on("keydown",{tweetBoxSelector:Object(o.a)(this.broadcastTyping.bind(this),this.attr.typingPublishInterval,this.attr.typingPublishInterval,!0)}),this.on("uiAttachmentChanged",this.handleAttachmentChange),this.on("click",{discardTweet:this.handleTweetRemoval}),this.on("uiInitializeDMComposer",this.initializeComposer),this.on("uiRevertComposer",this.revertComposer),this.on(document,"uiDMDialogClosed",this.revertComposer),this.on(document,"uiShowQuickReply",this.showQuickReplyConditionally),this.on("uiShowQuickReplyOptionPanel",this.unfocus)})}var n=i("0d4m"),o=i("ZYtG"),a=i("DBjh"),r=i("H6fk"),c=i("6N1L"),l=i("FBSA"),h=i("ZG5A"),d=i("cEdb"),u=i("WqLG"),p=i("+HBl"),f=i("LcyA"),m=i("84/5"),g=i("pUl/"),v=i("Zo2H"),b=i("tAXt"),w=i("LVMq"),S=i("DzHJ"),C=i("nub0"),y=i("BtBL"),T=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},D=Object(a.default)(s,g.a,l.a,f.a,h.a,u.a,v.a,b.a,c.a,p.a,m.a,d.a,w.a,S.a,C.a,y.a);e.a=D},TBNR:function(t,e,i){"use strict";function s(){this.proxyIframeEvents=function(t){if(t){var e={};if(t.originalEvent&&(t=t.originalEvent),Object(n.a)(t.origin,window.location)&&"string"==typeof t.data)try{e=JSON.parse(t.data),e&&e.name&&"b2c"===e.name&&e.eventName&&this.trigger(e.eventName,e.data)}catch(t){}}}}var n=i("Hc4n");e.a=s},TCn1:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({playerSelector:".PlayableMedia-player",placeholderClass:"PlayableMedia--placeholder",externalUrlBlock:"a.PlayableMedia-externalUrlBlock",autoplayOnHover:!1,playerLoadedClass:"playable-media-loaded",liveVideoContinuePlayingBehindModalsEnabled:!1}),this.autoplay=function(){this.player?this.player.playPreview():this.autoplayOnInit=!0},this.autoplayStop=function(){this.player?this.player.pausePreview():this.autoplayOnInit=!1},this.loadMedia=function(){var t=this;if(!this.$node.hasClass(this.attr.placeholderClass)){this.$node.addClass(this.attr.playerLoadedClass),this.scribeContext=this.getScribeContext();var e=void 0;void 0!==this.tweetId&&(e=this.requestDynamicVideoAd.bind(this));var s={scribeContext:this.scribeContext,promotedContext:this.getPromotedContext(),hideControls:this.$playerContainer.hasClass("hide-controls"),adRequestCallback:e,borderRadius:this.getBorderRadius(this.$playerContainer),ignoreFineGrainGeoblocking:this.shouldIgnoreFineGrainGeoblocking()};if(this.shouldUseReactPlayer){var n=this.shouldUseBVersionOfReactPlayer?"0.11.0":"0.8.5",o=function(e,i,s){var o=t.getVideoId(i);s(t,e,o,t.playerContainer,t.requestDynamicVideoAd.bind(t),t.$playerContainer.hasClass("hide-controls"),function(e){t.player=e,t.registerPlayerListeners(t.$playerContainer),t.onPlayerReady(t.$playerContainer)},n)};i.e(13).then(function(t){var e=i("zObu").default,s=i("oFWY");o(s.default,s.VideoId,e)}.bind(null,i)).catch(i.oe)}else{var a=this.getPlayerConstructor(this.playerContainer);this.player=a(s),this.registerPlayerListeners(this.$playerContainer)}}},this.registerPlayerListeners=function(t){this.player.on("playbackComplete",this.onPlaybackComplete.bind(this)).on("mute",this.trigger.bind(this,"uiPlayableMediaMute")).on("unmute",this.trigger.bind(this,"uiPlayableMediaUnmute")).on("play",this.trigger.bind(this,"uiPlayableMediaPlay")).on("pause",this.trigger.bind(this,"uiPlayableMediaPause")).on("ready",this.onPlayerReady.bind(this,t)).on("liveStarted",this.trigger.bind(this,"uiLiveBroadcastShowBadge")).on("liveEnded",this.trigger.bind(this,"uiLiveBroadcastHideBadge")).on("noCookiesError",this.trigger.bind(this,"uiPlayableMediaNoCookiesError")).on("geoblockError",this.trigger.bind(this,"uiPlayableMediaGeoblockError"))},this.getBorderRadius=function(t){var e=parseInt(t.attr("data-border-top-left-radius")),i=parseInt(t.attr("data-border-top-right-radius")),s=parseInt(t.attr("data-border-bottom-left-radius")),n=parseInt(t.attr("data-border-bottom-right-radius"));return{topLeft:isNaN(e)?void 0:e,topRight:isNaN(i)?void 0:i,bottomLeft:isNaN(s)?void 0:s,bottomRight:isNaN(n)?void 0:n}},this.shouldIgnoreFineGrainGeoblocking=function(){return this.$playerContainer.attr("data-ignore-fine-grain-geoblocking")},this.getPlayerSurface=function(e){return t(e).data("player-surface")},this.getRequestedTimecode=function(e){return t(e).data("requested-timecode")},this.getVideoId=function(t){return void 0!==this.liveVideoId?t.forLiveEvent(this.liveVideoId,this.tweetId,this.impressionId):void 0!==this.broadcastId?t.forBroadcast(this.broadcastId,this.tweetId,this.impressionId):void 0!==this.dmId?t.forDm(this.dmId):t.forTweet(this.tweetId,this.impressionId,this.$node.attr("data-video-index"))},this.createAnalyticsInstance=function(t,e){var i=this,s=this.getPlayerContext();return new t({log:function(t){i.trigger(document,"scribe",{scribeEvent:u({component:i.scribeContext.component},t.namespace),scribeData:u({_category_:t.category},t.data)})}},{log:function(t){i.trigger(document,"uiLogPromotedEvent",t)}},e,s)},this.getPlayerConstructor=function(t){return void 0!==this.liveVideoId?d.a.createPlayerForLiveVideo.bind(this,t,this.liveVideoId):void 0!==this.dmId?d.a.createPlayerForDm.bind(this,t,this.dmId):d.a.createPlayerForTweet.bind(this,t,this.tweetId)},this.getPromotedContext=function(){if(this.impressionId)return{impressionId:this.impressionId,disclosureType:this.$node.closest("[data-disclosure-type]").attr("data-disclosure-type")}},this.getPlayerContext=function(){var t=this.$node.closest("[data-player-component-context]").attr("data-player-component-context")||"";return{scribeContext:this.scribeContext,periscopeComponent:t,cardType:this.$node.closest("[data-card2-type]").attr("data-card2-type")}},this.getScribeContext=function(){var t=void 0;return void 0!==this.tweetId&&(t="tweet"),u({client:"web"},a.a.scribeContext,{component:this.$node.closest("[data-component-context]").attr("data-component-context")||t})},this.onPlayerReady=function(t){this.playOnInit||t.hasClass("play-on-init")?(this.player.play(),this.muteOnInit&&this.player.mute()):(this.autoplayOnInit||this.$node.closest("[data-autoplaying-media=true]").length>0)&&this.player.playPreview(),this.trigger("uiPlayableMediaReady"),this.liveVideoId&&!this.shouldUseReactPlayer&&this.player.updateLayoutBreakpoint({breakpoint:this.getBreakpoint()})},this.pauseMedia=function(){this.player?this.player.pause():(this.autoplayOnInit=!1,this.playOnInit=!1)},this.playMedia=function(){this.player?this.player.play():(this.autoplayOnInit=!1,this.playOnInit=!0)},this.muteMedia=function(){this.muteOnInit=!0,this.player&&this.player.mute()},this.unmuteMedia=function(){this.muteOnInit=!1,this.player&&this.player.unmute()},this.requestDynamicVideoAd=function(){return this.getDynamicVideoAd({id:this.tweetId,promoted_id:this.impressionId})},this.onPlaybackComplete=function(){this.trigger("uiPlayableMediaPlaybackComplete"),this.trigger("uiLiveBroadcastHideBadge")},this.removePlayer=function(){this.$node.removeClass(this.attr.playerLoadedClass),this.player&&(this.playerWrapper&&this.ReactDOM?(this.ReactDOM.unmountComponentAtNode(this.playerWrapper),this.playerWrapper.parentNode&&this.playerWrapper.parentNode.removeChild(this.playerWrapper),this.playerWrapper=void 0):this.player.teardown(),this.player=void 0)},this.before("teardown",function(){this.removePlayer()}),this.teardownIfPresent=function(){0===this.$node.closest("body").length&&this.teardown()},this.updatePosition=function(t,e){!this.player||e.tweetId!==this.tweetId&&e.tweetId!==this.tweetNonce||this.player.updatePosition(e.positionData)},this.updateLayoutBreakpoint=function(t,e){this.liveVideoId&&this.player&&!this.shouldUseReactPlayer&&this.player.updateLayoutBreakpoint(e)},this.onPauseAllMedia=function(){(this.liveVideoId||this.broadcastId)&&this.attr.liveVideoContinuePlayingBehindModalsEnabled||this.pauseMedia()},this.exitFullScreen=function(){this.liveVideoId&&this.player.exitFullScreen()},this.externalUrlBlockClick=function(t,e){var i=u({},this.getScribeContext(),{action:"click"});this.hasPartnerVideo&&(i.element="partner_video_card_content"),this.scribe(i,e,{id:this.tweetId})},this.loadPlayer=function(e,i){"tweetId"in i&&(i.tweetId===this.tweetId||i.tweetId===this.tweetNonce)&&("index"in i&&this.$node.attr("data-video-index",i.index),this.$node.removeClass(this.attr.placeholderClass),this.loadMedia(),t(document).trigger("uiWatchPlayableMedia"))},this.teardownPlayer=function(t,e){"tweetId"in e&&e.tweetId===this.tweetId&&this.removePlayer()},this.after("initialize",function(){var t=this.$node.closest("[data-tweet-id]");this.tweetId=t.attr("data-tweet-id"),this.tweetNonce=t.attr("data-tweet-nonce"),this.hasPartnerVideo=t.attr("data-has-partner-video"),this.dmId=this.$node.closest("[data-message-id]").attr("data-message-id"),this.liveVideoId=this.$node.closest("[data-live-video-id]").attr("data-live-video-id"),this.impressionId=this.$node.closest("[data-impression-id]").attr("data-impression-id"),this.broadcastId=this.$node.closest("[data-broadcast-id]").attr("data-broadcast-id"),this.$playerContainer=this.select("playerSelector"),this.playerContainer=this.$playerContainer.get(0),this.shouldUseReactPlayer=this.playerContainer.hasAttribute("data-use-react-player"),this.shouldUseBVersionOfReactPlayer=this.playerContainer.hasAttribute("data-use-b-version-of-react-player"),this.shouldUsePlayerPrecache=this.playerContainer.hasAttribute("data-use-player-precache"),this.shouldServeAdsInPlayer=this.playerContainer.hasAttribute("data-serve-ads-in-player"),this.on("click",{externalUrlBlock:this.externalUrlBlockClick}),this.attr.autoplayOnHover&&(this.on("mouseenter",this.autoplay),this.on("mouseleave",this.autoplayStop)),this.on("uiLoadPlayableMedia",this.loadMedia),this.on("uiUnloadPlayableMedia",this.removePlayer),this.on("uiUnmuteMedia",this.unmuteMedia),this.on("uiMuteMedia",this.muteMedia),this.on("uiPlayMedia",this.playMedia),this.on("uiPauseMedia",this.pauseMedia),this.on("uiAutoplayMedia",this.autoplay),this.on("uiStopAutoplayingMedia",this.autoplayStop),this.on(document,"uiPauseAllMedia",this.onPauseAllMedia),this.on(document,"uiPlayableMediaPositionChange",this.updatePosition),this.on(document,"uiWatchPlayableMedia uiOverlayClosed",this.teardownIfPresent),this.on(document,"uiLiveVideoBreakpointUpdate",this.updateLayoutBreakpoint),this.on(document,"uiLiveVideoExitFullScreen",this.exitFullScreen),this.on(document,"uiLoadPlayer",this.loadPlayer),this.on(document,"uiTeardownCardPlayer",this.teardownPlayer)})}var n=i("DBjh"),o=i("Vuuo"),a=i("NNES"),r=i("JKw3"),c=i("TTv8"),l=i("3oDc"),h=i("7j8l"),d=i.n(h),u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=Object(n.default)(s,o.a,r.a,c.a,l.a)}).call(e,i("4kSj"))},TItO:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({deleteSelector:".DMDeleteMessageAction",reportSelector:".DMReportMessageAction"}),this.hideMessage=function(t,e){if("not_spam"!==e.report_as){this.hiddenMessages=this.hiddenMessages||{};var i=".DMConversation [data-message-id='"+e.id+"'] {display: none !important;}";this.hiddenMessages[e.id]=this.insertCSSRule(this.stylesheet,i)}},this.unhideMessage=function(t,e){this.hiddenMessages=this.hiddenMessages||{};var i=this.hiddenMessages[e.id];null!=i&&this.removeCSSRule(this.stylesheet,i)},this.messageAction=function(e,i){var s=t(i.target);this.trigger(e,{messageId:s.closest("[data-message-id]").attr("data-message-id"),senderId:s.closest("[data-sender-id]").attr("data-sender-id"),conversationId:s.closest("[data-thread-id]").attr("data-thread-id"),is_group:!s.closest("[data-is-oto]").data("is-oto")})},this.after("initialize",function(){this.stylesheet=this.createStyleSheet("hidden-dms"),this.on("uiDMDialogReportDM uiDMDialogDeleteMessage",this.hideMessage),this.on("dataDMDeleteFailed dataDMReportFailed",this.unhideMessage);var t=void 0;t=a.a.getDecider("dm_report_webview_macaw_swift_enabled")?"uiDMLaunchDMReportWebView":"uiShowDMReportMessageConfirmation",this.on("click",{deleteSelector:this.messageAction.bind(this,"uiShowDMDeleteMessageConfirmation"),reportSelector:this.messageAction.bind(this,t)})})}var n=i("DBjh"),o=i("9Qtu"),a=i("IAMj"),r=Object(n.default)(s,o.a);e.a=r}).call(e,i("4kSj"))},TNqm:function(t,e,i){"use strict";var s=i("DBjh"),n=i("3oDc");e.a=Object(s.default)(n.a,function(){this.defaultAttrs({nightModeActivated:!1}),this.scribeForeground=function(){this.scribe({element:this.attr.nightModeActivated?"nightmode":"normal",action:"foreground"})},this.updateNightMode=function(t,e){this.attr.nightModeActivated=e.nightModeActivated},this.after("initialize",function(t){this.on("uiPageVisible",this.scribeForeground),this.on("uiNightModeChanged",this.updateNightMode)})})},TTv8:function(t,e,i){"use strict";function s(){n.default.mixin(this,[o.a,a.a]),this.getDynamicVideoAd=function(t){var e=this.adCacheKey({id:t.id,promoted_id:t.promoted_id}),i=this.getDynamicVideoAdFromCache(e);return this.trigger("uiRefreshVideoAdCache",{tweet:t,triggerAd:i}),i||{}}}var n=i("q9/C"),o=i("rmeb"),a=i("tvrK");e.a=s},TXp3:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({scribeContext:{component:"profile_hover"}}),this.scribeProfilePopupOpen=function(e,i){if(i.isHoverRequest){i.user_id=i.user_id||t(e.target).attr("data-user-id"),-1!==["profile","me"].indexOf(this.clientEvent.scribeContext.page)&&this.clientEvent.scribeData.profile_id||(this.clientEvent.scribeData.profile_id=i.user_id);var s=r({},this.attr.scribeContext,{action:"open"});this.scribeInteraction(s,i)}},this.cleanupProfilePopupScribing=function(t,e){this.clientEvent.scribeData.profile_id&&-1===["profile","me"].indexOf(this.clientEvent.scribeContext.page)&&delete this.clientEvent.scribeData.profile_id},this.after("initialize",function(){this.clientEvent=a.a,this.on(document,"uiHideProfileHover",this.cleanupProfilePopupScribing),this.on(document,"uiHoverShown",this.scribeProfilePopupOpen)})}var n=i("DBjh"),o=i("gcfh"),a=i("NNES"),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=Object(n.default)(s,o.a)}).call(e,i("4kSj"))},TcEO:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({weights:{CACHED_PROFILE_VISIT:10,UNCACHED_PROFILE_VISIT:75,FOLLOW:100}}),this.cleanupUserData=function(t){this.shouldUseIndexedDB()?this.removeAccountAsync(parseInt(t,10)):this.removeAccount(t),this.addToUserBlacklist(t)},this.onFollowStateChange=function(t,e){if(e.userId){switch(e.newState){case"blocked":case"not-following":this.cleanupUserData(e.userId);break;case"following":e.user&&(this.adjustScoreBoost(e.user,this.attr.weights.FOLLOW),this.shouldUseIndexedDB()?this.addAccountForFollowAsync(e.user):this.addAccount(e.user,"following"),this.removeUserFromBlacklist(e.userId))}this.shouldUseIndexedDB()||this.updateLocalStorage()}},this.onProfileVisit=function(t,e){this.shouldUseIndexedDB()?this.handleProfileVisitAsync(e):this.handleProfileVisitSync(e)},this.handleProfileVisitAsync=function(t){this.datasources.accounts.getAccounts([t.id]).then(this.processUserAsync.bind(this,t)).then(this.datasources.accounts.addAccount.bind(this.datasources.accounts))},this.processUserAsync=function(t,e){e=o.a.compact(e);var i=0!==e.length,s=i?this.attr.weights.CACHED_PROFILE_VISIT:this.attr.weights.UNCACHED_PROFILE_VISIT,a=i?e[0].account:t;return this.adjustScoreBoost(a,s),i||(a.tokens=["@"+a.screen_name,a.screen_name].concat(n.a.tokenizeText(a.name))),a},this.handleProfileVisitSync=function(t){var e=this.datasources.accounts.userHash[t.id];this.processUserSync(t,e)},this.processUserSync=function(t,e){e?this.adjustScoreBoost(e,this.attr.weights.CACHED_PROFILE_VISIT):(this.adjustScoreBoost(t,this.attr.weights.UNCACHED_PROFILE_VISIT),this.addAccount(t,"visit")),this.updateLocalStorage()},this.updateLocalStorage=function(){this.datasources.accounts.storage.setItem("userHash",this.datasources.accounts.userHash,this.datasources.accounts.attr.ttl),this.datasources.accounts.storage.setItem("adjacencyList",this.datasources.accounts.adjacencyList,this.datasources.accounts.attr.ttl),this.datasources.accounts.storage.setItem("version",this.datasources.accounts.attr.version,this.datasources.accounts.attr.ttl)},this.removeAccount=function(t){if(this.datasources.accounts.userHash[t]){this.datasources.accounts.userHash[t].tokens.forEach(function(e){var i=this.datasources.accounts.adjacencyList[e.charAt(0)];if(i){var s=i.indexOf(t);-1!==s&&i.splice(s,1)}},this),delete this.datasources.accounts.userHash[t]}},this.removeAccountAsync=function(t){this.datasources.accounts.removeAccount(t)},this.adjustScoreBoost=function(t,e){t.score_boost?t.score_boost+=e:t.score_boost=e},this.addAccount=function(t,e){this.datasources.accounts.userHash[t.id]=t,t.tokens=["@"+t.screen_name,t.screen_name].concat(n.a.tokenizeText(t.name)),t.social_proof="following"===e?1:0,t.tokens.forEach(function(e){var i=e.charAt(0);if(e.trim().length)return this.datasources.accounts.adjacencyList[i]?void(-1===this.datasources.accounts.adjacencyList[i].indexOf(t.id)&&this.datasources.accounts.adjacencyList[i].push(t.id)):void(this.datasources.accounts.adjacencyList[i]=[t.id])},this)},this.addAccountForFollowAsync=function(t){t.tokens=["@"+t.screen_name,t.screen_name].concat(n.a.tokenizeText(t.name)),t.social_proof=1,this.datasources.accounts.addAccount(t)},this.removeOldAccountsInBlackList=function(){var t=void 0,e=void 0,i=0,s=this.datasources.accounts.attr.maxLengthBlacklist||100,n=this.datasources.accounts.socialContextBlackList,o=(new Date).getTime(),a=this.datasources.accounts.attr.ttl_ms;for(e in n){n[e]+a<o?delete n[e]:(t=t||e,t=n[t]>n[e]?e:t,i+=1)}s<i&&delete n[t]},this.updateBlacklistLocalStorage=function(t){this.datasources.accounts.storage.setItem("userBlackList",t,this.attr.ttl)},this.addToUserBlacklist=function(t){var e=this.datasources.accounts.socialContextBlackList;e[t]=(new Date).getTime(),this.removeOldAccountsInBlackList(),this.updateBlacklistLocalStorage(e)},this.removeUserFromBlacklist=function(t){var e=this.datasources.accounts.socialContextBlackList;this.removeOldAccountsInBlackList(),e[t]&&(delete e[t],this.updateBlacklistLocalStorage(e))},this.checkItemTypeForRecentSearch=function(t){return"saved_search"===t||"topics"===t||"recent_search"===t},this.addSavedSearch=function(t,e){this.datasources.savedSearches.addSavedSearch(e)},this.removeSavedSearch=function(t,e){this.datasources.savedSearches.removeSavedSearch(e)},this.addRecentSearch=function(t,e){"search"===e.source?this.datasources.recentSearches.addRecentSearch({query:e.query}):this.checkItemTypeForRecentSearch(e.source)&&e.isSearchInput&&this.datasources.recentSearches.addRecentSearch({query:e.query})},this.removeRecentSearch=function(e,i){i.deleteAll?this.datasources.recentSearches.removeAllRecentSearches():this.datasources.recentSearches.removeOneRecentSearch(i),t(e.target).trigger("dataTypeaheadRecentSearchDeleted")},this.updateSelectedUsers=function(t,e){this.datasources.selectedUsers.updateSelectedUsers(e)},this.setTrendLocations=function(t,e){this.datasources.trendLocations.setTrendLocations(e)},this.updatePrefill=function(t,e){this.datasources.prefillUsers.updateRecentlySelectedUsers(e)},this.checkDMConversationFreshness=function(t,e){this.datasources.dmConversations.repopulateIfStale(e&&e.trusted.groups)},this.addFollowedSearches=function(t,e){this.datasources.followedSearches&&this.datasources.followedSearches.addItems(e)},this.removeFollowedSearch=function(t,e){this.datasources.followedSearches&&this.datasources.followedSearches.removeItem(e)},this.setupEventListeners=function(t){switch(t){case"accounts":this.on("dataFollowStateChange",this.onFollowStateChange),this.on("profileVisit",this.onProfileVisit);break;case"savedSearches":this.on(document,"dataAddedSavedSearch",this.addSavedSearch),this.on(document,"dataRemovedSavedSearch",this.removeSavedSearch);break;case"followedSearches":this.on(document,"uiSwiftLoaded","dataGetFollowSearchList"),this.on(document,"dataGetFollowSearchListSuccess dataAddFollowSearchToTypeaheadList",this.addFollowedSearches),this.on(document,"dataRemoveFollowSearchFromTypeaheadList",this.removeFollowedSearch);break;case"recentSearches":this.on("uiSearchQuery uiTypeaheadItemSelected",this.addRecentSearch),this.on("uiTypeaheadDeleteRecentSearch",this.removeRecentSearch);break;case"trendLocations":this.on(document,"dataLoadedTrendLocations",this.setTrendLocations);break;case"selectedUsers":this.on("uiUpdatedSelectedUsers",this.updateSelectedUsers);break;case"prefillUsers":this.on("uiUpdateRecentTags",this.updatePrefill);break;case"dmConversations":this.on("dataDMConversationListResult",this.checkDMConversationFreshness)}}}var n=i("pFsH"),o=i("KgvP");e.a=s}).call(e,i("4kSj"))},"ThX/":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({locationAttachmentSelector:".DMLocationAttachment",expandedMapUriData:"expanded-url",headerSelector:".DMLocationAttachment-textHeader",bylineSelector:".DMLocationAttachment-byline",headerTextData:"header-text",bylineTextData:"byline-text"}),this.getClosestExpandedMapUri=function(t){return t.closest(this.attr.locationAttachmentSelector).data(this.attr.expandedMapUriData)},this.handleClick=function(e,i){e.preventDefault();var s=t(e.target),n=s.closest(this.attr.locationAttachmentSelector),o=this.getClosestExpandedMapUri(s),a=n.find(this.attr.headerSelector).data(this.attr.headerTextData),r=n.find(this.attr.bylineSelector).data(this.attr.bylineTextData);o&&this.trigger("uiLocationAttachmentClicked",{src:o,blackLine:a,grayLine:r})},this.after("initialize",function(){this.on("click",{locationAttachmentSelector:this.handleClick})})}var n=i("DBjh"),o=Object(n.default)(s);e.a=o}).call(e,i("4kSj"))},TkyG:function(t,e,i){"use strict";(function(t){var s=i("DBjh"),n=i("fnWM"),o=i("a0ja"),a=i("UHc7"),r=i("WqLG"),c=i("AJAn"),l=i("JFPI"),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a=Object(s.default)(a.a,c.a,r.a,function(){this.defaultAttrs({replyContextSelector:".TweetstormDialog-reply-context",tweetStormContextTweetType:"thread_context",top:"5%"}),this.attachTweetstomUI=function(){this.tweetBoxReady||(this.attachChild(n.a,t(this.node),{composeAltText:this.attr.composeAltText,typeaheadData:this.attr.typeaheadData}),this.tweetBoxReady=!0)},this.displayReplyContext=function(t,e){"id"in e&&"tweet_html"in e&&"sourceEventData"in e&&e.sourceEventData.modal===this.attr.tweetStormContextTweetType&&this.select("replyContextSelector").removeClass("hidden")},this.openTweetstormDialog=function(t,e){this.attachTweetstomUI(),this.trigger("uiTweetstormInit",e),"object"===(void 0===e?"undefined":h(e))&&e.previousStatusIdInThread&&this.displayTweet(e.previousStatusIdInThread,{modal:this.attr.tweetStormContextTweetType}),this.open()},this.restoreDialogFromUploadError=function(t,e){var i=this;this.trigger("uiTweetstormRestoreOnError",e),"object"===(void 0===e?"undefined":h(e))&&e.previousStatusIdInThread&&this.displayTweet(e.previousStatusIdInThread,{modal:this.attr.tweetStormContextTweetType}),this.isOpen()?setTimeout(function(){return i.open()},800):this.open()},this.restoreDialogFromDraft=function(t,e){this.attachTweetstomUI(),this.trigger("uiTweetstormRestoreDraft",e),this.open()},this.around("close",function(t,e,i){o.a.isAllEmpty||"uiCloseTweetstormDialogConfirm"===e.type||"dataTweetstormUploadStart"===e.type?("dataTweetstormUploadStart"!==e.type&&this.trigger("uiTweetstormAbandon"),this.trigger("uiTweetstormRemoveDBThread"),this.select("replyContextSelector").addClass("hidden"),t(e)):o.a.length>1?this.trigger("uiOpenConfirmDialog",l.e):this.trigger("uiOpenConfirmDialog",l.f)}),this.after("initialize",function(){this.on(document,"dataGotTweet",this.displayReplyContext),this.on(document,"uiOpenTweetstormDialog",this.openTweetstormDialog),this.on(document,"uiRestoreTweetstormDialog",this.restoreDialogFromDraft),this.on(document,"dataTweetstormUploadError",this.restoreDialogFromUploadError),this.on(document,"dataTweetstormUploadStart",this.close),this.on(document,"uiCloseTweetstormDialogConfirm",this.close)})})}).call(e,i("4kSj"))},Tuog:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({streamItemSelector:"> .js-stream-item",streamItemContainerSelector:"> .js-stream-item",scrollDebounceInterval:100}),this.enabledScrollCheck=function(t){var e=this,i=this.getPromptIdFromNode(t);setTimeout(function(){return e.updateVisibility(t)},0),this.on(window,"scroll.prompt"+i,a.default.debounce(this.updateVisibility.bind(this,t),this.attr.scrollDebounceInterval))},this.disableScrollCheck=function(t){var e=t.data("prompt-id");this.off(window,"scroll.prompt"+e)},this.updateVisibility=function(e,i,s){var n=r.a.isWithinBounds(t(window),e),o=this.getPromptIdFromNode(e);!this.promptVisibility[o]&&n&&this.trigger("uiInlinePromptScrolledIn",this.triggerData(o)),this.promptVisibility[o]=n},this.insertPromptAtIndex=function(e,i,s){var n=s?"before":"after",o=t(e.html);this.select("streamItemContainerSelector").eq(i)[n](o),this.enabledScrollCheck(o)},this.before("removePrompt",this.disableScrollCheck),this.after("initialize",function(){this.attr.triggerImpressionOnInsert=!1,this.promptVisibility={}})}var n=i("k7B4"),o=i("bN2o"),a=i("YzIt"),r=i("/LRg");e.a=n.a.mixin(s,o.a)}).call(e,i("4kSj"))},TwGl:function(t,e,i){"use strict";function s(t){n.a.attachTo(document,t),o.a.attachTo(document,t),a.a.attachTo(document,t),r.a.attachTo("#global-tweet-dialog",{autoplayDisabled:t.autoplayDisabled,environment:t.environment}),c.a.attachTo("#global-new-tweet-button",{eventData:{scribeContext:{component:"top_bar",element:"tweet_button"}},isGlobalTweetButton:!0,defaultText:t.query,cursorPosition:t.query?0:void 0}),l.a.attachTo(document,t),h.a.attachTo(document,t)}var n=i("PoM1"),o=i("EsrD"),a=i("wVpQ"),r=i("KQm4"),c=i("FUor"),l=i("r8VG"),h=i("EC06");e.a=s},"U8+L":function(t,e,i){"use strict";function s(){this.scribeCreateMoment=function(t,e){var i=e&&e.scribeContext&&e.scribeContext.component;this.scribe({component:i,element:"create_moment_button",action:"click"})},this.after("initialize",function(){this.on("uiMomentMakerCreateMoment",this.scribeCreateMoment)})}var n=i("DBjh"),o=i("3oDc");e.a=Object(n.default)(s,o.a)},UFzu:function(t,e,i){"use strict";function s(){this.attributes({addParticipantsSelector:".DMAddParticipants",addParticipantsInputSelector:".TokenizedMultiselect-input",addParticipantsDoneSelector:".DMAddParticipants-done",dialogBodySelector:".DMAddParticipants-content",spinnerSelector:".DMAddParticipants-spinner"}),this.setParticipants=function(t,e){this.conversationId&&this.conversationId===e.conversation_id&&(this.resetDMTypeahead(e),this.select("dialogBodySelector").css("visibility","visible"),this.select("spinnerSelector").addClass("u-hidden"),this.select("addParticipantsInputSelector").focus())},this.resetDMTypeahead=function(t){var e=t||{},i=e.participants&&e.participants.map(function(t){return t.id});this.trigger(this.attr.addParticipantsSelector,"uiInitializeDMTypeahead",{preselectedItems:i,maxItems:e.additional_participants_allowed})},this.prepareAddParticipants=function(t,e){this.conversationId=e.conversation_id,this.select("dialogBodySelector").css("visibility","hidden"),this.select("spinnerSelector").removeClass("u-hidden"),this.resetDMTypeahead(),this.trigger("uiNeedsDMConversation",{conversation_id:e.conversation_id})},this.addParticipants=function(){this.conversationId&&this.selectedAccounts.length&&this.trigger("uiAddConversationParticipants",{conversation_id:this.conversationId,participant_ids:this.selectedAccounts}),this.trigger("uiDMAddParticipantsDone")},this.handleSelectedItems=function(t,e){var i=e&&e.accounts&&e.accounts.length?e.accounts:[];this.selectedAccounts=i.map(function(t){return t.id})},this.possibleAddParticipants=function(t,e){("click"===t.type||"keydown"===t.type&&t.which===a.a.ENTER)&&this.addParticipants()},this.after("initialize",function(){this.attachChild(o.a,this.select("addParticipantsSelector")),this.selectedAccounts=[],this.on("uiDMTypeaheadSelectedItemsChanged",this.handleSelectedItems),this.on(document,"dataDMConversationResult",this.setParticipants),this.on("uiAddParticipants",this.prepareAddParticipants),this.on("click keydown",{addParticipantsDoneSelector:this.possibleAddParticipants})})}var n=i("DBjh"),o=i("7VCw"),a=i("i3qs"),r=i("AJAn");e.a=Object(n.default)(s,r.a)},"UNB/":function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMTrustRequest">\n  <div class="DMTrustRequest-message">\n'),s.s(s.f("is_oto",t,e,1),t,e,0,83,304,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("      Do you want to allow "),i.b(i.v(i.f("conversation_title",t,e,0))),i.b(" to message you? They won't know you've seen their request until you choose to accept. <button class=\"js-actionReportConversation btn-link\">Flag conversation</button>\n")}),t.pop()),s.b("\n"+i),s.s(s.f("is_oto",t,e,1),t,e,1,0,0,"")||s.b("      Do you want to participate in this group? They won't know you've seen the request until you choose to accept. <button class=\"js-actionReportConversation btn-link\">Flag conversation</button>\n"),s.b('  </div>\n  <div class="DMTrustRequest-actions">\n'),s.s(s.f("is_oto",t,e,1),t,e,0,608,709,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('      <button class="js-actionDeleteConversation EdgeButton EdgeButton--danger">Delete</button>\n')}),t.pop()),s.s(s.f("is_oto",t,e,1),t,e,1,0,0,"")||s.b('      <button class="js-actionDeleteConversation EdgeButton EdgeButton--danger">Leave</button>\n'),s.b('    <button class="DMTrustRequest-confirm EdgeButton EdgeButton--primary">Accept</button>\n  </div>\n</div>'),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},UNvB:function(t,e,i){"use strict";e.a={clientSideUser:0,serverSideUser:1,clientSideApp:2,serverSideApp:3}},UVly:function(t,e,i){"use strict";function s(t){var e=Object(r.b)(t),i=c(e,3),s=i[0],n=i[1],a=i[2],l={R:.2126,G:.7152,B:.0722};return l.R*o(s/255)+l.G*o(n/255)+l.B*o(a/255)}function n(t,e){return s(t)>s(e)}function o(t){return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function a(t,e){return n(t,e)?(s(t)+.05)/(s(e)+.05):(s(e)+.05)/(s(t)+.05)}i.d(e,"a",function(){return a});var r=i("9F29"),c=function(){function t(t,e){var i=[],s=!0,n=!1,o=void 0;try{for(var a,r=t[Symbol.iterator]();!(s=(a=r.next()).done)&&(i.push(a.value),!e||i.length!==e);s=!0);}catch(t){n=!0,o=t}finally{try{!s&&r.return&&r.return()}finally{if(n)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},UXvI:function(t,e,i){"use strict";var s={getId:function(t){return t.attr("data-user-id")},getName:function(t){return t.data("name")},getScreenName:function(t){return t.data("screen-name")}};e.a=s},"Uaj/":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({applyButtonSelector:".MediaEditDialog-applyAltTextButton",altTextTextareaSelector:".MediaEditDialog-altTextTextarea",doneTargetSelector:".js-done",closeTargetSelector:".js-close",photoContainerSelector:".MediaEditDialog-photoContainer",videoTrimSelector:".VideoTrim",videoTitleSelector:".MediaEditForm-title",videoDescriptionSelector:".MediaEditForm-description",videoCtaSelectSelector:".MediaEditForm-ctaSelect",videoCtaUrlSelector:".MediaEditForm-ctaUrl",videoEmbeddableSelector:".MediaEditForm-embeddable",videoTitleCharCounterSelector:".MediaEditForm-titleCharCounter",videoDescriptionCharCounterSelector:".MediaEditForm-descriptionCharCounter",videoTitleMaxLength:70,videoDescriptionMaxLength:200}),this.fileId=0,this.renderMediaEditDialog=function(t){var e=this.advancedVideoFeatures,i=t.advanced||{},s={alt_text:t.altText,can_compose_alt_text:this.canComposeAltText(),has_cta:""!==i.ctaType,is_cta_visit_site:"visit_site"===i.ctaType,is_cta_watch_now:"watch_now"===i.ctaType,is_gif:this.isGif,is_photo:this.isPhoto,is_video:this.isVideo,is_video_embeddable:i.embeddable||void 0===i.embeddable,title:this.getTitle(),video_ctl_url:i.ctaUrl,video_title:i.title,video_description:i.description,whitelisted_video_user:e},o=m.a.render(s);this.$node.html(o),this.$dialog=this.$dialogContainer.find(this.attr.modalSelector),this.isVideo&&(this.attachChild(h.a,this.select("videoTrimSelector"),{maxSelectionDuration:k,maxVisibleDuration:1.2*k,defaultSelectionDuration:x}),e&&(this.attachChild(n.a,this.select("videoTitleCharCounterSelector"),{maxLength:this.attr.videoTitleMaxLength}),this.attachChild(n.a,this.select("videoDescriptionCharCounterSelector"),{maxLength:this.attr.videoDescriptionMaxLength})))},this.openMediaEditDialog=function(t,e){var i=e.fileId,s=c.a.get(i);if(s&&(this.fileId=i,this.isVideo=s.isVideo,this.isGif=s.isGif,this.isImage=s.isImage,this.composeAltText=e.composeAltText,this.advancedVideoFeatures=l.a.getDeciderValue("web_upload_video_advanced"),this.renderMediaEditDialog(s),this.open(),this.loadMedia(s),this.canComposeAltText())){var n=this.select("altTextTextareaSelector")[0],o=n.value;this.initialAltText=o,this.resizeAltTextInput(),n.selectionStart=n.selectionEnd=o.length}},this.loadMedia=function(t){this.isVideo?(this.loadVideo(t),this.trigger(this.select("videoTitleCharCounterSelector"),"uiCharacterCounterUpdate"),this.trigger(this.select("videoDescriptionCharCounterSelector"),"uiCharacterCounterUpdate")):this.loadPhoto(t.thumbnail.src)},this.loadVideo=function(e){this.mediaObjectUrl=a.a.getObjectUrl(e.fileHandle),this.trigger(this.select("videoTrimSelector"),"uiLoadVideo",{videoSrc:this.mediaObjectUrl,initialTrimRange:e.trimRange}),t(document).trigger("uiPauseAllMedia")},this.sizeAndPosition=function(){var t=this.select("photoContainerSelector").find("img");r.a.resetMinSize(this.$dialog),r.a.resizeMedia(t,this.$dialog,!1,".modal-footer",!1),this.position()},this.loadPhoto=function(e){var i=t("<img>",{class:"MediaEditDialog-photo",src:e,on:{load:this.sizeAndPosition.bind(this)}});this.select("photoContainerSelector").html(i)},this.expandVideoDescription=function(){var t=3*parseInt(this.select("videoDescriptionSelector").css("line-height"));this.off(this.select("videoDescriptionSelector"),"focus",this.expandVideoDescription),this.select("videoDescriptionSelector").height(t)},this.canComposeAltText=function(){return!this.isVideo&&!this.isGif&&this.composeAltText},this.getTitle=function(){var t=void 0;return this.isVideo?t=this.advancedVideoFeatures?S:C:this.isGif?t=y:this.isImage&&(t=this.canComposeAltText()?D:T),t},this.displayVideoCtaUrl=function(){var t=""===this.select("videoCtaSelectSelector").val();this.select("videoCtaSelectSelector").toggleClass("u-inactive",t),this.select("videoCtaUrlSelector").toggleClass("u-hidden",t),t?this.select("videoCtaUrlSelector").removeAttr("data-valid"):(this.validateVideoCtaUrl(),this.select("videoCtaUrlSelector").focus()),this.trigger("uiValidateForm")},this.validateForm=function(){var t=this.isValidInput("videoCtaUrlSelector"),e=this.isValidInput("videoTitleSelector")&&this.isValidInput("videoDescriptionSelector")&&t;return e?this.select("doneTargetSelector").prop("disabled",!1):(this.select("doneTargetSelector").prop("disabled",!0),!t&&this.select("videoCtaUrlSelector").val().length&&(this.trigger(document,"uiShowMessage",{message:w}),this.select("videoCtaUrlSelector").focus())),e},this.isValidInput=function(t){return"false"!==this.select(t).attr("data-valid")},this.validateVideoCtaUrl=function(){var t=this.select("videoCtaUrlSelector").val(),e=this.isValidUrl(t);return this.select("videoCtaUrlSelector").attr("data-valid",e),this.trigger("uiValidateForm"),e},this.isValidUrl=function(t){return b.test(t.trim())},this.notifyEditDone=function(){this.trigger("uiMediaEditDialogDone",{fileId:this.fileId})},this.updateVideoInfo=function(t,e){var i=g({},e,{duration:t.trimEnd-t.trimStart});return c.a.update(t.fileId,i)},this.editDone=function(){var t=this.isVideo,e=t?{trimStart:this.trimStart,trimEnd:this.trimEnd,trimRange:this.trimRange}:{},i=t&&this.advancedVideoFeatures?{advanced:{title:this.select("videoTitleSelector").val(),description:this.select("videoDescriptionSelector").val(),ctaType:this.select("videoCtaSelectSelector").val(),ctaUrl:this.select("videoCtaUrlSelector").val(),embeddable:this.select("videoEmbeddableSelector").is(":checked")}}:{},s=this.canComposeAltText()?{altText:(this.select("altTextTextareaSelector").val()||"").trim()}:{},n=g({},e,i,s),o=c.a.update(this.fileId,n);t?a.a.getVideoInfo(o.fileHandle,this.trimStart).then(this.updateVideoInfo.bind(this,o)).then(this.notifyEditDone.bind(this)):this.notifyEditDone()},this.closeMediaEditDialog=function(e,i){this.isVideo&&(this.trigger(this.select("videoTrimSelector"),"uiUnloadVideo"),this.mediaObjectUrl&&(a.a.revokeObjectUrl(this.mediaObjectUrl),this.mediaObjectUrl=null)),this.canComposeAltText()&&this.select("altTextTextareaSelector").val(""),this.close(),this.activeEl?t(this.activeEl).closest(".tweet-form, .modal").find(".tweet-box").focus():this.restorePreviousFocus()},this.updateTrimRange=function(t,e){this.trimStart=e.trimStart,this.trimEnd=e.trimEnd,this.trimRange=e.trimRange},this.resizeAltTextInput=function(t){var e=this.select("altTextTextareaSelector"),i=e[0],s=e.innerHeight()-e.height(),n=this.select("applyButtonSelector"),o=n.outerHeight()-4;e.height(1);var a=Math.max(i.scrollHeight,o);e.height(Math.min(a-s,I)),i.style.display="none",i.offsetHeight,i.style.display=""},this.toggleApplyButtonState=function(e){var i=t(e.target).val();this.select("applyButtonSelector").prop("disabled",!(this.initialAltText!==i))},this.after("initialize",function(){this.on(document,"uiOpenMediaEditDialog",this.openMediaEditDialog),this.on("uiShortcutEsc uiDialogClosed uiMediaEditDialogDone",this.closeMediaEditDialog),this.on("uiTrimRangeChanged",this.updateTrimRange),this.on("click",{doneTargetSelector:this.editDone,closeTargetSelector:this.closeMediaEditDialog}),this.on("uiShortcutCmdEnter",this.editDone),this.on("change",{videoTitleSelector:this.validateForm,videoDescriptionSelector:this.validateForm,videoCtaSelectSelector:this.displayVideoCtaUrl,videoCtaUrlSelector:this.validateVideoCtaUrl}),this.on("input",{altTextTextareaSelector:this.toggleApplyButtonState}),this.on("uiValidateForm",this.validateForm),this.on("focusin",{videoDescriptionSelector:this.expandVideoDescription}),this.on("input",{altTextTextareaSelector:this.resizeAltTextInput})})}var n=i("Wf2x"),o=i("DBjh"),a=i("+dWm"),r=i("Hotm"),c=i("H6fk"),l=i("IAMj"),h=i("t0ie"),d=i("UHc7"),u=i("AJAn"),p=i("0d4m"),f=i("lsLN"),m=i.n(f),g=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},v=Object(o.default)(s,d.a,u.a,n.a),b=/^(https?:\/\/)?[a-z0-9-.]+\.[a-z]+\/?([^\s<>#%",{}\\|\\^[\]`]+)?$/,w=Object(p.default)("URL is not valid"),S=Object(p.default)("Edit"),C=Object(p.default)("Trim"),y=Object(p.default)("GIF"),T=Object(p.default)("Image"),D=Object(p.default)("Image description"),I=60,x=45,k=140;e.a=v}).call(e,i("4kSj"))},UcHL:function(t,e,i){"use strict";(function(t){function i(){this.registerItem=function(e){var i=t(e),s=i.attr("data-item-id");s&&(this.idHash[s]?this.idHash[s]=!0:this.dedupItem(s))},this.dedupItem=function(e){this.select("genericItemSelector").filter("[data-item-id="+e+"]").filter(function(e,i){return 0===t(i).closest(".js-no-dedup").length}).slice(1).remove()},this.registerInjectedItem=function(t,e){this.registerItem(t.target)},this.registerExistingItems=function(){var t=this;this.select("genericItemSelector").get().forEach(function(e){return t.registerItem(e)})},this.after("initialize",function(){this.attr.useDeduping&&(this.idHash={},this.registerExistingItems(),this.on("uiHasInjectedTimelineItem",this.registerInjectedItem))})}e.a=i}).call(e,i("4kSj"))},Ueze:function(t,e,i){"use strict";(function(t){function s(){this.viewportHelpers=o.a,this.defaultAttrs({scrollThrottleMs:200,mediaSelectors:":not(.PlayableMedia--placeholder).PlayableMedia .PlayableMedia-player, :not(.with-inline-playable-media).js-macaw-cards-iframe-container.card-type-promo_video_convo, .js-macaw-cards-iframe-container.card-type-audio",tweetIdDataAttr:"data-tweet-id",tweetsSelector:".tweet",permalinkOverlaySelector:".PermalinkOverlay",openDropdownSelector:".dropdown.open .dropdown-menu",tweetNonceId:"data-tweet-nonce"}),this.notifyViewportPositionChange=function(){var t=this,e=o.a.getVisibleViewport(),i=this.getDropdownBoundingRect();this.watchedMedia.filter(function(t){return 0!==t.mediaElement.children.length}).filter(function(e){return t.permalinkOpen===e.inPermalink}).map(function(s){var n=s.mediaElement.getBoundingClientRect(),o=!1;return i&&(o=0!==t.generatePercentVisible(n,i)),{tweetId:s.tweetId,parentViewportSize:e,positionInParent:Object(r.a)(n),videoHidden:t.pageHidden||t.modalWithinPermalinkOpen||t.modalOpen&&!s.inPermalink||o}}).forEach(function(e){return t.notifyViewportPositionChangeForElement(e.tweetId,e.parentViewportSize,e.positionInParent,e.videoHidden)})},this.notifyViewportPositionChangeForElement=function(t,e,i,s){var n={parentViewportSize:e,positionInParent:Object(r.a)(i),videoHidden:s,percentVisible:s?0:this.generatePercentVisible(e,i),percentOfViewportOccupied:s?0:this.generatePercentOfViewportOccupied(e,i),sizesInfo:this.generateSizesInfo(e,i)};this.trigger("uiPlayableMediaPositionChange",{tweetId:t,positionData:n})},this.generatePercentVisible=function(t,e){return this.generatePercentInContainer(e,t)},this.generatePercentOfViewportOccupied=function(t,e){return this.generatePercentInContainer(t,e)},this.generatePercentInContainer=function(t,e){var i=t.bottom-t.top,s=t.right-t.left,n=s*i,o={top:Math.max(t.top,e.top),left:Math.max(t.left,e.left),bottom:Math.min(t.bottom,e.bottom),right:Math.min(t.right,e.right)},a=Math.max(0,o.bottom-o.top),r=Math.max(0,o.right-o.left),c=a*r;return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?1:0===n?0:c/n},this.generateSizesInfo=function(t,e){return{viewportSize:{width:t.right-t.left,height:t.bottom-t.top},mediaSize:{width:e.right-e.left,height:e.bottom-e.top}}},this.isMediaElementWithinPermalink=function(t){return t.closest(this.attr.permalinkOverlaySelector).length>0},this.updateTweetList=function(){var e=this;this.updatePermalinkVisibility(),this.watchedMedia=this.select("mediaSelectors").map(function(i,s){var n=t(s),o=e.permalinkOpen&&e.isMediaElementWithinPermalink(n),a=n.closest(e.attr.tweetsSelector);return{mediaElement:s,tweetId:a.attr(e.attr.tweetNonceId)||a.attr(e.attr.tweetIdDataAttr),inPermalink:o}}).get(),this.throttledNotifyViewportPositionChange()},this.updatePermalinkVisibility=function(){this.permalinkOpen=this.$permalink.is(":visible")},this.updatePageVisibility=function(){var t=!document.hasFocus()||document.hidden;t!==this.pageHidden&&(this.pageHidden=t,this.throttledNotifyViewportPositionChange())},this.setModalOpen=function(){this.permalinkOpen?this.modalWithinPermalinkOpen=!0:this.modalOpen=!0,this.throttledNotifyViewportPositionChange()},this.setModalClosed=function(){this.modalWithinPermalinkOpen?this.modalWithinPermalinkOpen=!1:this.modalOpen=!1,this.updateTweetList()},this.getDropdownBoundingRect=function(){return this.dropdownOpen?this.dropdownOpen.getBoundingClientRect():null},this.setDropdownOpen=function(){this.dropdownOpen=this.select("openDropdownSelector")[0],this.throttledNotifyViewportPositionChange()},this.setDropdownClosed=function(){this.dropdownOpen=null,this.throttledNotifyViewportPositionChange()},this.after("initialize",function(){this.watchedMedia=[],this.pageHidden=!1,this.modalOpen=!1,this.permalinkOpen=!1,this.modalWithinPermalinkOpen=!1,this.dropdownOpen=null,this.throttledNotifyViewportPositionChange=a.default.throttle(this.notifyViewportPositionChange.bind(this),this.attr.scrollThrottleMs),this.on(document,"scroll uiDynamicCardLoaded uiDynamicCardUnloaded uiPlayableMediaReady",this.throttledNotifyViewportPositionChange),this.on(window,"resize",this.throttledNotifyViewportPositionChange),this.on(document,"uiPageHidden uiPageVisible",this.updatePageVisibility),this.on(window,"focus focusin blur focusout",this.updatePageVisibility),this.$permalink=this.select("permalinkOverlaySelector"),this.$permalink.on("scroll",this.throttledNotifyViewportPositionChange),this.on(document,"uiDialogOpened",this.setModalOpen),this.on(document,"uiDialogClosed",this.setModalClosed),this.on(document,"uiDropdownOpened",this.setDropdownOpen),this.on(document,"uiDropdownClosed",this.setDropdownClosed),this.on(document,"uiWatchPlayableMedia",this.updateTweetList),this.updateTweetList()})}var n=i("DBjh"),o=i("/LRg"),a=i("YzIt"),r=i("V+rC");e.a=Object(n.default)(s)}).call(e,i("4kSj"))},"V+rC":function(t,e,i){"use strict";function s(t){return{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}e.a=s},V93P:function(t,e,i){"use strict";function s(){this.scribeSruStats=function(t,e){var i=["stats","sru",e.mediaCategory,e.command,e.status],s={browser:Object(n.a)(),append_byte_size:e.appendByteSize,total_duration_ms:e.totalDuration,total_byte_size:e.totalByteSize};this.scribePerftown(i.join(":"),e.duration,s)},this.after("initialize",function(){r.a.getDecider("web_sru_stats")&&this.on("dataSruStats",this.scribeSruStats)})}var n=i("RW6J"),o=i("DBjh"),a=i("2CoY"),r=i("IAMj");e.a=Object(o.default)(s,a.a)},VSco:function(t,e,i){"use strict";function s(){this.listMembershipContent=function(t,e){this.get({url:"/i/"+e.userId+"/lists",dataType:"json",data:{},eventData:e,success:"dataGotListMembershipContent",error:"dataFailedToGetListMembershipContent"})},this.addUserToList=function(t,e){this.post({url:"/i/"+e.userId+"/lists/"+e.listId+"/members",dataType:"json",data:{},eventData:e,success:"dataDidAddUserToList",error:"dataFailedToAddUserToList"})},this.removeUserFromList=function(t,e){this.destroy({url:"/i/"+e.userId+"/lists/"+e.listId+"/members",dataType:"json",data:{},eventData:e,success:"dataDidRemoveUserFromList",error:"dataFailedToRemoveUserFromList"})},this.createList=function(t,e){this.post({url:"/i/lists/create",dataType:"json",data:e,eventData:e,success:"dataDidCreateList",error:"dataFailedToCreateList"})},this.after("initialize",function(){this.on("uiNeedsListMembershipContent",this.listMembershipContent),this.on("uiAddUserToList",this.addUserToList),this.on("uiRemoveUserFromList",this.removeUserFromList),this.on("uiCreateList",this.createList)})}var n=i("DBjh"),o=i("VtWx");e.a=Object(n.default)(s,o.a)},VX1t:function(t,e,i){"use strict";function s(){this.defaultAttrs({removeOptionSelector:".PollingCardComposer-removeOption",optionIndexAttr:"data-option-index"}),this.textChanged=function(){this.trigger("uiPollOptionTextChange",{index:this.index,text:this.getVisibleText()})},this.removeOption=function(){this.trigger("uiPollOptionRemove",{index:this.index})},this.resetPollComposeInput=function(){this.setVisibleText("")},this.updatePollOption=function(t,e){e&&"option"in e&&this.setVisibleText(e.option)},this.focusPollInput=function(){this.select("richEditorTextSelector").focus()},this.after("initialize",function(){this.index=this.$node.attr(this.attr.optionIndexAttr),this.initTextNode(),this.textChanged(),this.on("uiTextChanged",this.textChanged),this.on("uiPollOptionReset",this.resetPollComposeInput),this.on("uiPollOptionUpdate",this.updatePollOption),this.on("uiPollOptionFocus",this.focusPollInput),this.on("click",{removeOptionSelector:this.removeOption})})}var n=i("DBjh"),o=i("+97U"),a=i("84/5"),r=i("LcyA"),c=i("pUl/"),l=i("+HBl"),h=Object(n.default)(s,c.a,a.a,o.a,r.a,l.a);e.a=h},Vl6W:function(t,e,i){"use strict";function s(){this.defaultAttrs({noShowError:!0}),this.dmSubscription=function(t,e){e=e||{};var i=void 0;i=!0===e.enable_subscriptions?"https://api.twitter.com/1.1/dm/subscriptions/new.json":"https://api.twitter.com/1.1/dm/subscriptions/destroy.json",this.post({acceptEmptyStringAsJsonResponse:!0,url:i,data:{user_id:e.user_id},headers:{"Content-Type":"application/x-www-form-urlencoded"},useOAuthSessionAuth:!0})},this.after("initialize",function(){this.on("uiToggleDMBroadcastSubscription",this.dmSubscription)})}var n=i("DBjh"),o=i("VtWx");e.a=Object(n.default)(s,o.a)},"Vnf/":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({birdSelector:"h1.bird-topbar-etched",spinnerContainer:"body",globalHeadingSelector:".global-nav h1",spinnerClass:"pushing-state",spinnerSelector:".pushstate-spinner"}),this.showSpinner=function(t,e){this.select("birdSelector").removeAttr("style"),this.select("spinnerContainer").addClass(this.attr.spinnerClass)},this.hideSpinner=function(t,e){this.select("spinnerContainer").removeClass(this.attr.spinnerClass)},this.addSpinner=function(){this.select("spinnerSelector").length||t('<div class="pushstate-spinner"></div>').insertAfter(this.select("globalHeadingSelector"))},this.after("initialize",function(){this.on("uiSwiftLoaded",this.addSpinner),this.on("uiShowGlobalLoadingIndicator",this.showSpinner),this.on("uiHideGlobalLoadingIndicator",this.hideSpinner)})}var n=i("DBjh"),o=Object(n.default)(s);e.a=o}).call(e,i("4kSj"))},Vvp0:function(t,e,i){"use strict";function s(){this.getTweetTranslation=function(t,e){var i=function(e){e&&e.message&&this.trigger("uiShowMessage",{message:e.message}),this.trigger(t.target,"dataTweetTranslationSuccess",e)},s=function(i,s,n){this.trigger(t.target,"dataTweetTranslationError",{id:e.id,status:s,errorThrown:n})},n={id:e.tweetId,dest:e.dest};this.get({url:"/i/translations/show.json",data:n,eventData:e,success:i.bind(this),error:s.bind(this)})},this.after("initialize",function(){this.on("uiNeedsTweetTranslation",this.getTweetTranslation)})}var n=i("DBjh"),o=i("VtWx"),a=Object(n.default)(s,o.a);e.a=a},W0Am:function(t,e,i){"use strict";function s(){this.defaultAttrs({showUnreadNotificationCount:!1,badgeAfterTweetCount:!1}),this.addCount=function(t,e){this.trigger(document,{type:"uiUpdatePageCount",defaultBehavior:this.updateCount.bind(this,e)})},this.updateCount=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.count,i=void 0===e?0:e,s=i;this.attr.badgeAfterTweetCount&&this.attr.badgeAfterTweetCount<=i&&(s="*"),document.title="("+s+") "+this.title},this.removeCount=function(t,e){document.title=this.title},this.setTitle=function(t,e){var i=e||t.originalEvent.state;i&&i.title&&(document.title=this.title=i.title)},this.updateNotificationsCount=function(t,e){e&&"number"==typeof e.count&&e.count>0?this.updateCount(o({},e,{count:e.localized_count})):this.removeCount()},this.after("initialize",function(){this.title=document.title,this.attr.showUnreadNotificationCount?this.on("uiUpdateConnectBadge",this.updateNotificationsCount):(this.on("uiAddPageCount",this.addCount),this.on("uiHasInjectedNewTimeline",this.removeCount)),this.on(document,"uiBeforePageChanged uiUpdatePageTitle",this.setTitle)})}var n=i("DBjh"),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},a=Object(n.default)(s);e.a=a},W0O4:function(t,e,i){"use strict";function s(){this.accept=function(t,e){var i="https://api.twitter.com/1.1/dm/conversation/"+e.conversation_id+"/accept.json";this.post({url:i,useOAuthSessionAuth:!0,success:"dataDMTrustRequestAcceptSuccess"})},this.after("initialize",function(){this.on("uiDMTrustRequestAccept",this.accept)})}var n=i("DBjh"),o=i("VtWx"),a=Object(n.default)(s,o.a);e.a=a},W5ds:function(t,e,i){"use strict";function s(){this.defaultAttrs({tweetFormSelector:".tweet-form"}),this.initTweetbox=function(t){var e=this.select("tweetFormSelector"),i=this.attr.preexpandTweetbox||!1;this.trigger(e,"uiInitTweetbox",n({draftTweetId:this.attr.draftTweetId,condensable:!i,preexpandTweetbox:i,suppressSuccessMessage:this.attr.suppressSuccessMessage,eventData:this.attr.eventData},t))}}e.a=s;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t}},WHVX:function(t,e,i){"use strict";function s(){this.smsConfirmationAjaxCall=function(t,e,i){function s(t){t.error?this.trigger("uiAlertBanner",t):this.trigger(i,{message:t.message})}var n=a({user_id:t.userId},t);this.post({url:e,data:n,success:s.bind(this),error:"dataUserActionError"})},this.sendPinAction=function(t,e){var i={phone_number:e.phone_number,country_code:e.country_code};this.smsConfirmationAjaxCall(i,"/i/devices/sms_confirmation_begin","dataSendPinSuccess")},this.resendPinAction=function(t,e){var i={phone_number:e.phone_number,country_code:e.country_code,resend:!0};this.smsConfirmationAjaxCall(i,"/i/devices/sms_confirmation_begin","dataResendPinSuccess")},this.verifyPinAction=function(t,e){var i={numeric_pin:e.numeric_pin,phone_number:e.phone_number,country_code:e.country_code};this.smsConfirmationAjaxCall(i,"/i/devices/sms_confirmation_complete","dataVerifyPinSuccess")},this.after("initialize",function(){this.on(document,"uiSendPinAction",this.sendPinAction),this.on(document,"uiResendPinAction",this.resendPinAction),this.on(document,"uiVerifyPinAction",this.verifyPinAction)})}var n=i("DBjh"),o=i("VtWx"),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},r=Object(n.default)(s,o.a);e.a=r},WKYg:function(t,e,i){"use strict";function s(t){return n.a.keys().filter(function(e){return n.a.get(e).tweetboxId===t}).map(n.a.get)}var n=i("H6fk");e.a=s},WLOm:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({noShowError:!0}),this.markDMsAsRead=function(e,i){i=i||{},i.retry=i.retry||void 0===i.retry;var s=t.noop,n=t.noop;i.from_notification?s=r(e.target,function(t){return"msgCount"in t?"uiReadStateChanged":null}):(s=function(t){"success"!==t.text?n.call(this,t):this.trigger(e.target,"dataDMReadSuccess",t)},n=function(t){i.retry?(i.retry=!1,this.trigger(e.target,"dataMarkDMsAsRead",i)):this.trigger(e.target,"dataDMReadError",t)}),this.post({url:"/i/messages/mark_read",data:{last_message_id:i.last_message_id,recipient_id:i.recipient_id,recipient_name:i.recipient_name,get_count:i.from_notification},eventData:i,success:s.bind(this),error:n.bind(this)})},this.after("initialize",function(){this.on("dataMarkDMsAsRead",this.markDMsAsRead)})}var n=i("DBjh"),o=i("VtWx"),a=i("ldNY"),r=a.a.triggerFn;e.a=Object(n.default)(s,o.a)}).call(e,i("4kSj"))},WRDM:function(t,e,i){"use strict";var s=i("0d4m"),n=i("lUIe"),o={generateConversationName:function(t){return 1===t.length?t[0].name:2===t.length?Object(s.default)("{{first}}, {{second}}",{first:t[0].name,second:t[1].name}):t.length>2?Object(s.default)("{{first}} + {{count}}",{first:t[0].name,count:t.length-1}):void 0},generateConversationId:function(t,e){if(t&&e){var i=[t,e];return(n.a.compare(i[0],i[1])<0?i:i.reverse()).join("-")}},sortRecipients:function(t){return(t||[]).sort(function(t,e){return n.a.compare(t.id,e.id)})}};e.a=o},WRJE:function(t,e,i){"use strict";function s(){this.defaultAttrs({videoFormats:['video/mp4; codecs="avc1.42E01E,mp4a.40.2"','video/quicktime; codecs="avc1.42E01E,mp4a.40.2"','video/x-m4v; codecs="avc1.42E01E,mp4a.40.2"'],videoSupport:!1}),this.videoFormats=function(t){return!t&&this.hasVideoSupport()?this.canPlayFormats().join(","):""},this.canPlayFormats=function(){var t=this;return void 0!==this.supportedVideoFormats?this.supportedVideoFormats:function(){var e=document.createElement("video");return t.supportedVideoFormats=t.attr.videoFormats.filter(function(t){return!!e.canPlayType(t)}).map(function(t){return t.split(";")[0]})}()},this.hasVideoSupport=function(){var t=this;return void 0!==this.hasVideoSupportResult?this.hasVideoSupportResult:function(){var e=document.createElement("video"),i=t.attr.videoFormats.some(function(t){return!!e.canPlayType(t)});return t.hasVideoSupportResult=o.a.hasFileReader()&&r.a.getDecider("web_upload_video")&&t.attr.videoSupport&&i}()},this.gotVideo=function(t){var e={scribeData:{items:[{media_details:{duration:t.duration}}]}};r.a.getDeciderValue("web_upload_video_advanced")&&this.trigger("uiVideoPickerProAdd",e),this.trigger("uiVideoPickerAdd",e);var i=t.fileId,s=t.duration>45;s&&a.a.update(i,{duration:45}),this.notifyFileSelected({fileId:i,uploadType:this.attr.uploadType}),s&&this.trigger(document,"uiOpenMediaEditDialog",{fileId:t.fileId})},this.validateVideo=function(t){if(!this.hasVideoSupport())return this.addFileError(n.a.NOT_IMAGE),!1;if(-1===this.canPlayFormats().indexOf(t.type))return this.addFileError(n.a.FILE_UNSUPPORTED),!1;var e=r.a.getDeciderValue("upload_video_size")||15;return!(t.size>1024*e*1024)||(this.addFileError(n.a.VIDEO_TOO_LARGE),!1)}}var n=i("JSdv"),o=i("+dWm"),a=i("H6fk"),r=i("IAMj");e.a=s},"WRe/":function(t,e,i){"use strict";(function(t){function s(){this.defaults={thumbSelector:".ComposerThumbnail",thumbsSelector:".ComposerThumbnails",thumbImageSelector:".ComposerThumbnail-image",thumbRemoveSelector:".ComposerThumbnail-remove",composerSelector:".tweet-form",attributionSelector:".js-attribution",thumbnailSize:"small",composeAltText:!1},this.update=function(t,e){var i=l.a.get(e.fileId);i&&(i.isVideo?this.updateVideoThumbnail(i):!i.isGif&&i.isImage&&this.updateDescription(i),this.updateLabels())},this.updateVideoThumbnail=function(t){var e=this.getByFileId(t.fileId);e.length&&(e.find("img").attr("src",t.thumbnail.src),e.find(".ComposerThumbnail-duration").text(u.a.formatDuration(t.duration)))},this.updateDescription=function(t){var e=t.altText;if(void 0!==e){var i=this.getByFileId(t.fileId),s=e||w;i.find(".ComposerThumbnail-description").text(s)}},this.updateLabels=function(){this.select("thumbSelector").each(function(e){var i=t(this),s=i.find("img").attr("alt"),n=s||Object(p.default)("Image {{image_number}}",{image_number:e+1}),o=s?I:D;i.find(".ComposerThumbnail-ariaDescription").text(o),i.attr("aria-label",n)})},this.getByFileId=function(t){return this.select("thumbsSelector").find(".ComposerThumbnail[data-file-id="+t+"]")},this.removeAllBlobs=function(){Object(o.a)(this.attr.tweetboxId).forEach(function(t){return t.thumbnail&&a.a.revokeObjectUrl(t.thumbnail.src)})},this.removeAll=function(t,e){this.removeAllBlobs(),this.select("thumbsSelector").empty(),this.select("attributionSelector").empty(),this.removeDynamicSizing(),this.$node.closest(this.attr.composerSelector).removeClass(k).removeClass(M)},this.addPlaceholder=function(t,e){var i=b({},e,{isPlaceholder:!0});this.add(i),this.trigger("uiPreviewThumbnailShow",i)},this.render=function(t){var e=t.isVideo,i=t.isGif,s=!e&&!i,n=x[this.attr.thumbnailSize],o=d.a.getDeciderValue("web_upload_video_advanced")?S:C,a=t.thumbnail,c=s?r.a.getThumbnailOffset(a.height,a.width,n):{},l=Object.keys(c).map(function(t){return t+": "+c[t]+"px"}).join(";"),f=this.select("thumbSelector").length,g=void 0;g=e?T:i?y:Object(p.default)("Image {{image_number}}",{image_number:f+1});var v={aria_description_id:Object(h.a)(),aria_description:D,can_compose_alt_text:!e&&!i&&this.attr.composeAltText,duration:u.a.formatDuration(t.duration),edit_button_label:o,file_id:t.fileId,is_gif:i,is_large_size:!e&&!i&&"large"===this.attr.thumbnailSize,is_photo:s,is_placeholder:t.isPlaceholder,is_video:e,offset_styles:l,label:g,src:a.src,whitelisted_video_user:d.a.getDeciderValue("web_upload_video_advanced")},b=this.select("thumbsSelector");b.find(".ComposerThumbnail-loading").closest(".ComposerThumbnail").remove();var w=m.a.render(v);b.append(w)},this.add=function(t){var e=t.fileId,i=t.thumbnail.width,s=t.thumbnail.height,n=t.attribution,o=void 0!==n,a=this.$node.closest(this.attr.composerSelector);a.toggleClass(M,o),this.render(t),o&&a.find(this.attr.attributionSelector).attr("data-file-id",e).html(v.a.render(n)),t.isVideo?this.resize(s,i):t.isGif&&(a.addClass(k),this.resize(s,i,o)),this.trigger("uiUpdatedThumbnails"),this.trigger(a,"uiPreviewThumbnailAdded",{fileId:e})},this.resize=function(e,i,s){var n=this.select("thumbSelector"),o=this.$node.closest(this.attr.composerSelector);if(!n.length)return this.removeDynamicSizing(),void o.removeClass(k);var a={},r=void 0,c=void 0;e>i?(r=Math.min(e,330),c=Math.round(i*(r/e))):(c=Math.min(i,330),r=Math.round(e*(c/i))),a={height:r,width:c},o.addClass(P),n.each(function(){var e=t(this),i=e.find("img");e.add(i).add(i.closest(".ComposerThumbnail-imageContainer")).css(a)})},this.removeDynamicSizing=function(){var t=this.$node.closest(this.attr.composerSelector);this.$node.removeAttr("style"),t.find(".RichEditor,.tweet-box").eq(0).removeAttr("style"),t.find(".typeahead").removeAttr("style"),t.removeClass(P).removeClass(M),this.$node.closest(".ComposerThumbnail--video").removeClass("ComposerThumbnail--video")},this.completeRemoval=function(e){var i=t(e.target),s=i.attr("data-file-id"),n=l.a.get(s),o=n.thumbnail.height,a=n.thumbnail.width,c=x[this.attr.thumbnailSize];this.trigger("uiPreviewThumbnailRemove",{fileId:s}),i.remove(),this.trigger("uiPreviewThumbnailRemoved",{fileId:s}),n.isVideo||n.isGif?this.resize(o,a):i.find("img").css(r.a.getThumbnailOffset(o,a,c)),this.updateLabels(),l.a.remove(s)},this.remove=function(e){var i=t(e.target).closest(this.attr.thumbSelector),s=i.attr("data-file-id"),n=l.a.get(s);if(n){a.a.revokeObjectUrl(i.find("img").attr("src")),i.addClass("is-removing"),i.on("animationend",this.completeRemoval.bind(this));var o=n.uploadId;o&&this.trigger(document,"uiMediaSruCancel",{uploadId:o}),this.trigger("uiImagePickerRemove"),this.trigger("uiUpdatedThumbnails")}},this.openMediaEditDialog=function(e){var i=t(e.target);if(!i.closest(this.attr.thumbRemoveSelector).length){if(!this.$node.closest(this.attr.composerSelector).hasClass("tweeting")){var s=i.closest(this.attr.thumbSelector),n=s.attr("data-file-id"),o=l.a.get(n);if(o){var a={fileId:n},r=o.isVideo||o.isGif?a:b({},a,{composeAltText:this.attr.composeAltText});this.trigger(document,"uiOpenMediaEditDialog",r)}}}},this.showAttributionLink=function(t){var e=t.target.getAttribute("data-file-id");this.trigger("uiNeedsCopyFoundMediaDialog",{fileId:e})},this.handleKeyActions=function(t){A.indexOf(t.keyCode)>=0&&(t.preventDefault(),this.remove(t)),O.indexOf(t.keyCode)>=0&&this.openMediaEditDialog(t)},this.preventFocus=function(t){t.preventDefault()},this.after("initialize",function(){var t=this.$node.closest(this.attr.composerSelector);this.on(t,"uiFileSelected",function(t,e){var i=l.a.get(e.fileId);i&&this.add(i)}),this.on(t,"uiPreviewThumbnailPlaceholderAdd",this.addPlaceholder),this.on(t,"uiPreviewThumbnailRemoveAll",this.removeAll),this.on("click",{attributionSelector:this.showAttributionLink,thumbSelector:this.openMediaEditDialog,thumbRemoveSelector:this.remove}),this.on("keydown",{thumbSelector:this.handleKeyActions}),this.on("mousedown",{thumbSelector:this.preventFocus}),this.on(document,"uiMediaEditDialogDone",this.update)})}var n=i("DBjh"),o=i("WKYg"),a=i("+dWm"),r=i("Ogfk"),c=i("i3qs"),l=i("H6fk"),h=i("dSEw"),d=i("IAMj"),u=i("20ha"),p=i("0d4m"),f=i("i17Q"),m=i.n(f),g=i("vdtI"),v=i.n(g),b=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},w=Object(p.default)("Add description"),S=Object(p.default)("Edit"),C=Object(p.default)("Trim"),y=Object(p.default)("GIF thumbnail"),T=Object(p.default)("Video thumbnail"),D=Object(p.default)("Click to add description to image"),I=Object(p.default)("Click to edit description for image"),x={small:113,large:127},k="ComposerThumbnail--gif",M="has-attribution",P="dynamic-photos",A=[c.a.DELETE,c.a.BACKSPACE,c.a.CLEAR],O=[c.a.ENTER,c.a.SPACE];e.a=Object(n.default)(s)}).call(e,i("4kSj"))},WS2j:function(t,e,i){"use strict";(function(t){function s(){n.default.mixin(this,[o.a]),this.defaultAttrs({selectorDropdown:".dropdown-menu"}),this.isTextTypeahead=function(t){return t.hasClass("rich-editor")},this.isEmojiPicker=function(t){return t.hasClass("EmojiPicker")},this.isGifSearch=function(t){return t.hasClass("FoundMediaSearch")},this.isGeoPicker=function(t){return t.hasClass("geo-picker")},this.isPhotoTagging=function(t){return t.hasClass("js-open-user-select")},this.getDropdown=function(t){return this.isGifSearch(t)||this.isEmojiPicker(t)||this.isGeoPicker(t)?t.find(this.attr.selectorDropdown):this.isTextTypeahead(t)?t.closest(".RichEditor-container").find(this.attr.selectorDropdown):this.isPhotoTagging(t)?t.closest(".TweetBoxAttachments").find(this.attr.selectorDropdown).first():null},this.setFixedPosition=function(e){var i=t(e.target),s=this.getDropdown(i);if(s){var n=this.adjacent(s,i,{gravity:this.attr.preferredGravity||"vertical-north",weight:this.attr.preferredWeight,position:"fixed"});this.isPhotoTagging(i)&&(n.top+=10,n.left-=100),s.css({top:n.top+"px",left:n.left+"px",position:"fixed"})}},this.ForceCloseDropdowns=function(){this.trigger("uiForceDropdownClosed")},this.after("initialize",function(){this.on("uiDropdownOpened",this.setFixedPosition),this.on("uiDropdownCloseOnScroll",this.ForceCloseDropdowns)})}var n=i("q9/C"),o=i("zvXx");e.a=s}).call(e,i("4kSj"))},Wf2x:function(t,e,i){"use strict";function s(){this.attributes({maxLength:null}),this.render=function(){var t=!this.maxLengthExceeded();this.$node.toggleClass("is-maxExceeded",!t),this.$input.attr("data-valid",t),this.$counter.text(this.getRemainingLength())},this.maxLengthExceeded=function(){return this.getRemainingLength()<0},this.getRemainingLength=function(){var t=this.getLength(this.$input.val());return this.attr.maxLength-t},this.getLength=function(t){return t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x").length},this.after("initialize",function(){this.$input=this.$node.find(".CharCounter-target"),this.$counter=this.$node.find(".CharCounter-counter"),this.render(),this.on(this.$input,"input",this.render),this.on("uiCharacterCounterUpdate",this.render)})}var n=i("DBjh"),o=Object(n.default)(s);e.a=o},WmI3:function(t,e,i){"use strict";e.a={white:"fff",black:"000",nightPanelBackground:"1b2836",twitterBlue:"1da1f2"}},WqLG:function(t,e,i){"use strict";function s(){this.defaultAttrs({modalTweetContainerSelector:".modal-container",modalTweetLoadingClass:"tweet-loading",modalTweetSelector:".modal-tweet",modalTweetShowingClass:"tweet-showing",modalTweetTimeSelector:".time",modalTweetTextSelector:".js-tweet-text"}),this.modalTweetOptions={fetchIndex:-1},this.turnOnShowingTweetClass=function(){this.$node.addClass(this.attr.modalTweetShowingClass)},this.turnOffShowingTweetClass=function(){this.$node.removeClass(this.attr.modalTweetShowingClass)},this.turnOnLoadingTweetClass=function(){this.$node.addClass(this.attr.modalTweetLoadingClass)},this.turnOffLoadingTweetClass=function(){this.$node.removeClass(this.attr.modalTweetLoadingClass)},this.requestForTweet=function(t,e){this.displayTweet(e.tweetId,e.tweetOptions)},this.displayTweet=function(t,e){this.retrieveTweet(t,e)},this.retrieveTweet=function(t,e){this.modalTweetOptions=n({fetchIndex:++o},e),this.turnOnLoadingTweetClass(),this.trigger("uiGetTweet",{id:t,modal:this.modalTweetOptions.modal,fetchIndex:this.modalTweetOptions.fetchIndex})},this.gotTweet=function(t,e){e.sourceEventData.fetchIndex===this.modalTweetOptions.fetchIndex&&(this.turnOffLoadingTweetClass(),e.id&&e.tweet_html&&(this.addTweet(e.tweet_html),this.modifyTweetOnRender(this.modalTweetOptions)))},this.failedToGetTweet=function(t,e){e.sourceEventData.fetchIndex===this.modalTweetOptions.fetchIndex&&this.removeTweet()},this.modifyTweetOnRender=function(t){t.userOnly&&(this.$node.find(this.attr.modalTweetTimeSelector).remove(),this.$node.find(this.attr.modalTweetTextSelector).remove()),t.disableLinks&&(this.select("modalTweetSelector").addClass("disabled-links"),this.$node.find("a").attr("tabindex",-1).click(function(t){t.preventDefault(),t.stopPropagation()}))},this.addTweet=function(t){this.select("modalTweetSelector").empty().append(t),this.turnOnShowingTweetClass()},this.removeTweet=function(){this.turnOffLoadingTweetClass(),this.turnOffShowingTweetClass(),this.select("modalTweetSelector").empty()},this.after("initialize",function(){this.on("uiWantsTweet",this.requestForTweet),this.on(document,"dataGotTweet",this.gotTweet),this.on(document,"dataFailedToGetTweet",this.failedToGetTweet),this.on("uiActivityPopupRendered",this.modifyTweetOnRender.bind(this,this.modalTweetOptions)),this.on("uiDialogClosed",this.removeTweet)})}var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},o=0;e.a=s},WuTo:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({showTweetSelector:".js-show-tombstone-tweet",tweetContainerSelector:".stream-tombstone-container",tombstoneSelector:".stream-tombstone-item",tweetSelector:".ThreadedConversation-hiddenTweetContainer",hiddenClass:"u-hidden"}),this.showTweet=function(e){var i=t(e.target).closest(this.attr.tweetContainerSelector),s=i.find(this.attr.tombstoneSelector),n=i.find(this.attr.tweetSelector);s.addClass(this.attr.hiddenClass),n.removeClass(this.attr.hiddenClass)},this.after("initialize",function(){this.on("click",{showTweetSelector:this.showTweet})})}var n=i("DBjh");e.a=Object(n.default)(s)}).call(e,i("4kSj"))},WyKa:function(t,e,i){"use strict";function s(){this.defaultAttrs({noShowError:!0}),this.conversation=function(t,e){e=e||{},this.get({url:"/messages/with/conversation",data:{id:e.conversation_id,max_entry_id:e.max_entry_id},eventData:e,success:r(t.target,"dataDMConversationResult"),error:c(r(t.target,"dataDMInvalidConversation",e),r(t.target,"dataDMError"))})},this.after("initialize",function(){this.on("uiNeedsDMConversation",this.conversation)})}var n=i("DBjh"),o=i("ldNY"),a=i("VtWx"),r=o.a.triggerFn,c=o.a.chain;e.a=Object(n.default)(s,a.a)},X4Ka:function(t,e,i){"use strict";function s(){}var n=i("DBjh"),o=i("s0ux"),a=i("El2S");e.a=Object(n.default)(s,a.a,o.a)},XG5F:function(t,e,i){"use strict";function s(){this.scribeLocationDialogButtonClick=function(t,e){e=e||{};var i=e.type,s=e.locationData,n=void 0;switch(i){case"location_picker":"Coord"===s.type?n=a:"Place"===s.type&&s.isSearched?n=c:"Place"!==s.type||s.isSearched||(n=r);break;case"location_attachment":n=l}void 0!==n&&this.scribe(n)},this.after("initialize",function(){this.scribeOnEvent("uiLocationQRCtaClicked",{page:"messages",section:"thread",element:"location_request_dm",action:"click"}),this.scribeOnEvent("uiLocationAttachmentClicked",{page:"messages",section:"thread",element:"shared_location_dm",action:"click"}),this.on(document,"uiScribeLocationDialogButtonClick",this.scribeLocationDialogButtonClick)})}var n=i("DBjh"),o=i("3oDc"),a={page:"map_place_picker",element:"pinned_location",action:"share"},r={page:"map_place_picker",element:"poi_suggestion",action:"share"},c={page:"map_place_picker",element:"poi_searched",action:"share"},l={page:"map_place_viewer",element:"related_tweets",action:"click"};e.a=Object(n.default)(s,o.a)},XNa7:function(t,e,i){"use strict";function s(){this.scribeSendDM=function(t,e){var i=e.conversation_id?"dm_existing_conversation_dialog":"dm_new_conversation_dialog",s=this.buildScribeData(e);if(this.scribe({component:i,action:"send_dm"},e,s),e.tweet_id&&this.scribe({component:i,action:"send_tweet_dm"},{conversation_id:e.conversation_id||e.recipient_ids,status_id:e.tweet_id},s),e.media_data&&e.media_data.fileType===o.a.GIF){var n=!!e.media_data.foundMediaInfo;this.scribe({component:i,element:n?"remote":"local",action:"send_gif_dm"})}},this.buildScribeData=function(t){var e={};if(t.message_me_scribe_data){if(t.message_me_scribe_data.userId){var i={item_type:r.a.user,id:t.message_me_scribe_data.userId};e.items=[i]}t.message_me_scribe_data.cardName&&(e.context=t.message_me_scribe_data.cardName),t.message_me_scribe_data.cardUri&&(e.message=t.message_me_scribe_data.cardUri)}return e},this.scribeCardInDmImpression=function(t,e){var i=e&&{items:[e.cardItem]};this.scribe({component:"dm_existing_conversation_dialog",element:"platform_card",action:"show"},i)},this.scribeTypingIndicator=function(t,e){var i="uiDMTypingIndicatorAvatarAdded"===t.type?"impression":"refresh";this.scribe({component:"dm_existing_conversation_dialog",element:"typing_indicator",action:i},e)},this.muteDurationScribeAction={0:"mute_dm_thread_forever",1:"mute_dm_thread_1h",2:"mute_dm_thread_8h",3:"mute_dm_thread_1w"},this.scribeNotificationsMute=function(t,e){var i=this.muteDurationScribeAction[e.mute_duration];!1===e.enable_notifications&&i&&this.scribe({component:"dm_existing_conversation_dialog",action:i})},this.scribeMentionsToggle=function(t,e){var i=e.disable_mentions?"disable_mentions":"enable_mentions";this.scribe({component:"dm_existing_conversation_dialog",action:i})},this.after("initialize",function(){this.scribeOnEvent("uiComposeNewDMWithTweet","share_via_dm"),this.scribeOnEvent("uiDMDialogOpenedNewConversation","open"),this.scribeOnEvent("uiDMDialogOpenedConversation","open"),this.scribeOnEvent("uiDMDialogOpenedConversationList","open"),this.scribeOnEvent("uiDMDialogDeleteMessage",{component:"dm_existing_conversation_dialog",action:"delete_dm"}),this.scribeOnEvent("uiDMDialogMarkSpam",{component:"dm_existing_conversation_dialog",action:"report_as_spam"}),this.scribeOnEvent("uiDMDialogMarkMessage",{element:"mark_all_as_read",action:"click"}),this.scribeOnEvent("uiDMMediaLoaded","media_preview"),this.scribeOnEvent("uiDMMediaFailed","media_preview"),this.scribeOnEvent("uiDMResendConfirm",{component:"dm_existing_conversation_dialog",element:"error",action:"retry"}),this.scribeOnEvent("dataDMTypingPublished",{component:"dm_existing_conversation_dialog",action:"publish_typing"}),this.on("uiDMSendMessage",this.scribeSendDM),this.on("uiNewDMCardLoaded",this.scribeCardInDmImpression),this.on("uiDMTypingIndicatorAvatarAdded uiDMTypingIndicatorAvatarRefreshed",this.scribeTypingIndicator),this.on("uiToggleNotifications",this.scribeNotificationsMute),this.on("uiToggleMentions",this.scribeMentionsToggle)})}var n=i("DBjh"),o=i("pNUl"),a=i("3oDc"),r=i("rbkv"),c=Object(n.default)(s,a.a);e.a=c},XPsf:function(t,e,i){"use strict";function s(){this.defaultAttrs({tweetBoxSelector:".tweet-form",pollCreatorButtonSelector:".PollCreator-btn",enabledPollCreatorButtonSelector:".PollCreator-btn:not([disabled])",pollCreatorLabelSelector:".PollCreator-label",disabledClass:"disabled",enabledClass:"enabled"}),this.activatePollCreator=function(){this.isActive=!0,this.updateLabel(Object(n.default)("Poll added")),this.$tweetBox.trigger("uiComposerDisableExclusiveAttachments"),this.enablePollCreator(),this.showActivatedState()},this.deactivatePollCreator=function(){this.isActive=!1,this.updateLabel(Object(n.default)("Add poll")),this.$tweetBox.trigger("uiComposerEnableExclusiveAttachments")},this.enablePollCreator=function(){this.$node.removeClass(this.attr.disabledClass),this.select("pollCreatorButtonSelector").prop("disabled",!1).prop("tabindex","0").removeClass(this.attr.disabledClass).removeClass(this.attr.enabledClass)},this.disablePollCreator=function(){this.$node.addClass(this.attr.disabledClass),this.select("pollCreatorButtonSelector").prop("disabled",!0).prop("tabindex","-1").addClass(this.attr.disabledClass)},this.triggerTogglePollComposer=function(){this.$tweetBox.trigger("uiTogglePollComposer")},this.showActivatedState=function(){this.$node.addClass(this.attr.disabledClass),this.select("pollCreatorButtonSelector").prop("disabled",!1).prop("tabindex","-1").addClass(this.attr.enabledClass)},this.updateLabel=function(t){this.select("pollCreatorButtonSelector").attr("data-original-title",t)},this.after("initialize",function(){this.$tweetBox=this.$node.closest(this.attr.tweetBoxSelector),this.isActive=!1,this.on(this.$tweetBox,"uiActivatePollComposer",this.activatePollCreator),this.on(this.$tweetBox,"uiResetPollComposer",this.deactivatePollCreator),this.on(this.$tweetBox,"uiComposerEnableExclusiveAttachments",this.enablePollCreator),this.on(this.$tweetBox,"uiComposerDisableExclusiveAttachments",this.disablePollCreator),this.on("click",{enabledPollCreatorButtonSelector:this.triggerTogglePollComposer})})}var n=i("0d4m"),o=i("DBjh"),a=Object(o.default)(s);e.a=a},XtDV:function(t,e,i){"use strict";function s(){this.pollForNotifications=function(t,e){a.a.shouldPoll()&&this.trigger("uiDMPoll")},this.resetDMs=function(t,e){a.a.resetDMState(t,e)},this.notifications=a.a,this.after("initialize",function(){a.a.init(this.attr),this.on(document,"uiResetDMPoll",this.resetDMs),this.on(document,"uiPollForNotifications",this.pollForNotifications),this.timer=Object(o.a)("uiPollForNotifications")})}var n=i("DBjh"),o=i("11Yp"),a=i("5VLS"),r=Object(n.default)(s);e.a=r},Y27k:function(t,e,i){"use strict";function s(){this.after("initialize",function(){this.scribeOnEvent("uiRevealSuspiciousDM",{component:"rtf_message",action:"open"}),this.scribeOnEvent("uiReportDMAsSpam",{component:"rtf_message",action:"report_as_spam"}),this.scribeOnEvent("uiReportDMAsSafe",{component:"rtf_message",action:"report_as_ok"})})}var n=i("DBjh"),o=i("3oDc"),a=Object(n.default)(s,o.a);e.a=a},Y2I5:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={"dm/dm_avatar":i("2g5l"),emojified_text:i("mDLQ"),user_badges:i("YFCj"),user_name_break:i("GCFA"),screen_name:i("5HSP")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMTypeaheadItem">\n  <div class="DMTypeaheadItem-avatar" aria-hidden="true">\n'),s.s(s.f("avatar",t,e,1),t,e,0,103,120,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<dm/dm_avatar0",t,e,""))}),t.pop()),s.b('  </div>\n  <div class="DMTypeaheadItem-body">\n    <div class="DMTypeaheadItem-title account-group">\n'),s.s(s.f("title",t,e,1),t,e,0,248,519,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.b('        <b class="fullname">'),s.s(s.f("rich_text",t,e,1),t,e,0,305,324,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<emojified_text1",t,e,""))}),t.pop()),s.s(s.f("rich_text",t,e,1),t,e,1,0,0,"")||s.b(s.v(s.f("text",t,e,0))),s.b("</b>"),s.b(s.rp("<user_badges2",t,e,"")),s.b(s.rp("<user_name_break3",t,e,"")),s.s(s.f("screen_name",t,e,1),t,e,0,480,496,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name4",t,e,""))}),t.pop()),s.b("\n"+i)}),t.pop()),s.b("    </div>\n"),s.s(s.f("has_business_context",t,e,1),t,e,0,603,718,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('      <div class="DMTypeaheadItem-context DMTypeaheadItem-businessContext">\n      Provides support\n    </div>\n')}),t.pop()),s.b("  </div>\n</div>\n"),s.fl()},partials:{"<dm/dm_avatar0":{name:"dm/dm_avatar",partials:{},subs:{}},"<emojified_text1":{name:"emojified_text",partials:{},subs:{}},"<user_badges2":{name:"user_badges",partials:{},subs:{}},"<user_name_break3":{name:"user_name_break",partials:{},subs:{}},"<screen_name4":{name:"screen_name",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},Y4bJ:function(t,e,i){"use strict";function s(){this.defaultAttrs({createCustomTimelineSelector:".js-create-custom-timeline-button"}),this.openCreateDialog=function(){this.trigger("uiOpenCreateCustomTimelineDialog",{tweetId:this.tweetId,impressionId:this.impressionId})},this.after("initialize",function(){this.on("click",{createCustomTimelineSelector:this.openCreateDialog})})}e.a=s},YChI:function(t,e,i){"use strict";function s(t,e){var i=e.counterName+"_count",s=t.retweeted_status&&t.retweeted_status[i]?t.retweeted_status[i]:t[i];return"/statuses/unretweet.json"===e.path?s-1>=0?s-1:0:s}function n(t,e,i){var n=s(t,e),o=e.counterName,r=t.retweeted_status&&t.retweeted_status.id_str?t.retweeted_status.id_str:t.id_str;if(void 0!==n&&r){var l=a.a.compactOrCommaize(n,i),h=a.a.getCommaizedFormat(n),d=o===c?a.a.getFavoriteStatTitle(n,h):a.a.getRetweetStatTitle(n,h);return[{status_id:r,name:o,count:n.toString(),commaized_count:h,compact_count:l,title:d}]}}function o(t,e,i){if("object"===r(t.user)){var s=void 0,n=void 0,o=e.counterName,u="\n",p=void 0,f=void 0;if(o===c){var m=t.user.favourites_count;f=a.a.getCommaizedFormat(m),s=a.a.getFavoriteStatPhrase(m,f),n=a.a.getNumericStatText(m,f),p=h}else if(o===l){var g=t.user.statuses_count,v=a.a.compactOrCommaize(g,i);f=a.a.getCommaizedFormat(g),s=a.a.getTweetStatPhrase(g,f),n=a.a.getNumericStatText(g,f),u=a.a.getProfileTweetStat(f,v),p=d}return[{highline_stat_phrase:s,highline_stat_value:n,html:u,stat:p,user_id:t.user.id_str}]}}var a=i("ZNUT"),r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c="favorite",l="retweet",h="favorite",d="tweet";e.a={normalizeTweetStats:n,normalizeProfileStats:o}},YFCj:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={verified_account_badge:i("hAdd"),translator_account_badges:i("oh3L"),protected_account_badge:i("nffu")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<span class="UserBadges">'),s.b(s.rp("<verified_account_badge0",t,e,"")),s.b(s.rp("<translator_account_badges1",t,e,"")),s.b(s.rp("<protected_account_badge2",t,e,"")),s.b("</span>"),s.fl()},partials:{"<verified_account_badge0":{name:"verified_account_badge",partials:{},subs:{}},"<translator_account_badges1":{name:"translator_account_badges",partials:{},subs:{}},"<protected_account_badge2":{name:"protected_account_badge",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},YX8T:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({dropdownSelector:".user-select-container.dropdown-menu",openPopoverButtonSelector:".js-open-user-select",includePreviouslySelectedUsers:!0,typeaheadSrc:"COMPOSE_MEDIA_TAGGING",datasourceForTagging:"mediaTagAccounts",requestType:"compose_media_tagging"}),this.showSelectPopover=function(t){this.previouslyFocused=document.activeElement,this.$node.show(),this.trigger("uiSetFocusInSelectedUserInput")},this.hideSelectPopover=function(e){if(e.target!==this.$node.get(0)&&!t.contains(this.$node.get(0),e.target)&&0===t(e.target).closest(this.attr.openPopoverButtonSelector).length){if(this.previouslyFocused&&"focusin"===e.type){var i=this.previouslyFocused;this.previouslyFocused=null,i.focus()}else this.previouslyFocused=null;this.forceHide()}},this.forceHide=function(t){this.$node.hide(),this.trigger("uiTypeaheadSetPreventDefault",{preventDefault:!1,key:9}),this.trigger("uiTypeaheadResultsHidden")},this.hideAndManageEsc=function(t){t.preventDefault(),t.stopPropagation(),this.forceHide()},this.after("initialize",function(){o.a.attachTo(this.$node,{alwaysOpen:!0,datasourceForTagging:this.attr.datasourceForTagging,includePreviouslySelectedUsers:this.attr.includePreviouslySelectedUsers,requestType:this.attr.requestType,typeaheadSrc:this.attr.typeaheadSrc}),this.on("uiShowSelectPopover",this.showSelectPopover),this.on("uiShortcutEsc",this.hideAndManageEsc),this.on(document,"mousedown : focusin",this.hideSelectPopover)})}var n=i("DBjh"),o=i("tgDM"),a=Object(n.default)(s);e.a=a}).call(e,i("4kSj"))},YeQ4:function(t,e,i){"use strict";function s(){this.attributes({allowRetryClass:"is-retryAllowed",allowCopyClass:"is-copyAllowed",cancel:".DMResendMessage-cancel",confirm:".DMResendMessage-confirm",copy:".DMResendMessage-copy",customErrorMessage:".DMResendMessage-customErrorMessage",dismiss:".DMResendMessage .DMNotice-dismiss",hasMessageTextClass:"has-messageText",messageText:".DMResendMessage-messageText",messageTextContainer:".DMResendMessage-messageTextContainer",messageTextCopyContainer:".DMResendMessage-messageCopyContainer",notice:".DMResendMessage",copyConfirmation:".DMCopyConfirmation"}),this.resendableImageErrors=[o.a.INTERNAL_ERROR,o.a.RATE_LIMIT,o.a.TIMEOUT],this.isRetryAllowed=function(t){return"media_upload"===t.type?!t.code||-1!==this.resendableImageErrors.indexOf(t.code):"message_send"===t.type?!t.code||"500"===String(t.code):void 0},this.showConfirmation=function(t,e){var i=e.error||{},s=i.message,n=e.text||"",o=this.isRetryAllowed(i),a=!!n,r=this.isCopySupported()&&a;this.resendId=e.resend_id,this.select("messageText").text(n),this.select("messageTextCopyContainer").val(n),this.select("customErrorMessage").html(s),this.select("notice").toggleClass(this.attr.allowRetryClass,o).toggleClass(this.attr.allowCopyClass,r).toggleClass(this.attr.hasMessageTextClass,a),this.select("notice").trigger("uiShowDMNotice")},this.hideConfirmation=function(){this.trigger("uiDMResendDiscard",{resend_id:this.resendId}),this.select("notice").trigger("uiDismissDMNotice"),this.resendId=void 0},this.resendConfirmation=function(){this.select("notice").trigger("uiDismissDMNotice"),this.trigger("uiDMResendConfirm",{resend_id:this.resendId})},this.isCopySupported=function(){var t=!0;try{t=document.queryCommandSupported("copy")}catch(e){t=!1}return t},this.copyMessageToClipboard=function(){this.isCopySupported()&&document.execCommand&&(this.select("messageTextCopyContainer").select(),document.execCommand("copy"))},this.handleCopy=function(t,e){this.copyMessageToClipboard(),this.hideConfirmation(),this.trigger("uiDMShowToast",{message:Object(a.default)("Message text copied to clipboard")})},this.after("initialize",function(){this.on("dataDMSendFailed",this.showConfirmation),this.on("click",{confirm:this.resendConfirmation,cancel:this.hideConfirmation,dismiss:this.hideConfirmation,copy:this.handleCopy})})}var n=i("DBjh"),o=i("9TDk"),a=i("0d4m"),r=Object(n.default)(s);e.a=r},Yjbg:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({fileTypeRegExp:!1}),this.childHover=function(e){t.contains(this.$node.get(0),e.target)&&(e.stopImmediatePropagation(),this.inChild="dragenter"===e.type)},this.hover=function(t){if(t.preventDefault(),this.inChild)return!1;var e=this.prepareData(t);this.trigger("dragenter"===t.type?"uiDragEnter":"uiDragLeave",e)},this.finish=function(t){t.stopImmediatePropagation(),this.inChild=!1,this.trigger("uiDragLeave")},this.preventDefault=function(t){return t.preventDefault(),!1},this.detectDragEnd=function(e){this.detectingEnd||(this.detectingEnd=!0,t(document.body).one("mousemove",this.dragEnd.bind(this)))},this.dragEnd=function(){this.detectingEnd=!1,this.trigger("uiDragEnd")},this.outOfBounds=function(t){var e=t.originalEvent.pageX,i=t.originalEvent.pageY,s=document.body.clientWidth,n=document.body.clientHeight;(e<=0||i<=0||i>=n||e>=s)&&this.dragEnd()},this.prepareData=function(t){var e=(t.originalEvent||t).dataTransfer,i={};i.types=Array.prototype.slice.call(e.types,0);var s=e.items||e.files;if(s){i.items=[];for(var n=0;n<s.length;++n){var o=s[n];i.items.push({type:o.type})}}else i.items=null;return{dataTransfer:i}},this.after("initialize",function(){this.inChild=!1,this.on(document.body,"dragenter dragover",this.detectDragEnd),this.on(document.body,"dragleave",this.outOfBounds),this.on("dragenter dragleave",n.a.onlyHandleEventsWithFiles(this.hover,this.attr.fileTypeRegExp)),this.on("dragover drop",n.a.onlyHandleEventsWithFiles(this.preventDefault,this.attr.fileTypeRegExp)),this.on("dragenter dragleave",n.a.onlyHandleEventsWithFiles(this.childHover,this.attr.fileTypeRegExp)),this.on(document,"uiDragEnd drop",this.finish)})}var n=i("wAPH");e.a=s}).call(e,i("4kSj"))},YlCE:function(t,e,i){"use strict";var s=i("0d4m"),n=i("JSdv"),o=i("IAMj");e.a=function(t){switch(t){case n.a.NOT_IMAGE:case n.a.IO_ERROR:return Object(s.default)("You did not select an image.");case n.a.FILE_TOO_LARGE:return Object(s.default)("Sorry! The file is too big. Maximum file size is 50MB.");case n.a.FILE_UNSUPPORTED:return Object(s.default)("That kind of file isn't supported yet. Try uploading a gif, video, or picture instead.");case n.a.GIF_LIMIT:return Object(s.default)("You cannot upload more GIFs.");case n.a.GIF_TOO_LARGE:return Object(s.default)("Sorry! The file is too big. Maximum file size is {{maxSize}}MB.",{maxSize:o.a.getDeciderValue("photoSruGifLimitMb")});case n.a.GIF_UNSUPPORTED:return Object(s.default)("GIFs are not supported here.");case n.a.MIXED_MEDIA:return Object(s.default)("Media of that type can not be added at this time.");case n.a.TOO_MANY_VIDEOS_1:return Object(s.default)("You can only add one video.");case n.a.TOO_MANY_PHOTOS_1:return Object(s.default)("You can only add one photo.");case n.a.TOO_MANY_PHOTOS:return Object(s.default)("You must remove a photo before adding another one.");case n.a.VIDEO_TOO_LARGE:return Object(s.default)('Your video file is too large. Videos should be less than {{maxSize}} MB. <a href="https://support.twitter.com/articles/20172128#import-web" target="_blank">Learn more</a>.',{maxSize:o.a.getDeciderValue("upload_video_size")});default:return}}},ZDao:function(t,e,i){"use strict";var s=["2586390716:authenticated_web_view","3260518932:moment","3691233323:periscope_broadcast","app","direct_store_link_app","poll2choice_image","poll3choice_image","poll4choice_image","poll2choice_text_only","poll3choice_text_only","poll4choice_text_only","promo_website","summary","summary_large_image","unified_card"];e.a=s},ZG5A:function(t,e,i){"use strict";(function(t){function s(){o.default.mixin(this,[f.a,p.a]),this.defaultAttrs({thumbContainerSelector:".thumbnail-container",taggingSelector:".photo-tagging-container",taggingButtonSelector:".js-open-user-select",taggedUsersSelector:".tagged-users",thumbSelector:".ComposerThumbnail",photoSelectorSelector:".photo-selector"}),this.hasMedia=!1,this.isVideo=!1,this.isGif=!1,this.taggedUsers=[],this.showPreview=function(t,e){this.isVideo=e.isVideo,this.isGif=e.isGif;var i=["has-thumbnail",this.attr.composeAltText?"has-alt-text":"",this.isVideo?"has-video":""];this.stateClasses=i.join(" "),this.$node.addClass(this.stateClasses),this.hasMedia=!0,this.detectUpdatedText(!0);var s=this.select("taggingButtonSelector");this.isGif||this.isVideo?s.hide():s.show().prop("disabled",!1)},this.updateThumbnailCount=function(t){0!==this.select("thumbSelector").length&&0!==this.taggedUsers.length||this.trigger("uiUpdatedSelectedUsers",{items:[]})},this.hidePreview=function(t,e){this.$node.removeClass(this.stateClasses),this.hasMedia=!1,this.isVideo=!1,this.isGif=!1,this.detectUpdatedText(!0),this.trigger("uiUpdatedSelectedUsers",{items:[]}),this.select("taggingButtonSelector").prop("disabled",!0)},this.updateTaggedUsers=function(t,e){var i=this.select("taggedUsersSelector"),s=this.select("taggingButtonSelector");if(this.taggedUsers=e.items,0===e.items.length)return this.updateTagText(),void s.addClass("no-users");s.removeClass("no-users"),i.html(this.getTaggedUsersString(e.items)),this.trigger("uiTaggedUsersUpdated")},this.updateTagText=function(){if(!this.taggedUsers.length){var t=this.select("thumbSelector").length,e=t>1?g:m;this.select("taggedUsersSelector").text(e)}},this.getTaggedUsersString=function(t){return 1===t.length?Object(n.default)("{{name1}}",{name1:t[0].name}):2===t.length?Object(n.default)("<span class='user-name'>{{name1}}</span> and 1 other",{name1:t[0].name}):t.length>2?Object(n.default)("<span class='user-name'>{{name1}}</span> and {{count}} others",{name1:t[0].name,count:t.length-1}):void 0},this.after("reset",function(){var t=this.select("thumbSelector").map(function(){return this.getAttribute("data-file-id")}).get();this.trigger("uiPreviewThumbnailHide"),this.trigger("uiPreviewThumbnailRemoveAll"),this.trigger(this.select("taggingSelector"),"uiResetSelectedUserComposer"),!this.$node.attr("data-file-reuse-in-thread")&&t.forEach(function(t){h.a.remove(t)}),this.$node.removeAttr("data-file-reuse-in-thread")}),this.around("createDataForSending",function(t){var e=t();return e.tagged_users=this.taggedUsers.map(function(t){return t.id_str}).join(","),this.trigger("uiUpdateRecentTags",{items:this.taggedUsers}),e}),this.around("hasAttachment",function(t){return this.hasMedia||t()}),this.getPhotoLimit=function(){return!this.attr.dmOnly&&r.a.hasFileReader()&&c.a.hasCanvas()?4:1},this.annotateThumbWithTweetboxId=function(t,e){var i=e.fileId;h.a.get(i)&&h.a.update(i,{tweetboxId:this.getTweetboxId()})},this.focusIfNotCondensed=function(){this.isCondensed&&this.isCondensed()?t(document.activeElement).not("body").blur():this.focus()},this.after("initialize",function(t,e){this.attachChild(a.a,this.select("thumbContainerSelector"),{eventData:this.attr.eventData,composeAltText:this.attr.composeAltText,thumbnailSize:this.attr.thumbnailSize,tweetboxId:this.getTweetboxId()});var i={photoLimit:this.getPhotoLimit(),gifSupport:!this.attr.dmOnly,environment:e.environment};["fileDataString","fileDataSelector","fileInputString","emptyFileDataString","emptyFileInputString","uploadType","eventData","gifSupport","videoFormats","videoSupport","sruAllMedia","mediaCategoryPrefix"].forEach(function(t){t in this.attr&&(i[t]=this.attr[t])},this),this.attachChild(l.a,this.select("photoSelectorSelector"),i),this.on("uiPreviewThumbnailShow",this.showPreview),this.on("uiPreviewThumbnailHide",this.hidePreview),this.on("uiImagePickerAdd uiVideoPickerAdd uiPreviewThumbnailRemove",this.focus),this.on("uiFileInputClicked",this.focusIfNotCondensed),this.on("uiPreviewThumbnailAdded",this.annotateThumbWithTweetboxId),this.attachChild(d.a,this.select("taggingSelector"),{includePreviouslySelectedUsers:!0,eventData:this.attr.eventData}),this.attachChild(u.a,this.select("taggingSelector")),this.on(this.select("taggingButtonSelector"),"click",function(){this.trigger(this.select("taggingSelector"),"uiShowSelectPopover"),this.trigger(this.select("taggingButtonSelector"),"uiDropdownOpened")}),this.on("uiUpdatedSelectedUsers",this.updateTaggedUsers),this.on("uiUpdatedThumbnails",this.updateThumbnailCount),this.on("uiPreviewThumbnailRemoved",this.updateTagText)})}var n=i("0d4m"),o=i("q9/C"),a=i("WRe/"),r=i("+dWm"),c=i("P2na"),l=i("+Jq1"),h=i("H6fk"),d=i("YX8T"),u=i("mBsm"),p=i("g/am"),f=i("jonA"),m=Object(n.default)("Who's in this photo?"),g=Object(n.default)("Who's in these photos?");e.a=s}).call(e,i("4kSj"))},"ZK//":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({dmLinkSelector:".js-dm-dialog, .dm-button, .global-dm-nav"}),this.openDialog=function(e,i){e.preventDefault();var s=t(i.el);i={id:o.a.getId(s),screen_name:o.a.getScreenName(s),name:o.a.getName(s),oto_only:!0},this.trigger("uiNeedsDMDialog",i)},this.after("initialize",function(){this.on(document,"click",{dmLinkSelector:this.openDialog})})}var n=i("DBjh"),o=i("UXvI");e.a=Object(n.default)(s)}).call(e,i("4kSj"))},ZNUT:function(t,e,i){"use strict";function s(t,e){return t>=1e3&&-1===H.indexOf(e)}function n(t){return t<9950?1:t<1e6?0:1}function o(t){return V.format(t,{precision:n(t)})}function a(t){return q.format(t)}function r(t,e){return s(t,e)?o(t):a(t)}function c(t,e){var i={intnumber:t.count,localized_number:t.commaizedCount,localized_compact_number:t.compactCount};return i["intnumber_"+S.a.PluralRules.rule_for(t.count)]=!0,e.render(i).trim()}function l(t,e){return c({count:t,commaizedCount:e},x.a)}function h(t,e){return c({count:t,commaizedCount:e},M.a)}function d(t,e){return c({count:t,commaizedCount:e},y.a)}function u(t,e){return c({count:t,commaizedCount:e},R.a)}function p(t,e){return c({count:t,commaizedCount:e},D.a)}function f(t,e){return c({count:t,commaizedCount:e},A.a)}function m(t,e){return c({count:t,commaizedCount:e},E.a)}function g(t,e){return c({commaizedCount:t,compactCount:e},N.a)}function v(t,e){return c({commaizedCount:t,compactCount:e},$.a)}function b(t,e){return c({count:t,commaizedCount:e},U.a)}var w=i("ZVSr"),S=i.n(w),C=i("/jU1"),y=i.n(C),T=i("yG/K"),D=i.n(T),I=i("zcLM"),x=i.n(I),k=i("hyOy"),M=i.n(k),P=i("wAAH"),A=i.n(P),O=i("EhJk"),E=i.n(O),j=i("SR+T"),R=i.n(j),F=i("wQ5J"),U=i.n(F),B=i("O9Cj"),N=i.n(B),L=i("6ob2"),$=i.n(L),V=new S.a.ShortDecimalFormatter,q=new S.a.DecimalFormatter,H=["ja","ko","nl"];e.a={compactOrCommaize:r,getCompactNumberPrecision:n,getCommaizedFormat:a,needsCompacting:s,getFollowerStatPhrase:l,getFollowingStatPhrase:h,getFavoriteStatPhrase:d,getFavoriteStatTitle:p,getTweetStatPhrase:u,getNumericStatText:b,getReplyStatTitle:f,getRetweetStatTitle:m,getProfileTweetStat:g,getProfileFollowingStat:v}},ZVSr:function(t,e){(function(){var t,i,s,n,o={}.hasOwnProperty,a=function(t,e){function i(){this.constructor=t}for(var s in e)o.call(e,s)&&(t[s]=e[s]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t={},t.is_rtl=!1,t.locale="en",t.Utilities=function(){function t(){}return t.from_char_code=function(t){return t>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):String.fromCharCode(t)},t.char_code_at=function(t,e){var i,s,n,o,a;for(t+="",s=t.length,a=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g;null!==a.exec(t)&&a.lastIndex-2<e;)e+=1;return e>=s||e<0?NaN:(i=t.charCodeAt(e),55296<=i&&i<=56319?(n=i,o=t.charCodeAt(e+1),1024*(n-55296)+(o-56320)+65536):i)},t.unpack_string=function(t){var e,i,s,n,o;for(s=[],i=n=0,o=t.length;(0<=o?n<o:n>o)&&(e=this.char_code_at(t,i));i=0<=o?++n:--n)s.push(e);return s},t.pack_array=function(t){var e;return function(){var i,s,n;for(n=[],i=0,s=t.length;i<s;i++)e=t[i],n.push(this.from_char_code(e));return n}.call(this).join("")},t.arraycopy=function(t,e,i,s,n){var o,a,r,c,l;for(l=t.slice(e,e+n),o=r=0,c=l.length;r<c;o=++r)a=l[o],i[s+o]=a},t.max=function(t){var e,i,s,n,o,a,r,c;for(s=null,n=o=0,r=t.length;o<r;n=++o)if(null!=(e=t[n])){s=e;break}for(i=a=n,c=t.length;n<=c?a<=c:a>=c;i=n<=c?++a:--a)t[i]>s&&(s=t[i]);return s},t.min=function(t){var e,i,s,n,o,a,r,c;for(s=null,n=o=0,r=t.length;o<r;n=++o)if(null!=(e=t[n])){s=e;break}for(i=a=n,c=t.length;n<=c?a<=c:a>=c;i=n<=c?++a:--a)t[i]<s&&(s=t[i]);return s},t.is_even=function(t){return t%2==0},t.is_odd=function(t){return t%2==1},t.remove_duplicates=function(t){return t.reduce(function(t,e){return t.indexOf(e)<0&&t.push(e),t},[])},t.regex_escape=function(t){return t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")},t.trim_string=function(t){return t.replace(/^\s+|\s+$/g,"")},t.clone=function(t){var e,i,s;if(null==t||"object"!=typeof t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp)return e="",null!=t.global&&(e+="g"),null!=t.ignoreCase&&(e+="i"),null!=t.multiline&&(e+="m"),null!=t.sticky&&(e+="y"),new RegExp(t.source,e);s=new t.constructor;for(i in t)s[i]=this.clone(t[i]);return s},t.compute_cache_key=function(t){return null!=t&&t.length>0?t.join("|"):null},t.traverse_object=function(t,e){var i,s,n,o;if(s=t,0===e.length)return null;for(n=0,o=e.length;n<o;n++){if(i=e[n],null==s||!s.hasOwnProperty(i))return null;s=s[i]}return s},t}(),t.TimespanFormatter=function(){function e(){this.approximate_multiplier=.75,this.default_type="default",this.patterns={ago:{second:{default:{one:"{0} second ago",other:"{0} seconds ago"}},minute:{default:{one:"{0} minute ago",other:"{0} minutes ago"}},hour:{default:{one:"{0} hour ago",other:"{0} hours ago"}},day:{default:{one:"{0} day ago",other:"{0} days ago"}},week:{default:{one:"{0} week ago",other:"{0} weeks ago"}},month:{default:{one:"{0} month ago",other:"{0} months ago"}},year:{default:{one:"{0} year ago",other:"{0} years ago"}}},until:{second:{default:{one:"In {0} second",other:"In {0} seconds"}},minute:{default:{one:"In {0} minute",other:"In {0} minutes"}},hour:{default:{one:"In {0} hour",other:"In {0} hours"}},day:{default:{one:"In {0} day",other:"In {0} days"}},week:{default:{one:"In {0} week",other:"In {0} weeks"}},month:{default:{one:"In {0} month",other:"In {0} months"}},year:{default:{one:"In {0} year",other:"In {0} years"}}},none:{second:{default:{one:"{0} second",other:"{0} seconds"},short:{one:"{0} sec",other:"{0} secs"},abbreviated:{one:"{0}s",other:"{0}s"}},minute:{default:{one:"{0} minute",other:"{0} minutes"},short:{one:"{0} min",other:"{0} mins"},abbreviated:{one:"{0}m",other:"{0}m"}},hour:{default:{one:"{0} hour",other:"{0} hours"},short:{one:"{0} hr",other:"{0} hrs"},abbreviated:{one:"{0}h",other:"{0}h"}},day:{default:{one:"{0} day",other:"{0} days"},short:{one:"{0} day",other:"{0} days"},abbreviated:{one:"{0}d",other:"{0}d"}},week:{default:{one:"{0} week",other:"{0} weeks"},short:{one:"{0} wk",other:"{0} wks"}},month:{default:{one:"{0} month",other:"{0} months"},short:{one:"{0} mth",other:"{0} mths"}},year:{default:{one:"{0} year",other:"{0} years"},short:{one:"{0} yr",other:"{0} yrs"}}}},this.time_in_seconds={second:1,minute:60,hour:3600,day:86400,week:604800,month:2629743.83,year:31556926}}return e.prototype.format=function(e,i){var s,n,o,a;null==i&&(i={}),a={};for(s in i)o=i[s],a[s]=o;return a.direction||(a.direction=e<0?"ago":"until"),null!==a.unit&&void 0!==a.unit||(a.unit=this.calculate_unit(Math.abs(e),a)),a.type||(a.type=this.default_type),a.number=this.calculate_time(Math.abs(e),a.unit),n=this.calculate_time(Math.abs(e),a.unit),a.rule=t.PluralRules.rule_for(n),this.patterns[a.direction][a.unit][a.type][a.rule].replace(/\{[0-9]\}/,n.toString())},e.prototype.calculate_unit=function(t,e){var i,s,n,o;null==e&&(e={}),o={};for(i in e)n=e[i],o[i]=n;return null==o.approximate&&(o.approximate=!1),s=o.approximate?this.approximate_multiplier:1,t<this.time_in_seconds.minute*s?"second":t<this.time_in_seconds.hour*s?"minute":t<this.time_in_seconds.day*s?"hour":t<this.time_in_seconds.week*s?"day":t<this.time_in_seconds.month*s?"week":t<this.time_in_seconds.year*s?"month":"year"},e.prototype.calculate_time=function(t,e){return Math.round(t/this.time_in_seconds[e])},e}(),t.NumberFormatter=function(){function e(){this.tokens=[],this.default_symbols={group:",",decimal:".",plus_sign:"+",minus_sign:"-"}}return e.all_tokens={default:{positive:["","#,##0.###"],negative:["-","#,##0.###"]},decimal:{positive:["","#,##0.###"],negative:["-","#,##0.###"]},long_decimal:{positive:{1000:{one:["","0"," thousand"],other:["","0"," thousand"]},10000:{one:["","00"," thousand"],other:["","00"," thousand"]},100000:{one:["","000"," thousand"],other:["","000"," thousand"]},1000000:{one:["","0"," million"],other:["","0"," million"]},10000000:{one:["","00"," million"],other:["","00"," million"]},100000000:{one:["","000"," million"],other:["","000"," million"]},1000000000:{one:["","0"," billion"],other:["","0"," billion"]},10000000000:{one:["","00"," billion"],other:["","00"," billion"]},100000000000:{one:["","000"," billion"],other:["","000"," billion"]},1000000000000:{one:["","0"," trillion"],other:["","0"," trillion"]},10000000000000:{one:["","00"," trillion"],other:["","00"," trillion"]},100000000000000:{one:["","000"," trillion"],other:["","000"," trillion"]}},negative:{1000:{one:["-","0"," thousand"],other:["-","0"," thousand"]},10000:{one:["-","00"," thousand"],other:["-","00"," thousand"]},100000:{one:["-","000"," thousand"],other:["-","000"," thousand"]},1000000:{one:["-","0"," million"],other:["-","0"," million"]},10000000:{one:["-","00"," million"],other:["-","00"," million"]},100000000:{one:["-","000"," million"],other:["-","000"," million"]},1000000000:{one:["-","0"," billion"],other:["-","0"," billion"]},10000000000:{one:["-","00"," billion"],other:["-","00"," billion"]},100000000000:{one:["-","000"," billion"],other:["-","000"," billion"]},1000000000000:{one:["-","0"," trillion"],other:["-","0"," trillion"]},10000000000000:{one:["-","00"," trillion"],other:["-","00"," trillion"]},100000000000000:{one:["-","000"," trillion"],other:["-","000"," trillion"]}}},short_decimal:{positive:{1000:{one:["","0","K"],other:["","0","K"]},10000:{one:["","00","K"],other:["","00","K"]},100000:{one:["","000","K"],other:["","000","K"]},1000000:{one:["","0","M"],other:["","0","M"]},10000000:{one:["","00","M"],other:["","00","M"]},100000000:{one:["","000","M"],other:["","000","M"]},1000000000:{one:["","0","B"],other:["","0","B"]},10000000000:{one:["","00","B"],other:["","00","B"]},100000000000:{one:["","000","B"],other:["","000","B"]},1000000000000:{one:["","0","T"],other:["","0","T"]},10000000000000:{one:["","00","T"],other:["","00","T"]},100000000000000:{one:["","000","T"],other:["","000","T"]}},negative:{1000:{one:["-","0","K"],other:["-","0","K"]},10000:{one:["-","00","K"],other:["-","00","K"]},100000:{one:["-","000","K"],other:["-","000","K"]},1000000:{one:["-","0","M"],other:["-","0","M"]},10000000:{one:["-","00","M"],other:["-","00","M"]},100000000:{one:["-","000","M"],other:["-","000","M"]},1000000000:{one:["-","0","B"],other:["-","0","B"]},10000000000:{one:["-","00","B"],other:["-","00","B"]},100000000000:{one:["-","000","B"],other:["-","000","B"]},1000000000000:{one:["-","0","T"],other:["-","0","T"]},10000000000000:{one:["-","00","T"],other:["-","00","T"]},100000000000000:{one:["-","000","T"],other:["-","000","T"]}}},currency:{positive:["¤","#,##0.00"],negative:["-¤","#,##0.00"]},percent:{positive:["","#,##0","%"],negative:["-","#,##0","%"]}},e.symbols={alias:"",decimal:".",exponential:"E",group:",",infinity:"∞",list:";",minus_sign:"-",nan:"NaN",per_mille:"‰",percent_sign:"%",plus_sign:"+",superscripting_exponent:"×",time_separator:":"},e.prototype.all_tokens=function(){return t.NumberFormatter.all_tokens},e.prototype.symbols=function(){return t.NumberFormatter.symbols},e.prototype.format=function(e,i){var s,n,o,a,r,c,l,h,d,u,p,f,m,g;null==i&&(i={}),c=this.default_format_options_for(e);for(r in i)i[r],c[r]=null!=i[r]?i[r]:c[r];return u=this.get_tokens(e,c),null!=u?(u instanceof Array||(p=u[Object.keys(u)[0]],f=this.truncate_number(e,p[1].length),0===c.precision&&(f=Math.floor(f)),u=u[t.PluralRules.rule_for(f)]),m=this.partition_tokens(u),l=m[0],d=m[1],o=m[2],n=m[3],e=this.truncate_number(e,o.format.length),g=this.parse_number(e,c),a=g[0],s=g[1],h=o.apply(parseFloat(a),c),s&&(h+=n.apply(s,c)),e<0&&"-"!==l?this.symbols().minus_sign||this.default_symbols.minus_sign:"",""+l+h+d):e.toString()},e.prototype.truncate_number=function(t,e){return t},e.prototype.partition_tokens=function(e){return[e[0]||"",e[2]||"",new t.NumberFormatter.IntegerHelper(e[1],this.symbols()),new t.NumberFormatter.FractionHelper(e[1],this.symbols())]},e.prototype.parse_number=function(t,e){var i;return null==e&&(e={}),i=null!=e.precision?e.precision:this.precision_from(t),t=this.round_to(t,i),Math.abs(t).toFixed(i).split(".")},e.prototype.precision_from=function(t){var e;return e=t.toString().split("."),2===e.length?e[1].length:0},e.prototype.round_to=function(t,e){var i;return i=Math.pow(10,e),Math.round(t*i)/i},e.prototype.get_tokens=function(){throw"get_tokens() not implemented - use a derived class like PercentFormatter."},e}(),t.PercentFormatter=function(t){function e(t){null==t&&(t={}),this.default_percent_sign="%",e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.format=function(t,i){return null==i&&(i={}),e.__super__.format.call(this,t,i).replace("¤",this.symbols().percent_sign||this.default_percent_sign)},e.prototype.default_format_options_for=function(t){return{precision:0}},e.prototype.get_tokens=function(t,e){return t<0?this.all_tokens().percent.negative:this.all_tokens().percent.positive},e}(t.NumberFormatter),t.DecimalFormatter=function(e){function i(t){this.data_reader=t,i.__super__.constructor.apply(this,arguments)}return a(i,e),i.prototype.format=function(e,s){var n,o;null==s&&(s={});try{return n=i.__super__.format.call(this,e,s),null!=this.data_reader&&null!=s.type&&null!=(o=t.NumberingSystems.for_name(this.data_reader.number_system_for(s.type)))&&(n=o.transliterate(n)),n}catch(t){return t,e}},i.prototype.default_format_options_for=function(t){return{precision:this.precision_from(t)}},i.prototype.get_tokens=function(t,e){return null==e&&(e={}),t<0?this.all_tokens().decimal.negative:this.all_tokens().decimal.positive},i}(t.NumberFormatter),t.CurrencyFormatter=function(e){function i(t){null==t&&(t={}),this.currencies_data={ADP:{digits:0,rounding:0},AFN:{digits:0,rounding:0},ALL:{digits:0,rounding:0},AMD:{digits:0,rounding:0},BHD:{digits:3,rounding:0},BIF:{digits:0,rounding:0},BYR:{digits:0,rounding:0},CAD:{digits:2,rounding:0},CHF:{digits:2,rounding:0},CLF:{digits:4,rounding:0},CLP:{digits:0,rounding:0},COP:{digits:0,rounding:0},CRC:{digits:0,rounding:0},CZK:{digits:2,rounding:0},DEFAULT:{digits:2,rounding:0},DJF:{digits:0,rounding:0},ESP:{digits:0,rounding:0},GNF:{digits:0,rounding:0},GYD:{digits:0,rounding:0},HUF:{digits:2,rounding:0},IDR:{digits:0,rounding:0},IQD:{digits:0,rounding:0},IRR:{digits:0,rounding:0},ISK:{digits:0,rounding:0},ITL:{digits:0,rounding:0},JOD:{digits:3,rounding:0},JPY:{digits:0,rounding:0},KMF:{digits:0,rounding:0},KPW:{digits:0,rounding:0},KRW:{digits:0,rounding:0},KWD:{digits:3,rounding:0},LAK:{digits:0,rounding:0},LBP:{digits:0,rounding:0},LUF:{digits:0,rounding:0},LYD:{digits:3,rounding:0},MGA:{digits:0,rounding:0},MGF:{digits:0,rounding:0},MMK:{digits:0,rounding:0},MNT:{digits:0,rounding:0},MRO:{digits:0,rounding:0},MUR:{digits:0,rounding:0},OMR:{digits:3,rounding:0},PKR:{digits:0,rounding:0},PYG:{digits:0,rounding:0},RSD:{digits:0,rounding:0},RWF:{digits:0,rounding:0},SLL:{digits:0,rounding:0},SOS:{digits:0,rounding:0},STD:{digits:0,rounding:0},SYP:{digits:0,rounding:0},TMM:{digits:0,rounding:0},TND:{digits:3,rounding:0},TRL:{digits:0,rounding:0},TWD:{digits:2,rounding:0},TZS:{digits:0,rounding:0},UGX:{digits:0,rounding:0},UYI:{digits:0,rounding:0},UZS:{digits:0,rounding:0},VND:{digits:0,rounding:0},VUV:{digits:0,rounding:0},XAF:{digits:0,rounding:0},XOF:{digits:0,rounding:0},XPF:{digits:0,rounding:0},YER:{digits:0,rounding:0},ZMK:{digits:0,rounding:0},ZWD:{digits:0,rounding:0}},this.default_currency_symbol="$",this.default_precision=this.currencies_data.DEFAULT.digits,i.__super__.constructor.apply(this,arguments)}return a(i,e),i.prototype.format=function(e,s){var n,o;return null==s&&(s={}),s.currency?(null!=t.Currencies?(n=t.Currencies.for_code(s.currency))||(n={symbol:s.currency}):n={symbol:s.currency},null==s.precision&&(s.precision=this.defaults_for_currency(s.currency).digits)):n={symbol:this.default_currency_symbol},o=s.use_cldr_symbol?n.cldr_symbol:n.symbol,i.__super__.format.call(this,e,s).replace("¤",o)},i.prototype.default_format_options_for=function(t){var e;return e=this.precision_from(t),0===e&&(e=this.default_precision),{precision:e}},i.prototype.get_tokens=function(t,e){return null==e&&(e={}),t<0?this.all_tokens().currency.negative:this.all_tokens().currency.positive},i.prototype.defaults_for_currency=function(t){return this.currencies_data[t]||this.currencies_data.DEFAULT},i}(t.NumberFormatter),t.AbbreviatedNumberFormatter=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.NUMBER_MAX=Math.pow(10,15),e.prototype.NUMBER_MIN=1e3,e.prototype.default_format_options_for=function(t){return{precision:this.precision_from(t)}},e.prototype.get_type=function(){return"decimal"},e.prototype.get_key=function(t){var e;return"1"+function(){var i,s,n;for(n=[],e=i=0,s=Math.floor(t).toString().length-1;0<=s?i<s:i>s;e=0<=s?++i:--i)n.push("0");return n}().join("")},e.prototype.get_tokens=function(t,e){var i,s,n;return null==e&&(e={}),n=t<this.NUMBER_MAX&&t>=this.NUMBER_MIN?this.get_type():"decimal",i=n===this.get_type()?this.get_key(t):null,s=this.all_tokens()[n],s=t<0?s.negative:s.positive,null!=i&&(s=s[i]),s},e.prototype.truncate_number=function(t,e){var i;return this.NUMBER_MIN<=t&&t<this.NUMBER_MAX?(i=Math.max(0,Math.floor(t).toString().length-e),t/Math.pow(10,i)):t},e}(t.NumberFormatter),t.ShortDecimalFormatter=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.get_type=function(){return"short_decimal"},e}(t.AbbreviatedNumberFormatter),t.LongDecimalFormatter=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return a(e,t),e.prototype.get_type=function(){return"long_decimal"},e}(t.AbbreviatedNumberFormatter),t.NumberFormatter.BaseHelper=function(){function t(){}return t.prototype.interpolate=function(t,e,i){var s,n,o;return null==i&&(i="right"),e=e.toString(),n=e.length,o="left"===i?0:-n,t.length<n&&(t=(function(){var t,e;for(e=[],s=t=0;0<=n?t<n:t>n;s=0<=n?++t:--t)e.push("#");return e}().join("")+t).slice(-n)),t=o<0?t.slice(0,o+t.length)+e:t.slice(0,o)+e+t.slice(n),t.replace(/#/g,"")},t}(),t.NumberFormatter.IntegerHelper=function(t){function e(t,e){var i;null==e&&(e={}),i=t.split(".")[0],this.format=this.prepare_format(i,e),this.groups=this.parse_groups(i),this.separator=e.group||","}return a(e,t),e.prototype.apply=function(t,e){return null==e&&(e={}),this.format_groups(this.interpolate(this.format,parseInt(t)))},e.prototype.format_groups=function(t){var e,i,s,n,o,a;if(0===this.groups.length)return t;for(n=[],e=this.groups[this.groups.length-1],i=this.groups[0],o=this.chop_group(t,i),t=o[0],s=o[1],n.push(s);t.length;)a=this.chop_group(t,e),t=a[0],s=a[1],n.push(s);return function(){var t,e,i;for(i=[],t=0,e=n.length;t<e;t++)null!==(s=n[t])&&i.push(s);return i}().reverse().join(this.separator)},e.prototype.parse_groups=function(t){var e,i,s,n;return(e=t.lastIndexOf(","))>0?(i=t.slice(0,e),n=[t.length-e-1],i.lastIndexOf(",")>-1&&n.push(i.length-i.lastIndexOf(",")-1),n=function(){var t,e,i;for(i=[],t=0,e=n.length;t<e;t++)null!==(s=n[t])&&i.push(s);return i}(),n.reverse(),function(){var t,i,s;for(s=[],e=t=0,i=n.length;0<=i?t<i:t>i;e=0<=i?++t:--t)-1===n.indexOf(n[e],e+1)&&s.push(n[e]);return s}().reverse()):[]},e.prototype.chop_group=function(t,e){var i;return i=Math.max(t.length-e,0),[t.slice(0,i),t.slice(i)]},e.prototype.prepare_format=function(t,e){return t.replace(/[,+-]/g,function(t){switch(t){case",":return"";case"+":return e.plus_sign;case"-":return e.minus_sign}})},e}(t.NumberFormatter.BaseHelper),t.NumberFormatter.FractionHelper=function(t){function e(t,e){null==e&&(e={}),this.format=t?t.split(".").pop():"",this.decimal=e.decimal||".",this.precision=this.format.length}return a(e,t),e.prototype.apply=function(t,e){var i;return null==e&&(e={}),i=null!=e.precision?e.precision:this.precision,i>0?this.decimal+this.interpolate(this.format_for(e),t,"left"):""},e.prototype.format_for=function(t){var e,i;return i=null!=t.precision?t.precision:this.precision,i?function(){var t,s;for(s=[],e=t=0;0<=i?t<i:t>i;e=0<=i?++t:--t)s.push("0");return s}().join(""):this.format},e}(t.NumberFormatter.BaseHelper),t.PluralRules=function(){function t(){}return t.rules={cardinal:function(t,e){var i=(e.n(t),e.i(t)),s=e.v(t);e.w(t),e.f(t),e.t(t);return 1==i&&0==s?"one":"other"},ordinal:function(t,e){var i=e.n(t);e.i(t),e.v(t),e.w(t),e.f(t),e.t(t);return i%10==3&&i%100!=13?"few":i%10==1&&i%100!=11?"one":i%10==2&&i%100!=12?"two":"other"}},t.runtime=function(t){return this.buildArgsFor=function(t){return[this.n(t),this.i(t),this.f(t),this.t(t),this.v(t),this.w(t)]},this.n=function(t){return t.indexOf(".")>-1?this.toNum(this._n(t).replace(/([0]+\.$)/,"")):this.toNum(this._n(t))},this.i=function(t){return this.toNum(this._i(t))},this.f=function(t){return this.toNum(this._f(t))},this.t=function(t){return this.toNum(this._t(t))},this.v=function(t){return this.toNum(this._v(t))},this.w=function(t){return this.toNum(this._w(t))},this.toNum=function(t){return 0==t.length?0:t.indexOf(".")>-1?parseFloat(t):parseInt(t)},this._n=function(t){return/(-)?(.*)/.exec(t)[2]},this._i=function(t){return/([\d]+)(\..*)?/.exec(this._n(t))[1]},this._f=function(t){return/([\d]+\.?)(.*)/.exec(this._n(t))[2]},this._t=function(t){return this._f(t).replace(/([0]+$)/,"")},this._v=function(t){return this._f(t).length.toString()},this._w=function(t){return this._t(t).length.toString()},this}.call({}),t.names={cardinal:["one","other"],ordinal:["few","one","other","two"]},t.all=function(t){return null==t&&(t="cardinal"),this.names[t]},t.rule_for=function(t,e){null==e&&(e="cardinal");try{return this.rules[e](t.toString(),this.runtime)}catch(t){return t,"other"}},t}(),t.ListFormatter=function(){function e(t){null==t&&(t={}),this.formats={2:"{0} and {1}",end:"{0}, and {1}",middle:"{0}, {1}",start:"{0}, {1}"}}return e.prototype.format=function(t){return null!=this.formats[t.length.toString()]?this.compose(this.formats[t.length.toString()],t):this.compose_list(t)},e.prototype.compose_list=function(t){var e,i,s,n,o;if(s=this.compose(this.formats.end||this.formats.middle||"",[t[t.length-2],t[t.length-1]]),t.length>2)for(i=n=3,o=t.length;3<=o?n<=o:n>=o;i=3<=o?++n:--n)e=i===t.length?"start":"middle",null==this.formats[e]&&(e="middle"),s=this.compose(this.formats[e]||"",[t[t.length-i],s]);return s},e.prototype.compose=function(e,i){var s,n;return i=function(){var t,e,n;for(n=[],t=0,e=i.length;t<e;t++)null!=(s=i[t])&&n.push(s);return n}(),i.length>1?(n=e.replace(/\{(\d+)\}/g,"$1"),t.is_rtl&&(n=t.Bidi.from_string(n,{direction:"RTL"}).reorder_visually().toString()),n.replace(/(\d+)/g,function(t){return i[parseInt(t)]})):i[0]||""},e}(),n=void 0!==e&&null!==e?e:(this.TwitterCldr={},this.TwitterCldr);for(i in t)s=t[i],n[i]=s}).call(this)},ZWfe:function(t,e,i){"use strict";function s(){this.defaultAttrs({pollIntervalInMs:100}),this.hasFocus=function(){return document.activeElement===this.node},this.start=function(){this.poll(),void 0===this.intervalId&&(this.intervalId=setInterval(this.poll.bind(this),this.attr.pollIntervalInMs))},this.poll=function(){this.trigger("uiInputPoll"),this.hasFocus()||this.stop()},this.stop=function(){void 0!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=void 0)},this.after("initialize",function(){this.on("focus",this.start),this.hasFocus()&&this.start()}),this.before("teardown",this.stop)}var n=i("DBjh");e.a=Object(n.default)(s)},ZYtG:function(t,e,i){"use strict";function s(t,e,i,s){var n=void 0,o=void 0,a=void 0;return function(){var r=this,c=arguments;n&&clearTimeout(n);var l=Date.now(),h=function(){n=null,a=void 0,o=s?o:t.apply(r,c)};return a?l-a>i&&(o=t.apply(r,c),a=l):(o=s?t.apply(r,c):o,a=l),n=setTimeout(h,e),o}}e.a=s},"ZaO/":function(t,e,i){"use strict";function s(){this.defaultAttrs({noShowError:!0}),this.viewParticipants=function(t,e){e=e||{},this.get({url:"/i/direct_messages/participants",data:{conversation_id:e.conversation_id},eventData:e,success:r(t.target,"dataConversationParticipantsResult"),error:r(t.target,"dataDMError")})},this.after("initialize",function(){this.on("uiNeedsConversationParticipants",this.viewParticipants)})}var n=i("DBjh"),o=i("VtWx"),a=i("ldNY"),r=a.a.triggerFn;e.a=Object(n.default)(s,o.a)},Zo2H:function(t,e,i){"use strict";function s(){this.addTweetAttachment=function(t,e){e&&e.id&&(this.tweetAttachmentId=e.id,this.trigger("uiWantsTweet",{tweetId:this.tweetAttachmentId,tweetOptions:{modal:"dm",disableLinks:!0}}),this.trigger("uiAttachmentChanged"))},this.removeTweetAttachment=function(){this.tweetAttachmentId=void 0,this.trigger("uiAttachmentChanged")},this.hasTweetAttachment=function(){return!!this.tweetAttachmentId},this.around("hasAttachment",function(t){return this.hasTweetAttachment()||t()}),this.after("initialize",function(){this.tweetAttachmentId=void 0,this.on(document,"uiComposeWithTweet",this.addTweetAttachment)})}e.a=s},a0ja:function(t,e,i){"use strict";function s(t){return Array.isArray(t)?t:Array.from(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=i("CZTd"),a=i.n(o),r=i("cXIp"),c=i("WKYg"),l=i("LYwl"),h=i("JFPI"),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),p=[],f=function(){function t(e){n(this,t);var i=e&&"string"==typeof e.status?e.status:"";this.isEmpty=!1,this.isValid=!1,this.hasMedia=!1,this.mediaType=h.h.NONE,this.hasPoll=!1,this.hasAlert=!1,this.taggedUsers=void 0,this.gifInfo=void 0,this.hasAltText=!1,this.twitterTextOptions=r.a.getConfig();var s=void 0,o=void 0,a=void 0,c=void 0,l=void 0;"object"===(void 0===e?"undefined":d(e))&&(s=e.currentPoll,o=e.mediaFileIds,a=e.replyStatusId,c=e.quotedTweetId,l=e.quotedUserScreenName),this.tweetData={status:i},this.initData={},"object"===(void 0===s?"undefined":d(s))&&"isValid"in s&&(this.initData.currentPoll=s),"object"===(void 0===o?"undefined":d(o))&&(this.initData.mediaFileIds=o),"string"==typeof c&&(this.initData.quotedTweetId=c),"string"==typeof a&&(this.tweetData.in_reply_to_status_id=a),"string"==typeof l&&"string"==typeof c&&(this.tweetData.attachment_url=this._makePermalinkUrl(l,c)),this.tweetBoxId=void 0,this._validate()}return u(t,[{key:"_makePermalinkUrl",value:function(t,e){return["https://twitter.com",t,"status",e].join("/")}},{key:"_validate",value:function(){var t=a.a.isValidTweetText(this.tweetData.status,this.twitterTextOptions),e=""===this.tweetData.status.trim(),i=!this.hasPoll||l.a.getPoll(this.tweetBoxId).isValid;this.isValid=this.hasMedia?t||e:i&&t&&!e,this.isEmpty=!(!e||this.hasPoll||this.hasMedia||this.hasAlert)}},{key:"tweetBox",set:function(t){this.tweetBoxId=t}},{key:"tweetText",set:function(t){this.tweetData.status=t,this._validate()}},{key:"mediaFlag",set:function(t){this.mediaType=t,this.hasMedia=this.mediaType!==h.h.NONE,this._validate()}},{key:"pollFlag",set:function(t){this.hasPoll=t,this._validate()}},{key:"alertFlag",set:function(t){this.hasAlert=t,this._validate()}},{key:"mediaEntityId",set:function(t){if(this.tweetData.media_ids=t.join(","),Array.isArray(this.taggedUsers)&&this.taggedUsers.length){this.tweetData.media_tags={};var e=this.taggedUsers.map(function(t){return Object.assign({},{type:"user",user_id:t.id_str})}),i={};t.forEach(function(t){i[t]=e}),this.tweetData.media_tags=JSON.stringify(i)}}},{key:"cardURI",set:function(t){this.tweetData.card_uri=t}},{key:"placeId",set:function(t){""===t?delete this.tweetData.place_id:this.tweetData.place_id=t}},{key:"replyStatusId",set:function(t){this.tweetData.in_reply_to_status_id=t}},{key:"additionalMediaInfo",set:function(t){"has_alt_text"in t&&(this.hasAltText=!0,delete t.has_alt_text),this.tweetData.additional_media_info=JSON.stringify(t)}}]),t}(),m={reset:function(){return p=[new f]},restore:function(t){p=t.map(function(t){return new f({currentPoll:t.currentPoll,mediaFileIds:t.mediaFileIds,status:t.tweetText,replyStatusId:t.replyStatusId,quotedTweetId:t.quotedTweetId,quotedUserScreenName:t.quotedUserScreenName})})},addTweet:function(t){var e=new f;return p.splice(t,0,e),e},deleteTweet:function(t){return p.splice(t,1)},deleteFirstNTweets:function(t){return p.splice(0,t)},getTweet:function(t){return p[t]},get length(){return p.length},get isValid(){return p.every(function(t){return t.isValid})},get isAllEmpty(){return p.every(function(t){return t.isEmpty})},get hasEmpty(){return p.some(function(t){return t.isEmpty})},get mediaCount(){return p.reduce(function(t,e){return t+Object(c.a)(e.tweetBoxId).length},0)},get photoTweetCount(){return p.reduce(function(t,e){return t+(e.mediaType===h.h.PHOTO)},0)},get gifTweetCount(){return p.reduce(function(t,e){return t+(e.mediaType===h.h.GIF)},0)},get videoTweetCount(){return p.reduce(function(t,e){return t+(e.mediaType===h.h.VIDEO)},0)},get pollCount(){return p.reduce(function(t,e){return t+e.hasPoll},0)},get hasAlert(){return p.some(function(t){return t.hasAlert})},get threadData(){return{thread:p}},setBatchMode:function(){var t=p,e=s(t),i=e[0],n=e.slice(1);i.tweetData.batch_mode=n.length>0?h.c.FIRST_TWEET:h.c.SINGLE_TWEET,n.forEach(function(t){return t.tweetData.batch_mode=h.c.SUBSEQUENT_TWEET})}};e.a=m},aIXW:function(t,e,i){function s(t){return i(n(t))}function n(t){var e=o[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var o={"./above_timeline_prompt.mustache":"QXjX","./account_health_prompt.mustache":"zP5u","./dashboard_profile_prompt.mustache":"EEc2","./default_layout.mustache":"Pqps","./grid_timeline_layout.mustache":"wPVw","./inline_pointer_prompt.mustache":"/EQT","./inline_prompt.mustache":"fnNQ","./list_timeline_layout.mustache":"MjOY","./modal_prompt.mustache":"sKR5"};s.keys=function(){return Object.keys(o)},s.resolve=n,t.exports=s,s.id="aIXW"},aO66:function(t,e,i){"use strict";(function(t){function s(t,e){return t=t.getAttribute("data-aria-label-part")||0,e=e.getAttribute("data-aria-label-part")||0,"last"===t?1:"last"===e?-1:(t=parseInt(t,10),e=parseInt(e,10),t||e?t?e?t&&e?t===e?1:t-e:void 0:-1:1:0)}function n(){this.createImageLabel=function(e,i){var s=t(i);s.removeAttr("data-aria-label-part");var n=s.attr("alt");if(n){s.attr({alt:"","data-alt":n});var a=t("<span>",{addClass:"u-hiddenVisually image-description","data-aria-label-part":"",text:Object(o.default)("Image: {{imageDescription}}",{imageDescription:n})});s.before(a)}},this.createARIALabel=function(e,i){var n=e.target,o=t(n),r=o.find("img[data-aria-label-part]");r.each(this.createImageLabel);var c=o.find("[data-aria-label-part]").toArray();if(c.length){c.sort(s);var l=c.map(function(t,e){return Object(a.a)(t)});n.setAttribute("aria-labelledby",l.join(" ")),r.attr("data-aria-label-part","")}},this.removeItemLabel=function(e,i){var s=t(e.target);s.removeAttr("aria-labelledby").find(".image-description[data-aria-label-part]").remove(),s.find("img[data-alt]").each(function(e,i){var s=t(i);s.attr("alt",s.attr("data-alt")).removeAttr("data-alt")})},this.after("initialize",function(){this.on("uiBeforeTimelineSelectionCleared uiAfterTimelineSelectionFocused",this.removeItemLabel),this.on("uiTimelineItemSelected",this.createARIALabel)})}var o=i("0d4m"),a=i("dSEw");e.a=n}).call(e,i("4kSj"))},aZ36:function(t,e,i){"use strict";function s(t){this.attr={id:null,maxLength:10,querySource:"typed_query",customItems:[],ttl_ms:12096e5,storageList:"recentlySelectedList"},this.attr=n.default.merge(this.attr,t),this.getRemoteSuggestions=function(t,e,i){return i},this.requiresRemoteSuggestions=function(){return!1},this.updateStorage=function(){this.storage.setItem(this.attr.storageList,this.storageItems,this.attr.ttl_ms)},this.updateRecentlySelectedUsers=function(t){var e=this.storageItems;t.items.forEach(function(t){this.removeRecentUserFromList(t),e.unshift(t),e.length>this.attr.maxLength&&(this.storageItems=e.slice(0,this.attr.maxLength))},this),this.updateStorage()},this.removeRecentUserFromList=function(t){var e=this.storageItems,i=this.getSuggestionIndexById(t,e);-1!==i&&e.splice(i,1)},this.getSuggestionIndexById=function(t,e){for(var i=0;i<e.length;i++)if(e[i].id===t.id)return i;return-1},this.getLocalSuggestions=function(t,e){for(var i=this.storageItems.slice(0,this.attr.maxLength),s=0;i.length<this.attr.maxLength&&s<this.attr.customItems.length;s++){var n=this.attr.customItems[s];-1===this.getSuggestionIndexById(i,n)&&i.push(n)}e(i)},this.updateCustomItems=function(t){this.attr.customItems=t.items},this.initialize=function(){var t=Object(o.a)({withExpiry:!0});this.storage=new t("typeahead"),this.storageItems=this.storage.getItem(this.attr.storageList)||[]},this.initialize()}var n=i("YzIt"),o=i("rWgq");e.a=s},afWj:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<li class="DMTokenizedMultiselectSuggestion '),s.b(s.v(s.f("suggestion_class",t,e,0))),s.b('" data-token-id="'),s.b(s.v(s.f("data_token_id",t,e,0))),s.b('" data-token-text="'),s.b(s.v(s.f("data_token_text",t,e,0))),s.b('" role="option" tabindex="-1">\n  <div class="DMTokenizedMultiselectSuggestion-body">\n    '),s.b(s.t(s.f("html",t,e,0))),s.b("\n"+i),s.b("  </div>\n</li>\n"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},b2Of:function(t,e,i){"use strict";function s(){this.defaultAttrs({draggingClass:"currently-dragging",supportsDraggingClass:"supports-drag-and-drop"}),this.dragEnter=function(){this.$node.addClass(this.attr.draggingClass)},this.dragLeave=function(){this.$node.removeClass(this.attr.draggingClass)},this.addSupportsDraggingClass=function(){this.$node.addClass(this.attr.supportsDraggingClass)},this.hasSupport=function(){return"draggable"in document.createElement("span")&&!Object(n.a)().msie},this.after("initialize",function(){this.hasSupport()&&(this.addSupportsDraggingClass(),this.on("uiDragEnter",this.dragEnter),this.on("uiDragLeave uiDrop",this.dragLeave))})}var n=i("RW6J"),o=i("DBjh"),a=i("Yjbg");e.a=Object(o.default)(s,a.a)},b6Cp:function(t,e,i){"use strict";function s(){var t=Array.prototype.slice.call(arguments);if(!(this instanceof s))return s.open.apply(null,t);var e=t[0];this.database=e,this.name=e.name,this.version=e.version,this.stores=n(e),e.onversionchange=function(){e.close(),self.location&&self.location.reload(!0)}}function n(t){for(var e=[],i=t.objectStoreNames,s=0;s<i.length;s++)e.push(i[s]);return e}var o=i("B55N"),a=self.indexedDB||self.mozIndexedDB||self.webkitIndexedDB||self.msIndexedDB,r=self.IDBKeyRange||self.webkitIDBKeyRange||self.msIDBKeyRange,c={readwrite:(self.IDBTransaction||self.webkitIDBTransaction||self.msIDBTransaction||{}).READ_WRITE||"readwrite",readonly:(self.IDBTransaction||self.webkitIDBTransaction||self.msIDBTransaction||{}).READ_ONLY||"readonly"};e.a=s,s.KeyRange=r,s.deleteDatabase=function(t){return new Promise(function(e){var i=a.deleteDatabase(t);i.onsuccess=i.onerror=e})},s.isSupported=function(){return!!a},s.open=function(t,e,i,r){var c={title:'IndexedDB "'+t+'" version '+e,enabled:self.DEBUG&&self.DEBUG.enabled};return Object(o.a)(c,new Promise(function(c,l){if(!s.isSupported())return l("not supported");var h=e?a.open(t,e):a.open(t);h.onupgradeneeded=function(e){var s=e.target.result,a={title:'IndexedDB "'+t+'" migration from version '+e.oldVersion+" to "+e.newVersion,enabled:self.DEBUG&&self.DEBUG.enabled};Object(o.a)(a,new Promise(function(t,e){r||n(s).forEach(function(t){return s.deleteObjectStore(t)});var o=n(s),a=(i||[]).map(function(t){return new Promise(function(e,i){var n=t.name,a=t.keyPath,r=t.indexes||[];if(o.indexOf(n)<0){var c=s.createObjectStore(n,{keyPath:a});return r.forEach(function(t){return c.createIndex(t.name,t.keyPath,t)}),c}})});return Promise.all(a).then(t,e)}))},h.onsuccess=function(t){Promise.resolve().then(function(){var e=new s(t.target.result);return c(e)}).catch(l)},h.onblocked=function(t){l("open blocked",t.target.error)},h.onerror=function(t){return l("open error",t.target.error),!0}}))},s.prototype.add=function(t){return this.insert("add",t)},s.prototype.clear=function(){var t=arguments.length?Array.prototype.slice.call(arguments):this.stores,e=t.map(function(t){return this.transaction(t,c.readwrite,function(e){return e.objectStore(t).clear()})},this);return Promise.all(e)},s.prototype.close=function(){var t=this;return new Promise(function(e){return t.database.close(),e()})},s.prototype.destroy=function(t,e){return this.transaction(t,c.readwrite,function(i){return i.objectStore(t).delete(e)})},s.prototype.get=function(t,e){return this.transaction(t,c.readonly,function(i){return i.objectStore(t).get(e)}).then(function(t){return t.target.result})},s.prototype.getAll=function(){var t=Array.prototype.slice.call(arguments).filter(function(t){return null!=t}),e=t.length,i=t[0],s="string"==typeof t[1]?t[1]:null,n="string"!=typeof t[e-1]?t[e-1]:null,o=this.database;return new Promise(function(t,e){var a=o.transaction(i,c.readonly),r=s?a.objectStore(i).index(s):a.objectStore(i),l=[],h=r.openCursor(n);h.onerror=e,h.onsuccess=function(e){var i=e.target.result;i?(l.push(i.value),i.continue()):t(l)}})},s.prototype.getByPrefix=function(){var t=Array.prototype.slice.call(arguments).filter(function(t){return null!=t}),e=t[0],i=3===t.length?t[1]:null,s=t[t.length-1];return this.getAll(e,i,r.bound(s,s+"￿",!1,!1))},s.prototype.put=function(t){return this.insert("put",t)},s.prototype.insert=function(t,e){var i=Object.keys(e),s=i.map(function(i){return this.transaction(i,c.readwrite,function(s){var n=s.objectStore(i);e[i].forEach(function(e){return n[t](e)})})},this);return Promise.all(s)},s.prototype.transaction=function(t,e,i){var s=this;return new Promise(function(n,o){var a=s.database.transaction(t,e),r=i(a);r?(r.onsuccess=n,r.onerror=o):(a.oncomplete=n,a.onerror=o)})}},bCJo:function(t,e,i){"use strict";(function(t){function s(){this.viewportHelpers=o.a,this.defaultAttrs({autoplayableContainerSelector:".has-autoplayable-media",mediaSelector:".animated-gif, .PlayableMedia:not(.PlayableMedia--placeholder), .js-macaw-cards-iframe-container",autoplayingMediaDataAttr:"data-autoplaying-media",scrollThrottle:100,watchDocumentScroll:!0,autoplayOnFractionInViewport:.25}),this.watchContainers=function(){this.$containers=this.select("autoplayableContainerSelector"),this.throttledProcessWatchedContainers()},this.stopAutoplaying=function(){this.$currentlyAutoplayingContainer&&(this.$currentlyAutoplayingContainer.attr(this.attr.autoplayingMediaDataAttr,!1),this.$currentlyAutoplayingMedia.trigger("uiStopAutoplayingMedia"),this.$currentlyAutoplayingContainer=void 0,this.$currentlyAutoplayingMedia=void 0)},this.processWatchedContainers=function(){if(0!==this.$containers.length&&this.$viewport&&!this.isInFullscreen()){var t=this.viewportHelpers.getGlobalNavHeight(),e=this.viewportHelpers.getElementClosestToMiddleOfViewport({$container:this.$viewport,$elements:this.$containers,topThreshold:t,fractionInViewport:this.attr.autoplayOnFractionInViewport});e&&!e.is(this.$currentlyAutoplayingContainer)&&(this.stopAutoplaying(),e.attr(this.attr.autoplayingMediaDataAttr,!0),this.$currentlyAutoplayingContainer=e,this.$currentlyAutoplayingMedia=e.find(this.attr.mediaSelector),this.$currentlyAutoplayingMedia.trigger("uiAutoplayMedia")),this.$currentlyAutoplayingContainer&&!this.viewportHelpers.isPartiallyContainedInViewport({$container:this.$viewport,$element:this.$currentlyAutoplayingContainer,topThreshold:t,fractionInViewport:this.attr.autoplayOnFractionInViewport})&&this.stopAutoplaying()}},this.resetWatchedContainers=function(){this.$containers=t(),this.stopAutoplaying(),this.watchContainers()},this.isInFullscreen=function(){return document.webkitFullscreenElement||document.msFullscreenElement||document.fullscreenElement||document.mozFullScreenElement},this.fullscreenChange=function(){clearInterval(this.fullscreenTimeout),this.isInFullscreen()?this.stopListeningOnProcessEvents():this.fullscreenTimeout=setTimeout(this.listenOnProcessEvents.bind(this),2e3)},this.listenOnProcessEvents=function(){this.attr.watchDocumentScroll?this.on(document,"scroll",this.throttledProcessWatchedContainers):this.on("scroll",this.throttledProcessWatchedContainers),this.on(this.$viewport,"resize",this.throttledProcessWatchedContainers)},this.stopListeningOnProcessEvents=function(){this.attr.watchDocumentScroll?this.off(document,"scroll",this.throttledProcessWatchedContainers):this.off("scroll",this.throttledProcessWatchedContainers),this.off(this.$viewport,"resize",this.throttledProcessWatchedContainers)},this.cleanup=function(){this.off(document,"uiPageChanged"),this.off(this.$viewport,"resize"),this.$viewport=void 0,this.attr.watchDocumentScroll?this.off(document,"scroll",this.throttledProcessWatchedContainers):this.off("scroll",this.throttledProcessWatchedContainers)},this.before("teardown",function(){this.cleanup()}),this.after("initialize",function(){this.$currentlyAutoplayingContainer=void 0,this.$currentlyAutoplayingMedia=void 0,this.$viewport=t(window),this.$containers=t(),this.throttledProcessWatchedContainers=a.default.throttle(this.processWatchedContainers.bind(this),this.attr.scrollThrottle),this.on(document,"uiPageChanged",this.resetWatchedContainers),this.listenOnProcessEvents(),this.on(document,"uiDynamicCardLoaded uiDynamicCardUnloaded",this.throttledProcessWatchedContainers),this.on(document,"uiWatchAutoplayMedia uiSwiftLoaded",this.watchContainers),this.on(document,"uiPageHidden",this.stopAutoplaying),this.on(document,"uiPageVisible",this.processWatchedContainers),this.on(document,"fullscreenchange webkitfullscreenchange MSFullscreenChange mozfullscreenchange",this.fullscreenChange)})}var n=i("DBjh"),o=i("/LRg"),a=i("YzIt");e.a=Object(n.default)(s)}).call(e,i("4kSj"))},bCO2:function(t,e,i){"use strict";var s=i("0d4m"),n=i("DBjh"),o=i("WKYg"),a=i("LYwl"),r=i("a0ja"),c=i("EXHZ"),l=i.n(c),h=i("JFPI"),d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=Object(n.default)(l.a,function(){this.initialState({stage:h.l.NONE,index:0}),this._setUploadStage=function(t){this.mergeState({stage:t,index:0})},this._resetUploadStage=function(){this.mergeState({stage:h.l.NONE,index:0})},this._isStage=function(t){return this.state.stage===t},this._getTweet=function(){return r.a.getTweet(this.state.index)},this._uploadNext=function(){var t=this.state,e=t.index,i=t.stage;e>=r.a.length-1?this._findNextStage():"function"==typeof this["_upload"+i]&&(this.state.index++,this["_upload"+i]())},this._findNextStage=function(){switch(this.state.stage){case h.l.NONE:if(r.a.mediaCount){this._setUploadStage(h.l.MEDIA),this._uploadMedia();break}case h.l.MEDIA:if(r.a.mediaCount&&this.trigger("dataNeedRefreshAdditionalMediaInfo"),r.a.pollCount){this._setUploadStage(h.l.POLL),this._uploadPoll();break}case h.l.POLL:this._setUploadStage(h.l.TWEET),this._uploadTweet();break;case h.l.TWEET:this.uploadTweetstormSuccess()}},this._uploadMedia=function(){var t=Object(o.a)(this._getTweet().tweetBoxId);this._getTweet().hasMedia&&t.length?this.trigger(h.b.media.SEND_BATCH,{mediaItems:t}):this._uploadNext()},this._uploadPoll=function(){var t=a.a.getPoll(this._getTweet().tweetBoxId).createData;this._getTweet().hasPoll&&!this._getTweet().hasMedia&&t?this.trigger(h.b.card.SEND,t):this._uploadNext()},this._uploadTweet=function(){this.trigger(h.b.tweet.SEND,this._getTweet().tweetData)},this.onMediaSuccess=function(t,e){this._isStage(h.l.MEDIA)&&(this._getTweet().mediaEntityId=e.mediaIds,this.trigger("dataTweetstormUploadUpdate",{stage:h.l.MEDIA,count:e.mediaIds.length}),this._uploadNext())},this.onPollSuccess=function(t,e){this._isStage(h.l.POLL)&&(this._getTweet().cardURI=e.cardUri,this.trigger("dataTweetstormUploadUpdate",{stage:h.l.POLL,count:1}),this._uploadNext())},this.onTweetSuccess=function(t,e){if(this.trigger("dataTweetstormTweetSentSuccessScribe",{sentTweet:this._getTweet(),response:e}),this._isStage(h.l.TWEET)){var i=this.state.index;i<r.a.length-1&&(r.a.getTweet(i+1).replyStatusId=e.id_str),this.trigger("dataTweetstormUploadUpdate",{stage:h.l.TWEET,count:1}),this._uploadNext()}},this.startUpload=function(t,e){r.a.length&&(r.a.setBatchMode(),this._resetUploadStage(),this.enbleAlertDialogListener(),this.trigger("dataTweetstormUploadStart",{mediaTotal:r.a.mediaCount,pollTotal:r.a.pollCount,tweetTotal:r.a.length,reloadPageOnSuccess:e&&e.reloadPageOnSuccess}),this._findNextStage())},this.uploadTweetstormSuccess=function(){this.disableAlertDialogListener(),r.a.length>1&&this.trigger("dataTweetstormUploadSuccessScribe",d({},this.getTypeCounts(),{is_reply:!!r.a.getTweet(0).tweetData.in_reply_to_status_id})),this.trigger("dataTweetstormUploadSuccess"),this._resetUploadStage()},this.uploadTweetstormError=function(t,e){this.disableAlertDialogListener();var i=e&&e.xhr&&e.xhr.status;r.a.length>1&&403!==i&&this.trigger("dataTweetstormUploadErrorScribe",d({},this.getTypeCounts(),{is_reply:!!r.a.getTweet(0).tweetData.in_reply_to_status_id,attempted_failure:this.getCurrentUploadingType()}));var s=this.state.stage!==h.l.TWEET?0:this.state.index,n=r.a.getTweet(s).tweetData.in_reply_to_status_id,o=r.a.length;r.a.deleteFirstNTweets(s),this.trigger("dataTweetstormUploadError",{recoverFromIndex:s,previousStatusIdInThread:n,initialLength:o}),this._resetUploadStage()},this.getTypeCounts=function(){return{attempted_tweet_count:r.a.length,photo_count:r.a.photoTweetCount,gif_count:r.a.gifTweetCount,video_count:r.a.videoTweetCount,poll_count:r.a.pollCount}},this.getCurrentUploadingType=function(){var t=this.state.stage;return t===h.l.MEDIA?this._getTweet().mediaType:t},this.enbleAlertDialogListener=function(t){this.on(window,"beforeunload uiBeforeUnload",this.alertUpload)},this.disableAlertDialogListener=function(t){this.off(window,"beforeunload uiBeforeUnload",this.alertUpload)},this.alertUpload=function(){return r.a.length>1?Object(s.default)("Are you sure you want to leave while you are sending your Tweets?"):Object(s.default)("Are you sure you want to leave while you are sending your Tweet?")},this.after("initialize",function(){this.on("uiTweetstormSend",this.startUpload),this.on(h.b.tweet.SEND_SUCCESS,this.onTweetSuccess),this.on(h.b.media.SEND_BATCH_SUCCESS,this.onMediaSuccess),this.on(h.b.card.SEND_SUCCESS,this.onPollSuccess),this.on(h.b.tweet.SEND_ERROR+" "+h.b.media.SEND_ERROR+" "+h.b.card.SEND_ERROR,this.uploadTweetstormError)})})},bN2o:function(t,e,i){"use strict";function s(){this.defaultAttrs({removePromptDuration:400}),this.around("removePrompt",function(t,e){e.slideUp(this.attr.removePromptDuration,function(){return t(e)})})}e.a=s},bWsk:function(t,e,i){"use strict";function s(t,e){return new Promise(function(i,s){var n=e&&e.errors&&e.errors[0]?e.errors[0].code:void 0,o=t[n];o?(o(e),i(e)):s(e)})}e.a=s},buW5:function(t,e,i){"use strict";(function(t){var s=i("0d4m"),n=i("pNUl"),o=i("9TDk"),a=i("8/gf"),r=i("dCVh"),c=i("8jxu"),l=function(t){switch(t){case o.a.FILE_TOO_LARGE:return Object(s.default)("The selected media is too large.");case o.a.INVALID_MEDIA:return Object(s.default)("Your media file could not be processed.");case o.a.TIMEOUT:return Object(s.default)("The upload session has timed out.");case o.a.UNSUPPORTED_MEDIA:return Object(s.default)("Your media file is not compatible.");case o.a.ZERO_FILE_LENGTH:return Object(s.default)("File has zero length.");default:return Object(s.default)("Uploading media failed! Please try again later.")}},h=function(t,e){switch(e){case n.a.VIDEO:return Object(a.a)(t);case n.a.IMAGE:return Object(r.a)(t);case n.a.GIF:return Object(c.a)(t)}};e.a=function(e,i,s){return(s=s||t.noop)(i,e)||h(i,e)||l(e)}}).call(e,i("4kSj"))},bwWj:function(t,e,i){"use strict";function s(){this.defaultAttrs({noShowError:!0}),this.addWelcomeMessage=function(t,e){if(e=e||{},!e.has_tweet_attachment&&!1!==e.is_oto){var i={};void 0!==e.welcome_message_id&&(i.welcome_message_id=e.welcome_message_id),this.post({url:"/messages/add_welcome_message_to_conversation/"+e.conversation_id,data:i,eventData:e,success:r(t.target,"dataDMConversationResult")})}},this.after("initialize",function(){this.on("uiRenderConversationView",this.addWelcomeMessage)})}var n=i("DBjh"),o=i("ldNY"),a=i("VtWx"),r=o.a.triggerFn;e.a=Object(n.default)(s,a.a)},c9Ff:function(t,e,i){"use strict";(function(t){function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(){this.attributes({conversationListSelector:".DMInbox-conversations",reportUserIdSelector:"[data-other-participant-id]",conversationIdSelector:".DMConversationActions [data-conversation-id]",conversationTypeSelector:".DMConversationActions [data-is-oto]",deleteConversationSelector:".DMInbox .js-actionDeleteConversation",reportConversationSelector:".DMInbox .js-actionReportConversation",viewParticipantsSelector:".DMInbox .inbox-to-convoSettings",eventData:{scribeContext:{component:"dm_conversation_list_dialog"}},loadNextPageRange:150,hiddenClass:"u-hidden",activeClass:"is-active",inboxSelector:".DMInbox-content",inboxItemSelector:".DMInboxItem",markAllReadSelector:".mark-all-read",noMessagesSelector:".dm-no-messages",openPopoverMenuSelector:".DMPopover.is-open .DMPopoverMenu",primaryInboxSelector:".DMInbox-primary",primaryInboxSpinnerSelector:".DMInbox-primary .DMInbox-spinner",primaryInboxType:"trusted",primaryInboxTabSelector:".DMInbox-inboxTab",primaryInboxTabClass:"DMInbox-inboxTab",secondaryInboxSelector:".DMInbox-secondary",secondaryInboxSpinnerSelector:".DMInbox-secondary .DMInbox-spinner",secondaryInboxTabSelector:".DMInbox-requestTab",secondaryInboxType:"untrusted",notifications:!1,tabCopySelector:".DMInbox-tabCopy",tabSelector:".DMInbox-tab",tabToggleItemSelector:".DMInbox-tabToggleItem",untrustedConversationListSelector:".DMInbox-untrustedConversations",usePushNotifications:!1}),this.removeStaleInboxItems=function(t,e){var i=(e||[]).map(function(t){return this.generateInboxItemWithIdSelector(t)},this).join(", ");t.find(i).parent("li").remove()},this.sortInboxClone=function(e){var i=e.children().get();i.sort(function(e,i){var s=t(e).children().first().attr("data-sort-event-id"),n=t(i).children().first().attr("data-sort-event-id");return-1*o.a.compare(s,n)});var s=(i||[]).reduce(function(t,e){return t+e.outerHTML},"");e.html(s)},this.getDeletedConversationIDs=function(t){return(t||[]).filter(function(t){return"conversation_delete"===t.type}).map(function(t){return t.conversation_id})},this.applyUserUpdates=function(t,e){e.should_request_inbox?this.trigger("uiNeedsDMConversationList"):e.is_empty||(this.applySubInboxUserUpdates(e,this.attr.primaryInboxType,"conversationListSelector"),this.applySubInboxUserUpdates(e,this.attr.secondaryInboxType,"untrustedConversationListSelector"))},this.applySubInboxUserUpdates=function(t,e,i){var s=t.inbox_updates,n=this.dm_secondary_inbox?s&&s[e]:s,o=t.update_events,a=this.findOpenActionMenuId(),r=this.select(i).clone(),c=s&&s.updated_conversation_ids,l=this.getDeletedConversationIDs(o),h=(c||[]).concat(l);this.removeStaleInboxItems(r,h),r.prepend(n&&n.html),this.sortInboxClone(r),this.select(i).replaceWith(r),a&&this.reopenActionMenu(a),!n.is_empty&&t.notifications.length&&this.updateUnseenMessages(t.notifications,e,i),this.displayUnreadCount(e,this.getUnseenConversations(i).length),this.$node.data({markAllReadId:s.max_sort_id}),this.updateLastSeenId(this.$node.data(),s.max_sort_id),this.updateLastSeenId(this.$node.data(e),n.max_sort_id)},this.updateUnseenMessages=function(t,e,i){var s=this,n=this.$node.data(e),a=n.lastSeenId,r=void 0===a?"0":a;t.forEach(function(t){o.a.compare(t.id,r)>0&&s.select(i).find('[data-last-message-id="'+t.id+'"]').attr("data-is-unseen","")})},this.promoteUntrustedConversation=function(t,e){var i=this.select("untrustedConversationListSelector"),s=this.select("conversationListSelector"),n=e.conversation_id,o=i.find(this.generateInboxItemWithIdSelector(n)).parent("li");s.prepend(o)},this.findOpenActionMenuId=function(){return this.select("openPopoverMenuSelector").attr("data-conversation-id")},this.reopenActionMenu=function(t){var e='[data-thread-id="'+t+'"] .DMPopover';this.$node.find(e).addClass("is-open")},this.initializeInboxTabs=function(t,e){this.dm_secondary_inbox=e.dm_secondary_inbox;var i=!(e.untrusted&&e.untrusted.is_empty),s=this.dm_secondary_inbox&&(l.a.get("open_dm_enabled")||i);this.select("tabSelector").toggleClass("u-hidden",!s)},this.displayUnreadCount=function(t,e){var i=void 0;t===this.attr.primaryInboxType?(i=c.a.render({primary:!0,count:e}).trim(),this.$primaryInboxTab.find(this.attr.tabCopySelector).text(i)):(i=c.a.render({count:e}).trim(),this.$secondaryInboxTab.find(this.attr.tabCopySelector).text(i));var s=e>0;this.toggleCountResetClickListener(t,s)},this.toggleCountResetClickListener=function(t,e){var i=this.select("trusted"===t?"primaryInboxSelector":"secondaryInboxSelector").find(".DMInboxItem");e?this.on(i,"click",this.notifyTabOpened):this.off(i,"click",this.notifyTabOpened)},this.applyInboxResults=function(t,e){e.sourceEventData&&e.sourceEventData.max_entry_id?(this.applyPaginationResult(e,this.attr.primaryInboxType,"conversationListSelector"),this.applyPaginationResult(e,this.attr.secondaryInboxType,"untrustedConversationListSelector")):(this.$node.removeData(),this.$node.data({markAllReadId:e.max_sort_id,lastSeenId:e.max_sort_id}),this.applySubInboxResult(e,this.attr.primaryInboxType,"conversationListSelector"),this.applySubInboxResult(e,this.attr.secondaryInboxType,"untrustedConversationListSelector")),this.trigger("uiResetDMPoll"),this.notifyTabOpened()},this.applySubInboxResult=function(t,e,i){var n=t[e]||{},o=n&&n.html;this.select(i).html(o||""),this.displayUnreadCount(e,this.getUnseenConversations(i).length),this.trigger("dataDMCursor",{cursor:t.cursor}),this.$node.data(s({},e,{lastSeenId:n.max_sort_id,minEntryId:n.min_entry_id,hasMore:n.has_more}))},this.applyPaginationResult=function(t,e,i){var n=t[e]||{},o=this.activeInboxState(),a=n&&n.html;if(this.isNextPage(o.minEntryId,n.max_entry_id)){var r=this.select(i).clone();this.removeStaleInboxItems(r,n.threads),r.append(a),this.select(i).replaceWith(r);var c=this.$node.data(e);this.$node.data(s({},e,p({},c,{minEntryId:n.min_entry_id,hasMore:n.has_more})))}},this.isNextPage=function(t,e){return!(!t||!e)&&o.a.compare(t,e)>=0},this.updateLastSeenId=function(t,e){var i=t&&t.lastSeenId||"0";e&&i&&o.a.compare(e,i)>0&&(t.lastSeenId=e)},this.updateSpinner=function(){this.select("primaryInboxSpinnerSelector").toggleClass(this.attr.hiddenClass,!this.$node.data().trusted.hasMore),this.select("secondaryInboxSpinnerSelector").toggleClass(this.attr.hiddenClass,!this.$node.data().untrusted.hasMore)},this.handleInboxScroll=function(e,i){var s=t(e.currentTarget);s[0].scrollHeight-s.scrollTop()-this.attr.loadNextPageRange<=s.outerHeight()&&this.requestNextPageThrottled()},this.requestNextPage=function(){var t=this.secondaryInboxIsActive(),e=this.activeInboxState(),i=void 0;i=this.dm_secondary_inbox?"uiNeedsDMOlderConversationList":"uiNeedsDMConversationList";var s=e.hasMore;(void 0===s||s)&&this.trigger(i,{max_entry_id:e.minEntryId,is_trusted:!t})},this.requestNextPageThrottled=h.default.throttle(this.requestNextPage,1e3),this.markAllMessages=function(){this.trigger("dataMarkDMsAsRead",{last_message_id:this.$node.data().markAllReadId||-1}),this.trigger("uiDMDialogMarkMessage"),this.select("inboxItemSelector").removeClass("is-unread"),this.trigger("uiReadStateChanged",{msgCount:0}),this.trigger("uiDMInboxTabOpened",{inboxType:this.attr.secondaryInboxType,last_seen_event_id:this.getGlobalLastSeenId(),untrusted_last_seen_event_id:this.$node.data().untrusted.lastSeenId}),this.trigger("uiDMInboxTabOpened",{inboxType:this.attr.primaryInboxType,last_seen_event_id:this.getGlobalLastSeenId(),trusted_last_seen_event_id:this.$node.data().trusted.lastSeenId})},this.generateInboxItemWithIdSelector=function(t){return this.attr.inboxItemSelector+'[data-thread-id="'+t+'"]'},this.markConversationRead=function(t,e){e.recipient_id&&this.$node.find(this.generateInboxItemWithIdSelector(e.recipient_id)+".is-unread").removeClass("is-unread")},this.markConversationUnread=function(t,e){e.sourceEventData&&e.sourceEventData.recipient_id&&this.$node.find(this.generateInboxItemWithIdSelector(e.sourceEventData.recipient_id)).addClass("is-unread")},this.inboxNeedsRefresh=function(t,e){this.$node.addClass("needs-refresh")},this.removeConversation=function(t,e){this.$node.find(this.generateInboxItemWithIdSelector(e.conversation_id)).parent("li").remove(),this.trigger("uiRenderConversationListView")},this.initiateKnownConversation=function(e,i){if(e){var s=t(e.target);if(this.isProfileLink(s))return;if(s.closest(".DMInboxItem-media").length)return;if(s.closest(".DMPopover-button").length||s.closest(".DMPopover-content").length)return}e&&e.preventDefault();var n=t(i.el),o=n.attr("data-thread-id"),a=new RegExp("^([1-9][0-9]*)-([1-9][0-9]*)$","g");this.trigger("uiRenderConversationView",{conversation_id:o,is_oto:a.test(o),name:n.find(".fullname").html(),most_recent_event_id:n.attr("data-last-message-id")})},this.isProfileLink=function(t){return!!t.closest("a.js-user-profile-link").length},this.selectorFromInboxType=function(t){return t===this.attr.primaryInboxType?"primaryInboxSelector":"secondaryInboxSelector"},this.setEmptyState=function(t,e){var i=this;switch(t.type){case"dataDMConversationListResult":var s=function(t){var e=i.selectorFromInboxType(t);i.select(e).toggleClass("is-empty",!0),i.$node.data(t).hasMore=!1};e.is_pagination_response?this.updateHasMoreState(e):function(t){var e=[];return t.trusted&&t.trusted.is_empty&&e.push(i.attr.primaryInboxType),t.untrusted&&t.untrusted.is_empty&&e.push(i.attr.secondaryInboxType),e}(e).forEach(s);break;case"dataDMUserUpdates":if(e&&e.conversations&&e.conversations.length){var n=e.inbox_updates;n.trusted&&!n.trusted.is_empty&&this.select("primaryInboxSelector").toggleClass("is-empty",!1),n.untrusted&&!n.untrusted.is_empty&&this.select("secondaryInboxSelector").toggleClass("is-empty",!1)}}},this.updateHasMoreState=function(t){var e=this.activeInboxType();if(t.sourceEventData&&t[e]&&t[e].is_empty){var i=t.sourceEventData.is_trusted?"trusted":"untrusted";this.$node.data(i).hasMore=!1}},this.launchReportingWebview=function(e,i){var s=t(e.target).closest(this.attr.inboxItemSelector),n=s.find(this.attr.reportUserIdSelector);this.trigger("uiNeedsReportDialog",{reportedDirectMessageConversationId:s.attr("data-thread-id"),userId:n.attr("data-other-participant-id"),target:"dm-conversation"})},this.triggerAction=function(e,i,s){var n=t(i.target).closest(this.attr.inboxItemSelector);this.trigger(e,{conversation_id:n.attr("data-thread-id"),is_group:!n.data("is-oto"),isInbox:!0})},this.secondaryInboxIsActive=function(){return this.select("primaryInboxSelector").hasClass(this.attr.hiddenClass)},this.activeInboxType=function(){return this.secondaryInboxIsActive()?this.attr.secondaryInboxType:this.attr.primaryInboxType},this.activeInboxState=function(){var t=this.$node.data();return(this.secondaryInboxIsActive()?t&&t.untrusted:t&&t.trusted)||{}},this.getActiveInboxLastSeenId=function(){return this.$node.data()[this.activeInboxType()].lastSeenId},this.getGlobalLastSeenId=function(){return this.$node.data().lastSeenId},this.notifyTabOpened=function(){var t=this.secondaryInboxIsActive();this.trigger("uiDMInboxTabOpened",{inboxType:t?this.attr.secondaryInboxType:this.attr.primaryInboxType,last_seen_event_id:this.getGlobalLastSeenId(),trusted_last_seen_event_id:t?null:this.getActiveInboxLastSeenId(),untrusted_last_seen_event_id:t?this.getActiveInboxLastSeenId():null})},this.markTabSeen=function(t,e){var i=this,s=e.inboxType,n=s===this.attr.secondaryInboxType?"untrustedConversationListSelector":"conversationListSelector";setTimeout(function(){return i.displayUnreadCount(s,0)},500),this.getUnseenConversations(n).removeAttr("data-is-unseen")},this.getUnseenConversations=function(t){return this.select(t).find("[data-is-unseen]")},this.handleTabClick=function(e,i){e&&e.preventDefault();var s=t(e.target).closest(this.attr.tabToggleItemSelector).hasClass(this.attr.primaryInboxTabClass);this.$primaryInboxTab.toggleClass(this.attr.activeClass,s),this.$secondaryInboxTab.toggleClass(this.attr.activeClass,!s),this.$secondaryInbox.toggleClass(this.attr.hiddenClass,s),this.$primaryInbox.toggleClass(this.attr.hiddenClass,!s),this.notifyTabOpened()},this.after("setEmptyState",this.updateSpinner),this.after("applyInboxResults",this.updateSpinner),this.after("clearHasMoreState",this.updateSpinner),this.after("initialize",function(){this.$primaryInbox=this.select("primaryInboxSelector"),this.$secondaryInbox=this.select("secondaryInboxSelector"),this.$primaryInboxTab=this.select("primaryInboxTabSelector"),this.$secondaryInboxTab=this.select("secondaryInboxTabSelector"),this.dm_secondary_inbox=null,this.attr.notifications&&this.attachChild(u.a,this.$node.find(".DMNotificationsPermissionRequest"),{useNativePush:this.attr.usePushNotifications}),this.$node.data().trusted={},this.$node.data().untrusted={},this.on(document,"dataDMConversationListResult",this.applyInboxResults),this.on(document,"dataDMConversationListResult",h.default.once(this.initializeInboxTabs)),this.on(document,"dataDMUserUpdates",this.applyUserUpdates),this.on(document,"uiDMInboxWantsRefreshed",this.inboxNeedsRefresh),this.on(this.select("inboxSelector"),"scroll",this.handleInboxScroll),this.on(document,"uiDeleteConversation uiReportConversation",this.removeConversation),this.on(document,"dataConversationDeleteFailed dataConversationReportFailed","uiNeedsDMConversationList"),this.on(document,"dataDMConversationListResult dataDMUserUpdates",this.setEmptyState),this.on(document,"dataMarkDMsAsRead",this.markConversationRead),this.on(document,"dataDMReadError",this.markConversationUnread),this.on(document,"uiDMInboxTabOpened",this.markTabSeen),this.on(document,"uiCloseDMConversation","uiRenderConversationListView"),this.on(document,"dataDMTrustRequestAcceptSuccess",this.promoteUntrustedConversation),this.on("click",{tabToggleItemSelector:this.handleTabClick,inboxItemSelector:this.initiateKnownConversation,markAllReadSelector:this.markAllMessages,reportConversationSelector:this.launchReportingWebview,deleteConversationSelector:this.triggerAction.bind(this,"uiShowDMDeleteConversationConfirmation")})})}var o=i("lUIe"),a=i("DBjh"),r=i("uANo"),c=i.n(r),l=i("8tPW"),h=i("YzIt"),d=i("AJAn"),u=i("vNdL"),p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},f=Object(a.default)(n,d.a);e.a=f}).call(e,i("4kSj"))},cEdb:function(t,e,i){"use strict";function s(){this.defaultAttrs({fromMessageMeCardClass:"from-message-me-card"}),this.addMessageMeCardData=function(t,e){this.addMessageMeScribeData(e),this.addFromMessageMeCardClass()},this.addMessageMeScribeData=function(t){this.messageMeScribeData={cardName:t.cardName,cardUri:t.cardUri,userId:t.userId}},this.addFromMessageMeCardClass=function(){this.$node.addClass(this.attr.fromMessageMeCardClass)},this.removeMessageMeCardData=function(){this.removeMessageMeScribeData(),this.removeFromMessageMeCardClass()},this.removeMessageMeScribeData=function(){this.messageMeScribeData=void 0},this.removeFromMessageMeCardClass=function(){this.$node.removeClass(this.attr.fromMessageMeCardClass)},this.after("initialize",function(){this.removeMessageMeCardData(),this.on(document,"uiAddMessageMeCardData",this.addMessageMeCardData)}),this.after("reset",function(){this.removeMessageMeCardData()})}e.a=s},cP4g:function(t,e,i){"use strict";function s(){this.storeCompletionData=function(t,e){if(e.scribeContext&&"tweet_box"===e.scribeContext.component){var i="account"===e.source?"@"+e.display:e.display;this.completions.push(i)}},this.handleTweetCompletion=function(t,e){if("tweet_box"===e.scribeContext.component){var i=e.text||"";delete e.text;var s=r.a.extractEntitiesWithIndices(i).filter(function(t){return t.screenName||t.cashtag||t.hashtag});s=s.map(function(t){return i.slice(t.indices[0],t.indices[1])});var n=s.filter(function(t){return this.completions.indexOf(t)>=0},this);if(this.completions=[],0!==s.length){var o={query:e.query,message:s.length,event_info:n.length,format_version:2};this.scribe("entities",e,o)}}},this.scribeSelection=function(t,e){if(!e.fromSelectionEvent||"uiTypeaheadItemComplete"!==t.type){var i={element:"typeahead_"+e.source,action:"select"},s=void 0;"uiTypeaheadItemComplete"===t.type?s="autocomplete":e.isClick?s="click":"uiTypeaheadItemSelected"===t.type&&(s="key_select");var n={position:e.index,description:s};"account"===e.source?(n.item_type=c.a.user,n.id=e.query):"topics"===e.source?(n.item_type=c.a.search,n.item_query=e.query):"follow_search"===e.source?(n.item_type=c.a.savedSearch,n.item_query=e.query):"saved_search"===e.source?(n.item_type=c.a.savedSearch,n.item_query=e.query):"recent_search"===e.source?(n.item_type=c.a.search,n.item_query=e.query):"trend_location"===e.source?(n.item_type=c.a.trend,n.item_query=e.item.woeid,-1===e.item.woeid&&(i.action="no_results")):"concierge"===e.source&&(n.item_type=c.a.search,n.item_query=e.query||e.item.name);var o={message:e.input,items:[n],format_version:2,event_info:e.item?e.item.origin:null,search_details:e.item?e.item.searchDetails:null};this.scribe(i,e,o)}},this.scribeMalformedAccount=function(){this.scribe({element:"typeahead_account",action:"empty"})},this.after("initialize",function(){this.completions=[],this.on("uiTypeaheadItemComplete uiTypeaheadItemSelected",this.storeCompletionData),this.on("uiTypeaheadItemComplete uiTypeaheadItemSelected",this.scribeSelection),this.on("uiTweetboxTweetSuccess uiTweetboxReplySuccess",this.handleTweetCompletion),this.on("uiTypeaheadAccountMalformed",this.scribeMalformedAccount)})}var n=i("DBjh"),o=i("3oDc"),a=i("CZTd"),r=i.n(a),c=i("rbkv");e.a=Object(n.default)(s,o.a)},cXIp:function(t,e,i){"use strict";var s=i("v9EU"),n=i("CZTd"),o=(i.n(n),i("IAMj")),a=["ja","zh-cn","zh-tw","ko"];e.a={getConfig:function(){return o.a.getDecider("twitter_text_emoji_counting_enabled")?n.configs.version3:n.configs.version2},getLanguageWeight:function(){return a.indexOf(s.a.language)>-1?2:1},version1:n.configs.version1,version2:n.configs.version2}},ca1w:function(t,e,i){"use strict";function s(){this.attributes({markerSelector:".DMConversation-lastReadMarker",messageIdAttr:"data-message-id",receivedMessagesSelector:".DirectMessage--received",scrollContainerSelector:".DMConversation-scrollContainer"}),this.removeMarker=function(){this.select("markerSelector").slideUp({duration:350})},this.applyMarker=function(t){var e=this.findLastReadNode(t),i=e.nextAll().filter(this.attr.receivedMessagesSelector),s=i.first();if(!!s.length){s.prev().removeClass("is-rapidFire");var n=i.length,a={unread_count:n};a["unread_count_"+o.a.PluralRules.rule_for(i.length)]=!0,s.before(r.a.render(a));var c=s.prop("offsetTop")-.33*this.$scrollContainer.height();this.$scrollContainer.scrollTop(c)}},this.findLastReadNode=function(t){return this.$node.find("["+this.attr.messageIdAttr+"="+t+"]")},this.after("initialize",function(){this.$scrollContainer=this.select("scrollContainerSelector")})}var n=i("ZVSr"),o=i.n(n),a=i("iAIQ"),r=i.n(a);e.a=s},ckC9:function(t,e,i){"use strict";(function(t){function s(t){N.a.attachTo(document,t),R.a.attachTo(document),F.a.attachTo("#dm_dialog",t,{timestampSelector:".time"}),U.a.attachTo(document,t),B.a.attachTo(".dm-media-container"),I.a.attachTo(".dm-mute-notifications-dialog"),x.a.attachTo(document),q.a.attachTo(document),L.a.attachTo(document),$.a.attachTo(document),n.a.attachTo(document),l.a.attachTo(document),M.a.attachTo(document),P.a.attachTo(document),p.a.attachTo(document),A.a.get("welcome_message_add_to_conversation_enabled")&&h.a.attachTo(document),f.a.attachTo(document),k.a.attachTo(".DMInbox",{notifications:A.a.get("notifications"),usePushNotifications:A.a.get("usePushForNotifications")}),a.a.attachTo(".DMCompose",{maxParticipants:A.a.get("participant_max")||t.dm_participant_max||50,currentUserId:t.userId}),c.a.attachTo("#dm_dialog"),A.a.get("notifications")&&E.a.attachTo(document,{conversationSelector:".DMConversation-content"}),d.a.attachTo(document),m.a.attachTo(document),S.a.attachTo(document),C.a.attachTo(document),T.a.attachTo(document),D.a.attachTo(document),g.a.attachTo("#dm_dialog"),u.a.attachTo(document),v.a.attachTo(document),w.a.attachTo(document),y.a.attachTo(document),b.a.attachTo(document),r.a.attachTo(document),O.a.attachTo(document),j.a.attachTo(document);var e=t.dm_options||{};V.a.attachTo(document,{open:e.show_dm_dialog,text:e.default_composer_text,welcomeMessageId:e.welcome_message_id,conversation:{id:e.conversation_id},compose:{id:e.recipient_id,screenName:e.recipient,name:e.recipient_name,avatar:e.recipient_avatar}}),H.a.attachTo(document),W.a.attachTo(document),A.a.get("card_prefetch")&&o.a.attachTo(".DMComposer",{cardPrefetchInterval:A.a.get("card_prefetch_interval_in_seconds")})}var n=i("RbIO"),o=i("97D5"),a=i("CDlE"),r=i("5dPv"),c=i("xxLi"),l=i("WyKa"),h=i("bwWj"),d=i("hWDG"),u=i("FaNE"),p=i("F+GD"),f=i("dTnQ"),m=i("+Q5D"),g=i("ItX7"),v=i("RgUl"),b=i("igdv"),w=i("Y27k"),S=i("7Ks6"),C=i("W0O4"),y=i("Nqh4"),T=i("tblW"),D=i("p4eP"),I=i("KczS"),x=i("Vl6W"),k=i("c9Ff"),M=i("/Y1u"),P=i("ZaO/"),A=i("8tPW"),O=i("QIr8"),E=i("1f87"),j=i("GpU+"),R=i("+Uin"),F=i("tX0K"),U=i("ZK//"),B=i("KbKg"),N=i("XNa7"),L=i("WLOm"),$=i("78RH"),V=i("+Q9N"),q=i("BsGa"),H=i("5WKh"),W=i("ggwQ"),G=!!t("#dm_dialog").length;e.a=G?s:t.noop}).call(e,i("4kSj"))},cl8q:function(t,e,i){"use strict";function s(){this.saveUndoStateDeferred=function(t){var e=this;"mousemove"===t.type&&1!==t.which||setTimeout(function(){e.detectUpdatedText(),e.saveUndoState()},0)},this.clearUndoState=function(){this.undoHistory=[],this.undoIndex=-1},this.saveUndoState=function(){var t=this.htmlRich.getText(),e=this.getSelection()||[t.length],i=this.undoHistory,s=i[this.undoIndex];s&&s.text===t?s&&(s.selection=e):i.splice(++this.undoIndex,i.length,{text:t,selection:e})},this.isUndoKey=function(t){return this.isMac?t.which===n.a.Z&&t.metaKey&&!t.shiftKey&&!t.ctrlKey&&!t.altKey:t.which===n.a.Z&&t.ctrlKey&&!t.shiftKey&&!t.altKey},this.isRedoKey=function(t){return this.isMac?t.which===n.a.Z&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey:this.isWin?t.which===n.a.Y&&t.ctrlKey&&!t.shiftKey&&!t.altKey:t.which===n.a.Z&&t.shiftKey&&t.ctrlKey&&!t.altKey},this.setUndoState=function(t){this.detectUpdatedText(!1,t.text),this.htmlRich.setSelectionOffsets(t.selection),this.trigger("uiHideAutocomplete")},this.emulateUndo=function(t){this.isUndoKey(t)&&(this.stopEvent(t),this.saveUndoState(),this.undoIndex>0&&this.setUndoState(this.undoHistory[--this.undoIndex]))},this.emulateRedo=function(t){var e=this.undoHistory,i=this.undoIndex;i<e.length-1&&this.htmlRich.getText()!==e[i].text&&e.splice(i+1,e.length),this.isRedoKey(t)&&(this.stopEvent(t),i<e.length-1&&this.setUndoState(e[++this.undoIndex]))},this.undoStateAfterCursorMovement=function(t){[n.a.PAGE_UP,n.a.PAGE_DOWN,n.a.HOME,n.a.END,n.a.UP,n.a.DOWN,n.a.LEFT,n.a.RIGHT].indexOf(t.which)>=0&&this.saveUndoStateDeferred(t)},this.undoStateForDeleteKeys=function(t){var e=this;if(!(!this.isChrome&&!this.isFirefox||t.metaKey||t.which!==n.a.BACKSPACE&&t.which!==n.a.DELETE)){var i=this.htmlRich.getText(),s=this.getSelection()||[i.length],o=s;setTimeout(function(){var a=e.htmlRich.getText(),r=a.length,c=i.length-r;if(c>0){if(1===o.length){var l=o[0];o=t.which===n.a.BACKSPACE?[l-c,l]:[l,l+c]}if(o[0]>=0&&o[1]<=i.length&&o[1]-o[0]===c){var h=e.undoHistory;e.undoIndex>=0&&h[e.undoIndex].text===i&&e.undoIndex--;var d=e.undoIndex>=0&&h[e.undoIndex].deletedSpan;d&&(s=h[e.undoIndex].selection,t.which===n.a.BACKSPACE&&o[1]===d[0]?(i=h[e.undoIndex--].text,o=[o[0],d[1]]):t.which===n.a.DELETE&&o[0]===d[0]&&(i=h[e.undoIndex--].text,o=[d[0],d[1]+c])),e.isChrome&&(s=o),h.splice(++e.undoIndex,h.length,{text:i,selection:s,deletedSpan:o}),e.saveUndoState()}}},0)}},this.handleKeyDownForUndo=function(t){this.emulateUndo(t),this.emulateRedo(t),this.undoStateAfterCursorMovement(t),this.undoStateForDeleteKeys(t)},this.after("initTextNode",function(){this.undoHistory=[{text:"",selection:[0]}],this.undoIndex=0,this.on(this.$text,"keydown",this.handleKeyDownForUndo),this.on(this.$text,"focusin",this.ignoreDuringFakeFocus(this.saveUndoStateDeferred)),this.on(this.$text,"cut paste drop",this.saveUndoState),this.on(this.$text,"cut paste drop mousedown mousemove",this.saveUndoStateDeferred),this.on("uiSaveUndoState",this.saveUndoState),this.on("uiClearUndoState",this.clearUndoState)})}var n=i("i3qs");e.a=s},cuTm:function(t,e,i){"use strict";(function(t){function s(e){if(!e.no_global_infinite_scroll){var i=e.infiniteScrollNode||window;n.a.attachTo(i,{contentSelector:e.contentSelector,immediatelyRequestMoreItems:t(".stream-container").hasClass("js-request-more-stream-items")})}var s=e.inOverlay?".PermalinkOverlay":document;a.a.attachTo(s,e),o.a.attachTo(document)}var n=i("Kjck"),o=i("pMrE"),a=i("Bcvv");e.a=s}).call(e,i("4kSj"))},d2kF:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("items",t,e,1),t,e,0,10,349,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('<button type="button" class="EmojiPicker-item EmojiPicker-focusable u-userColorFocusRing'),i.s(i.f("is_diversity",t,e,1),t,e,0,133,146,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(" is-diversity")}),t.pop()),i.s(i.f("is_variant",t,e,1),t,e,0,188,199,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(" is-variant")}),t.pop()),i.b('" data-key="'),i.b(i.v(i.f("key",t,e,0))),i.s(i.f("is_text_default",t,e,1),t,e,0,263,268,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("-fe0f")}),t.pop()),i.b('" data-placement="bottom-right" tabindex="-1"></button>')}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},dCVh:function(t,e,i){"use strict";var s=i("0d4m"),n=i("9TDk"),o=i("9eqS"),a=i.n(o);e.a=function(t){var e=a.a.render({article_number:"20156423"});switch(t){case n.a.INVALID_MEDIA:return Object(s.default)("Your image file could not be processed. Please see tips for uploading images. {{learnMoreLink}}",{learnMoreLink:e});case n.a.FILE_TOO_LARGE:return Object(s.default)("Your image file is too large. Images should be less than 5 MB. {{learnMoreLink}}.",{learnMoreLink:e});case n.a.UNSUPPORTED_MEDIA:return Object(s.default)("Your image file is not compatible. Please see tips for uploading images. {{learnMoreLink}}",{learnMoreLink:e})}}},dSEw:function(t,e,i){"use strict";function s(t,e){t=t||{},e=e||n;var i=t.id;if(i)return i;do{o++,i=e+o}while(document.getElementById(i));return t.id=i,i}var n="uuid-",o=0;s.resetCount=function(){o=0},e.a=s},dTnQ:function(t,e,i){"use strict";function s(){this.attributes({darkTraffic:!1}),this.processDMTypingEvent=function(t){!this.attr.darkTraffic&&this.trigger("dataDMTyping",t)},this.processDMUpdate=function(t){!this.attr.darkTraffic&&this.trigger("dataDMUpdate",t)},this.processLPMessage=function(t,e){e.payload.dm_typing?this.processDMTypingEvent(e.payload.dm_typing):e.payload.dm_update&&this.processDMUpdate(e.payload.dm_update)},this.updateSubscriptions=function(t,e){if(e&&t){var i="subscribe"===t?"dataLPSubscribe":"dataLPUnsubscribe";this.trigger(i,{consumer_id:this.consumerId,topic:this.getTopicsForConversation(e)})}},this.handleConversationUpdate=function(t,e){e.conversation_id!==this.conversationId&&this.updateSubscriptions("unsubscribe",this.conversationId),this.updateSubscriptions("subscribe",e.conversation_id),this.conversationId=e.conversation_id},this.handleConversationViewChange=function(t){var e="uiDMConversationActivityHidden"===t.type?"unsubscribe":"subscribe";this.updateSubscriptions(e,this.conversationId)},this.getTopicsForConversation=function(t){return["/dm_typing/"+t,"/dm_update/"+t]},this.after("initialize",function(){this.consumerId=parseInt(Math.random()*Number.MAX_SAFE_INTEGER,10),this.on("dataLPMessage",this.processLPMessage),this.on("uiDMConversationUpdated",this.handleConversationUpdate),this.on("uiDMConversationActivityHidden uiDMConversationActivityVisible",this.handleConversationViewChange)})}var n=i("DBjh");e.a=Object(n.default)(s)},dUMM:function(t,e,i){"use strict";(function(t){function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(){var e,i;c.default.mixin(this,[f.a,g.a,m.a]),this.defaultAttrs({cardWrapperClass:".js-macaw-cards-iframe-container",tweetIdData:"tweet-id",tweetNonceIdData:"tweet-nonce",itemIdData:"item-id",dmIdData:"message-id",advertiserIdData:"advertiser-id",itemType:"tweet",fullCardIframeUrl:"data-full-card-iframe-url",srcAttr:"data-src",cardUrl:"data-card-url",publisherId:"data-publisher-id",creatorId:"data-creator-id",srcDataAttr:"src",cardUrlDataAttr:"card-url",publisherIdDataAttr:"publisher-id",creatorIdDataAttr:"creator-id",cardName:"data-card-name",card2TypeAttr:"card2-type",supportsBroadcastPlayerAttr:"supports-broadcast-player",macawCardsUserStyles:"macaw-cards-user-styles"}),this.DEFAULT_SCRIBE_ELEMENT="platform_card",this.DEFAULT_SCRIBE_COMPONENT="tweet",this.DEFAULT_SCRIBE_ACTION="undefined",this.CARDS_REQUIRING_USER_DEFINED_STYLES=["2586390716:message_me"],this.broadcast_player_cards={PERISCOPE:"3691233323:periscope_broadcast",BROADCAST:"745291183405076480:broadcast",LIVE_EVENT:"745291183405076480:live_event"},this.CARDS_REQUIRING_LIVE_BROADCAST_PLAYER=[this.broadcast_player_cards.BROADCAST,this.broadcast_player_cards.LIVE_EVENT],this.CARD_PLAYER_COMPONENT_MAP=(e={},s(e,this.broadcast_player_cards.PERISCOPE,"BroadcastCard"),s(e,this.broadcast_player_cards.BROADCAST,"BroadcastCard"),s(e,this.broadcast_player_cards.LIVE_EVENT,"LexCard"),e),this.CARD_PLAYER_SURFACE_MAP=(i={},s(i,this.broadcast_player_cards.PERISCOPE,"BROADCAST_CARD"),s(i,this.broadcast_player_cards.BROADCAST,"BROADCAST_CARD"),s(i,this.broadcast_player_cards.LIVE_EVENT,"EVENT_CARD"),i),this.createCard=function(e){var i=this;if(window.opener&&(!document.hasFocus()||!window.__user_interactive))return setTimeout(function(){i.createCard(e)},500);var s=void 0,n=this._getCardWrapper(e),o=this._getUniqueIdForCard(e),c=this._getTweetId(e),h=this._getAdvertiserId(e),u=void 0,f=void 0,m=e.closest("[data-card-component]").attr("data-card-component"),g={element:this.DEFAULT_SCRIBE_ELEMENT,component:m||this.DEFAULT_SCRIBE_COMPONENT},v=w({},r.a.scribeContext,{component:g.component}),S={impressionId:e.data("impression-id"),disclosureType:e.data("disclosure-type")};if(n&&n.length&&n[0].childNodes.length<2&&(!this.channels[o]||n.context&&0===n.context.clientHeight)){u=n.data("src");var y=this._getCard2Type(e),T=-1!==this.CARDS_REQUIRING_LIVE_BROADCAST_PLAYER.indexOf(y),D=d.a.getDecider("cards2_enable_periscope_card_transition")&&y===this.broadcast_player_cards.PERISCOPE&&e.data(this.attr.supportsBroadcastPlayerAttr);(T||D)&&(this._attachLiveBroadcastPlayer(e),u=this._addLiveBroadcastPlayerParamToUrl(u)),-1!==this.CARDS_REQUIRING_USER_DEFINED_STYLES.indexOf(y)&&(u=this._addUserColorToUrl(e,u)),e.hasClass("DirectMessage")&&(u=this._addDmInfoToUrl(e,u)),e.data("creative-id")&&(u=this._addRtbAdInfoToUrl(e,n,u)),u=this._addHeightToUrl(n,u),u=this._addNightModeToUrl(n,u),u=this._addScribeContextToUrl(v,u),u=this._addBearerTokenToUrl(a.a,u),s=new b.a.Rpc({acl:["https:\\/\\/twitter\\.com","https:\\/\\/www\\.twitter\\.com","https:\\/\\/localhost\\.twitter\\.com"],remote:u,container:n[0],props:{height:"0",style:{display:"block"}},onReady:function(){e.trigger("uiCardLoaded")}},{local:f=this.localMethods={localMethodNames:function(){return{callMethodByName:!0,cancelFollowUser:!0,emojifyText:!0,favoriteStatus:!0,followAdvertiser:!0,followUser:!0,initCardPlayer:!0,initCardPlayerForBroadcast:!0,initCardPlayerForMediaTweetId:!0,initPlayerForLiveEventCard:!0,logPromotedContentEvent:!0,logPromotedInfo:!0,openAuthWebView:!0,openGallery:!0,openLeadGenConfirmDialog:!0,openLink:!0,openLinkNoScribe:!0,openMessageMeDialog:!0,openProfile:!0,rawPromotedLoggerInterface:!0,rawScribeInterface:!0,requestDynamicAd:!0,requestPlayerConfig:!0,resizeCard:!0,retweetStatus:!0,scribe:!0,shareStatus:!0,statusComposeTweet:!0,subscribeToEvent:!0,teardownCardPlayer:!0,teardownPlayerForLiveEventCard:!0,unblockUser:!0,unfollowAdvertiser:!0,unfollowUser:!0,unsubscribeFromEvent:!0,videoView:!0}},callMethodByName:function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return f[t].method.apply(this,e)},openAuthWebView:function(t){return i.trigger("uiOpenAuthWebViewDialog",{impressionId:t.impressionId,webviewUrl:t.webviewUrl,webviewTitle:t.webviewTitle,tweetId:t.tweetId})},openGallery:function(t){return i.trigger(document,"uiOpenCardImageGallery",{tweetId:t.tweetId,imageUrl:t.imageUrl})},openLeadGenConfirmDialog:function(t){t=w({},t,S,{tweetId:e.data(i.attr.tweetIdData),cardUrl:n.attr(i.attr.cardUrl),fullCardIframeUrl:n.attr(i.attr.fullCardIframeUrl),publisherId:n.attr(i.attr.publisherId),creatorId:n.attr(i.attr.creatorId)}),i.trigger(document,"uiOpenLeadGenConfirmDialog",t)},openLink:function(t){var e=S;t.hasOwnProperty("cardEvent")&&(e.cardEvent=t.cardEvent),i.trigger("uiCardUrlClick",e),i.scribeCardInteraction("open_link",i._getCardDataWithScribeContext(n,g))},openLinkNoScribe:function(t){var e=S;t.hasOwnProperty("cardEvent")&&(e.cardEvent=t.cardEvent),t.hasOwnProperty("unifiedCardData")&&(e.unifiedCardEvent=t.unifiedCardData),t.skipEventUiCardUrlClick||i.trigger("uiCardUrlClick",e)},openMessageMeDialog:function(t){return i.trigger("uiComposeNewDMWithOptions",{tweetId:t.tweetId,recipientId:t.recipientId,defaultComposerText:t.defaultComposerText,welcomeMessageId:t.welcomeMessageId,messageMeCardData:{cardName:n.attr(i.attr.cardName),cardUri:n.attr(i.attr.cardUrl),userId:d.a.user.id}})},openProfile:function(t){t=w({userId:t.userId,userScreenName:t.userScreenName,profileClickTarget:t.profileClickTarget,scribeContext:g},i.getCardDataFromContainer(n),S),e.trigger("uiShowProfileNewWindow",t),e.trigger("uiNavigate",{href:"/"+t.userScreenName})},requestDynamicAd:function(){var t=i.getCard2Item(i._getCardDataWithScribeContext(n,g));return i.getDynamicVideoAd(t)},requestPlayerConfig:function(){return{autoPlayPreview:e.find('[data-autoplaying-media="true"]').length>0,autoPlayPreviewPreroll:d.a.getDecider("autoplayPreviewPreroll"),useVmapVariants:d.a.getDecider("useVmapVariants")}},resizeCard:function(t){s.iframe.height=parseInt(t.height,10),n.removeClass("initial-card-height")},statusComposeTweet:function(e){"htmlTitle"in e&&delete e.htmlTitle,"screenName"in e&&(e.screenName=C(e.screenName)),"screenNames"in e&&(Array.isArray(e.screenNames)||(e.screenNames=[e.screenNames]),e.screenNames=e.screenNames.map(C)),e.defaultText=e.tweetText||"",p.a.isValidTweetText(e.defaultText)||delete e.defaultText,t(document).trigger("uiOpenTweetDialog",w({},e,{canTweetDefaultText:!0,disclosureType:i._getDisclosureType(e.earned)}))},retweetStatus:function(t){return i._triggerTweetAction(e,"uiOpenRetweetDialog",{id:t.tweetId||c,tweetId:t.tweetId||c})},favoriteStatus:function(t){return i._triggerTweetAction(e,"uiDidFavoriteTweet",{id:t.tweetId||c})},shareStatus:function(t){return i._triggerTweetAction(e,"uiNeedsShareViaEmailDialog",{id:t.tweetId||c})},followAdvertiser:function(t){h&&i._triggerTweetAction(e,"uiFollowAction",{userId:h})},unfollowAdvertiser:function(t){h&&i._triggerTweetAction(e,"uiFollowAction",{userId:h})},rawScribeInterface:function(t){return i.trigger(document,"scribe",{scribeEvent:w({},r.a.scribeContext,g,t.namespace),scribeData:t.data})},rawPromotedLoggerInterface:function(t){return i.trigger(document,"uiLogPromotedEvent",t)},scribe:function(t){var e=i.DEFAULT_SCRIBE_ELEMENT,s=i.DEFAULT_SCRIBE_ACTION,o=void 0;t.hasOwnProperty("customScribe")&&(t.customScribe.hasOwnProperty("element")&&(e=t.customScribe.element),t.customScribe.hasOwnProperty("action")&&(s=t.customScribe.action),t.customScribe.hasOwnProperty("itemData")&&(o=t.customScribe.itemData),i.scribeCardInteraction(s,i._getCardDataWithScribeContext(n,g),e,o))},logPromotedInfo:function(t){return i.trigger(document,"uiMacawCardClicked",{event:t.event,impressionId:t.impressionId,earned:t.earned,sync:t.sync})},logPromotedContentEvent:function(s){return i._triggerTweetAction(e,"uiPlayableMediaEvent",t.extend(i.interactionData(e,s),s))},followUser:function(t){t.userId&&i._triggerTweetAction(e,"uiFollowAction",{userId:t.userId})},unfollowUser:function(t){t.userId&&i._triggerTweetAction(e,"uiUnfollowAction",{userId:t.userId})},unblockUser:function(t){t.userId&&i._triggerTweetAction(e,"uiUnblockAction",{userId:t.userId})},cancelFollowUser:function(t){t.userId&&i._triggerTweetAction(e,"uiCancelFollowRequestAction",{userId:t.userId})},subscribeToEvent:function(t){t&&t.subscribeTo&&(o in i.activeSubscriptions?i.activeSubscriptions[o].push(t.subscribeTo):i.activeSubscriptions[o]=[t.subscribeTo],i._addSubscription(o,t.subscribeTo))},unsubscribeFromEvent:function(t){t&&t.unsubscribeFrom&&i._removeSubscription(o,t.unsubscribeFrom)},emojifyText:function(t){for(var e in t)t[e]=l.a.emojifyText(t[e]);s.transmitEmojifiedText(t)},initPlayerForLiveEventCard:function(t){i._triggerTweetAction(e,"uiLoadPlayerForLiveEventCard",{broadcast_id:t.broadcast_id})},teardownPlayerForLiveEventCard:function(){i._triggerTweetAction(e,"uiTeardownPlayerForLiveEventCard",{})},initCardPlayerForBroadcast:function(t){i._triggerTweetAction(e,"uiLoadCardPlayerForBroadcast",{broadcast_id:t.broadcast_id,requested_timecode:t.requested_timecode})},initCardPlayerForMediaTweetId:function(t){i._triggerTweetAction(e,"uiLoadCardPlayerForMediaTweetId",{media_tweet_id:t.media_tweet_id})},initCardPlayer:function(t){i._triggerTweetAction(e,"uiLoadPlayer",{tweetId:o,index:t.index})},teardownCardPlayer:function(){i._triggerTweetAction(e,"uiTeardownCardPlayer",{tweetId:c})}},remote:{localMethodNames:{},callVideoPlayerMethod:{},transmitEmojifiedText:{},transmitEvent:{}}}),t(s.iframe).attr("allowfullscreen",""),this.channels[o]=s;if(e.data(this.attr.dmIdData)&&e.is(":visible")){var I=this.getCard2Item(this.getCardDataFromContainer(n));this.trigger("uiNewDMCardLoaded",{cardItem:I})}}return S},this.destroyCard=function(t){var e=this._getUniqueIdForCard(t);if(this.channels[e]){this.channels[e].destroy(),delete this.channels[e];var i=this.activeSubscriptions[e];delete this.activeSubscriptions[e];for(var s in i)this._subscriptionExistsFor(event)||this.off(document,s)}},this.destroyAllCards=function(){var t=this.channels;Object.keys(this.channels).forEach(function(e){return t[e].destroy()}),this.channels={}},this.handleStreamItemRemoval=function(e){var i=this,s=e.target;s&&t(s).find(".tweet").each(function(e,s){return i.destroyCard(t(s))})},this._getCardWrapper=function(t){return t.find(this.attr.cardWrapperClass)},this._getTweetId=function(t){return t.data(this.attr.tweetIdData)},this._getUniqueIdForCard=function(t){return t.data(this.attr.tweetNonceIdData)||t.data(this.attr.tweetIdData)||t.data(this.attr.dmIdData)},this._getAdvertiserId=function(t){return t.data(this.attr.advertiserIdData)},this._getUserColor=function(e){var i=t("<a/>").css("display","none").appendTo(e),s=i.css("color");return i.remove(),s},this._getCard2Type=function(t){return t.data(this.attr.card2TypeAttr)},this._addLiveBroadcastPlayerParamToUrl=function(t){return h.a.addToUrl(t,{supports_broadcast_player:!0})},this._addUserColorToUrl=function(t,e){var i=this._getUserColor(t);return i?h.a.addToUrl(e,{user_color:i}):e},this._addScribeContextToUrl=function(t,e){return t?h.a.addToUrl(e,{scribe_context:JSON.stringify(t)}):e},this._addBearerTokenToUrl=function(t,e){return t?h.a.addToUrl(e,{bearer_token:t}):e},this._addDmInfoToUrl=function(t,e){var i=t.find(".card2"),s=parseInt(i.css("border-top-left-radius"),10),n=parseInt(i.css("border-top-right-radius"),10),o=parseInt(i.css("border-bottom-right-radius"),10),a=parseInt(i.css("border-bottom-left-radius"),10),r=e;if(!(isNaN(s)||isNaN(n)||isNaN(o)||isNaN(a))){var c=[s,n,o,a].map(function(t){return t>0}),l={client:"dm",border_radius:c.toString()};l.edge=!0,r=h.a.addToUrl(e,l)}return r},this._addNightModeToUrl=function(t,e){return d.a.user.nightModeActivated?h.a.addToUrl(e,{night_mode:!0}):e},this._addHeightToUrl=function(t,e){var i=t.height();return i?h.a.addToUrl(e,{card_height:i}):e},this._addRtbAdInfoToUrl=function(t,e,i){var s={card_name:e.data("card-name"),card_url:e.data("card-url"),website_url:t.data("card-website-url"),title:t.data("card-title"),vanity_url:t.data("card-vanity-url"),image_width:t.data("card-image-width"),image_height:t.data("card-image-height"),image_url:t.data("card-image-url")};return h.a.addToUrl(i,{rtb_data:JSON.stringify(s)})},this._getCardDataWithScribeContext=function(t,e){return w({},this.getCardDataFromContainer(t),{scribeContext:e})},this._getDisclosureType=function(t){return!0===t?"earned":"_"},this._triggerTweetAction=function(t,e,i){t.trigger(e,i)},this._addSubscription=function(t,e){var i=this;this.on(document,e,function(s,n){var o=i.channels[t];o&&i.activeSubscriptions[t]&&i.activeSubscriptions[t].indexOf(e)>-1&&o.transmitEvent(e,{type:s.type,timestamp:s.timeStamp,data:s.data},n)})},this._removeSubscription=function(t,e){var i=this.activeSubscriptions[t];if(this.channels[t]&&Array.isArray(i)){var s=i.indexOf(e);s>-1&&(i.splice(s,1),i.length>0?this.activeSubscriptions[t]=i:delete this.activeSubscriptions[t],this._subscriptionExistsFor(e)||this.off(document,e))}},this._getAllSubscriptions=function(){return Object.keys(this.activeSubscriptions).map(function(t){return this.activeSubscriptions[t]},this).filter(function(t){return!!t})},this._subscriptionExistsFor=function(t){return this._getAllSubscriptions().map(function(t){return t.subscribedTo}).some(function(e){return e.subscribedTo.indexOf(t)>-1})},this.autoplayMedia=function(e){var i=this._getUniqueIdForCard(t(e.target).closest(".tweet[data-tweet-id]")),s=this.channels[i];s&&s.callVideoPlayerMethod("autoPlayPreview")},this.loadVideoCards=function(t,e){var i=this;e&&e.tweets&&e.tweets.forEach(function(t){var e=i.$node.find(".tweet[data-tweet-id="+t.tweetId+"]");e.find('[data-card-name=__entity_video][data-has-autoplayable-media="true"]:empty').length&&i.createCard(e)})},this.stopAutoplayingMedia=function(e,i){var s=this._getUniqueIdForCard(t(e.target).closest(".tweet[data-tweet-id]")),n=this.channels[s];n&&n.callVideoPlayerMethod("autoPlayPreviewStop")},this.pauseMedia=function(e){var i=this._getUniqueIdForCard(t(e.target).closest(".tweet[data-tweet-id]")),s=this.channels[i];s&&(s.callVideoPlayerMethod("pause"),s.callVideoPlayerMethod("autoPlayPreviewStop"))},this.pauseAllMedia=function(t,e){var i=this.channels;Object.keys(i).forEach(function(t){i[t].callVideoPlayerMethod("pause"),i[t].callVideoPlayerMethod("autoPlayPreviewStop")})},this.updatePosition=function(t,e){var i=e&&e.tweetId&&this.channels[e.tweetId];i&&i.callVideoPlayerMethod("updatePosition",e.positionData)},this._attachLiveBroadcastPlayer=function(t){var e=this._getCard2Type(t),i=this.CARD_PLAYER_COMPONENT_MAP[e],s=this.CARD_PLAYER_SURFACE_MAP[e],n=t.data("supports-landscape-presentation");o.a.attachTo(t,{playerComponentContext:i,playerSurface:s,supportsLandscapePresentation:n})},this._isLiveEventCard=function(t){return t===this.broadcast_player_cards.LIVE_EVENT},this.after("initialize",function(){this.channels={},this.activeSubscriptions={},this.before("teardown",this.destroyAllCards),this.on(document,"uiAutoplayMedia",this.autoplayMedia),this.on(document,"uiStopAutoplayingMedia",this.stopAutoplayingMedia),this.on(document,"uiPauseAllMedia",this.pauseAllMedia),this.on(document,"uiPauseMedia",this.pauseMedia),this.on(document,"uiPlayableMediaPositionChange",this.updatePosition),this.on(document,"uiHasInjectedNewTimeline uiHasInjectedOldTimelineItems uiHasInjectedRangeTimelineItems",this.loadVideoCards),this.on(document,"uiWillRemoveStreamItem",this.handleStreamItemRemoval)})}e.a=n;var o=i("hKiB"),a=i("E//N"),r=i("NNES"),c=i("q9/C"),l=i("tLYs"),h=i("sxXh"),d=i("IAMj"),u=i("CZTd"),p=i.n(u),f=i("Vuuo"),m=i("TTv8"),g=i("alSu"),v=i("z2Y5"),b=i.n(v),w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},S={">":"&gt;","<":"&lt;"},C=function(t){return t&&(""+t).replace(/[<>]/g,function(t){return S[t]})}}).call(e,i("4kSj"))},dfH9:function(t,e,i){"use strict";function s(){this.defaultAttrs({promptType:"above_timeline"}),this.insertPrompt=function(t){this.$node.html(t.html)}}var n=i("k7B4"),o=i("QwUm"),a=i("bN2o");e.a=n.a.mixin(s,o.a,a.a)},dzUb:function(t,e,i){"use strict";function s(t){return 3===t.nodeType||4===t.nodeType}function n(t){return 1===t.nodeType}function o(t,e){return t.nodeName.toLowerCase()===e}function a(t,e){for(;t!==e;){if(!t)return!0;t=t.parentNode}}var r="Microsoft Internet Explorer"===navigator.appName,c=/[\xa0\n\t]/g,l=/\u2003/,h=/\r\n/g,d=/(.*?)\n/g,u=/^ |(<\/[^>]+>) | (?= )/g,p=/^ | $|( ) /g,f=Number.MAX_VALUE,m="Emoji--forLinks",g=function(t,e){function i(t,e){function i(t){var u=a.length;if(s(t)){var p=t.parentNode;o(p,"em")&&(p=p.parentNode);var f=t.nodeValue,g=-1,v=void 0,b=0;if(p.hasAttribute("data-pictograph-text")){var w=p.getAttribute("data-pictograph-text");v=f.replace(l,function(t,e){return g=e,b=w.length-t.length,w})}else p.classList&&p.classList.contains(m)?(g=0,b=-f.length,v=""):v=f.replace(c," ");var D=v.length;D&&(a+=v,r=!0),e(t,!0,0,u,u+D,g,b)}else if(n(t))if(e(t,!1,0,u,u),o(t,"br")||T===y&&!t.firstChild&&"<br>"===t.innerHTML)t===h?d=!0:(a+="\n",r=!1);else if(o(t,"img")){var I=t.getAttribute("alt")||"",x=I.length;x&&(a+=I,r=!0)}else{var k=t.currentStyle||window.getComputedStyle(t,""),M="block"===k.display;!M||T!==S&&T!==C||(r=!0);for(var P=t.firstChild,A=1;P;P=P.nextSibling,A++){if(i(P),d)return;u=a.length,e(t,!1,A,u,u)}d||t===h?d=!0:M&&r&&(a+="\n",r=!1)}}for(var a="",r=void 0,h=void 0,d=void 0,u=t;u&&n(u);u=u.lastChild)h=u;return i(t),a}function g(t,e){var s=null,n=e.length-1,a=e.map(function(){return{}}),r=void 0;return i(t,function(t,i,s,c,l,h,d){r||a.forEach(function(a,u){var p=e[u];c<=p&&!o(t,"br")&&(a.node=t,i&&(s=Math.min(p,l)-c,d&&s>h&&(s=Math.max(s-d,0))),a.offset=s,r=i&&u===n&&l>=p)})}),a[0].node&&a[n].node&&(s=document.createRange(),s.setStart(a[0].node,a[0].offset),s.setEnd(a[n].node,a[n].offset)),s}function v(){return document.body.contains(t)}function b(e){if(t.innerHTML=e,r)for(var i=t.firstChild;i;i=i.nextSibling)o(i,"p")&&""===i.innerHTML&&(i.innerText="")}function w(t,e){return t.map(function(t){return Math.min(t,e.length)})}var S=4,C=5,y=6,T=void 0,D=(e||navigator.userAgent).toLowerCase();return T=/edge/.test(D)?y:/chrome|webkit/.test(D)?1:/opera/.test(D)?3:/trident\/7/.test(D)?C:/msie/.test(D)?S:!/compatible/.test(D)&&/mozilla/.test(D)?2:0,{getHtml:function(){if(r){for(var e="",i=document.createElement("div"),n=t.firstChild;n;n=n.nextSibling)s(n)?(i.innerText=n.nodeValue,e+=i.innerHTML):e+=n.outerHTML.replace(h,"");return e}return t.innerHTML},setHtml:function(t){b(t)},getText:function(){return i(t,function(){})},setTextWithMarkup:function(t){b((t+"\n").replace(d,function(t,e){return 2===T||T===S?(e=e.replace(u,"$1&nbsp;"),2===T?e+"<BR>":"<P>"+e+"</P>"):(e=(e||"<br>").replace(p,"$1&nbsp;"),3===T||T===C?"<p>"+e+"</p>":"<div>"+e+"</div>")}))},getSelectionOffsets:function(){var e=getSelection();if(!v()||!e||1!==e.rangeCount)return null;var s=e.getRangeAt(0);if(a(s.commonAncestorContainer,t))return null;var n=[{node:s.startContainer,offset:s.startOffset}];s.collapsed||n.push({node:s.endContainer,offset:s.endOffset});var o=n.map(function(){return f}),r=i(t,function(t,e,i,s,a,r,c){return n.forEach(function(n,l){if(o[l]===f&&t===n.node&&(e||i===n.offset)){var h=0;e&&(h=Math.min(a-s,n.offset),c&&h>r&&(h+=c)),o[l]=s+h}})});return w(o,r)},setSelectionOffsets:function(e){if(e&&v()){var i=g(t,e);if(i){var s=window.getSelection();s.removeAllRanges(),s.addRange(i)}}},emphasizeText:function(e){var s=[];e&&e.length>1&&v()&&(i(t,function(t,i,n,o,a){if(i){var r=Math.max(o,e[0]),c=Math.min(a,e[1]);c>r&&s.push([r,c])}}),s.forEach(function(e){var i=g(t,e);i&&i.surroundContents(document.createElement("em"))}))},deleteText:function(e){var i=g(t,e);i&&i.deleteContents()}}};e.a=g},eMOG:function(t,e,i){"use strict";var s={cropRatioThreshold:.05,calculateCrop:function(t,e,i){var s=e.width/e.height,n=i.width/i.height,o=(s-n)/s;return Math.abs(o)>this.cropRatioThreshold&&(i=this.getDefaultCropRect(t,s),n=i.width/i.height),{width:t.width/i.width*100+"%",height:t.height/i.height*100+"%",marginLeft:i.x/i.width*100*-1+"%",marginTop:i.y/i.width*100*-1+"%"}},getDefaultCropRect:function(t,e){var i=e.width/e.height,s=i<1,n=i>1,o=void 0;if(s){var a=t.height*i;o={width:a,height:t.height}}else if(n){var r=t.width/i;o={width:t.width,height:r}}else{var c=Math.min(t.width,t.height);o={width:c,height:c}}var l=1;return o.width>t.width?l=t.width/o.width:o.height>t.height&&(l=t.height/o.height),o.width=o.width*l,o.height=o.height*l,o.x=.5*(t.width-o.width),o.y=.5*(t.height-o.height),["width","height","x","y"].forEach(function(t){return o[t]=Math.round(o[t])}),o}};e.a=s},"eh/H":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({enableTooltip:!0,tooltipSelector:".DMConversation-tooltip"}),this.disableTooltip=function(){this.$node.tooltip("disable")},this.hideAndDisableTooltip=function(){this.$node.tooltip("hide").tooltip("disable")},this.showTooltip=function(){this.$node.attr("data-template",'<div class="tooltip"><div class="tooltip-arrow"></div><div class="DMConversation-tooltip tooltip-inner"></div></div>'),this.$node.tooltip("show"),this.$node.one("mouseover",this.hideAndDisableTooltip.bind(this)),t(this.attr.tooltipSelector).one("click",this.hideAndDisableTooltip.bind(this)),t(document).one("uiDMConversationActivityHidden",this.hideAndDisableTooltip.bind(this))},this.getDmMentionsStore=function(){return this.dmMentionsStore||(this.dmMentionsStore=new a.a("dm_mentions_"+o.a.user.id)),this.dmMentionsStore},this.shouldShowTooltip=function(){var t=this.getDmMentionsStore();return!t.getItem("seen_tooltip")&&(t.setItem("seen_tooltip","1"),!0)},this.after("initialize",function(){this.attr.enableTooltip&&this.shouldShowTooltip()?this.showTooltip():this.disableTooltip()})}var n=i("DBjh"),o=i("IAMj"),a=i("WODX"),r=Object(n.default)(s);e.a=r}).call(e,i("4kSj"))},ey4t:function(t,e,i){"use strict";function s(){this.scribeSavedSearchAction=function(t,e){this.scribe({component:e.sourceEventData.scribeComponent,element:"saved_search",action:e.sourceEventData.scribeAction})},this.after("initialize",function(){this.on("dataAddedSavedSearch dataRemovedSavedSearch",this.scribeSavedSearchAction)})}var n=i("DBjh"),o=i("3oDc");e.a=Object(n.default)(s,o.a)},f0aZ:function(t,e,i){"use strict";(function(t){function s(){this.defaults={addTweetButtonSelector:".RetweetDialog-footer .add-tweet-button",retweetSelector:".retweet-action",commentBoxSelector:".RetweetDialog-commentBox",tweetBoxSelector:"form.tweet-form",isWithCommentClass:"is-withComment",top:"20%"},this.openRetweet=function(t,e){if(!this.tweetBoxReady){var i=r.a.getConfig();n.a.attachTo(this.$tweetBox,{condensable:!0,condenseContainer:this.attr.commentBoxSelector,typeaheadData:this.attr.typeaheadData,noTeardown:this.attr.noTeardown,hashflagsEnabled:!0,defaultTitle:this.select("modalTitleSelector").text(),twitterTextOptions:i,maxLength:i.maxWeightedTweetLength}),this.tweetBoxReady=!0}this.trigger(this.$tweetBox,"uiOverrideTweetBoxOptions",{draftTweetId:"retweet_"+e.tweetId,urlToRetweet:["https://twitter.com",e.screenName,"status",e.id].join("/"),impressionId:e.impressionId,earned:e.disclosureType?"earned"===e.disclosureType:void 0}),this.quotedTweetId=e.id,this.quotedUserScreenName=e.screenName,this.sourceEventData=e,this.displayTweet(e.id,{modal:"retweet",disableLinks:!0}),this.select("retweetSelector").removeClass("disabled"),this.open()},this.retweet=function(){this.select("retweetSelector").addClass("disabled"),this.$tweetBox.hasClass(this.attr.isWithCommentClass)||this.trigger("uiDidRetweet",this.sourceEventData)},this.retweetSuccess=function(t,e){void 0!==this.sourceEventData&&(this.trigger("uiDidRetweetSuccess",this.sourceEventData),"uiRetweetWithCommentSuccess"===t.type&&this.trigger("uiDidRetweetWithCommentSuccess",this.sourceEventData)),this.close(),this.sourceEventData=void 0},this.restoreFocusToTweet=function(e){t(e.target).is(this.$dialog)&&this.activeEl&&(e.preventDefault(),this.trigger(t(this.activeEl).closest(".tweet"),"uiShouldAddFocusStyle"),this.activeEl.focus())},this.updateTitle=function(t,e){e&&e.title&&this.select("modalTitleSelector").text(e.title)},this.enableRetweetButtonAfterRetweetFailed=function(t,e){Object(o.b)(e)===o.a.AlreadyRetweeted?this.close():(this.select("retweetSelector").removeClass("disabled"),this.trigger("uiShowError",{message:Object(h.default)("Failed to Retweet. Please try again later.")}))},this.handleAddTweetButtonClick=function(t,e){t.preventDefault(),this.trigger(this.$tweetBox,"uiClickAddMoreTweetOnQuoteRetweet",{quotedTweetId:this.quotedTweetId,quotedUserScreenName:this.quotedUserScreenName})},this.quotedTweetId=null,this.quotedUserScreenName=null,this.around("close",function(t,e,i){this.quotedTweetId=null,this.quotedUserScreenName=null,t()}),this.after("initialize",function(t){this.$tweetBox=this.select("tweetBoxSelector"),this.on("click",{retweetSelector:this.retweet}),this.on(document,"uiOpenRetweetDialog",this.openRetweet),this.on(document,"uiRetweetWithCommentSuccess dataDidRetweet",this.retweetSuccess),this.on(document,"uiDialogRestorePreviousFocus",this.restoreFocusToTweet),this.on("uiDialogUpdateTitle",this.updateTitle),this.on(document,"dataFailedToRetweet",this.enableRetweetButtonAfterRetweetFailed),this.on(this.select("addTweetButtonSelector"),"click",this.handleAddTweetButtonClick)})}var n=i("E3dh"),o=i("2Doy"),a=i("DBjh"),r=i("cXIp"),c=i("UHc7"),l=i("WqLG"),h=i("0d4m");e.a=Object(a.default)(s,c.a,l.a)}).call(e,i("4kSj"))},fAUD:function(t,e,i){"use strict";function s(){this.attributes({notice:".DMReportMessage",abuseConfirmation:".DMReportMessage-abuse",spamConfirmation:".DMReportMessage-spam",cancel:".DMReportMessage-cancel"}),this.showConfirmation=function(){this.select("notice").trigger("uiShowDMNotice")},this.hideConfirmation=function(){this.select("notice").trigger("uiDismissDMNotice")},this.state=function(t,e){return this._state=e||this._state||{},this._state},this.reportMessage=function(t){var e=this.state();this.trigger("uiDMDialogReportDM",{id:e.messageId,conversation_id:e.conversationId,report_as:t});var i=Object(o.default)("Marked as spam"),s=Object(o.default)("Report sent. The message has been deleted from your conversation view."),n=Object(o.default)("Marked as abusive. The message has been deleted from your conversation view."),a=e.is_group?n:s,r="spam"===t?i:a;this.hideConfirmation(),this.trigger("uiDMShowToast",{message:r}),this.trigger("uiDMInboxWantsRefreshed")},this.launchReportingWebview=function(t,e){var i={reportedDirectMessageConversationId:e.conversationId,reportedDirectMessageId:e.messageId,userId:e.senderId,target:"dm-conversation"};this.trigger("uiNeedsReportDialog",i)},this.after("initialize",function(){this.on("uiDMLaunchDMReportWebView",this.launchReportingWebview),this.on("uiShowDMReportMessageConfirmation",this.state),this.on("uiShowDMReportMessageConfirmation",this.showConfirmation),this.on("click",{abuseConfirmation:this.reportMessage.bind(this,"abuse"),spamConfirmation:this.reportMessage.bind(this,"spam"),cancel:this.hideConfirmation})})}var n=i("DBjh"),o=i("0d4m"),a=Object(n.default)(s);e.a=a},fO1A:function(t,e,i){"use strict";function s(){this.defaultAttrs({titleSelector:"#gdpr-age-gate-title",bodySelector:"#gdpr-age-gate-body"}),this.showDialog=function(t,e){this.setCopy(e),this.open(),this.scribeImpression()},this.setCopy=function(t){t.errorCode===o.a.UserMustBeAlcoholAgeScreened?(this.$title.html(d),this.$body.html(f)):t.errorCode===o.a.CannotFollowFromCountry?(this.$title.html(d),this.$body.html(p)):t.errorCode===o.a.BirthdateRequired&&(this.$title.html(h),this.$body.html(u))},this.closeDialog=function(){this.$title.html(""),this.$body.html(""),this.close()},this.scribeImpression=function(){this.scribe({component:"age_gate_dialog",action:"impression"})},this.after("initialize",function(){this.$title=this.$node.find(this.attr.titleSelector),this.$body=this.$node.find(this.attr.bodySelector),this.on(document,"uiNeedsAgeGateDialog",this.showDialog),this.on(document,"uiNeedsGdprAgeGateDialog",this.showDialog),this.on("click",this.closeDialog)})}var n=i("0d4m"),o=i("2Doy"),a=i("DBjh"),r=i("UHc7"),c=i("3oDc"),l=Object(a.default)(s,r.a,c.a),h=Object(n.default)("Please update your profile first"),d=Object(n.default)("You can’t follow this account"),u=Object(n.default)("To follow this account, you’ll need to include your birth date on your profile, ensuring you meet minimum age requirements."),p=Object(n.default)("This account can’t be followed from your country."),f=Object(n.default)("You’re not old enough to follow this account.");e.a=l},fdtV:function(t,e,i){"use strict";function s(){this.defaultAttrs({lifelineAlertBtnSelector:".lifeline-alert-status-btn.is-tweet"}),this.sendLifelineAlertTweet=function(){this.sendTweet(),this.trigger("uiLifelineAlertsTweet")},this.cancelLifelineAlertTweet=function(){this.trigger("uiLifelineAlertsCancel")},this.around("confirmAndSendTweet",function(t){this.lifelineAlertMode?(this.trigger("uiLifelineAlertsImpression"),this.trigger("uiOpenConfirmDialog",{titleText:Object(n.default)("Send Twitter Alert"),bodyText:Object(n.default)("Are you sure you want to send a Twitter Alert to your followers?"),cancelText:Object(n.default)("Cancel"),submitText:Object(n.default)("Send"),action:"SendLifelineAlert"})):t()}),this.setLifelineAlertMode=function(t){this.lifelineAlertMode!==t&&(t?(this.select("lifelineAlertBtnSelector").addClass("enabled"),this.trigger("uiLifelineAlertsSelect")):this.select("lifelineAlertBtnSelector").removeClass("enabled"),this.focus(),this.lifelineAlertMode=t,this.detectUpdatedText(!0))},this.selectLifelineAlertAction=function(){this.setLifelineAlertMode(!this.lifelineAlertMode)},this.around("addHiddenText",function(t,e){return e=t(e),this.lifelineAlertMode&&(e+=this.lifelineAlertText),e}),this.before("clear",function(){this.setLifelineAlertMode(!1)}),this.after("initialize",function(){this.lifelineAlertMode=!1,this.lifelineAlertText=" #alert",this.on(this.attr.lifelineAlertBtnSelector,"click",this.selectLifelineAlertAction),this.on("uiSendLifelineAlertConfirm",this.sendLifelineAlertTweet),this.on("uiSendLifelineAlertCancel",this.cancelLifelineAlertTweet)})}var n=i("0d4m");e.a=s},fjSp:function(t,e,i){"use strict";function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function o(){this.defaultAttrs({attrIndex:"data-index",classActive:"active",classQuotedTweetLoading:"quotedTweet-loading",gifSupport:!0,hasQuotedTweetClass:"has-quotedTweet",videoSupport:!0,mediaCategoryPrefix:"tweet_",selectorDeleteTweetButton:".js-delete-tweet",selectorGeoPicker:".geo-picker",selectorRichEditor:".RichEditor",selectorShadowText:".tweet-box-shadow",selectorToolbar:".TweetBoxToolbar",selectorTweetForm:".tweet-form",selectorPictographText:".RichEditor-pictographText",selectorQuotedTweetContent:".QuotedTweet .content",tweetStormQuotedTweetType:"thread_quoted_tweet"});var t={opacity:"toggle",height:"toggle"};this.tweetBoxTransitionOptions=[t].concat(n(T.i.TWEETBOX)),this.toolBarTransitionOptions=[t].concat(n(T.i.TOOLBAR)),this.getIndex=function(){return Number(this.$node.attr(this.attr.attrIndex))},this.activate=function(t,e){var i=this;if(t.stopPropagation(),e&&e.transition){var s;this.showToolbar(!1),(s=this.$node.delay(T.i.DELAY)).animate.apply(s,n(this.tweetBoxTransitionOptions).concat([function(){return i.focus()}]))}else this.$node.show();e&&"status"in e&&(this.setVisibleText(e.status),this.$text.find(this.attr.selectorPictographText).length&&this.generatePictographsDeferred()),e&&"place_id"in e?this.initGeoPicker(e.place_id):this.initGeoPicker(),e&&"quotedTweetId"in e&&(this.on(document,"dataGotTweet",h.default.once(this.attachQuotedTweet)),this.on(document,"dataFailedToGetTweet",h.default.once(this.handleQuotedTweetFetchFailure)),this.toggleSpinner(!0),this.trigger(document,"uiGetTweet",{id:e.quotedTweetId,modal:this.attr.tweetStormQuotedTweetType,tweetBoxIndex:this.getIndex()})),e&&"mediaFileIds"in e&&this.trigger("uiRestorePreviouslyAttachedMedia",{fileIds:e.mediaFileIds}),e&&"currentPoll"in e&&"isValid"in e.currentPoll&&this.trigger("uiActivatePollComposer",{pollDataOverride:e.currentPoll})},this.toggleSpinner=function(t){this.$node.closest(this.attr.selectorTweetForm).toggleClass(this.attr.classQuotedTweetLoading,t)},this.successFromQuotedTweetFetch=function(t){return t&&"id"in t&&"tweet_html"in t&&"sourceEventData"in t&&t.sourceEventData.tweetBoxIndex===this.getIndex()&&t.sourceEventData.modal===this.attr.tweetStormQuotedTweetType},this.attachQuotedTweet=function(t,e){this.successFromQuotedTweetFetch(e)&&(this.$node.addClass(this.attr.hasQuotedTweetClass),this.toggleSpinner(!1),this.select("selectorQuotedTweetContent").empty().append(e.tweet_html),this.trigger("uiComposerDisableExclusiveAttachments"))},this.handleQuotedTweetFetchFailure=function(t,e){this.successFromQuotedTweetFetch(e)&&this.toggleSpinner(!1)},this.deactivate=function(t,e){this.hideToolbar(!1),this.$node.hide(),this.reset(),this.setCursorPosition()},this.deleteClicked=function(t){t.preventDefault(),this.getVisibleText().trim().length>0||this.hasMedia||this.hasPoll||this.hasAlert?this.trigger("uiOpenConfirmDialog",T.d):this.delete()},this.delete=function(){var t;this.trigger("uiTweetBoxDeleting",{index:this.getIndex()}),(t=this.$node.delay(T.i.DELAY)).animate.apply(t,n(this.tweetBoxTransitionOptions).concat([this.afterDeleted.bind(this)]))},this.afterDeleted=function(){this.trigger("uiTweetBoxDeleted"),this.reset()},this.initGeoPicker=function(t){var e=this.select("selectorGeoPicker");e.hasClass(this.attr.classActive)||r.a.attachTo(this.$node,{eventData:{scribeContext:{element:"geo_picker"}},restoreFocusOnClose:!0,skipFocusManager:!0}),t?e.trigger("uiGeoPickerChange",{placeId:t}):e.trigger("uiPrepareGeoPicker")},this.getTweetboxId=function(){return this.$node.attr("id")},this.reset=function(){this.trigger("uiClearUndoState"),this.setVisibleText(""),this.$node.removeClass(this.attr.hasQuotedTweetClass),this.select("selectorQuotedTweetContent").empty()},this.composerFocused=function(){var t=this.getIndex();this.trigger("uiTweetBoxFocused",{index:t})},this.mediaInfo=function(){return{hasPhoto:this.hasMedia&&!this.isGif&&!this.isVideo,hasGif:this.isGif,hasVideo:this.isVideo,gifInfo:this.foundMediaInfo}},this.updateTextData=function(t,e){var i=this.getIndex();this.trigger("uiTweetBoxChanged",k({index:i,text:this.addHiddenText(this.getVisibleText())},this.mediaInfo(),{hasPoll:this.hasPoll,hasAlert:this.hasAlert})),this.maybeTriggerTooltip(),this.select("selectorShadowText").val(e&&e.text||"")},this.lostFocus=function(t,e){var i=e&&e.transition;this.hideToolbar(i)},this.gotFocus=function(t,e){var i=e&&e.transition;this.showToolbar(i)},this.hideToolbar=function(t){if(t){var e;(e=this.$toolBar).animate.apply(e,n(this.toolBarTransitionOptions))}else this.$toolBar.hide()},this.showToolbar=function(t){if(t){var e;(e=this.$toolBar).animate.apply(e,n(this.toolBarTransitionOptions))}else this.$toolBar.show()},this.changeCursor=function(t,e){this.setCursorPosition(e.cursorPosition)},this.updateGeoLocationData=function(t,e){var i=void 0;"located"===e.state?i=e.place_id:"enabledTurnedOff"===e.state&&(i=""),this.trigger("uiTweetBoxChanged",k({index:this.getIndex(),placeId:i},this.mediaInfo()))},this.updateTaggedUsersData=function(){this.trigger("uiTweetBoxChanged",k({index:this.getIndex(),taggedUsers:this.taggedUsers},this.mediaInfo()))},this.restorePreviouslyAttachedMedia=function(t,e){var i=this;"object"===(void 0===e?"undefined":x(e))&&"object"===x(e.fileIds)&&e.fileIds.forEach(function(t){i.trigger("uiFileSelected",{fileId:t});var e=l.a.get(t);if("object"===(void 0===e?"undefined":x(e))){var s=e.advanced;e.isVideo&&s&&i.renderAdvancedVideoInfo(s)}})},this.refreshAdditionalMediaInfo=function(){var t={};this.hasMedia&&Object(c.a)(this.getTweetboxId()).some(function(t){return t.altText})&&(t.has_alt_text=!0),this.isVideo&&I.a.getDeciderValue("web_upload_video_advanced")&&Object(c.a)(this.getTweetboxId()).forEach(function(e){"object"===x(e.advanced)&&e.mediaId&&(t[e.mediaId]={title:e.advanced.title,description:e.advanced.description,embeddable:e.advanced.embeddable},e.advanced.ctaType&&(t[e.mediaId].call_to_actions=s({},e.advanced.ctaType,{url:e.advanced.ctaUrl})))}),Object.keys(t).length&&this.trigger("uiTweetBoxChanged",k({index:this.getIndex(),additionalMediaInfo:t},this.mediaInfo()))},this.after("initialize",function(){this.$toolBar=this.select("selectorToolbar"),this.initTextNode(),this.reset(),this.on("click",{selectorDeleteTweetButton:this.deleteClicked}),this.on("focusin",{selectorRichEditor:this.ignoreDuringFakeFocus(this.composerFocused)}),this.on("uiTextChanged uiPollActivated",this.updateTextData),this.on("dataGeoState",this.updateGeoLocationData),this.on("uiTaggedUsersUpdated",this.updateTaggedUsersData),this.on("uiTweetBoxActivate",this.activate),this.on("uiTweetBoxDeactivate",this.deactivate),this.on("uiTweetBoxLostFocus",this.lostFocus),this.on("uiTweetBoxGotFocus",this.gotFocus),this.on("uiTweetBoxChangeCursor",this.changeCursor),this.on("uiRemoveTweetFromThreadConfirm",this.delete),this.on(document,"dataNeedRefreshAdditionalMediaInfo",this.refreshAdditionalMediaInfo),this.on("uiRestorePreviouslyAttachedMedia",this.restorePreviouslyAttachedMedia)})}var a=i("DBjh"),r=i("8N88"),c=i("WKYg"),l=i("H6fk"),h=i("YzIt"),d=i("HpDd"),u=i("+HBl"),p=i("LcyA"),f=i("pUl/"),m=i("84/5"),g=i("4Oxf"),v=i("ZG5A"),b=i("tAXt"),w=i("LVMq"),S=i("CGr6"),C=i("MmTZ"),y=i("WS2j"),T=i("JFPI"),D=i("Nkyg"),I=i("IAMj"),x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=Object(a.default)(o,f.a,m.a,d.a,u.a,p.a,v.a,b.a,w.a,y.a,C.a,S.a,D.a,g.a)},fnNQ:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={"promptbird/templates/dismiss_button":i("02mS"),"promptbird/templates/icon":i("8QxQ"),"promptbird/templates/title":i("orcd"),"promptbird/templates/explanation":i("7SIb"),"promptbird/templates/call_to_action":i("hK7e"),"promptbird/templates/second_call_to_action":i("8T/I")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="PromptbirdPrompt PromptbirdPrompt--inline '),s.b(s.v(s.f("prompt_css_class",t,e,0))),s.b('" data-prompt-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('" data-prompt-intent="'),s.b(s.v(s.f("prompt_intent",t,e,0))),s.b('" data-prompt-intent-params="'),s.b(s.v(s.f("prompt_intent_params",t,e,0))),s.b('">\n'),s.b(s.rp("<promptbird/templates/dismiss_button0",t,e,"  ")),s.b(s.rp("<promptbird/templates/icon1",t,e,"  ")),s.b(s.rp("<promptbird/templates/title2",t,e,"  ")),s.b(s.rp("<promptbird/templates/explanation3",t,e,"  ")),s.b(s.rp("<promptbird/templates/call_to_action4",t,e,"  ")),s.b(s.rp("<promptbird/templates/second_call_to_action5",t,e,"  ")),s.b("</div>\n"),s.fl()},partials:{"<promptbird/templates/dismiss_button0":{name:"promptbird/templates/dismiss_button",partials:{},subs:{}},"<promptbird/templates/icon1":{name:"promptbird/templates/icon",partials:{},subs:{}},"<promptbird/templates/title2":{name:"promptbird/templates/title",partials:{},subs:{}},"<promptbird/templates/explanation3":{name:"promptbird/templates/explanation",partials:{},subs:{}},"<promptbird/templates/call_to_action4":{name:"promptbird/templates/call_to_action",partials:{},subs:{}},"<promptbird/templates/second_call_to_action5":{name:"promptbird/templates/second_call_to_action",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},fnWM:function(t,e,i){"use strict";(function(t){function s(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var n=i("0d4m"),o=i("DBjh"),a=i("a0ja"),r=i("AJAn"),c=i("JFPI"),l=i("fjSp"),h=i("cXIp"),d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.a=Object(o.default)(r.a,function(){this.defaultAttrs({selectorPermalinkOverlay:".PermalinkOverlay",selectorTweetstormContainer:".TweetstormDialog-content",selectorTweetstormBody:".modal-body",selectorTweetstormTitle:".modal-title",selectorTweetBoxes:".TweetstormDialog-tweet-box",selectorSendTweetstormButton:".js-send-tweets",selectorAddTweetButton:".js-add-tweet",selectorAriaIndexLabel:".aria-index-label",classInitialized:"initialized",classThreadedUp:"threaded-up",classThreadedDown:"threaded-down",classTweetBoxFocus:"is-tweet-box-focus",classDisabled:"disabled",classIsThread:"is-thread",classIsReply:"is-reply",attrIndex:"data-index",attrTooltipText:"data-original-title"}),this.$focusedTweetBox=void 0,this.replyStatusId=void 0,this.init=function(t,e){var i=this;this._orderIndex();var s=void 0,n=void 0,o=void 0,r=void 0;"object"===(void 0===e?"undefined":u(e))&&(this.replyStatusId=e.previousStatusIdInThread&&e.previousStatusIdInThread.toString(),n=e.quotedTweetId&&e.quotedTweetId.toString(),o=e.quotedUserScreenName,r=e.mediaFileIds,s=e.currentPoll);var c=e&&"string"==typeof e.tweetText?e.tweetText:"";a.a.restore([{currentPoll:s,mediaFileIds:r,quotedTweetId:n,quotedUserScreenName:o,replyStatusId:this.replyStatusId,tweetText:c}]),this._renderData(),this.$focusedTweetBox&&e&&void 0!==e.cursorPosition&&this.$focusedTweetBox.trigger("uiTweetBoxChangeCursor",{cursorPosition:e.cursorPosition}),e&&e.addAnotherTweet&&setTimeout(function(){return i.addTweet()},0)},this._renderData=function(){for(var t=0;t<a.a.length;t++){var e=this.$tweetBoxes.eq(t),i=a.a.getTweet(t);i.tweetBox=e.attr("id"),this._activateTweetBox(e,!1,d({},i.tweetData,i.initData))}this._changeFocus(this.$tweetBoxes.eq(a.a.length-1),c.g.SHOW_ONLY,!1),this._validations()},this._activateTweetBox=function(t,e,i){var s=Object.assign({},i);if(!t.hasClass(this.attr.classInitialized)){var n=h.a.getConfig();this.attachChild(l.a,t,{composeAltText:this.attr.composeAltText,eventData:{scribeContext:{component:"tweet_box_dialog"}},hashflagsEnabled:!0,thumbnailSize:"large",typeaheadData:this.attr.typeaheadData,twitterTextOptions:n,maxLength:n.maxWeightedTweetLength}),t.addClass(this.attr.classInitialized)}t.trigger("uiTweetBoxActivate",d({transition:e},s))},this._validations=function(){this._validateContainerClasses(),this._validateSendButton(),this._validateAddTweetButton(),this._threadedAvatar()},this._validateSendButton=function(){this.$sendTweetstormButton.toggleClass(this.attr.classDisabled,!a.a.isValid).prop("disabled",!a.a.isValid)},this._validateAddTweetButton=function(){var t=a.a.length>=this.$tweetBoxes.length;t?this.$addTweetButton.attr(this.attr.attrTooltipText,Object(n.default)("You've reached the limit")):this.$addTweetButton.attr(this.attr.attrTooltipText,Object(n.default)("Add another Tweet"));var e=t||a.a.hasEmpty;this.$addTweetButton.toggleClass(this.attr.classDisabled,e).prop("disabled",a.a.hasEmpty)},this._validateContainerClasses=function(){var t=a.a.length>1;this.$tweetstormContainer.toggleClass(this.attr.classIsThread,t),this.$tweetstormContainer.toggleClass(this.attr.classIsReply,!!this.replyStatusId),this._updateTitle(t,!!this.replyStatusId)},this._updateTitle=function(t,e){e?this.$tweetstormTitle.text(t?Object(n.default)("Continue your thread"):Object(n.default)("Add another Tweet")):this.$tweetstormTitle.text(t?Object(n.default)("Compose new thread"):Object(n.default)("Compose new Tweet"))},this._threadedAvatar=function(){for(var t=0;t<a.a.length;t++){var e=this.$tweetBoxes.eq(t),i=0===t,s=t===a.a.length-1;e.toggleClass(this.attr.classThreadedUp,!i||!!this.replyStatusId).toggleClass(this.attr.classThreadedDown,!s)}},this._orderIndex=function(){var e=this;this.$tweetBoxes=this.select("selectorTweetBoxes"),this.$tweetBoxes.each(function(i,s){t(s).attr(e.attr.attrIndex,i),t(s).find(e.attr.selectorAriaIndexLabel).text(Object(n.default)("Tweet {{index}}",{index:(i+1).toString()}))})},this._changeFocus=function(t,e,i){!this.$focusedTweetBox||e!==c.g.HIDE_AND_SHOW&&e!==c.g.HIDE_ONLY||this.$focusedTweetBox.trigger("uiTweetBoxLostFocus",{transition:i}),e!==c.g.HIDE_AND_SHOW&&e!==c.g.SHOW_ONLY||t.trigger("uiTweetBoxGotFocus",{transition:i}),this.$tweetBoxes.removeClass(this.attr.classTweetBoxFocus),this.$focusedTweetBox=t,this.$focusedTweetBox.addClass(this.attr.classTweetBoxFocus)},this.onTweetBoxChanged=function(t,e){var i=e.index;if(i<a.a.length){var s=a.a.getTweet(i);"text"in e&&(s.tweetText=e.text),"placeId"in e&&(s.placeId=e.placeId),e.hasPhoto?s.mediaFlag=c.h.PHOTO:e.hasGif?(s.mediaFlag=c.h.GIF,s.gifInfo=e.gifInfo):e.hasVideo?s.mediaFlag=c.h.VIDEO:s.mediaFlag=c.h.NONE,"hasPoll"in e&&(s.pollFlag=e.hasPoll),"hasAlert"in e&&(s.alertFlag=e.hasAlert),"taggedUsers"in e&&(s.taggedUsers=e.taggedUsers),"additionalMediaInfo"in e&&(s.additionalMediaInfo=e.additionalMediaInfo),this.trigger("uiTweetstormDBUpdate"),this._validateSendButton(),this._validateAddTweetButton()}},this.onTweetBoxDeleting=function(t,e){var i=e.index,s=i<a.a.length-1?i+1:a.a.length-2;i>=a.a.length-1&&this.$tweetBoxes.eq(s).removeClass(this.attr.classThreadedDown),this._changeFocus(this.$tweetBoxes.eq(s),c.g.SHOW_ONLY,!0),a.a.deleteTweet(i),this._validateContainerClasses(),this.trigger("uiTweetstormDBUpdate")},this.onTweetBoxDeleted=function(e,i){var s=t(e.target),n=this.$tweetBoxes.eq(a.a.length);s.insertAfter(n),this._orderIndex(),this._validations()},this.onTweetBoxFocused=function(t,e){var i=this.$tweetBoxes.eq(e.index);i.is(this.$focusedTweetBox)||this._changeFocus(i,c.g.HIDE_AND_SHOW,!0)},this.addTweet=function(){if(!this.$addTweetButton.hasClass(this.attr.classDisabled)){var t=Number(this.$focusedTweetBox.attr(this.attr.attrIndex)),e=this.$tweetBoxes.eq(a.a.length),i=a.a.getTweet(t).tweetData.place_id,n=t===a.a.length-1;if(a.a.addTweet(t+1).tweetBox=e.attr("id"),e.insertAfter(this.$focusedTweetBox),this._orderIndex(),this._validations(),this._activateTweetBox(e,!0,{place_id:i}),this._changeFocus(e,c.g.HIDE_ONLY,!0),n){var o;(o=this.$tweetstormBody).animate.apply(o,[{scrollTop:this.$tweetstormBody[0].scrollHeight}].concat(s(c.i.TWEETBOX)))}}},this.permalinkVisible=function(){return t(this.attr.selectorPermalinkOverlay).filter(":visible").length>0},this.sendTweetstorm=function(){this.trigger(document,"uiTweetstormSend",{reloadPageOnSuccess:this.permalinkVisible()})},this.closeDropdowns=function(){this.$tweetBoxes.trigger("uiDropdownCloseOnScroll")},this.sendConfirmedTweetstorm=function(){a.a.isValid&&(a.a.hasAlert?this.trigger("uiOpenConfirmDialog",c.a):this.sendTweetstorm())},this.restoreFromUploadFailure=function(e,i){var s=this,n=i||{},o=n.recoverFromIndex,r=void 0===o?0:o,l=n.initialLength,h=void 0===l?a.a.length:l;this.$tweetBoxes.slice(0,r).each(function(e,i){t(i).trigger("uiTweetBoxDeactivate"),t(i).insertAfter(s.$tweetBoxes.eq(h-1))}),this._orderIndex(),this._changeFocus(this.$tweetBoxes.eq(0),c.g.HIDE_AND_SHOW,!0),this.replyStatusId=i.previousStatusIdInThread},this.restoreFromDraft=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._orderIndex(),this.reset(),e&&Array.isArray(e.tweets)&&e.tweets.length>0?a.a.restore(e.tweets):a.a.reset(),this._renderData()},this.reset=function(){a.a.reset(),this.select("selectorTweetBoxes").trigger("uiTweetBoxDeactivate"),this.$focusedTweetBox=void 0,this.replyStatusId=void 0},this.after("initialize",function(t,e){this.$tweetstormContainer=this.select("selectorTweetstormContainer"),this.$tweetstormBody=this.select("selectorTweetstormBody"),this.$tweetstormTitle=this.select("selectorTweetstormTitle"),this.$addTweetButton=this.select("selectorAddTweetButton"),this.$sendTweetstormButton=this.select("selectorSendTweetstormButton"),this.reset(),this.on("uiTweetstormInit",this.init),this.on(document,"uiTweetstormAbandon dataTweetstormUploadSuccess",this.reset),this.on("uiTweetstormRestoreOnError",this.restoreFromUploadFailure),this.on("uiTweetstormRestoreDraft",this.restoreFromDraft),this.on(this.$addTweetButton,"click",this.addTweet),this.on(this.$tweetstormBody,"scroll",this.closeDropdowns),this.on(this.$sendTweetstormButton,"click",this.sendConfirmedTweetstorm),this.on("uiShortcutCmdEnter",this.sendConfirmedTweetstorm),this.on("uiSendLifelineAlertConfirm",this.sendTweetstorm),this.on("uiTweetBoxChanged",this.onTweetBoxChanged),this.on("uiTweetBoxDeleting",this.onTweetBoxDeleting),this.on("uiTweetBoxDeleted",this.onTweetBoxDeleted),this.on("uiTweetBoxFocused",this.onTweetBoxFocused)})})}).call(e,i("4kSj"))},fygb:function(t,e,i){"use strict";(function(t){function i(e){e=e||{};var n={urls:{events:e.urls&&e.urls.events||s.urls.events,subscribe:e.urls&&e.urls.subscribe||s.urls.subscribe,unsubscribe:e.urls&&e.urls.unsubscribe||s.urls.unsubscribe},retry:{enabled:void 0===(e.retry&&e.retry.enabled)?s.retry.enabled:e.retry.enabled,backoffFactor:void 0===(e.retry&&e.retry.backoffFactor)?s.retry.backoffFactor:e.retry.backoffFactor,maxDelay:void 0===(e.retry&&e.retry.maxDelay)?s.retry.maxDelay:e.retry.maxDelay},resubPreemptDuration:e.resubPreemptDuration||s.resubPreemptDuration};this.onMessageCallback=n.message,this.onErrorCallback=n.error;var o=void 0,a=[],r={},c=void 0,l=void 0,h=void 0,d=!1;this.updateSessionData=function(t){r.sessionId=t.session_id,r.ttl=t.subscription_ttl_millis},this.newEventSource=function(t,e){return new EventSource(t,e)},this.hasSubscribedTopics=function(){return!!a.length},this.openConnection=function(){if(this.hasSubscribedTopics()){var t="?topic="+a.map(encodeURIComponent).join(",");this.close(),o=this.newEventSource(n.urls.events+t,{withCredentials:!0}),o.onmessage=this.messageHandler.bind(this),o.onerror=this.errorHandler.bind(this)}},this.messageHandler=function(t){var e=this.tryParseJSON(t.data);if(e)switch(e.topic){case"/system/config":this.updateSessionData(e.payload.config),d&&this.refreshSubscriptions(),this.resetRetryCount();break;default:this.onMessageCallback&&this.onMessageCallback(e)}},this.errorHandler=function(t){this.close(),this.onErrorCallback&&this.onErrorCallback(t),this.retry()},this.tryParseJSON=function(t){try{return JSON.parse(t)}catch(t){return}},this.subUnsubErrorHandler=function(t){if(400===t.status){var e=this.tryParseJSON(t.responseText),s=e&&e.errors&&e.errors[0];s&&s.code===i.API_ERROR_CODES.SESSION_NOT_FOUND&&this.retry()}},this.resetRetryCount=function(){c=void 0},this.retry=function(){if(n.retry.enabled){c=void 0===c?0:c+1;var t=Math.random()*(Math.pow(2,c)-1)*n.retry.backoffFactor,e=Math.min(t,n.retry.maxDelay);l=setTimeout(this.openConnection.bind(this),e)}},this.refreshSubscriptions=function(){var e=this;return this.connectionStatus()===i.CONNECTING?void(d=!0):r.sessionId&&this.connectionStatus()!==i.CLOSED?void(a.length&&(d=!1,t.ajax({method:"POST",url:n.urls.subscribe,data:{session_id:r.sessionId,topic:a.join(",")},headers:{"LivePipeline-Session":r.sessionId},xhrFields:{withCredentials:!0},success:function(){e.resetRetryCount(),clearTimeout(h),h=setTimeout(e.refreshSubscriptions.bind(e),Math.max(0,r.ttl-n.resubPreemptDuration))},error:this.subUnsubErrorHandler.bind(this)}))):void this.openConnection()},this.subscribe=function(t,e){var s=-1===a.indexOf(t),n=!e&&(s||this.connectionStatus()===i.CLOSED);s&&a.push(t),n&&this.refreshSubscriptions()},this.unsubscribe=function(t){-1!==a.indexOf(t)&&(a=a.filter(function(e){return t!==e}),r.sessionId&&(this.makeUnsubRequest(t),a.length||this.close()))},this.makeUnsubRequest=function(e){t.ajax({method:"POST",url:n.urls.unsubscribe,data:{session_id:r.sessionId,topic:e},xhrFields:{withCredentials:!0}})},this.onMessage=function(t){this.onMessageCallback=t},this.onError=function(t){this.onErrorCallback=t},this.connectionStatus=function(){return o?o.readyState:i.CLOSED},this.reconnect=this.openConnection.bind(this),this.close=function(){r.sessionId&&a.forEach(this.makeUnsubRequest.bind(this)),o&&o.close(),r={},o=void 0,clearTimeout(l),clearTimeout(h)}}var s={urls:{events:"https://api.twitter.com/live_pipeline/events",subscribe:"/i/live_pipeline/subscribe",unsubscribe:"/i/live_pipeline/unsubscribe"},retry:{enabled:!0,backoffFactor:500,maxDelay:12e4},resubPreemptDuration:25e3};i.isSupported=function(){return"EventSource"in window},i.OPEN=i.isSupported()&&EventSource.OPEN,i.CLOSED=i.isSupported()&&EventSource.CLOSED,i.CONNECTING=i.isSupported()&&EventSource.CONNECTING,i.API_ERROR_CODES={SESSION_NOT_FOUND:392};var n=function(t){var e=new i(t);this.subscribe=e.subscribe.bind(e),this.unsubscribe=e.unsubscribe.bind(e),this.connectionStatus=e.connectionStatus.bind(e),this.reconnect=e.reconnect.bind(e),this.close=e.close.bind(e),this.onMessage=e.onMessage.bind(e),this.onError=e.onError.bind(e),this.__privateInstance=e};n.isSupported=i.isSupported,n.OPEN=i.OPEN,n.CLOSED=i.CLOSED,n.CONNECTING=i.CONNECTING,n.API_ERROR_CODES=i.API_ERROR_CODES,n.__privateObject=i,e.a=n}).call(e,i("4kSj"))},"g/am":function(t,e,i){"use strict";function s(){n.default.mixin(this,[a.a]),this.triggerGotImageData=function(t){var e=t.map(function(t){return t.fileId});this.trigger("uiGotImageData",{fileIds:e})},this.captureImageData=function(t,e){for(var i={mediaCategoryPrefix:this.attr.mediaCategoryPrefix},s=[],n=0;n<e.files.length;n++){var a=e.files[n],r=a.name;s.push(o.a.getFileInfo(r,a,i).catch(function(t){return null}))}Promise.all(s).then(function(t){return t.filter(function(t){return!!t})}).then(this.triggerGotImageData.bind(this))},this.after("initialize",function(){this.on("uiDrop",this.captureImageData)})}var n=i("q9/C"),o=i("+dWm"),a=i("859Q");e.a=s},g2Xo:function(t,e,i){"use strict";function s(){this.getFollowSearchFollowStatus=function(t,e){var i=function(t){var e=void 0;try{e=t.timeline.instructions[0].addEntries.entries.length>0}catch(t){e=!1}this.trigger("dataGetFollowSearchStatusSuccess",{isFollowing:e})};this.getFollowedQueries(e,i)},this.getFollowedSearchesList=function(t,e){var i=function(t){try{var e=t.timeline.instructions[0].addEntries.entries.reverse();e.length>0&&this.trigger("dataGetFollowSearchListSuccess",{entries:e})}catch(t){}};this.getFollowedQueries(e,i)},this.getFollowedQueries=function(t,e){this.get({url:"https://api.twitter.com/2/follow_search/show.json",data:t,useOAuthSessionAuth:!0,success:e.bind(this),error:"dataFollowSearchGetListFailure"})},this.followSearch=function(t,e){function i(t){try{var e=t.timeline.instructions[0].addEntries.entries;e.length>0&&(this.trigger("dataUpdateFollowSearchButtonState",{isFollowing:!0}),this.trigger("dataAddFollowSearchToTypeaheadList",{entries:e}),this.trigger("dataAddFollowSearchSuccess",t))}catch(t){}}function s(){this.trigger("dataUpdateFollowSearchButtonState",{isFollowing:!1})}this.post({url:"https://api.twitter.com/2/follow_search/create.json",data:{query:e.query,t:"HOME_TIMELINE"},eventData:{scribeComponent:e.scribeComponent,scribeAction:"add"},useOAuthSessionAuth:!0,success:i.bind(this),error:s.bind(this)})},this.unfollowSearch=function(t,e){function i(t){this.trigger("dataUpdateFollowSearchButtonState",{isFollowing:!1}),this.trigger("dataRemoveFollowSearchFromTypeaheadList",{query:e.query}),this.trigger("dataRemoveFollowSearchSuccess",t)}function s(){this.trigger("dataUpdateFollowSearchButtonState",{isFollowing:!0})}this.post({url:"https://api.twitter.com/2/follow_search/destroy.json",acceptEmptyStringAsJsonResponse:!0,data:e,eventData:{scribeComponent:e.scribeComponent,scribeAction:"remove"},useOAuthSessionAuth:!0,success:i.bind(this),error:s.bind(this)})},this.after("initialize",function(){this.on("dataGetFollowSearchList",this.getFollowedSearchesList),this.on("uiGetFollowSearchStatus",this.getFollowSearchFollowStatus),this.on("uiAddFollowSearch",this.followSearch),this.on("uiRemoveFollowSearch",this.unfollowSearch)})}var n=i("DBjh"),o=i("VtWx");e.a=Object(n.default)(s,o.a)},gEW7:function(t,e,i){"use strict";function s(){this.defaultAttrs({limit:10,remoteDebounceInterval:300,remoteThrottleInterval:300,outstandingRemoteRequestCount:0,queuedRequestData:!1,outstandingRemoteRequestMax:6,useThrottle:!1,tweetContextEnabled:!1,topicsWithFiltersEnabled:!1}),this.triggerSuggestionsEvent=function(t,e,i){this.trigger("dataTypeaheadSuggestionsResults",{suggestions:i,queryData:e,id:t})},this.hasAnySuggestions=function(t,e){return e.some(function(e){return t[e]&&t[e].length})},this.needsRemoteRequest=function(t,e){return e.some(function(e){return this.datasources[e]&&this.datasources[e].requiresRemoteSuggestions&&this.datasources[e].requiresRemoteSuggestions(t)},this)},this.getLocalSuggestions=function(t,e,i){function s(){++o===e.length&&i(n)}var n={},o=0;e.forEach(function(e){this.datasources[e]?this.datasources[e].getLocalSuggestions(t,function(t){t.length&&(t.forEach(function(t){return t.origin="prefetched"}),n[e]=t),s()}):s()},this)},this.processRemoteSuggestions=function(t){this.adjustRequestCount(-1);var e=t.sourceEventData,i=e.suggestions||{};e.datasources.forEach(function(s){var n=s.processRemoteSuggestions(e,t,i);if(n[s.attr.id]&&n[s.attr.id].length){for(var o in n)n[o].forEach(function(t){return t.origin=t.origin||"remote"});e.suggestions[s.attr.id]=n[s.attr.id]}},this),this.processSuggestionsByDataset(i),this.triggerSuggestionsEvent(e.id,e.queryData,i),this.makeQueuedRemoteRequestIfPossible()},this.getRemoteSuggestions=function(t,e,i,s){e&&this.needsRemoteRequest(e,s)&&(this.request[t]||(this.attr.useThrottle?this.request[t]=a.default.throttle(this.splitRemoteRequests.bind(this),this.attr.remoteThrottleInterval):this.request[t]=a.default.debounce(this.splitRemoteRequests.bind(this),this.attr.remoteDebounceInterval)),0===e.query.indexOf("@")&&"COMPOSE"===e.typeaheadSrc&&(e.query=e.query.substring(1),e.atSignRemoved=!0),this.request[t](t,e,i,s))},this.makeQueuedRemoteRequestIfPossible=function(){if(this.attr.outstandingRemoteRequestCount===this.attr.outstandingRemoteRequestMax-1&&this.attr.queuedRequestData){var t=this.attr.queuedRequestData;this.getRemoteSuggestions(t.id,t.queryData,t.suggestions,t.datasources),this.attr.queuedRequestData=!1}},this.adjustRequestCount=function(t){this.attr.outstandingRemoteRequestCount+=t},this.canMakeRemoteRequest=function(t){return this.attr.outstandingRemoteRequestCount<this.attr.outstandingRemoteRequestMax||(this.attr.queuedRequestData=t,!1)},this.processRemoteRequestError=function(){this.adjustRequestCount(-1),this.makeQueuedRemoteRequestIfPossible()},this.splitRemoteRequests=function(t,e,i,s){var n={};s.forEach(function(t){if(this[t]&&this[t].requiresRemoteSuggestions&&this[t].requiresRemoteSuggestions(e)){var i=this[t];n[i.attr.remotePath]?n[i.attr.remotePath].push(i):n[i.attr.remotePath]=[i]}},this.datasources);for(var o in n){this.executeRemoteRequest(t,e,i,n[o]);break}},this.executeRemoteRequest=function(t,e,i,s){var n={id:t,queryData:e,suggestions:i,datasources:s};this.canMakeRemoteRequest(n)&&((!this.attr.tweetContextEnabled||e.tweetContext&&e.tweetContext.length>1e3)&&(e.tweetContext=void 0),this.adjustRequestCount(1),this.get({url:s[0].attr.remotePath,data:{q:e.query,context_text:e.tweetContext,count:this.attr.limit,result_type:s.map(function(t){return t.attr.remoteType}).join(","),filters:this.attr.topicsWithFiltersEnabled,src:e.typeaheadSrc},eventData:n,success:this.processRemoteSuggestions.bind(this),error:this.processRemoteRequestError.bind(this)}))},this.truncateTopicsWithRecentSearches=function(t){if(t.topics&&t.recentSearches){var e=t.recentSearches.length,i=4-e;t.topics=t.topics.slice(0,i)}},this.dedupSuggestions=function(t,e,i){function s(t){var e=t.topic||t.name;return!n[e.toLowerCase()]}if(i[t]&&function(){return e.some(function(t){return t in i})}()){var n={};i[t].forEach(function(t){var e=t.name||t.topic;n[e.toLowerCase()]=!0}),e.forEach(function(t){t in i&&(i[t]=i[t].filter(s))})}},this.processSuggestionsByDataset=function(t){this.dedupSuggestions("recentSearches",["topics"],t),this.truncateTopicsWithRecentSearches(t)},this.getSuggestions=function(t,e){var i=this;if(void 0===e)throw"No parameters specified";if(!e.datasources)throw"No datasources specified";if(void 0===e.queryData)throw"No query data specified";if(void 0===e.queryData.query)throw"No query specified";if(!e.id)throw"No id specified";this.getLocalSuggestions(e.queryData,e.datasources,function(t){i.processSuggestionsByDataset(t);var s="@"!==e.queryData.query&&i.needsRemoteRequest(e.queryData,e.datasources);!i.hasAnySuggestions(t,e.datasources)&&s||i.triggerSuggestionsEvent(e.id,e.queryData,t),s&&i.getRemoteSuggestions(e.id,e.queryData,t,e.datasources)})},this.getGlobalDatasources=function(){return x},this.setGlobalDatasources=function(t){x=t},this.addSynchronousDatasource=function(t,e,i){var s=i[e]||{};this.isDatasourceEnabled(e)&&(x.hasOwnProperty(e)?this.datasources[e]=x[e]:x[e]=this.datasources[e]=new t(I({},s,{id:e})),this.setupEventListeners(e))},this.addAsynchronousDatasource=function(t){var e=this,i=t.datasource;t=t||{};var s=t.dsName,n=this.componentOptions[s]||{},o=new i(I({},n,{id:s}),t);return o.initialize().then(function(t){return x[s]=e.datasources[s]=o,t})},this.initializeLocalData=function(t){this.addDatasourcesNotUsingIndexedDB();var e=this.shouldUseIndexedDB()?this.addAsynchronousDatasources():this.addSynchronousDatasources(),i=this.addDMTypeaheadDatasources();Promise.all([e,i]).then(t,t)},this.isDatasourceEnabled=function(t){return!!(this.componentOptions[t]||{}).enabled},this.isBrowserSafari=function(){return Object(n.a)().safari},this.shouldUseIndexedDB=function(){return y.a.isSupported()&&this.attr.useIndexedDB&&!this.isBrowserSafari()},this.addAsync=function(t){var e=arguments,i=t.dsName,s=t.dbName,n=t.datasource,o=this;return Object(D.a)({title:"Typeahead ("+i+")",enabled:window.DEBUG&&window.DEBUG.enabled},new Promise(function(t,a){o.isDatasourceEnabled(i)?o.addAsynchronousDatasource({dbName:s,dsName:i,datasource:n,indexedDBWrapper:T.a}).then(function(e){o.setupEventListeners(i),o.addDBHandleToGlobals(s,e),t([i,s,e])}).catch(function(){o.indexedDBInitializationFailed=!0,a(e)}):t()}))},this.addDBHandleToGlobals=function(t,e){e&&(window.globalIndexedDBs[t]=e)},this.addDMTypeaheadDatasources=function(){return this.addAsync({dsName:"dmConversations",dbName:"dm_typeahead",datasource:u.a})},this.addAsynchronousDatasources=function(){var t=this;return this.pendingAsyncDatasources=this.addAsync({dsName:"accounts",dbName:"accounts",datasource:d.a}).then(function(){return t.addAsync({dsName:"dmAccounts",dbName:"accounts",datasource:d.a})}).then(function(){return t.addAsync({dsName:"mediaTagAccounts",dbName:"accounts",datasource:d.a})})},this.addDatasourcesNotUsingIndexedDB=function(){this.addSynchronousDatasource(p.a,"savedSearches",this.componentOptions),this.addSynchronousDatasource(f.a,"followedSearches",this.componentOptions),this.addSynchronousDatasource(v.a,"topics",this.componentOptions),this.addSynchronousDatasource(v.a,"hashtags",a.default.merge(this.componentOptions,{hashtags:{remoteType:"hashtags"}},!0)),this.addSynchronousDatasource(b.a,"trendLocations",this.componentOptions),this.addSynchronousDatasource(S.a,"selectedUsers",this.componentOptions),this.addSynchronousDatasource(C.a,"prefillUsers",this.componentOptions),this.addSynchronousDatasource(m.a,"recentSearches",this.componentOptions),this.addSynchronousDatasource(w.a,"concierge",this.componentOptions)},this.addSynchronousDatasources=function(){return this.addSynchronousDatasource(h.a,"accounts",this.componentOptions),this.addSynchronousDatasource(h.a,"dmAccounts",this.componentOptions),this.addSynchronousDatasource(h.a,"mediaTagAccounts",this.componentOptions),Promise.resolve()},this.possiblyScribeIndexedDB=function(){if(this.shouldUseIndexedDB()){var t=this.indexedDBInitializationFailed?"failure":"success";this.scribe({component:"indexeddb",action:t})}},this.after("initialize",function(t,e){var i=this;this.datasources={},this.request={},this.componentOptions=e,this.initializeLocalData(function(){i.on("uiNeedsTypeaheadSuggestions",i.getSuggestions),i.possiblyScribeIndexedDB()})})}var n=i("RW6J"),o=i("DBjh"),a=i("YzIt"),r=i("VtWx"),c=i("HzyY"),l=i("3oDc"),h=i("1qzW"),d=i("G7MZ"),u=i("1ihI"),p=i("Bz2s"),f=i("D6Di"),m=i("iN+x"),g=i("TcEO"),v=i("z8Pp"),b=i("JhoL"),w=i("pAFG"),S=i("OYls"),C=i("aZ36"),y=i("b6Cp"),T=i("3i53"),D=i("B55N"),I=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};window.globalIndexedDBs={};var x={};e.a=Object(o.default)(s,r.a,c.a,g.a,l.a)},gUWx:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({copyFoundMediaLinkDialogSelector:"#copy-found-media-link-dialog",foundMediaLinkDestinationSelector:".found-media-link-destination"}),this.openDialog=function(e,i){var s=o.a.get(i.fileId);if(s){t(this.attr.copyFoundMediaLinkDialogSelector).remove();var n={attribution_name:s.attribution.name,details_url:s.detailsUrl},a=c.a.render(n);this.$dialogContainer=t(a).appendTo("body"),this.$dialog=this.$dialogContainer.find(this.attr.modalSelector),this.open(),this.selectLink()}},this.after("afterClose",function(){this.$dialogContainer.remove(),this.$dialog=t(),this.$dialogContainer=t()}),this.selectLink=function(){this.select("foundMediaLinkDestinationSelector").focus().select()},this.after("initialize",function(){this.on("click",{foundMediaLinkDestinationSelector:this.selectLink}),this.on(document,"uiNeedsCopyFoundMediaDialog",this.openDialog)})}var n=i("DBjh"),o=i("H6fk"),a=i("UHc7"),r=i("RQvs"),c=i.n(r),l=Object(n.default)(a.a,s);e.a=l}).call(e,i("4kSj"))},ggwQ:function(t,e,i){"use strict";function s(){this.getFeedbackItem=function(t){return{id:t,item_type:r.a.feedbackRequest}},this.scribeFeedbackDismiss=function(t,e){e&&this.scribe({component:this.getFeedbackComponent[e.cardName],element:e.currentView,action:"dismiss"},{items:[this.getFeedbackItem(e.feedbackId)]})},this.after("initialize",function(){this.getFeedbackComponent={},this.getFeedbackComponent[c.a.feedbackNpsCardName]=c.a.feedbackNpsScribeComponentName,this.getFeedbackComponent[c.a.feedbackCsatCardName]=c.a.feedbackCsatScribeComponentName,this.on(document,"uiB2CFeedbackDismiss",this.scribeFeedbackDismiss)})}var n=i("DBjh"),o=i("3oDc"),a=i("Vuuo"),r=i("rbkv"),c=i("mPc1");e.a=Object(n.default)(s,o.a,a.a)},"grs/":function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMQuickReply" data-quick-reply-id="'),s.b(s.v(s.f("id",t,e,0))),s.b('" role="region" aria-label="Quick Reply options" aria-atomic="true" aria-live="polite" aria-relevant="all">\n  <div class="DMQuickReply-options">\n'),s.s(s.f("options",t,e,1),t,e,0,214,745,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('      <div class="DMQuickReply-optionItem" data-option-id="'),i.b(i.v(i.f("id",t,e,0))),i.b('" data-option-text="'),i.b(i.v(i.f("label",t,e,0))),i.b('"'),i.s(i.f("action",t,e,1),t,e,0,321,349,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(' data-action-name="'),i.b(i.v(i.f("name",t,e,0))),i.b('"')}),t.pop()),i.b('>\n        <button\n          class="DMQuickReply-optionText"\n          type="button"\n          title="'),i.b(i.v(i.f("label",t,e,0))),i.s(i.f("description",t,e,1),t,e,0,486,494,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(" - "),i.b(i.v(i.d(".",t,e,0)))}),t.pop()),i.b('"\n        >\n          <span class="DMQuickReply-labelText">'),i.b(i.v(i.f("label",t,e,0))),i.b("</span>\n"),i.s(i.f("description",t,e,1),t,e,0,612,693,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <span class="DMQuickReply-optionDescription">'),i.b(i.v(i.d(".",t,e,0))),i.b("</span>\n")}),t.pop()),i.b("        </button>\n      </div>\n")}),t.pop()),s.b("  </div>\n</div>\n"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},gyvJ:function(t,e,i){"use strict";function s(){this.defaultAttrs({promptType:"dashboard_profile"}),this.insertPrompt=function(t){this.$node.html(t.html)}}var n=i("k7B4"),o=i("bN2o");e.a=n.a.mixin(s,o.a)},"h3U/":function(t,e,i){var s;void 0!==(s=function(){var t=1,e=3,i=4,s=1,n={FILE_TOO_LARGE:2,INTERNAL_ERROR:131,INVALID_MEDIA:1,RATE_LIMIT:88,TIMEOUT:67,UNSUPPORTED_MEDIA:3,ZERO_FILE_LENGTH:4},o={0:n.INTERNAL_ERROR,1:n.INVALID_MEDIA,2:n.FILE_TOO_LARGE,3:n.UNSUPPORTED_MEDIA,4:n.TIMEOUT};return function(a,r){function c(){d(),P=0,k=null,M={},U=j,B=0,R=0,V=!1,L&&(L.abort(),L=null)}function l(){if(O){$="uploading";var t="&total_bytes="+O+"&media_type="+encodeURIComponent(E);M.extraInitParams&&(t+=M.extraInitParams),x("POST","INIT",t,null,h,C,s)}else C({error:{code:n.ZERO_FILE_LENGTH}})}function h(e){P===t&&(k=e.media_id_string,u(e.expires_after_secs),p())}function d(){N&&(clearTimeout(N),N=null)}function u(t){if(t){d();var e=Math.min(2147483647,1e3*t);N=setTimeout(function(){C({error:{code:n.TIMEOUT}}),I("NONE","timeout"),c()},e)}}function p(){if(R===O)m();else{F=Math.min(U,O-R);var t=a.webkitSlice||a.mozSlice||a.slice,e=t.call(a,R,R+F),i=new FormData;i.append("media",e),x("POST","APPEND","&media_id="+k+"&segment_index="+B,i,f,C,s)}}function f(){P===t&&(B++,R+=F,T(y()),p())}function m(){if(M.pauseBeforeFinalize)P=2;else{V=!0;var t="&media_id="+k;M.trimRanges&&(t+="&trim_ranges="+encodeURIComponent(M.trimRanges)),/^video\//.test(E)&&(t+="&allow_async=true"),t+=M.extraFinalizeParams||"",x("POST","FINALIZE",t,null,b,C,s)}}function g(){$="uploading";var t="&source_url="+encodeURIComponent(M.sourceUrl);M.mediaType&&(t+="&media_type="+encodeURIComponent(M.mediaType)),M.mediaCategory&&(t+="&media_category="+encodeURIComponent(M.mediaCategory)),t+=M.extraInitParams||"",t+=M.extraFinalizeParams||"",x("POST","INIT",t,null,v,C,s)}function v(t){k=t.media_id_string,w()}function b(t){u(t.expires_after_secs);var e=t.processing_info,i=0;if(!e)return void S(t);switch(e.state){case"pending":$="waiting";break;case"in_progress":$="processing",i=e.progress_percent;break;case"succeeded":return void S(t);case"failed":var s=e.error||{};return s.code=o[s.code]||n.INTERNAL_ERROR,void C({error:s});default:return void C(t)}T(i,k),setTimeout(w,1e3*e.check_after_secs)}function w(){P===t&&x("GET","STATUS","&media_id="+k,null,b,C,s)}function S(i){P===t&&(P=e,D())}function C(e){P===t&&(A=e&&e.error&&e.error.code?e.error:{code:n.INTERNAL_ERROR},P=i,D())}function y(){return O?100*R/O:0}function T(t,e){P!==i&&M.progress&&M.progress(t,$,e)}function D(){P===e&&M.success&&M.success(k),P===i&&M.error&&M.error(A)}function I(t,e){if(M.stats){var i={mediaType:E,command:t,status:e,duration:new Date-q,totalByteSize:O,totalDuration:new Date-H};"APPEND"===t&&(i.appendByteSize=F),M.stats(i)}}function x(t,e,i,s,n,o,a){function r(){if(L.status>=200&&L.status<400){var t=u();204===L.status||t?(I(e,"success"),d(),n(t||{})):c("parsererror")}else L.status&&503!==L.status?l():c()}function c(r){a?x(t,e,i,s,n,o,a-1):l(r)}function l(t){I(e,t||"error"),o(u()||{})}function h(){F=j,c("timeout")}function d(){if(s){var t=Math.max(1,new Date-q);U=Math.max(j,Math.min(5242880,Math.round(2e3*F/t)))}}function u(){try{return JSON.parse(L.responseText)}catch(t){return null}}var p=G+"?command="+e+i;q=new Date,L=new XMLHttpRequest,L.open(t,p,!0),L.withCredentials=!0,L.timeout=45e3,L.onload=r,L.onerror=function(){c()},L.ontimeout=h;for(var f in W)L.setRequestHeader(f,W[f]);s?L.send(s):L.send()}a=a||{},r=r||{};var k=void 0,M=void 0,P=void 0,A=void 0,O=a.size||0,E=a.type,j=Math.max(Math.ceil(O/1e3),65536),R=void 0,F=void 0,U=void 0,B=void 0,N=void 0,L=void 0,$=void 0,V=void 0,q=void 0,H=new Date,W=r.sruHeaders||{},G=r.uploadUrl||"https://upload.twitter.com/i/media/upload.json";c(),this.upload=function(i){i=i||{},(V&&(M.trimRanges!==i.trimRanges||M.extraFinalizeParams!==i.extraFinalizeParams)||M.extraInitParams!==i.extraInitParams||M.sourceUrl!==i.sourceUrl||M.mediaCategory!==i.mediaCategory||M.mediaType!==i.mediaType)&&c(),M=i,P!==e&&P!==t&&(P=t,M.sourceUrl?g():V?m():k?p():l()),D(),T(y())},this.cancel=function(){c()},this.pollStatusOfExistingMediaId=function(e,i){k=e,M=i||{},P=t,w()}}}.call(e,i,e,t))&&(t.exports=s)},h8zi:function(t,e,i){"use strict";function s(){this.defaultAttrs({submitButtonSelector:"#age-gate-dialog-submit-button",monthSelector:"#age-gate-month",daySelector:"#age-gate-day",yearSelector:"#age-gate-year",requiredSelector:".age-gate-error",ageGateCookieKey:"age-gated"}),this.setUpDialog=function(t,e){e.ageGated?this.showError():(this.reset(),this.ageData=e,this.setDateOption(),this.open())},this.fillYearSelect=function(){var t=new Date(c.a.user.createdAt).getFullYear()-13,e=t-100,i=void 0;for(i=t;i>=e;i--)this.yearSelect.options.add(new Option(i,i));this.yearSelect.options.add(new Option(Object(a.default)("Before {{year}}",{year:i}),i))},this.month={1:Object(a.default)("January"),2:Object(a.default)("February"),3:Object(a.default)("March"),4:Object(a.default)("April"),5:Object(a.default)("May"),6:Object(a.default)("June"),7:Object(a.default)("July"),8:Object(a.default)("August"),9:Object(a.default)("September"),10:Object(a.default)("October"),11:Object(a.default)("November"),12:Object(a.default)("December")},this.fillMonthSelect=function(){for(var t=1;t<=12;t++)this.monthSelect.options.add(new Option(this.month[t],t))},this.fillDaySelect=function(t,e){t||(t=1),e||(e=31);for(var i=t;i<=e;i++)this.daySelect.options.add(new Option(i,i))},this.resetSelect=function(t,e){t.options.length=0,t.options.add(new Option(e,-1,!0,!0)),t.options[0].disabled=!0},this.reset=function(){this.resetSelect(this.yearSelect,Object(a.default)("Year")),this.resetSelect(this.monthSelect,Object(a.default)("Month")),this.resetSelect(this.daySelect,Object(a.default)("Day")),this.hideRequired()},this.setDateOption=function(){this.fillYearSelect(),this.fillMonthSelect(),this.fillDaySelect()},this.showRequired=function(){this.select("requiredSelector").removeClass("hidden")},this.hideRequired=function(){this.select("requiredSelector").addClass("hidden")},this.getDateFromSelect=function(){var t={};return t.year=this.yearSelect.options[this.yearSelect.selectedIndex].value,t.month=this.monthSelect.options[this.monthSelect.selectedIndex].value,t.day=this.daySelect.options[this.daySelect.selectedIndex].value,t},this.getNumberOfDaysGivenMonthYear=function(t,e){return e<0&&(e=2012),new Date(e,t,0).getDate()},this.validateDate=function(){var t=this.getDateFromSelect();return t.year>=0&&t.month>=0&&t.month<=12&&t.day>=0&&t.day<=this.getNumberOfDaysGivenMonthYear(t.month,t.year)?new Date(t.year,t.month-1,t.day):("-1"===t.year||"-1"===t.month||"-1"===t.day?this.showRequired():this.trigger("uiShowMessage",{message:Object(a.default)("Invalid date. Please input your date of birth.")}),null)},this.updateDays=function(){var t=this.getDateFromSelect();if(this.hideRequired(),!(t.month<1||t.month>12)){this.resetSelect(this.daySelect,"Day");var e=this.getNumberOfDaysGivenMonthYear(t.month,t.year);this.fillDaySelect(1,e),t.day>0&&t.day<=e&&(this.daySelect.selectedIndex=t.day)}},this.showError=function(){this.trigger("uiShowMessage",{message:Object(a.default)("You do not meet the minimum age requirements to follow this account.")})},this.setAgeGateCookie=function(){Object(r.a)(this.attr.ageGateCookieKey,(new Date).getTime())},this.submitAgeGating=function(){var t=this.validateDate();t&&(t.getTime()<=this.ageData.minBirthDate?this.trigger("uiAgeGatePassed",l({},this.ageData.originalData,{passedAgeGating:!0})):(this.showError(),this.setAgeGateCookie()),this.close())},this.after("initialize",function(){this.monthSelect=this.select("monthSelector")[0],this.daySelect=this.select("daySelector")[0],this.yearSelect=this.select("yearSelector")[0],this.on(document,"uiNeedsAgeGateDialog",this.setUpDialog),this.on("click",{submitButtonSelector:this.submitAgeGating}),this.on("change",{monthSelector:this.updateDays,yearSelector:this.updateDays,daySelector:this.hideRequired})})}var n=i("DBjh"),o=i("UHc7"),a=i("0d4m"),r=i("dsp6"),c=i("IAMj"),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},h=Object(n.default)(s,o.a);e.a=h},hAdd:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("verified",t,e,1),t,e,0,13,134,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('<span class="Icon Icon--verified">'),i.b('<span class="u-hiddenVisually">Verified account</span>'),i.b("</span>")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},hDvG:function(t,e,i){"use strict";function s(){this.updateMomentMapAndTriggerEvent=function(t){var e=this;return function(i){e.momentMap=c({},e.momentMap,i.moment_map||{}),e.trigger(document,t,i)}},this.getDropdownUserMoments=function(t,e){this.get({url:"/i/moments/list_user_moments/dropdown",data:{tweet_id:e.tweet_id},success:this.updateMomentMapAndTriggerEvent("dataMomentsGetDropdownUserMomentsSuccess"),error:"dataMomentsGetDropdownUserMomentsFailure"})},this.getDialogUserMoments=function(t,e){this.get({url:"/i/moments/list_user_moments/dialog",data:e,success:this.updateMomentMapAndTriggerEvent("dataMomentsGetDialogUserMomentsSuccess"),error:"dataMomentsGetDialogUserMomentsFailure"})},this.addTweetSuccess=function(t,e){var i=e.moment_id&&this.momentMap[e.moment_id],s=void 0;i&&(s=i.is_empty_title?Object(r.default)('Tweet added to "<a target="_blank" href="{{url}}">Untitled Moment</a>"',{url:e.moment_maker_url}):Object(r.default)('Tweet added to "<a target="_blank" href="{{url}}">{{moment_name}}</a>"',{url:e.moment_maker_url,moment_name:i.title}),this.trigger("uiShowMessage",{message:s}))},this.removeTweetSuccess=function(t,e){var i=e.moment_id&&this.momentMap[e.moment_id],s=void 0;i&&(s=i.is_empty_title?Object(r.default)('Tweet removed from "<a target="_blank" href="{{url}}">Untitled Moment</a>"',{url:e.moment_maker_url}):Object(r.default)('Tweet removed from "<a target="_blank" href="{{url}}">{{moment_name}}</a>"',{url:e.moment_maker_url,moment_name:i.title}),this.trigger("uiShowMessage",{message:s}))},this.after("initialize",function(){this.momentMap={},this.on("uiMomentsGetDropdownUserMoments",this.getDropdownUserMoments),this.on("uiMomentsGetDialogUserMoments",this.getDialogUserMoments),this.on(document,"dataMomentMakerAddTweetSuccess",this.addTweetSuccess),this.on(document,"dataMomentMakerRemoveTweetSuccess",this.removeTweetSuccess)})}var n=i("DBjh"),o=i("VtWx"),a=i("3oDc"),r=i("0d4m"),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=Object(n.default)(s,o.a,a.a)},hIlQ:function(t,e,i){"use strict";function s(){this.attributes({dmDialogSelector:"#dm_dialog",pollingInterval:3e3,noTeardown:!0}),this.pollIfForeground=function(){this.isDocumentVisible()&&this.isDialogVisible()&&this.trigger("uiDMRequestUserUpdates")},this.isDialogVisible=function(){return this.$dmDialog.is(":visible")},this.isDocumentVisible=function(){return"visible"===document.visibilityState},this.after("initialize",function(){this.$dmDialog=this.select("dmDialogSelector"),this.timer=n.default.setIntervalEvent("uiDMForegroundPoll",this.attr.pollingInterval,{},!0),this.on("uiDMForegroundPoll",this.pollIfForeground)})}var n=i("r8Bt"),o=i("DBjh"),a=Object(o.default)(s);e.a=a},hIyN:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({excludedContainerSelector:".modal-container, .Gallery, .ProfileCard",profileLinkSelector:"a.profile-picture, .fullname a",itemType:"user",subTargetClass:".username"}),this.openProfileHover=function(e,i){"true"!==Object(o.a)("disable_profile_hovers")&&(i.screenName&&delete i.userId,this.skipScreenName&&i.screenName&&i.screenName.toLowerCase()===this.skipScreenName.toLowerCase()||this.skipUserId&&i.userId===this.skipUserId||(i.isHoverRequest=!0,e.target&&t(e.target).closest(this.attr.excludedContainerSelector).length>0||(this.refEventData=i,this.refEl=t(e.target).find(this.attr.subTargetClass)[0]||e.target,this.lastRequested=i.screenName?i.screenName.toLowerCase():i.userId,this.prepareHover(this.lastRequested),this.$node.attr("data-associated-tweet-id",i.tweetId||null),this.$node.attr("data-impression-id",i.impressionId||null),this.$node.attr("data-disclosure-type",i.disclosureType||null),this.$node.attr("data-impression-cookie",i.impressionCookie||null),this.trigger("uiWantsProfilePopup",i))))},this.dataAvailable=function(e,i){if(i.screen_name&&this.lastRequested===i.screen_name.toLowerCase()||this.lastRequested===i.user_id){this.$node.attr("data-screen-name",i.screen_name||null),this.$node.attr("data-user-id",i.user_id||null);var s=t(i.html);s.find("a[href^='/"+i.screen_name+"']").attr("data-send-impression-cookie","true"),this.showHTML(i.user_id,s,t(this.refEl),this.refEventData)}},this.after("initialize",function(t,e){c.a.attachTo(this.$node,{eventData:{scribeContext:{component:"profile_hover"}}}),e.profile_user&&(this.skipScreenName=e.profile_user.screen_name,this.skipUserId=e.profile_user.id_str),this.on(document,"dataProfilePopupSuccess",this.dataAvailable),this.on(document,"uiShowProfileHover",this.openProfileHover),this.on(document,"uiHideProfileHover",this.hide)})}var n=i("DBjh"),o=i("dsp6"),a=i("xq8/"),r=i("El2S"),c=i("y9Hg"),l=Object(n.default)(s,a.a,r.a);e.a=l}).call(e,i("4kSj"))},hJQC:function(t,e,i){"use strict";(function(t){function s(){o.default.mixin(this,[a.a]),this.defaultAttrs({snapReelVideoSelector:"video.js-snap-reel",easingAcceleration:.5,FPS:Object(n.a)().chrome?20:30}),this.logInteraction=function(t){var e=t.attr("data-tweet-id");this.eventScribed[e]||(this.scribeInteraction({action:"snap_reel_interaction"},this.interactionData(t)),this.eventScribed[e]=!0)},this.mouseOver=function(e){var i=this;this.video=t(e.target),this.tweet=this.video.parents(this.attr.tweetSelector),this.tweet.hasClass("animated-gif-playing")&&(this.scribeTimeout=setTimeout(function(){return i.logInteraction(i.tweet,i.video)},3e3)),this.start()},this.mouseOut=function(t){clearTimeout(this.scribeTimeout),this.tweet&&this.tweet.hasClass("animated-gif-playing")&&(this.tweet.removeClass("animated-gif-playing"),this.trigger(this.tweet,"uiStartGif")),this.stop(),this.scribeTimeout=void 0,this.tweet=void 0,this.targetPosition=void 0},this.mouseMove=function(t){this.tweet&&this.tweet.hasClass("animated-gif-playing")&&(this.targetPosition=t.pageX-this.video.offset().left)},this.start=function(){this.running=!0,this.tick()},this.stop=function(){this.running=!1},this.tick=function(){var t=this;if(this.running){var e=1e3/this.attr.FPS;setTimeout(function(){requestAnimationFrame(t.tick.bind(t)),t.update()},e)}},this.update=function(){if(this.targetPosition){this.currentPosition+=(this.targetPosition-this.currentPosition)*this.attr.easingAcceleration;var t=this.currentPosition/this.video.width();this.trigger(this.tweet,"uiSeekGif",{position:t})}},this.after("initialize",function(t,e){this.scribeTimeout=void 0,this.eventScribed={},this.currentPosition=0,this.on("mouseover",{snapReelVideoSelector:this.mouseOver}),this.on("mouseout",{snapReelVideoSelector:this.mouseOut}),this.on("mousemove",{snapReelVideoSelector:this.mouseMove})})}e.a=s;var n=i("RW6J"),o=i("q9/C"),a=i("alSu")}).call(e,i("4kSj"))},hK7e:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("call_to_action_text",t,e,1),t,e,0,96,828,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.b('  <div class="PromptbirdPrompt-action">\n'),s.s(s.f("call_to_action_url",t,e,1),t,e,0,164,455,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.b('      <a href="'),s.b(s.v(s.f("call_to_action_url",t,e,0))),s.b('" '),s.s(s.f("call_to_action_is_external",t,e,1),t,e,0,235,251,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('target="_blank" ')}),t.pop()),s.b('class="EdgeButton EdgeButton--primary js-promptAction js-promptPrimaryCta" data-prompt-action-type="'),s.b(s.v(s.f("call_to_action_type",t,e,0))),s.b('">\n        '),s.b(s.v(s.f("call_to_action_text",t,e,0))),s.b("\n"+i),s.b("      </a>\n")}),t.pop()),s.s(s.f("call_to_action_url",t,e,1),t,e,1,0,0,"")||(s.b('      <button type="button" class="EdgeButton EdgeButton--primary js-promptAction js-promptPrimaryCta'),s.s(s.f("sticky_cta",t,e,1),t,e,0,623,635,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(" js-isSticky")}),t.pop()),s.b('" data-prompt-action-type="'),s.b(s.v(s.f("call_to_action_type",t,e,0))),s.b('" data-prompt-scribe-action="primary_cta">\n        '),s.b(s.v(s.f("call_to_action_text",t,e,0))),s.b("\n"+i),s.b("      </button>\n")),s.b("  </div>\n")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},hKEr:function(t,e,i){"use strict";(function(t){function i(){this.defaultAttrs({requestReplyActivitySelector:"",requestRetweetedActivitySelector:".request-retweeted-popup",requestFavoritedActivitySelector:".request-favorited-popup",requestActivitySelectors:".request-retweeted-popup, .request-favorited-popup",requestTaggingActivitySelector:".request-tagging-popup",targetTweetSelector:".tweet",targetTaggedUsersListSelector:".popup-tagged-users-list",targetTitleSelector:"[data-activity-popup-title]",tweetPivotLinkSelector:".tweet-pivot-link",hiddenClass:"hidden"}),this.requestReplyActivity=function(t){this.trigger("uiRequestReplyActivity")},this.requestRetweetedActivity=function(t){this.requestActivityPopup(t),this.trigger("uiRequestRetweetedActivity")},this.requestFavoritedActivity=function(t){this.requestActivityPopup(t),this.trigger("uiRequestFavoritedActivity")},this.requestTaggingActivity=function(t){this.requestActivityPopup(t),this.trigger("uiRequestTaggingActivity")},this.requestActivityPopup=function(e,i){var s=t(e.target),n=s.closest(this.attr.targetTitleSelector).attr("data-activity-popup-title"),o=s.closest(this.attr.targetTweetSelector).attr("data-tweet-id"),a=i?i.usersHtml:null,r=void 0;e.preventDefault(),e.stopPropagation(),r=s.closest(this.attr.requestRetweetedActivitySelector).length?"retweeted_popup":s.closest(this.attr.requestTaggingActivitySelector).length?"media_tagged_popup":"favorited_popup",this.trigger("uiRequestActivityPopup",{titleHtml:n,contentId:o,usersHtml:a,component:r})},this.handleLoggedOutRetweetedActivityClick=function(t,e){this.trigger("uiLoggedOutActionAttempt",{action:"retweeted_activity_attempt"})},this.handleLoggedOutFavoritedActivityClick=function(t,e){this.trigger("uiLoggedOutActionAttempt",{action:"favorited_activity_attempt"})},this.uiOpenSignupDialog=function(t,e,i){this.trigger("uiOpenSignupDialog")},this.uiTweetPivotClick=function(e){var i=t(e.target),s={item_details:{item_type:"0",id:i.attr("data-item-id")},component_details:{id:i.attr("data-entity-id"),name:i.attr("data-name"),description:i.attr("data-id")}};this.trigger("uiTweetPivotClick",s)},this.after("initialize",function(){if(!this.attr.loggedIn)return void this.on("click",{requestActivitySelectors:this.uiOpenSignupDialog,requestRetweetedActivitySelector:this.handleLoggedOutRetweetedActivityClick,requestFavoritedActivitySelector:this.handleLoggedOutFavoritedActivityClick,requestTaggingActivitySelector:this.requestTaggingActivity});this.on("click",{requestReplyActivitySelector:this.requestReplyActivity,requestRetweetedActivitySelector:this.requestRetweetedActivity,requestFavoritedActivitySelector:this.requestFavoritedActivity,requestTaggingActivitySelector:this.requestTaggingActivity,tweetPivotLinkSelector:this.uiTweetPivotClick})})}e.a=i}).call(e,i("4kSj"))},hKiB:function(t,e,i){"use strict";var s=i("1QAW"),n=i.n(s),o=i("DBjh");e.a=Object(o.default)(function(){this.attributes({cardContainerSelector:".card2.js-media-container",cardIframeContainerSelector:".js-macaw-cards-iframe-container",playableMediaPlayerSelector:".PlayableMedia-player",playableMediaSelector:".PlayableMedia",playerSurface:"BROADCAST_CARD",supportsLandscapePresentation:!1,landscapePresentationClass:"LiveBroadcastCard--supportsLandscapePresentation",playerComponentContext:"BroadcastCard"}),this.loadPlayer=function(t,e){if(!this.isPlayerLoaded){var i=n.a.render(),s=e.broadcast_id,o=e.media_tweet_id,a=e.requested_timecode;s?this.select("cardContainerSelector").attr("data-broadcast-id",s):o&&this.select("cardContainerSelector").attr("data-tweet-id",o),this.select("cardContainerSelector").attr("data-player-component-context",this.attr.playerComponentContext),this.select("cardContainerSelector").prepend(i),this.attr.supportsLandscapePresentation&&this.select("playableMediaSelector").addClass(this.attr.landscapePresentationClass),a&&this.select("playableMediaPlayerSelector").attr("data-requested-timecode",a),this.select("playableMediaPlayerSelector").attr("data-player-surface",this.attr.playerSurface),this.trigger("uiWatchPlayableMedia"),this.isPlayerLoaded=!0}},this.teardownPlayer=function(){if(this.isPlayerLoaded){this.select("playableMediaSelector").trigger("uiUnloadPlayableMedia").remove(),this.isPlayerLoaded=!1}},this.before("teardown",function(){this.teardownPlayer(),this.select("cardIframeContainerSelector").addClass("initial-card-height")}),this.after("initialize",function(){this.isPlayerLoaded=!1,this.on("uiLoadCardPlayerForBroadcast",this.loadPlayer),this.on("uiLoadCardPlayerForMediaTweetId",this.loadPlayer),this.on("uiTeardownCardPlayer",this.teardownPlayer),this.on("uiLoadPlayerForLiveEventCard",this.loadPlayer),this.on("uiTeardownPlayerForLiveEventCard",this.teardownPlayer)})})},hWDG:function(t,e,i){"use strict";function s(){this.defaultAttrs({noShowError:!0}),this.deleteConversation=function(t,e){e=e||{};var i=l(c(t.target,"dataConversationDeleted",{conversation_id:e.conversation_id}),c(t.target,"dataDMUserUpdates")),s=l(c(t.target,"dataConversationDeleteFailed",{conversation_id:e.conversation_id}),c(t.target,"dataDMError"));this.destroy({url:"/messages/with/conversation",data:{id:e.conversation_id,cursor:this.dmCursor},eventData:e,success:i,error:s})},this.after("initialize",function(){this.on("uiDeleteConversation",this.deleteConversation)})}var n=i("DBjh"),o=i("VtWx"),a=i("9Uwv"),r=i("ldNY"),c=r.a.triggerFn,l=r.a.chain,h=Object(n.default)(s,o.a,a.a);e.a=h},hZQJ:function(t,e,i){"use strict";(function(t){function s(){this.keymap=r.a;this.attributes({textSelector:"textarea.TokenizedMultiselect-input",inputContainerSelector:".TokenizedMultiselect-inputContainer",textMinWidth:100,tokenClass:"InputToken",tokenSelector:".InputToken",focusedTokenSelector:".InputToken:focus",tokenDeleteClass:"InputToken-delete",tokenDeleteSelector:".InputToken-delete",highlightedClass:"is-highlighted",highlightedSelector:".is-highlighted",selectedClass:"is-selected",suggestionClass:"TokenizedMultiselect-suggestion",suggestionSelector:".TokenizedMultiselect-suggestion",suggestionsContainerSelector:".TokenizedMultiselect-suggestionsContainer",maxItems:50}),this.handleKeyPress=function(t){if("keydown"===t.type&&!t.shiftKey){var e=t.which||t.keycode,i=this.select("focusedTokenSelector").length,s=this.select("highlightedSelector").length,n=!this.$text.val();switch(e){case r.a.TAB:i?(t.preventDefault(),t.stopPropagation(),this.focusInput()):s&&(t.preventDefault(),t.stopPropagation(),this.tokenizeHighlightedSuggestion());break;case r.a.ENTER:t.preventDefault(),this.toggleTokenization();break;case r.a.ESC:s&&(t.preventDefault(),t.stopPropagation(),this.clearHighlight());break;case r.a.BACKSPACE:i?(this.removeFocusedToken(),t.preventDefault()):n&&(this.removeLastToken(),t.preventDefault());break;case r.a.DELETE:i&&this.removeFocusedToken();break;case r.a.UP:t.preventDefault(),i&&this.focusInput(),this.moveSuggestionHighlight(1);break;case r.a.DOWN:t.preventDefault(),i&&this.focusInput(),this.moveSuggestionHighlight(0);break;case r.a.LEFT:i?this.focusNeighbor(1):n&&this.focusLastToken();break;case r.a.RIGHT:i&&this.focusNeighbor(0)}}},this.focusNeighbor=function(t){var e=0===t?"next":"prev",i=this.select("focusedTokenSelector");i.length&&i[e]().focus()},this.focusLastToken=function(){this.select("tokenSelector").last().focus()},this.focusInput=function(){this.$text.focus()},this.removeFocusedToken=function(t){var e=this.select("focusedTokenSelector");t&&"click"===t.type?this.focusInput():this.focusNeighbor(0),this.removeToken(e)},this.removeLastToken=function(){this.removeToken(this.select("tokenSelector").last())},this.removeToken=function(t){t.length&&(this.trigger("uiTokenizedMultiselectTokenRemoved",{text:t.attr("data-token-text"),id:t.attr("data-token-id")}),t.remove())},this.getFirstSuggestion=function(){return this.select("suggestionSelector").first()},this.getHighlightedSuggestion=function(){return this.select("highlightedSelector").first()},this.getNeighboringSuggestion=function(t,e){return t[0===e?"nextAll":"prevAll"](this.attr.suggestionSelector).first()},this.moveSuggestionHighlight=function(t){var e=this.getHighlightedSuggestion(),i=this.getNeighboringSuggestion(e,t);e.length?i.length&&this.setHighlight(i):this.setHighlight(this.getFirstSuggestion())},this.toggleTokenization=function(){var t=this.getHighlightedSuggestion(),e=t.attr("data-token-id");this.isTokenized(t)?(this.removeToken(this.select("tokenSelector").filter('[data-token-id="'+e+'"]')),this.$text.val("").focus()):this.tokenizeHighlightedSuggestion()},this.tokenizeHighlightedSuggestion=function(){var e=this.getHighlightedSuggestion(),i=e.attr("data-token-text");if(this.canTokenize(e)){var s=t(l.a.render({token_class:this.attr.tokenClass,token_delete_class:this.attr.tokenDeleteClass,emojified_token_text:{emojified_text_as_html:o.a.emojifyText(i),text:i},token_id:e.attr("data-token-id"),token_text:i}));e.addClass(this.attr.selectedClass),this.$text.before(s),this.$text.val("").focus(),this.trigger("uiTokenizedMultiselectTokenAdded",{text:s.attr("data-token-text"),id:s.attr("data-token-id")})}},this.isTokenized=function(e){return t.inArray(e.attr("data-token-id"),this.getSelectedItemsIds())>=0},this.canTokenize=function(t){return!(this.select("tokenSelector").length>=this.attr.maxItems)&&t.length&&!this.isTokenized(t)},this.getSelectedItemsIds=function(){return t.map(this.select("tokenSelector"),function(e){return t(e).attr("data-token-id")})},this.getSelectedItems=function(){return t.map(this.select("tokenSelector"),function(e){return{id:t(e).attr("data-token-id"),text:t(e).attr("data-token-text")}})},this.handleTextChange=function(t,e){this.trigger("uiTokenizedMultiselectTextChanged",{text:e.text,selected_items:this.getSelectedItemsIds()})},this.handleMouseOver=function(e){this.setHighlight(t(e.target).closest(this.attr.suggestionSelector))},this.updateWidth=function(){var t=this.select("tokenSelector").last();if(t.length){var e=this.select("inputContainerSelector").width()-t.position().left-t.outerWidth(!0),i=e<this.attr.textMinWidth?"100%":e;this.$text.outerWidth(i)}this.$text.prop("scrollHeight")>this.$text.prop("clientHeight")&&this.$text.outerWidth("100%")},this.selectedItemsChanged=function(){this.trigger("uiTokenizedMultiselectItemSelectionChanged",{selected_items:this.getSelectedItems()})},this.updateScroll=function(){var t=this.getHighlightedSuggestion(),e=this.select("suggestionsContainerSelector"),i=e.prop("scrollTop"),s=t.position().top+t.outerHeight();if(s>e.height()){var n=s-e.height();e.scrollTop(i+n)}else t.position().top<0&&e.scrollTop(i+t.position().top)},this.reset=function(){this.select("tokenSelector").remove(),this.$text.val("")},this.setMaxItems=function(t){this.attr.maxItems=t.maxItems},this.handleTokenChange=function(){this.updateWidth(),this.selectedItemsChanged()},this.updateSuggestions=function(t,e){var i=e.html,s=e.preserve_previous_hightlight,n=this.select("highlightedSelector").first().attr("data-token-id");if(this.clearHighlight(),this.select("suggestionsContainerSelector").html(i),s){var o=this.select("suggestionSelector").filter('[data-token-id="'+n+'"]').first(),a=o.length?o:this.select("suggestionSelector").first();this.setHighlight(a)}},this.clearHighlight=function(){this.select("suggestionSelector").removeAttr("id aria-selected").removeClass(this.attr.highlightedClass),this.$text.removeAttr("aria-activedescendant")},this.setHighlight=function(t){this.clearHighlight();var e="tokenizedMultiselectHighlight"+Math.floor(1e10*Math.random()).toString();t.addClass(this.attr.highlightedClass).attr({id:e,"aria-selected":!0}),this.$text.attr("aria-activedescendant",e)},this.after("moveSuggestionHighlight",this.updateScroll),this.after("tokenizeHighlightedSuggestion",this.handleTokenChange),this.after("toggleTokenization",this.handleTokenChange),this.after("removeFocusedToken",this.handleTokenChange),this.after("removeLastToken",this.handleTokenChange),this.after("reset",this.handleTokenChange),this.setupAria=function(){var t="TokenizedMultiselectOwns"+Math.floor(1e10*Math.random()).toString();this.select("suggestionsContainer").attr("id",t),this.$text.attr("aria-owns",t)},this.after("initialize",function(){this.initTextNode(),this.attr.placeholderText=this.$text.attr("placeholder"),this.setupAria(),this.on("uiTextChanged",this.handleTextChange),this.on("uiTextChanged",this.updateWidth),this.on("keyup keydown keypress paste",this.handleKeyPress),this.on("uiResetTokenizedMultiselect",this.reset),this.on("uiTokenizedMultiSelectMaxItems",this.setMaxItems),this.on("uiTokenizedMultiselectSuggestions",this.updateSuggestions),this.on("mouseover",{suggestionSelector:this.handleMouseOver}),this.on("click",{suggestionSelector:this.toggleTokenization,tokenDeleteSelector:this.removeFocusedToken})})}var n=i("DBjh"),o=i("tLYs"),a=i("pUl/"),r=i("i3qs"),c=i("FrDP"),l=i.n(c),h=Object(n.default)(s,a.a);e.a=h}).call(e,i("4kSj"))},hhhH:function(t,e,i){"use strict";function s(t){if(y.a.set(t.dm),Object(h.default)(t),ht.a.attachTo(document,{noTeardown:!0,showUnreadNotificationCount:Gt.a.getDecider("page_title_unread_notification_count"),badgeAfterTweetCount:Gt.a.getDeciderValue("page_title_badge_after_unread_tweets")}),St.a.attachTo(document),D.a.attachTo("body"),$.a.attachTo(document),_t.a.attachTo("body",{noTeardown:!0}),S.a.attachTo(document,{rwebOptInCookieName:t.rwebOptInCookieName,rwebOptInCookieNewValue:t.rwebOptInCookieNewValue}),f.a.attachTo(document,{noTeardown:!0}),u.a.attachTo("#spam_challenge_dialog",{noTeardown:!0}),Pt.a.attachTo(document,t,{noTeardown:!0}),t.loggedIn){Object(jt.a)(t),at.a.attachTo(document,t,{noTeardown:!0});var e=y.a.get("poll_options");e?T.a.attachTo(document,{foregroundPollInterval:e.foreground_poll_interval,burstPollInterval:e.burst_poll_interval,burstPollDuration:e.burst_poll_duration,maxPollInterval:e.max_poll_interval,noTeardown:!0}):T.a.attachTo(document,{foregroundPollInterval:1e3*t.deciders.dm_polling_frequency_in_seconds,noTeardown:!0}),t.deciders.live_pipeline_consume&&Q.a.attachTo(document),G.a.attachTo("#list-membership-dialog",t,{noTeardown:!0}),z.a.attachTo("#list-operations-dialog",t,{noTeardown:!0}),v.a.attachTo("#create-custom-timeline-dialog",t),b.a.attachTo("#curate-dialog",t),Z.a.attachTo("#moments-summary-list-dialog",t),Object(C.a)(t),x.a.attachTo(document,{noTeardown:!0}),M.a.attachTo(document,{noTeardown:!0}),k.a.attachTo(document,{noTeardown:!0}),ft.a.attachTo(document,{currentUserPath:t.routes.profile,noTeardown:!0}),Ct.a.attachTo("#retweet-tweet-dialog",t,{noTeardown:!0}),w.a.attachTo("#delete-tweet-dialog",t,{noTeardown:!0}),c.a.attachTo("#block-dialog",t,{noTeardown:!0}),wt.a.attachTo("#report-dialog",t,{noTeardown:!0}),t.deciders.gdprAgeGateDialog?N.a.attachTo("#gdpr-age-gate-dialog",t,{noTeardown:!0}):n.a.attachTo("#age-gate-dialog",t,{noTeardown:!0}),t.deciders.gdprSoftBounceDialog&&L.a.attachTo("#gdpr-soft-bounce-dialog",t,{noTeardown:!0}),t.deciders.enable_tweetstorm_creation&&(Ut.a.attachTo("#Tweetstorm-dialog",t,{noTeardown:!0}),Vt.a.attachTo(document,t,{noTeardown:!0}),qt.a.attachTo(document,t,{noTeardown:!0}),Ft.a.attachTo(document,t,{noTeardown:!0}),$t.a.attachTo(document,t,{noTearDown:!0}),t.deciders.enable_tweetstorm_drafts&&(Nt.a.attachTo("#tweetstorm-load-draft",t,{noTearDown:!0}),Bt.a.attachTo(document,t,{noTearDown:!0})),t.deciders.enable_tweetstorm_tooltip&&Lt.a.attachTo(document,t,{noTearDown:!0}))}Dt.a.attachTo(document),Gt.a.getDecider("native_notifications")&&(st.a.attachTo(document,{defaultIcon:t.defaultNotificationIcon}),nt.a.attachTo(document)),vt.a.attachTo(document),gt.a.attachTo(document,{autoSubscribe:Gt.a.getDecider("autoSubscribeNativePush"),allowRegistration:Gt.a.getDecider("enableNativePush"),noTeardown:!0}),Wt.a.attachTo(document,{noTeardown:!0}),Ht.a.attachTo(document,t.typeaheadData,{noTeardown:!0}),Tt.a.attachTo(document,{noTeardown:!0}),yt.a.attachTo(document,{noTeardown:!0}),t.typeaheadData.followedSearches.enabled&&(j.a.attachTo(document,{noTeardown:!0}),R.a.attachTo(document,{noTeardown:!0})),q.a.attachTo("#goto-user-dialog",t),Object(pt.a)({profile_user:t.profile_user,deviceEnabled:t.deviceEnabled,deviceVerified:t.deviceVerified,formAuthenticityToken:t.formAuthenticityToken,loggedIn:t.loggedIn}),B.a.attachTo(document,{noTeardown:!0});var i={itemType:"tweet",noTeardown:!0,loggedIn:t.loggedIn,eventData:{scribeContext:{component:"gallery"}}};U.a.attachTo(".Gallery",t,i),Et.a.attachTo(".Gallery",t,i),tt.a.attachTo(".Gallery",t,i),ct.a.attachTo(document,{noTeardown:!0}),rt.a.attachTo(document,t),H.a.attachTo(document,t,{noTeardown:!0,loggedIn:t.loggedIn,keyboardShortcuts:t.keyboardShortcuts}),g.a.attachTo(document,t,{noTeardown:!0}),bt.a.attachTo("#quick-promote-dialog",t,{noTeardown:!0}),l.a.attachTo("#block-user-dialog",t,{noTeardown:!0}),P.a.attachTo(document,{noTeardown:!0}),A.a.attachTo("#embed-tweet-dialog",t,{noTeardown:!0}),Qt.a.attachTo("#why-this-ad-dialog",t,{noTeardown:!0}),W.a.attachTo("#leadgen-confirm-dialog",t),Object(It.a)("uiWantsToRefreshTimestamps"),dt.a.attachTo(document),F.a.attachTo(document,{nightModeActivated:t.night_mode_activated}),p.a.attachTo(document,{noTeardown:!0}),At.a.attachTo(document,{noTeardown:!0}),X.a.attachTo("#media-edit-dialog",{noTeardown:!0}),it.a.attachTo(document),ot.a.attachTo(".dashboard",{eventData:{scribeContext:{component:"dashboard_nav"}}}),E.a.attachTo("#feedback_dialog",t.debugData,{noTeardown:!0}),O.a.attachTo(document,t.debugData,{noTeardown:!0}),Object(mt.a)(t),V.a.attachTo(document,t,{noTeardown:!0}),m.a.attachTo(document,t,{noTeardown:!0}),d.a.attachTo("#bouncer-dialog",t,{noTeardown:!0}),Y.a.attachTo("#location-picker-dialog",t,{noTeardown:!0}),K.a.attachTo(document,{noTeardown:!0}),o.a.attachTo("#auth-webview-dialog",t,{noTeardown:!0}),et.a.attachTo(document),Rt.a.attachTo(document,t,{noTeardown:!0}),xt.a.attachTo("#sms-confirmation-dialog"),kt.a.attachTo("#sms-confirmation-dialog",t,{noTeardown:!0}),Mt.a.attachTo(document),I.a.attachTo(document,{includeLongVideos:Gt.a.getDecider("dynamic_video_ads_include_long_videos")}),zt.a.attachTo(document,t,{noTeardown:!0}),Ot.a.attachTo(document,{noTeardown:!0}),a.a.attachTo("#page-container",t),ut.a.attachTo("#page-container",{liveVideoContinuePlayingBehindModalsEnabled:t.liveVideoContinuePlayingBehindModalsEnabled}),J.a.attachTo(document),r.a.attachTo(document),lt.a.attachTo(document,{userColor:t.user_color,screenName:t.screenName})}e.a=s;var n=i("h8zi"),o=i("5k28"),a=i("bCJo"),r=i("5lAn"),c=i("K6LY"),l=i("n/Jq"),h=i("1QVz"),d=i("pVwJ"),u=i("4Th6"),p=i("Er8D"),f=i("Qo7l"),m=i("w3ke"),g=i("gUWx"),v=i("6L6I"),b=i("p3ED"),w=i("o3dW"),S=i("A1LW"),C=i("ckC9"),y=i("8tPW"),T=i("9OOz"),D=i("b2Of"),I=i("ww42"),x=i("nwDM"),k=i("QPFA"),M=i("i4AW"),P=i("6Ej1"),A=i("6PRL"),O=i("GLfs"),E=i("Ac9p"),j=i("g2Xo"),R=i("zif6"),F=i("TNqm"),U=i("pB0G"),B=i("Eq71"),N=i("fO1A"),L=i("8z7v"),$=i("8ymj"),V=i("Vnf/"),q=i("zApe"),H=i("nVGa"),W=i("IqRg"),G=i("6+U0"),z=i("hzKy"),Q=i("/Ynh"),Y=i("ocKB"),K=i("XG5F"),X=i("Uaj/"),J=i("Ueze"),Z=i("y/m3"),tt=i("jctv"),et=i("9RxZ"),it=i("CtpE"),st=i("kS/N"),nt=i("s+cD"),ot=i("y9Hg"),at=i("XtDV"),rt=i("i/R1"),ct=i("w/aG"),lt=i("SwEw"),ht=i("W0Am"),dt=i("P9C3"),ut=i("+9xK"),pt=i("rLv+"),ft=i("6ycc"),mt=i("qpEk"),gt=i("9naX"),vt=i("kz7R"),bt=i("xhag"),wt=i("4LVv"),St=i("DrJY"),Ct=i("f0aZ"),yt=i("oHUX"),Tt=i("ey4t"),_t=i("q+8D"),Dt=i("Rxx0"),It=i("11Yp"),xt=i("WHVX"),kt=i("3eGJ"),Mt=i("v2wg"),Pt=i("MC7r"),At=i("V93P"),Ot=i("LrHz"),Et=i("Ny+n"),jt=i("TwGl"),Rt=i("DuHP"),Ft=i("tOdr"),Ut=i("TkyG"),Bt=i("zwio"),Nt=i("+LkO"),Lt=i("AHbL"),$t=i("G3AD"),Vt=i("bCO2"),qt=i("9UDm"),Ht=i("gEW7"),Wt=i("cP4g"),Gt=i("IAMj"),zt=i("4iWu"),Qt=i("8S9K")},hlo1:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={screen_name:i("5HSP"),screen_name:i("5HSP"),screen_name:i("5HSP"),screen_name:i("5HSP"),screen_name:i("5HSP"),screen_name:i("5HSP"),screen_name:i("5HSP"),screen_name:i("5HSP"),screen_name:i("5HSP"),screen_name:i("5HSP")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<button type="button" class="btn-link reply-users-btn js-tooltip" data-original-title="Select who gets your reply">'),s.s(s.f("is_reply_user_count_1",t,e,1),t,e,0,149,225,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.s(i.f("first_reply_user",t,e,1),t,e,0,180,196,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name0",t,e,""))}),t.pop())}),t.pop()),s.s(s.f("is_reply_user_count_2",t,e,1),t,e,0,286,427,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.s(i.f("first_reply_user",t,e,1),t,e,0,317,333,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name1",t,e,""))}),t.pop()),i.b(" and "),i.s(i.f("second_reply_user",t,e,1),t,e,0,381,397,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name2",t,e,""))}),t.pop())}),t.pop()),s.s(s.f("is_reply_user_count_3",t,e,1),t,e,0,488,688,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.s(i.f("first_reply_user",t,e,1),t,e,0,519,535,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name3",t,e,""))}),t.pop()),i.b(" "),i.s(i.f("second_reply_user",t,e,1),t,e,0,579,595,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name4",t,e,""))}),t.pop()),i.b(" and "),i.s(i.f("third_reply_user",t,e,1),t,e,0,643,659,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name5",t,e,""))}),t.pop())}),t.pop()),s.s(s.f("is_reply_user_count_more_than_3",t,e,1),t,e,0,759,1270,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.s(i.f("reply_user_count_minus_2_one",t,e,1),t,e,0,802,982,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.s(i.f("first_reply_user",t,e,1),t,e,0,835,851,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name6",t,e,""))}),t.pop()),i.b(" "),i.s(i.f("second_reply_user",t,e,1),t,e,0,895,911,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name7",t,e,""))}),t.pop()),i.b(" and "),i.b(i.v(i.f("reply_user_count_minus_2",t,e,0))),i.b(" other")}),t.pop()),i.s(i.f("reply_user_count_minus_2_other",t,e,1),t,e,0,1058,1227,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.s(i.f("first_reply_user",t,e,1),t,e,0,1089,1105,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name8",t,e,""))}),t.pop()),i.b(" "),i.s(i.f("second_reply_user",t,e,1),t,e,0,1149,1165,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<screen_name9",t,e,""))}),t.pop()),i.b(" and "),i.b(i.v(i.f("reply_user_count_minus_2",t,e,0))),i.b(" others")}),t.pop())}),t.pop()),s.b("</button>\n"),s.fl()},partials:{"<screen_name0":{name:"screen_name",partials:{},subs:{}},"<screen_name1":{name:"screen_name",partials:{},subs:{}},"<screen_name2":{name:"screen_name",partials:{},subs:{}},"<screen_name3":{name:"screen_name",partials:{},subs:{}},"<screen_name4":{name:"screen_name",partials:{},subs:{}},"<screen_name5":{name:"screen_name",partials:{},subs:{}},"<screen_name6":{name:"screen_name",partials:{},subs:{}},"<screen_name7":{name:"screen_name",partials:{},subs:{}},"<screen_name8":{name:"screen_name",partials:{},subs:{}},"<screen_name9":{name:"screen_name",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},hyOy:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_one",t,e,1),t,e,0,21,51,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Following")}),t.pop()),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_other",t,e,1),t,e,0,92,122,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Following")}),t.pop()),s.b("\n"),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},hzKy:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({top:90,win:window,saveListSelector:".update-list-button",editorSelector:".list-editor",currentNameSelector:".js-list-details .js-list-name",currentDescSelector:".js-list-details .js-list-desc",nameInputSelector:".list-editor input[name='name']",descriptionSelector:".list-editor textarea[name='description']",privacySelector:".list-editor input[name='mode']"}),this.openListOperationsDialog=function(t,e){e=e||{},this.userId=e.userId,"uiOpenUpdateListDialog"===t.type&&this.modifyDialog(),this.open(),this.$nameInput.focus()},this.modifyDialog=function(){this.$modalTitle=this.select("modalTitleSelector"),this.originalTitle=this.originalTitle||this.$modalTitle.text(),this.$modalTitle.text(Object(a.default)("Edit list details"));var e=t(this.attr.currentNameSelector).attr("data-raw-text").trim(),i=t(this.attr.currentDescSelector).attr("data-raw-text").trim();this.$nameInput.val(e),this.$descriptionInput.val(i),this.isPublic||(this.$privacyInput[1].checked=!0),this.$saveButton.attr("data-list-id",this.listId).attr("data-operation","update"),this.toggleSaveButtonDisabled(),this.modified=!0,this.$descriptionInput.on("keyup",this.toggleSaveButtonDisabled.bind(this)),this.$privacyInput.on("change",this.toggleSaveButtonDisabled.bind(this))},this.revertModifications=function(){this.modified&&(this.revertDialog(),this.$editor.find("input,textarea").val(""),this.$descriptionInput.off("keyup"),this.$privacyInput.off("change"),this.modified=!1)},this.revertDialog=function(){this.$modalTitle.text(this.originalTitle),this.$saveButton.removeAttr("data-list-id").removeAttr("data-operation"),this.isPublic||(this.$privacyInput[0].checked=!0)},this.saveList=function(e,i){if(!this.requestInProgress){this.requestInProgress=!0;var s=t(i.el),n="update"===s.attr("data-operation")?"uiUpdateList":"uiCreateList",o={name:this.formValue("name"),description:this.formValue("description",{type:"textarea"}),mode:this.formValue("mode",{conditions:":checked"})};"update"===s.attr("data-operation")&&(o=r({},o,{list_id:s.attr("data-list-id")})),this.trigger(n,o),this.$saveButton.prop("disabled",!0)}},this.saveListSuccess=function(t,e){this.close();var i=Object(a.default)("List saved!");"dataDidCreateList"===t.type?(i=Object(a.default)("List created!"),this.userId?this.trigger("uiOpenListMembershipDialog",{userId:this.userId}):e&&e.slug&&(this.attr.win.location="/"+this.attr.screenName+"/lists/"+e.slug)):this.revertDialog(),this.$editor.find("input:text,textarea").val(""),this.trigger("uiShowMessage",{message:i})},this.saveListComplete=function(t,e){this.requestInProgress=!1,this.toggleSaveButtonDisabled()},this.toggleSaveButtonDisabled=function(t,e){this.$saveButton.prop("disabled",""===this.$nameInput.val())},this.formValue=function(t,e){return e=e||{},e.type=e.type||"input",e.conditions=e.conditions||"",this.$editor.find(e.type+"[name='"+t+"']"+e.conditions).val()},this.disableSaveButton=function(){this.$saveButton.prop("disabled",!0)},this.updateState=function(t,e){this.listId=e.init_data.list_id,this.isPublic=e.init_data.is_public},this.after("initialize",function(){this.listId=this.attr.list_id,this.isPublic=this.attr.is_public,this.$editor=this.select("editorSelector"),this.$nameInput=this.select("nameInputSelector"),this.$descriptionInput=this.select("descriptionSelector"),this.$privacyInput=this.select("privacySelector"),this.$saveButton=this.select("saveListSelector"),this.on("click",{saveListSelector:this.saveList}),this.on("focus blur keyup",{nameInputSelector:this.toggleSaveButtonDisabled}),this.on("uiDialogOpened",this.disableSaveButton),this.on("uiDialogClosed",this.revertModifications),this.on(document,"uiOpenCreateListDialog uiOpenUpdateListDialog",this.openListOperationsDialog),this.on(document,"dataDidCreateList dataDidUpdateList",this.saveListSuccess),this.on(document,"dataDidCreateList dataDidUpdateList dataFailedToCreateList dataFailedToUpdateList",this.saveListComplete),this.on(document,"uiPageChanged",this.updateState)})}var n=i("DBjh"),o=i("UHc7"),a=i("0d4m"),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},c=Object(n.default)(s,o.a);e.a=c}).call(e,i("4kSj"))},"i/R1":function(t,e,i){"use strict";function s(){this.requestEmbedCode=function(t,e){var i=this.cacheKeyForOptions(e),s=this.cachedEmbedCodes[i],n=this.receivedEmbedCode.bind(this,e),o=this.failedToReceiveEmbedCode.bind(this,e);if(s)return void this.receivedEmbedCode(e,s);this.get({dataType:"jsonp",url:this.embedCodeUrl(),data:a({id:e.tweetId},e.data),eventData:{},success:n,error:o})},this.embedCodeUrl=function(){return"//api.twitter.com/1/statuses/oembed.json"},this.receivedEmbedCode=function(t,e){var i=this.cacheKeyForOptions(t);this.cachedEmbedCodes[i]=e,this.trigger("dataOembedSuccess",{options:t,data:e})},this.failedToReceiveEmbedCode=function(t){t.retry?(t.retry=!1,this.trigger("dataOembedRetry",t),this.requestEmbedCode({},t)):this.trigger("dataOembedError",t)},this.cacheKeyForOptions=function(t){return JSON.stringify(t.data)+t.tweetId},this.after("initialize",function(){this.on("uiNeedsOembed",this.requestEmbedCode),this.cachedEmbedCodes={}})}var n=i("DBjh"),o=i("VtWx"),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=Object(n.default)(s,o.a)},i17Q:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div role="button" tabindex="0" aria-label="'),s.b(s.v(s.f("label",t,e,0))),s.b('" '),s.s(s.f("can_compose_alt_text",t,e,1),t,e,0,434,476,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('aria-describedby="'),i.b(i.v(i.f("aria_description_id",t,e,0))),i.b('"')}),t.pop()),s.b(' class="ComposerThumbnail'),s.s(s.f("is_large_size",t,e,1),t,e,0,544,569,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(" ComposerThumbnail--large")}),t.pop()),s.b(" "),s.s(s.f("is_gif",t,e,1),t,e,0,599,621,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("ComposerThumbnail--gif")}),t.pop()),s.s(s.f("is_video",t,e,1),t,e,0,645,669,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("ComposerThumbnail--video")}),t.pop()),s.b('" data-file-id="'),s.b(s.v(s.f("file_id",t,e,0))),s.b('">\n  <div class="ComposerThumbnail-imageContainer">\n'),s.b('    <img class="ComposerThumbnail-image" src="'),s.b(s.v(s.f("src",t,e,0))),s.b('" style="'),s.b(s.v(s.f("offset_styles",t,e,0))),s.b('" draggable="false" alt="">\n  </div>\n\n'),s.s(s.f("is_gif",t,e,1),t,e,0,1022,1266,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('    <div class="ComposerThumbnail-overlay ComposerThumbnail-gifBadge">\n      <div class="Icon Icon--medium Icon--gifBadge"></div>\n    </div>\n'),i.s(i.f("is_placeholder",t,e,1),t,e,0,1187,1244,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('      <div class="ComposerThumbnail-loading"></div>\n')}),t.pop())}),t.pop()),s.b("\n"+i),s.s(s.f("is_video",t,e,1),t,e,0,1294,1580,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('    <div class="ComposerThumbnail-overlay ComposerThumbnail-edit">'),i.b(i.v(i.f("edit_button_label",t,e,0))),i.b('</div>\n    <div class="ComposerThumbnail-overlay ComposerThumbnail-duration">'),i.b(i.v(i.f("duration",t,e,0))),i.b('</div>\n    <div class="ComposerThumbnail-play">\n      <div class="Icon Icon--playButton"></div>\n    </div>\n')}),t.pop()),s.b("\n"+i),s.s(s.f("can_compose_alt_text",t,e,1),t,e,0,1622,1818,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('    <div class="ComposerThumbnail-description">Add description</div>\n    <div id="'),i.b(i.v(i.f("aria_description_id",t,e,0))),i.b('" class="u-hiddenVisually ComposerThumbnail-ariaDescription">'),i.b(i.v(i.f("aria_description",t,e,0))),i.b("</div>\n")}),t.pop()),s.b("\n"+i),s.s(s.f("is_placeholder",t,e,1),t,e,1,0,0,"")||s.b('    <div class="ComposerThumbnail-overlay ComposerThumbnail-remove">\n      <div class="Icon Icon--close Icon--smallest"></div>\n    </div>\n'),s.b("</div>\n"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},i3qs:function(t,e,i){"use strict";e.a={BACKSPACE:8,CLEAR:12,TAB:9,ENTER:13,ESC:27,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,Y:89,Z:90}},i4AW:function(t,e,i){"use strict";function s(){this.scribeEmailSettingsClick=function(t,e){this.scribe({page:"self_unsuspend",section:"banner",component:"email_verification",element:"settings",action:"click"})},this.scribePhoneSettingsClick=function(t,e){this.scribe({page:"self_unsuspend",section:"banner",component:"phone_verification",action:"click"})},this.scribeResendConfirmationEmailClick=function(t,e){this.scribe({page:"self_unsuspend",section:"banner",component:"email_verification",element:"resend_confirmation_email",action:"click"})},this.after("initialize",function(){this.on("uiClickEmailSettingsLink",this.scribeEmailSettingsClick),this.on("uiClickPhoneSettingsLink",this.scribePhoneSettingsClick),this.on("uiResendConfirmationEmail",this.scribeResendConfirmationEmailClick)})}var n=i("DBjh"),o=i("3oDc");e.a=Object(n.default)(s,o.a)},iAIQ:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="DMConversation-lastReadMarker">\n  <div class="DMLastReadMarker">\n    <div class="DMDivider">\n      <span class="DMDivider-text">\n        \n          '),s.s(s.f("unread_count_one",t,e,1),t,e,0,181,197,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("1 unread message")}),t.pop()),s.b("\n"+i),s.b("          "),s.s(s.f("unread_count_other",t,e,1),t,e,0,252,284,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("unread_count",t,e,0))),i.b(" unread messages")}),t.pop()),s.b("\n"+i),s.b("        \n      </span>\n    </div>\n  </div>\n</div>"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},iCf7:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="VideoTrim">\n  <div class="VideoTrim-shroud"></div>\n  <div class="VideoTrim-videoContainer">\n    <video class="VideoTrim-video" preload="auto"></video>\n    <div class="VideoTrim-controls">\n      <span class="VideoTrim-playState">\n        <span class="Icon Icon--play"></span>\n        <span class="Icon Icon--pause"></span>\n      </span>\n      <div class="VideoTrim-timeline">\n        <div class="VideoTrim-timelineCursor"></div>\n        <div class="VideoTrim-scrubber">\n          <div class="VideoTrim-timeBubble"></div>\n          <div class="VideoTrim-unplayedScrubber"></div>\n        </div>\n      </div>\n      <span class="VideoTrim-timeContainer">\n        <span class="VideoTrim-time"></span>\n        <span class="VideoTrim-widestTime" aria-hidden="true"></span>\n      </span>\n      <span class="VideoTrim-audioState">\n        <span class="Icon Icon--soundOn"></span>\n        <span class="Icon Icon--soundOff"></span>\n      </span>\n    </div>\n  </div>\n  <div class="VideoTrim-selection">\n    <div class="VideoTrim-ticks"></div>\n    <div class="VideoTrim-innerSelection">\n      <div class="VideoTrim-midHandle">\n        <div class="VideoTrim-hideTicks"></div>\n        <div class="VideoTrim-leftHandle"></div>\n        <div class="VideoTrim-midHandleCursor"></div>\n        <div class="VideoTrim-midHandleInner">\n          <div class="VideoTrim-midHandleGrip"></div>\n        </div>\n        <div class="VideoTrim-rightHandle"></div>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n'),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},iH6C:function(t,e,i){"use strict";var s=i("KgvP"),n=i("CZTd"),o=i.n(n),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},r={extractMentionsForReply:function(t,e){var i=t.attr("data-screen-name"),n=t.attr("data-retweeter"),o=t.attr("data-mentions")?t.attr("data-mentions").split(" "):[],a=t.attr("data-tagged")?t.attr("data-tagged").split(" "):[];o=o.concat(a);var r=[i,e,n];return o=o.filter(function(t){return r.indexOf(t)<0}),n&&n!==i&&n!==e&&o.unshift(n),(i&&!o.length||i!==e)&&o.unshift(i),s.a.unique(o)},linkify:function(t,e){return e=a({hashtagClass:"twitter-hashtag pretty-link",hashtagUrlBase:"/search?q=%23",symbolTag:"s",textWithSymbolTag:"b",cashtagClass:"twitter-cashtag pretty-link",cashtagUrlBase:"/search?q=%24",usernameClass:"twitter-atreply pretty-link",usernameUrlBase:"/",usernameIncludeSymbol:!0,listClass:"twitter-listname pretty-link",urlClass:"twitter-timeline-link",urlTarget:"_blank",suppressNoFollow:!0,htmlEscapeNonEntities:!0},e||{}),o.a.autoLinkEntities(t,o.a.extractEntitiesWithIndices(t),e)}};e.a=r},"iN+x":function(t,e,i){"use strict";function s(t){this.attr={id:null,limit:4,storageList:"recentSearchesList",maxLength:100,ttl_ms:12096e5,searchPathWithQuery:"/search?src=typd&q=",querySource:"typed_query"},this.attr=n.default.merge(this.attr,t),this.getRemoteSuggestions=function(t,e,i){return i},this.requiresRemoteSuggestions=function(){return!1},this.removeAllRecentSearches=function(){this.items=[],this.updateStorage()},this.getLocalSuggestions=function(t,e){if(t&&""!==t.query){e(this.items.filter(function(e){return 0===e.name.indexOf(t.query)}).slice(0,this.attr.limit))}else e(this.items.slice(0,this.attr.limit))},this.updateStorage=function(){this.storage.setItem(this.attr.storageList,this.items,this.attr.ttl_ms)},this.removeOneRecentSearch=function(t){this.removeRecentSearchFromList(t.query),this.updateStorage()},this.addRecentSearch=function(t){t&&t.query&&(t.query=t.query.trim(),this.updateRecentSearchList(t),this.updateStorage())},this.updateRecentSearchList=function(t){var e=this.items,i={normalized_name:t.query.toLowerCase(),name:t.query,recent_search_path:this.attr.searchPathWithQuery+encodeURIComponent(t.query),search_query_source:this.attr.querySource};this.removeRecentSearchFromList(t.query),e.unshift(i),e.length>this.attr.maxLength&&e.pop()},this.removeRecentSearchFromList=function(t){for(var e=this.items,i=-1,s=t.toLowerCase(),n=0;n<e.length;n++)if(e[n].normalized_name===s){i=n;break}-1!==i&&e.splice(i,1)},this.initialize=function(){var t=Object(o.a)({withExpiry:!0});this.storage=new t("typeahead"),this.items=this.storage.getItem(this.attr.storageList)||[]},this.initialize()}var n=i("YzIt"),o=i("rWgq");e.a=s},id66:function(t,e,i){"use strict";(function(t){function i(){this.defaultAttrs({momentItemSelector:".MomentCurationMenuItem",addTweetFromMomentSelector:".MomentCurationMenuItem:not(.is-member)",removeTweetFromMomentSelector:".MomentCurationMenuItem.is-member",addTweetToOtherMomentSelector:".js-actionMomentMakerAddTweetToOtherMoment",addTweetToNewMomentSelector:".js-actionMomentMakerCreateMoment",momentMemberClass:"is-member"}),this.renderUserMomentsList=function(t,e){this.select("momentItemSelector").remove(),this.select("addTweetToOtherMomentSelector").toggle(e.html.length>0).before(e.html)},this.setCurationClassValue=function(t){var e=this;return function(i,s){return e.select("momentItemSelector").filter("[data-moment-id="+s.moment_id+"]").toggleClass(e.attr.momentMemberClass,t)}},this.triggerMomentCurationEvent=function(e){return function(i,s,n){var o=t(s.el),a=o.attr("data-moment-id"),r=n.$tweet.attr("data-tweet-id");this.trigger(e,{moment_id:a,tweet_id:r,scribeContext:{component:"tweet_actions_dropdown"}}),this.trigger("uiCloseDropdowns")}},this.getMomentsWithEvent=function(t){return function(e,i,s){var n=s.$tweet.attr("data-tweet-id");this.trigger(t,{tweet_id:n})}},this.after("initialize",function(){this.attr.loggedIn&&(this.on("click",{addTweetFromMomentSelector:this.composeHandler(this.getClosestTweet,this.triggerMomentCurationEvent("uiMomentMakerAddTweet")),removeTweetFromMomentSelector:this.composeHandler(this.getClosestTweet,this.triggerMomentCurationEvent("uiMomentMakerRemoveTweet")),addTweetToOtherMomentSelector:this.composeHandler(this.getClosestTweet,this.getMomentsWithEvent("uiOpenAddToMomentDialog")),addTweetToNewMomentSelector:this.composeHandler(this.getClosestTweet,this.triggerMomentCurationEvent("uiMomentMakerCreateMoment"))}),this.on("uiDropdownOpened",this.composeHandler(this.getClosestTweet,this.getMomentsWithEvent("uiMomentsGetDropdownUserMoments"))),this.on(document,"dataMomentMakerAddTweetSuccess",this.setCurationClassValue(!0)),this.on(document,"dataMomentMakerRemoveTweetSuccess",this.setCurationClassValue(!1)),this.on(document,"dataMomentsGetDropdownUserMomentsSuccess",this.renderUserMomentsList))})}e.a=i}).call(e,i("4kSj"))},igdv:function(t,e,i){"use strict";function s(){this.defaultAttrs({noShowError:!0}),this.mergeErrorParams=function(t,e,i,s){return h({},t,{error:{type:e,code:i,message:s}})},this.sendImage=function(t,e){var i=this,s=e.media_data||{},n=function(t){return i.trigger("dataMediaSruComplete",s),h({},e,{media_id:t})},o=d(t.target,"dataDMSendFailed",function(t){return i.trigger("dataMediaSruCancel",s),i.mergeErrorParams(e,"media_upload",t.code,t.message)});return s.uploadId?this.mediaSruFinalize(s).then(n,o):Promise.resolve(e)},this._sendMessagePromise=function(t,e,i){var s=this;return new Promise(function(n,o){var a=function(t){e(t),n()},r=function(t){i(t),o()};s.post({url:"/i/direct_messages/new",data:t,eventData:t,success:a,error:r})})},this.sendMessage=function(t,e){var i=this,s=function(i,s){var n=this;return s&&s.retry&&"dataDMDialogSendMessageRetry"!==t.type?setTimeout(function(){return n.trigger(i,"dataDMDialogSendMessageRetry",e)},s.delay):this.trigger(i,"dataDMSendSuccess",s),s},n=d(t.target,"dataDMSendFailed",function(t){return i.mergeErrorParams(e,"message_send",t.xhr.status,t.message)}).bind(this);return this._sendMessagePromise(e,s.bind(this,t.target),n)},this.getConversationQueue=function(t){if(t)return this.conversationQueues[t]=this.conversationQueues[t]||Object(c.a)(),this.conversationQueues[t]},this.updateInFlight=function(t){var e=this,i=Object.keys(this.conversationQueues).reduce(function(t,i){return t[i]=e.conversationQueues[i].length(),t},{});return this.trigger("dataDMMessagesInFlight",i),t},this.enqueueMessage=function(t,e){var i=this.updateInFlight.bind(this),s=this.getConversationQueue(t).enqueue(e).then(i,i);return this.updateInFlight(),s},this.handleSend=function(t,e){var i=this;e.resend_id=e.resend_id||l.a.add({event:t,sendParams:e});var s=function(){return i.sendImage(t,e).then(i.sendMessage.bind(i,t))},n=e.conversation_id;return n?this.enqueueMessage(n,s):s()},this.discardDraftData=function(t,e){e.resend_id&&l.a.remove(e.resend_id)},this.handleResend=function(t,e){var i=l.a.get(e.resend_id);i&&this.handleSend(i.event,i.sendParams)},this.after("initialize",function(){this.on("uiDMSendMessage dataDMDialogSendMessageRetry",this.handleSend),this.on("uiDMResendConfirm",this.handleResend),this.conversationQueues={},this.on("uiDMConversationNeedsInFlightState",this.updateInFlight),this.on("dataDMSendSuccess uiDMResendDiscard",this.discardDraftData)})}var n=i("DBjh"),o=i("ldNY"),a=i("VtWx"),r=i("x+k1"),c=i("GsHY"),l=i("H6fk"),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},d=o.a.triggerFn;e.a=Object(n.default)(s,a.a,r.a)},ipYT:function(t,e,i){"use strict";(function(t){function s(){this.fitIframeHeight=function(e,i){if(e&&i){var s=i.iframeSelector||this.attr.iframeSelector,o={};if(e.originalEvent&&(e=e.originalEvent),Object(n.a)(e.origin,window.location)&&"string"==typeof e.data&&t.isFunction(i.isQualified))try{o=JSON.parse(e.data),o&&i.isQualified(o)&&(this.$node.find(s).css("height",o.height+"px"),t.isFunction(i.additonalTreatment)&&i.additonalTreatment(this.$node.find(s)))}catch(t){}}}}var n=i("Hc4n");e.a=s}).call(e,i("4kSj"))},jHm3:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({streamItemSelector:".js-stream-item",promotedTweetSelector:".promoted-tweet",originalTweetSelector:".js-original-tweet",favoritedClass:"favorited",favoriteCountSelector:".ProfileTweet-action--favorite .ProfileTweet-actionCount",tweetStatCountSelector:"tweet-stat-count",tweetSelectionAlgorithmMap:{most_favorited:"getMostFavoritedTweet",mutual_follow:"getMutualFollowTweet",not_following:"getNotFollowingTweet"}}),this.getInsertionIndex=function(t,e){var i=e.prompt,s=this.getInsertionIndexForPrompt(i);s<0||this.trigger("uiPromptHasInsertionIndex",{prompt:i,insertionIndex:s})},this.getEligibleTweets=function(){var e=this.attr.promotedTweetSelector;return this.select("streamItemSelector").filter(function(i,s){return 0===t(s).find(e).length})},this.getInsertionIndexForPrompt=function(e){var i=e.renderData.pointerTweetId||this.getTweetIdForPrompt(e);return this.select("streamItemSelector").map(function(){return t(this).data("item-id").toString()}).toArray().indexOf(i)},this.getTweetIdForPrompt=function(t){var e=this.attr.tweetSelectionAlgorithmMap[t.renderData.pointerTweetSelection];if(this[e]){var i=this[e]();return i.length>0?i.data("item-id").toString():void 0}},this.getMutualFollowTweet=function(){var e=this;return this.getEligibleTweets().filter(function(i,s){var n=t(s).find(e.attr.originalTweetSelector);return n.data("you-follow")&&n.data("follows-you")}).eq(0)},this.getNotFollowingTweet=function(){var e=this;return this.getEligibleTweets().filter(function(i,s){return!t(s).find(e.attr.originalTweetSelector).data("you-follow")}).eq(0)},this.getMostFavoritedTweet=function(){var e=this;return this.getEligibleTweets().filter(function(i,s){return!t(s).find(e.attr.originalTweetSelector).hasClass(e.attr.favoritedClass)}).sort(function(i,s){var n=function(i){return t(i).find(e.attr.favoriteCountSelector).data(e.attr.tweetStatCountSelector)};return n(s)-n(i)}).eq(0)},this.after("initialize",function(){this.on("uiPromptNeedsInsertionIndex",this.getInsertionIndex)})}var n=i("DBjh");e.a=Object(n.default)(s)}).call(e,i("4kSj"))},jctv:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({tweetItemSelector:".tweet",deleteSelector:".js-actionDelete",shareViaDMSelector:".js-actionShareViaDM",copyLinkToTweetSelector:".js-actionCopyLinkToTweet",embedTweetSelector:".js-actionEmbedTweet",embedVideoSelector:".js-actionEmbedVideo",openAdsInfoLinkSelector:".js-actionOpenAdsInfoPage",openWhyThisAdModalSelector:".js-actionWhyThisAd",blockOrReportTweetSelector:".js-actionBlockOrReport",blockTweetSelector:".js-actionBlock",reportTweetSelector:".js-actionReport",unblockTweetSelector:".js-actionUnblock",userTogglePinTweetSelector:".js-actionPinTweet",curateTweetSelector:".js-actionCurateTweet",curateToOtherSelector:".js-actionCurateTweetOther",curateToNewTimelineSelector:".js-actionCurateTweetNewTimeline",removeMediaTagSelector:".js-actionRemoveTag",tweetContainerSelector:".js-stream-item",mediaTagContainerSelector:".media-tags-container",pinnedTweetClass:"user-pinned",hasTimelinesClass:"has-timelines"}),this.renderCustomTimelinesList=function(t,e){var i=this.select("curateToOtherSelector");this.select("curateTweetSelector").remove(),i.before(e.html),this.select("curateTweetSelector").length>0&&i.addClass(this.attr.hasTimelinesClass)},this.curateTweet=function(e,i,s){var n=t(i.el),o=n.attr("data-timeline-id"),a=n.data("is-member"),r=s.tweetData;r.timelineId=o,a?this.trigger("uiCurateRemoveTweet",r):this.trigger("uiCurateAddTweet",r),this.trigger("uiCloseDropdowns")},this.getCustomTimelines=function(t,e,i){var s=i.$tweet.attr("data-tweet-id");this.trigger("uiNeedsCustomTimelines",{tweetId:s})},this.confirmRemoveMediaTag=function(t){this.trigger(t.target,"uiOpenConfirmDialog",{titleText:Object(n.default)("Remove photo tag from Tweet?"),bodyText:Object(n.default)("Are you sure you want to remove your photo tag from this Tweet?"),cancelText:Object(n.default)("Cancel"),submitText:Object(n.default)("OK"),action:"MediaTagRemove"})},this.removeMediaTag=function(t,e,i){this.trigger(document,"uiDidRemoveMediaTag",i.tweetData)},this.handleRemoveMediaTagSuccess=function(t,e){Object(a.a)(this.$node,this.attr.tweetItemSelector,e.id_str).find(this.attr.mediaTagContainerSelector).html(e.item_html),this.trigger("uiShowMessage",{message:Object(n.default)("Photo tag removed")})},this.handleRemoveMediaTagFailure=function(t){this.trigger("uiShowMessage",{message:Object(n.default)("Cannot delete the tag. Please try again later.")})},this.showConfirmPinDialog=function(t){t.stopImmediatePropagation(),this.trigger(t.target,"uiOpenConfirmDialog",{titleText:Object(n.default)("Pin this Tweet to the top of your profile"),bodyText:Object(n.default)("This will replace any previously pinned Tweet. Are you sure?"),cancelText:Object(n.default)("Cancel"),submitText:Object(n.default)("Pin"),action:"UserPinTweetToggle"})},this.showConfirmUnPinDialog=function(t){t.stopImmediatePropagation(),this.trigger(t.target,"uiOpenConfirmDialog",{titleText:Object(n.default)("Unpin from your profile"),bodyText:Object(n.default)("Are you sure?"),cancelText:Object(n.default)("Cancel"),submitText:Object(n.default)("Unpin"),action:"UserPinTweetToggle"})},this.showUserPinToggledMessage=function(t,e){this.trigger("uiShowStickyMessage",e)},this.unpinOtherTweets=function(t,e){this.select("tweetItemSelector").removeClass(this.attr.pinnedTweetClass),this.handleTransition("addClass",this.attr.pinnedTweetClass).call(this,t,e)},this.handleTransition=function(t,e){return function(i,s){var n=s.id||s.sourceEventData.id;Object(a.a)(this.$node,this.attr.tweetItemSelector,n)[t](e)}},this.confirmPinToggle=function(t,e,i){var s=i.$tweet.hasClass(this.attr.pinnedTweetClass)?"uiNeedUserUnpinTweetConfirm":"uiNeedUserPinTweetConfirm";this.trigger(i.$tweet,s)},this.togglePinnedTweet=function(t,e,i){return i.$tweet.hasClass(this.attr.pinnedTweetClass)?"uiDidUserUnpinTweet":"uiDidUserPinTweet"},this.unblockFromTweetAction=function(t,e){this.trigger("uiCloseDropdowns"),this.trigger("uiUnblockAction",e)},this.openAdsInfoLink=function(t,e){window.open("https://business.twitter.com/help/how-twitter-ads-work","_blank"),this.trigger("uiCloseDropdowns")},this.after("initialize",function(){var t=this.mkTweetDataCollectorForAction(this.interactionDataWithCard);this.on("click",{embedTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiNeedsEmbedTweetDialog")),embedVideoSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiNeedsEmbedVideoDialog")),copyLinkToTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiNeedsCopyLinkToTweetDialog")),openWhyThisAdModalSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiNeedsWhyThisAdDialog")),openAdsInfoLinkSelector:this.openAdsInfoLink}),this.attr.loggedIn&&(this.on("click",{deleteSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiOpenDeleteDialog")),userTogglePinTweetSelector:this.composeHandler(this.getClosestTweet,this.confirmPinToggle),shareViaDMSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiComposeNewDMWithTweet")),curateTweetSelector:this.composeHandler(this.getClosestTweet,t,this.curateTweet),curateToOtherSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiOpenCurateDialog")),curateToNewTimelineSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiOpenCreateCustomTimelineDialog")),removeMediaTagSelector:this.confirmRemoveMediaTag,blockOrReportTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiNeedsBlockOrReportDialog")),blockTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiNeedsBlockDialog")),unblockTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiDidUnblockFromTweet")),reportTweetSelector:this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction("uiNeedsReportDialog"))}),this.on("uiDropdownOpened",this.composeHandler(this.getClosestTweet,this.getCustomTimelines)),this.on("uiUserPinTweetToggleConfirm",this.composeHandler(this.getClosestTweet,t,this.triggerTweetAction(this.togglePinnedTweet.bind(this)))),this.on("uiMediaTagRemoveConfirm",this.composeHandler(this.getClosestTweet,t,this.removeMediaTag)),this.on(document,"uiHasInjectedNewTimeline uiHasInjectedOldTimelineItems uiHasInjectedRangeTimelineItems",this.applyARIAAttrs),this.on(document,"dataGotCustomTimelines",this.renderCustomTimelinesList),this.on(document,"uiNeedUserPinTweetConfirm",this.showConfirmPinDialog),this.on(document,"uiNeedUserUnpinTweetConfirm",this.showConfirmUnPinDialog),this.on(document,"uiDidUnblockFromTweet",this.unblockFromTweetAction),this.on(document,"dataDidUserPinTweet dataDidUserUnpinTweet",this.showUserPinToggledMessage),this.on(document,"dataDidUserPinTweet",this.unpinOtherTweets),this.on(document,"uiDidUserPinTweet dataFailedToUserUnpinTweet",this.handleTransition("addClass",this.attr.pinnedTweetClass)),this.on(document,"uiDidUserUnpinTweet dataFailedToUserPinTweet",this.handleTransition("removeClass",this.attr.pinnedTweetClass)),this.on(document,"dataMediaTagRemoveSuccess",this.handleRemoveMediaTagSuccess),this.on(document,"dataMediaTagRemoveFailure",this.handleRemoveMediaTagFailure))})}var n=i("0d4m"),o=i("DBjh"),a=i("xO2U"),r=i("mGri"),c=i("alSu"),l=i("2KB6"),h=i("RhwY"),d=i("id66"),u=Object(o.default)(s,r.a,h.a,c.a,l.a,d.a);e.a=u}).call(e,i("4kSj"))},jmwl:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={"dialogs/close_button":i("38hD")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="modal modal-medium draggable">\n  <div class="modal-content">\n'),s.b(s.rp("<dialogs/close_button0",t,e,"    ")),s.b('    <div class="modal-header">\n      <h3 class="modal-title">\n        '),s.s(s.f("is_create_dialog",t,e,1),t,e,0,194,217,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("Create a new collection")}),t.pop()),s.b("\n"+i),s.b("        "),s.s(s.f("is_create_dialog",t,e,1),t,e,1,0,0,"")||s.b("Edit collection"),s.b("\n"+i),s.b('      </h3>\n    </div>\n\n    <div class="modal-body">\n      <div class="custom-timeline-editor">\n        '),s.s(s.f("is_create_dialog",t,e,1),t,e,0,430,621,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('<p class="explanation">\n          Collections are public sets of Tweets that you control.\n          <br />\n          Create a collection, add Tweets, and share it with the world.\n        </p>')}),t.pop()),s.b("\n"),s.b("\n"+i),s.b('        <div class="field custom-timeline-name-field">\n          <label class="t1-label" for="custom-timeline-name">Collection name</label>\n          <input type="text" class="text" name="name" id="custom-timeline-name" value="'),s.b(s.v(s.f("timeline_name",t,e,0))),s.b('" aria-describedby="custom-timeline-name-help" />\n          <p class="help-text">\n            <span id="custom-timeline-name-help">25 characters</span>\n            <span class="custom-timeline-name-count">25</span>\n          </p>\n        </div>\n        <hr/>\n\n        <div class="field custom-timeline-description-field">\n          <label class="t1-label" for="custom-timeline-description">Description</label>\n          <textarea name="custom-timeline-description" id="custom-timeline-description" aria-describedby="custom-timeline-description-help">'),s.b(s.v(s.f("timeline_description",t,e,0))),s.b('</textarea>\n          <p class="help-text">\n            <span id="custom-timeline-description-help">160 characters, optional</span>\n            <span class="custom-timeline-description-count">160</span>\n          </p>\n        </div>\n        <hr/>\n\n        <fieldset class="field">\n          <legend class="t1-legend">Collection order</legend>\n          <div class="options">\n            <label class="t1-label u-block">\n              <input class="radio u-inlineBlock" type="radio" name="'),s.b(s.v(s.f("id_prefix",t,e,0))),s.b('-timeline-order" value="curation_reverse_chron"'),s.s(s.f("curation_reverse_chron",t,e,1),t,e,0,2037,2055,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(' checked="checked"')}),t.pop()),s.b(' />\n              <b>Recently added first</b>\n            </label>\n            <label class="t1-label u-block">\n              <input class="radio u-inlineBlock" type="radio" name="'),s.b(s.v(s.f("id_prefix",t,e,0))),s.b('-timeline-order" value="tweet_chron"'),s.s(s.f("tweet_chron",t,e,1),t,e,0,2327,2345,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(' checked="checked"')}),t.pop()),s.b(' />\n              <b>Oldest first</b>\n            </label>\n            <label class="t1-label u-block">\n              <input class="radio u-inlineBlock" type="radio" name="'),s.b(s.v(s.f("id_prefix",t,e,0))),s.b('-timeline-order" value="tweet_reverse_chron"'),s.s(s.f("tweet_reverse_chron",t,e,1),t,e,0,2614,2632,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(' checked="checked"')}),t.pop()),s.b(' />\n              <b>Newest first</b>\n            </label>\n          </div>\n        </fieldset>\n        <hr/>\n\n        <div class="custom-timeline-editor-save">\n          <button type="button" class="EdgeButton EdgeButton--primary update-custom-timeline-button" data-custom-timeline-id="'),s.b(s.v(s.f("id",t,e,0))),s.b('" disabled>\n            '),s.s(s.f("is_create_dialog",t,e,1),t,e,0,2994,3011,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("Create collection")}),t.pop()),s.b("\n"+i),s.b("            "),s.s(s.f("is_create_dialog",t,e,1),t,e,1,0,0,"")||s.b("Save collection"),s.b("\n"+i),s.b("          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},jonA:function(t,e,i){"use strict";function s(){this.defaultAttrs({focusClass:"focus",activeClass:"active",fileInputSelector:".file-input",uploadPhotoSelector:".photo-selector",imageBtnSelector:".photo-selector .btn"}),this.hideAndDisableImageButton=function(){this.select("uploadPhotoSelector").hide()},this.showAndEnableImageButton=function(){this.select("uploadPhotoSelector").show()},this.applyFocusStyleImageButton=function(t){this.select("imageBtnSelector").addClass(this.attr.focusClass)},this.removeFocusStyleImageButton=function(t){this.select("imageBtnSelector").removeClass(this.attr.focusClass)},this.applyActiveStyleImageButton=function(t){this.select("imageBtnSelector").addClass(this.attr.activeClass)},this.removeActiveStyleImageButton=function(t){this.select("imageBtnSelector").removeClass(this.attr.activeClass)},this.after("initialize",function(){this.on("focusin",{fileInputSelector:this.applyFocusStyleImageButton}),this.on("focusout",{fileInputSelector:this.removeFocusStyleImageButton}),this.on("mousedown",{fileInputSelector:this.applyActiveStyleImageButton}),this.on("mouseup mouseleave",{fileInputSelector:this.removeActiveStyleImageButton}),this.on("uiEnableImageSelection",this.showAndEnableImageButton),this.on("uiDisableImageSelection",this.hideAndDisableImageButton)})}e.a=s},k7B4:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({promptType:null,promptSelector:".PromptbirdPrompt",actionSelector:".js-promptAction",dismissSelector:".js-promptDismiss",promptLayoutContainerSelector:".js-prompt-layout-container",promptBirdStreamItemSelector:".PromptbirdPrompt-streamItem",isStickyClass:"js-isSticky",triggerImpressionOnInsert:!0}),this.insertPrompt=function(t){},this.removePrompt=function(t){t.closest(this.attr.promptLayoutContainerSelector).remove()},this.showPrompt=function(t,e){var i=this.filterPrompt(e.prompt);i&&(i.html=o.a.getPromptHtml(i,this.attr.format),this.insertPrompt(i),this.bootPrompt(i),this.attr.triggerImpressionOnInsert&&this.trigger("uiPromptbirdPromptWasShown",this.triggerData(i.id)))},this.bootPrompt=function(t){var e=this;if(t.js_boot){var s=function(i){return i({promptElement:e.getPromptByPromptId(t.id)})};i.e(1).then(function(e){var n=i("wswO")("./"+t.js_boot).default;s(n)}.bind(null,i)).catch(i.oe)}},this.filterPrompt=function(t){if(this.attr.promptType===t.type)return t},this.actionClicked=function(e,i){this.triggerPromptAction(i.el,"uiPromptbirdClick"),t(i.el).hasClass(this.attr.isStickyClass)||this.removePrompt(this.getPromptFromChild(i.el))},this.dismissClicked=function(t,e){t.preventDefault(),this.dismissPrompt(e.el)},this.dismissPrompt=function(e){this.triggerPromptAction(e,"uiPromptbirdDismissPrompt");var i=t(e).closest(this.attr.promptBirdStreamItemSelector);this.trigger(i,"uiRemoveClassBeforePromptbird"),this.removePrompt(this.getPromptFromChild(e))},this.triggerPromptAction=function(e,i){var s=this.getPromptFromChild(e),n=s.data("prompt-intent"),o=s.data("prompt-intent-params"),a=parseInt(s.data("prompt-id"),10),r=t(e).data("prompt-action-type"),c=t(e).data("prompt-scribe-action");this.trigger(i,this.triggerData(a,n,o,r,c))},this.triggerData=function(t,e,i,s,n){return{scribeContext:{component:"promptbird_"+t},prompt_id:t,intent:e,intent_params:i,prompt_action_type:s,prompt_scribe_action:n}},this.getPromptFromChild=function(e){return t(e).closest(this.attr.promptSelector)},this.getPromptByPromptId=function(t,e){var i=this.attr.promptSelector+'[data-prompt-id="'+t+'"]',s=this.$node.find(i).addBack(i);return e?s.closest(this.attr.promptLayoutContainerSelector):s},this.getPromptIdFromNode=function(t){return(t.is(this.attr.promptSelector)?t:t.find(this.attr.promptSelector)).data("prompt-id")},this.after("initialize",function(){this.on(document,"uiPromptbirdShouldRenderPrompt",this.showPrompt),this.on("click",{actionSelector:this.actionClicked,dismissSelector:this.dismissClicked})})}var n=i("DBjh"),o=i("GXXu");e.a=Object(n.default)(s)}).call(e,i("4kSj"))},kPI8:function(t,e,i){"use strict";function s(){this.defaultAttrs({intent:"post_then_trigger"}),this.action=function(t){var e=this,i=o.a.decode(t),s=i.post_path,n=i.success_event_name,a=i.fail_event_name,r=this.tryParseData(i.post_data),c=this.tryParseData(i.success_event_data),l=this.tryParseData(i.fail_event_data);return this.post({url:s,data:r}).then(function(){return e.trigger(n,c)}).catch(function(){a&&e.trigger(a,l)})},this.tryParseData=function(t){var e=void 0;try{e=JSON.parse(t)}catch(t){e={}}return e}}var n=i("r5nI"),o=i("TX0g"),a=i("VtWx");e.a=n.a.mixin(s,a.a)},"kS/N":function(t,e,i){"use strict";function s(){this.attributes({defaultDisplayDuration:5e3,defaultIcon:void 0}),this.displayNotification=function(t,e){if(e&&"granted"===Notification.permission){var i=new Notification(e.title,{body:e.body,icon:e.icon||this.attr.defaultIcon,tag:e.tag});this.trigger("uiNativeNotificationTriggered",{type:e.type}),i.onclick=this.clickCallback.bind(this,e.click,e.type),i.onerror=this.errorCallback.bind(this,e.error,e.type),setTimeout(i.close.bind(i),e.displayDuration||this.attr.defaultDisplayDuration)}},this.clickCallback=function(t,e,i){i.target.close&&i.target.close(),this.trigger("uiNativeNotificationClicked",{type:e}),this.triggerEventWithData(t)},this.errorCallback=function(t,e){this.trigger("uiNativeNotificationError",{type:e}),this.triggerEventWithData(t)},this.triggerEventWithData=function(t){t&&t.eventName&&this.trigger(t.eventName,t.eventData||{})},this.requestPermission=function(){var t=this;Notification.requestPermission(function(e){switch(e){case"granted":t.trigger("uiNativeNotificationPermissionGranted");break;case"denied":t.trigger("uiNativeNotificationPermissionDenied");break;case"default":t.trigger("uiNativeNotificationPermissionDismissed")}}),this.trigger("uiNativeNotificationPermissionRequested")},this.after("initialize",function(){"Notification"in window&&(this.on("uiRequestNativeNotificationPermission",this.requestPermission),this.on("uiDisplayNativeNotification",this.displayNotification))})}var n=i("DBjh"),o=Object(n.default)(s);e.a=o},koaM:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={"dm/dm_typeahead_item":i("Y2I5")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<li class="DMTokenizedMultiselectSuggestion '),s.b(s.v(s.f("suggestion_class",t,e,0))),s.b(" "),s.s(s.f("preselected",t,e,1),t,e,0,81,95,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("is-preselected")}),t.pop()),s.b(" "),s.s(s.f("selected",t,e,1),t,e,0,125,136,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("is-selected")}),t.pop()),s.b('" data-token-id="'),s.b(s.v(s.f("data_token_id",t,e,0))),s.b('" data-token-text="'),s.b(s.v(s.f("data_token_text",t,e,0))),s.b('" role="option" tabindex="-1">\n  <div class="DMTokenizedMultiselectSuggestion-body">\n'),s.b(s.rp("<dm/dm_typeahead_item0",t,e,"    ")),s.b('  </div>\n  <div class="DMTokenizedMultiselectSuggestion-state">\n    <span class="DMTokenizedMultiselectSuggestion-selectedIndicator Icon Icon--check"></span>\n    <span class="DMTokenizedMultiselectSuggestion-preselectedIndicator">In Group</span>\n  </div>\n</li>\n'),s.fl()},partials:{"<dm/dm_typeahead_item0":{name:"dm/dm_typeahead_item",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},kz7R:function(t,e,i){"use strict";function s(){this.after("initialize",function(){this.scribeOnEvent("uiPushPromptShown",{component:"push_manager",element:"soft_prompt",action:"impression"}),this.scribeOnEvent("uiPushPromptClick",{component:"push_manager",element:"soft_prompt",action:"click"}),this.scribeOnEvent("uiPushPromptDismiss",{component:"push_manager",element:"soft_prompt",action:"dismiss"}),this.scribeOnEvent("uiBrowserPushPromptImpression",{component:"push_manager",element:"browser_prompt",action:"impression"}),this.scribeOnEvent("uiBrowserPushPromptAllow",{component:"push_manager",element:"browser_prompt",action:"permissions_granted"}),this.scribeOnEvent("uiBrowserPushPromptDeny",{component:"push_manager",element:"browser_prompt",action:"permissions_denied"}),this.scribeOnEvent("uiBrowserPushPermissionDenied",{component:"push_manager",action:"permissions_denied"}),this.scribeOnEvent("uiBrowserPushPromptDismiss",{component:"push_manager",element:"browser_prompt",action:"dismiss"}),this.scribeOnEvent("uiBrowserPushPromptError",{component:"push_manager",element:"browser_prompt",action:"permissions_error"}),this.scribeOnEvent("uiBrowserPushUnsubscribe",{component:"push_manager",action:"disable"}),this.scribeOnEvent("uiBrowserSilentSubscribeAttempt",{component:"push_manager",element:"silent_subscribe",action:"impression"}),this.scribeOnEvent("uiBrowserSilentSubscribeError",{component:"push_manager",element:"silent_subscribe",action:"error"}),this.scribeOnEvent("uiBrowserSilentSubscribeSuccess",{component:"push_manager",element:"silent_subscribe",action:"success"})})}var n=i("DBjh"),o=i("3oDc");e.a=Object(n.default)(o.a,s)},l8CN:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<a href="#" class="DMReadReceiptUserList-expandSeen">\n  \n    '),s.s(s.f("user_count_one",t,e,1),t,e,0,80,100,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("user_count",t,e,0))),i.b(" other")}),t.pop()),s.b("\n"+i),s.b("    "),s.s(s.f("user_count_other",t,e,1),t,e,0,145,166,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("user_count",t,e,0))),i.b(" others")}),t.pop()),s.b("\n"+i),s.b("  \n</a>"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},lRgq:function(t,e,i){"use strict";(function(t){function i(){this.defaultAttrs({focusClass:"focus",focusContainerSelector:".tweet"}),this.addFocusStyle=function(e,i){t(i.el).addClass(this.attr.focusClass)},this.addFocusStyleToTarget=function(e){t(e.target).addClass(this.attr.focusClass)},this.removeFocusStyle=function(e,i){var s=this;setTimeout(function(){var e=i.el,n=document.activeElement;t.contains(e,n)||e===n||t(e).removeClass(s.attr.focusClass)},0)},this.after("initialize",function(){this.on(document,"uiShouldAddFocusStyle",this.addFocusStyleToTarget),this.on("focusin",{focusContainerSelector:this.addFocusStyle}),this.on("focusout",{focusContainerSelector:this.removeFocusStyle})})}e.a=i}).call(e,i("4kSj"))},lTdQ:function(t,e,i){"use strict";function s(){this.createActionHandler=function(t,e){var i=this;return function(s,n){return i.post({url:"/i/moments/edit/"+n.moment_id+"/"+t,data:n,success:"dataMomentMaker"+e+"TweetSuccess",error:"dataMomentMaker"+e+"TweetFailure"})}},this.bindAction=function(t){var e=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase();this.on("uiMomentMaker"+e+"Tweet",this.createActionHandler(t.toLowerCase(),e))},this.sortMoment=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/sort",data:e,success:"dataMomentMakerSortMomentSuccess",error:this.genericErrorMessage.bind(this)})},this.editMetaData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/meta",data:e,success:"dataMomentMakerEditMetaSuccess",error:"dataMomentMakerEditMetaFailure",noAbortOnNavigate:!0})},this.setCoverData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/update_cover",data:e,success:"dataMomentMakerSetCoverSuccess",error:"dataMomentMakerSetCoverFailure"})},this.setCoverCropData=function(t,e){this.post({url:"/i/moments/edit/"+e.moment_id+"/update_cover",data:e,success:"dataMomentMakerSetCoverCropSuccess",error:"dataMomentMakerSetCoverCropFailure"})},this.setCoverDataByMediaId=function(t,e){function i(){this.trigger("dataMomentMakerSetCoverFailure")}var s=this,n=e.fileId,a=o.a.get(n);if(a)return this.trigger(document,"uiMediaSruInit",{fileId:n,uploadId:a.uploadId,mediaCategory:a.mediaCategory}),this.mediaSruFinalize(a).then(function(t){return s.post({url:"/i/moments/edit/"+e.momentId+"/update_cover/"+t,success:"dataMomentMakerSetCoverSuccess",error:"dataMomentMakerSetCoverFailure"})}).catch(function(t){throw i(),t})},this.createMoment=function(t,e){function i(t){this.trigger("uiNavigate",{href:t.url})}function s(){this.trigger("uiShowError",{message:Object(l.default)("Something went wrong. This Moment couldn't be created. Give it a minute, then try again.")})}this.post({url:"/i/moments/create",data:e,success:i.bind(this),error:s.bind(this)})},this.deleteMoment=function(t,e){function i(t){this.trigger("dataMomentMakerDeleteMomentSuccess",{href:t.href||"/i/moments"})}this.post({url:"/i/moments/delete",data:e,success:i.bind(this),error:"dataMomentMakerDeleteMomentFailure"})},this.updateCrop=function(t,e){function i(){this.trigger("dataMomentMakerUpdateCropFailure"),this.genericErrorMessage()}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_crop",data:e,success:"dataMomentMakerUpdateCropSuccess",error:i.bind(this)})},this.updateMomentVisibility=function(t,e){function i(t){t&&t.permission_error?this.trigger("uiShowError",{message:Object(l.default)("You do not currently have permission to perform this action.")}):this.trigger("uiMomentMakerUpdateVisibilitySuccess",h({},t,e))}function s(){this.trigger("uiMomentMakerUpdateVisibilityError",e),this.genericErrorMessage()}this.post({url:"/i/moments/visibility/"+e.moment_id,data:{mode:e.visibility_mode},success:i.bind(this),error:s.bind(this)})},this.updateNSFWSetting=function(t,e){function i(){this.trigger("uiShowMessage",{message:Object(l.default)("Moment sensitivity updated successfully.")})}function s(){this.trigger("dataMomentMakerUpdateNSFWError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_nsfw",data:e,success:i.bind(this),error:s.bind(this)})},this.updatePublishLocationSetting=function(t,e){function i(){this.trigger("uiShowMessage",{message:Object(l.default)("Moment location setting updated successfully.")})}function s(){this.trigger("dataMomentMakerUpdatePublishLocationError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_publish_location",data:e,success:i.bind(this),error:s.bind(this)})},this.updateThemeColorSetting=function(t,e){function i(){this.trigger("dataMomentMakerUpdateThemeColorError",{previous_value:e.previous_value})}this.post({url:"/i/moments/edit/"+e.moment_id+"/update_theme_color",data:e,success:"dataMomentMakerUpdateThemeColorSuccess",error:i.bind(this)})},this.genericErrorMessage=function(){this.trigger("uiShowError",{message:Object(l.default)("Something went wrong. Give it a minute, then try again.")})},this.after("initialize",function(){this.bindAction("add"),this.bindAction("remove"),this.bindAction("reorder"),this.on("uiMomentMakerSortMoment",this.sortMoment),this.on("uiMomentMakerEditMeta",this.editMetaData),this.on("uiMomentMakerSetCover",this.setCoverData),this.on("uiMomentMakerSetCoverCrop",this.setCoverCropData),this.on("uiMomentMakerSetCoverByMediaId",this.setCoverDataByMediaId),this.on("uiMomentMakerCreateMoment",this.createMoment),this.on("uiMomentMakerDeleteMoment",this.deleteMoment),this.on("uiMomentMakerUpdateVisibility",this.updateMomentVisibility),this.on("uiMomentMakerUpdateCrop",this.updateCrop),this.on("uiMomentMakerUpdateNSFW",this.updateNSFWSetting),this.on("uiMomentMakerUpdatePublishLocation",this.updatePublishLocationSetting),this.on("uiMomentMakerUpdateThemeColor",this.updateThemeColorSetting)})}var n=i("DBjh"),o=i("H6fk"),a=i("VtWx"),r=i("9np9"),c=i("x+k1"),l=i("0d4m"),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=Object(n.default)(s,a.a,r.a,c.a)},lbzY:function(t,e,i){"use strict";(function(t){function s(){this.clickItems=function(t,e){this.trigger("uiItemClick")},this.itemSelect=function(){var t=void 0,e={index:this.node.selectedIndex},i=void 0;if(this.node.selectedIndex>=0){i=this.node.options[this.node.selectedIndex];for(var s=0;s<i.attributes.length;s++)t=i.attributes[s].name,e[t]=i.attributes[s].value;e.text=i.innerHTML}this.trigger("uiItemSelect",e)},this.setItems=function(e,i){var s=this;this.$node.empty(),i.items&&i.items.forEach(function(e){var i=t("<option />");for(var n in e)"text"===n?i.html(e[n]):i.attr(n,e[n]);i.appendTo(s.$node)}),this.itemSelect()},this.after("initialize",function(){this.node.jquery&&(this.node=this.node[0]),this.attr.items&&this.node.trigger("setItems",{items:this.attr.items}),this.on("setItems",this.setItems),this.on("change",this.itemSelect),this.on("mousedown",this.clickItems)})}var n=i("DBjh");e.a=Object(n.default)(s)}).call(e,i("4kSj"))},lcsn:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<span class="EmojiPicker-categoryColumn">\n'),s.s(s.f("categories",t,e,1),t,e,0,59,205,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('    <button type="button" class="EmojiCategoryIcon EmojiCategoryIcon--'),i.b(i.v(i.f("id",t,e,0))),i.b('" title="'),i.b(i.v(i.f("title",t,e,0))),i.b('" data-category="'),i.b(i.v(i.f("id",t,e,0))),i.b('" tabindex="-1"></button>\n')}),t.pop()),s.b("</span>"),s.b('<span class="EmojiPicker-mainColumn">\n  <div class="EmojiPicker-query">\n    <input class="EmojiPicker-queryInput" type="text" autocomplete="off" placeholder="Search for emoji">\n    <button type="button" class="Icon Icon--close EmojiPicker-clearQuery"></button>\n  </div>\n  <div class="EmojiPicker-scrollableRow">\n    <div class="EmojiPicker-loading">\n      <span class="spinner-bigger"></span>\n    </div>\n    <div class="EmojiPicker-results">\n'),s.s(s.f("categories",t,e,1),t,e,0,723,1107,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.b('        <div class="EmojiPicker-categoryResult" data-category="'),s.b(s.v(s.f("id",t,e,0))),s.b('">\n          <h3 class="EmojiPicker-categoryHeader">\n            '),s.b(s.v(s.f("title",t,e,0))),s.b("\n"+i),s.s(s.f("is_recent",t,e,1),t,e,0,894,999,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('              <button type="button" class="EmojiPicker-clearRecent btn-link">Clear</button>\n')}),t.pop()),s.b('          </h3>\n          <div class="EmojiPicker-categoryItems"></div>\n        </div>\n')}),t.pop()),s.b('    </div>\n  </div>\n  <div class="EmojiPicker-diversityRow">'),s.s(s.f("skin_tones",t,e,1),t,e,0,1208,1466,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('<input class="EmojiPicker-skinTone" type="radio" name="skin-tone" value = "'),i.b(i.v(i.f("value",t,e,0))),i.b('" title="'),i.b(i.v(i.f("title",t,e,0))),i.b('"><span class="EmojiPicker-skinToneSwatch">'),i.b('<span class="Icon Icon--checkLight Icon--smallest"></span>'),i.b("</span>")}),t.pop()),s.b("</div>\n</span>\n"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},ldNY:function(t,e,i){"use strict";(function(t){e.a={triggerFn:function(e,i,s){return i=Array.isArray(i)?i:[i],function(n){i.forEach(function(i){var o=t.isFunction(i)?i(n):i,a=t.isFunction(s)?s(n):s;o&&t(e).trigger(o,a||n)})}},chain:function(){var e=Array.prototype.slice.call(arguments);return function(){var i=Array.prototype.slice.call(arguments);for(var s in e)t.isFunction(e[s])&&e[s].apply(e[s],i)}}}}).call(e,i("4kSj"))},liht:function(t,e,i){"use strict";function s(){this.defaultAttrs({sharedTweetSelector:".DirectMessage-tweet"}),this.openSharedTweet=function(t,e){this.trigger("uiDMDialogSharedTweetClick")},this.after("initialize",function(){this.on("click",{sharedTweetSelector:this.openSharedTweet})})}var n=i("DBjh"),o=i("o/dd"),a=Object(n.default)(s,o.a);e.a=a},lsLN:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={"dialogs/close_button":i("38hD"),"media/video_trim":i("iCf7")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="modal draggable MediaEditDialog'),s.s(s.f("is_video",t,e,1),t,e,1,0,0,"")||s.b(" MediaEditDialog--photo"),s.b('">\n  <div class="modal-content">\n'),s.b(s.rp("<dialogs/close_button0",t,e,"    ")),s.b('    <div class="modal-header">\n      <h3 class="modal-title">'),s.b(s.v(s.f("title",t,e,0))),s.b("</h3>\n    </div>\n"),s.s(s.f("is_video",t,e,1),t,e,0,259,2741,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('      <div class="MediaEditDialog-videoSection">\n        <div class="modal-body">\n'),i.b(i.rp("<media/video_trim1",t,e,"          ")),i.s(i.f("whitelisted_video_user",t,e,1),t,e,0,411,2503,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b('            <form class="MediaEditForm form-horizontal">\n              <div class="control-group">\n                <div class="MediaEditForm-titleCharCounter CharCounter">\n                  <input class="MediaEditForm-title CharCounter-target js-initial-focus" type="text" name="video_metadata[title]" value="'),i.b(i.v(i.f("video_title",t,e,0))),i.b('" placeholder="Type the title of your video here" />\n                  <div class="CharCounter-counter"></div>\n                </div>\n              </div>\n              <div class="control-group">\n                <div class="MediaEditForm-descriptionCharCounter CharCounter">\n                  <textarea class="MediaEditForm-description CharCounter-target" name="video_metadata[description]" placeholder="Type a brief description here.">'),i.b(i.v(i.f("video_description",t,e,0))),i.b('</textarea>\n                  <div class="CharCounter-counter"></div>\n                </div>\n              </div>\n              <div class="control-group MediaEditForm-ctaContainer">\n                <select class="MediaEditForm-ctaSelect'),i.s(i.f("has_cta",t,e,1),t,e,1,0,0,"")||i.b(" u-inactive"),i.b(' t1-select" name="video_metadata[cta]">\n                  <option value="" '),i.s(i.f("has_cta",t,e,1),t,e,1,0,0,"")||i.b(" selected"),i.b('>Choose a call to action</option>\n                  <option value="visit_site"'),i.s(i.f("is_cta_visit_site",t,e,1),t,e,0,1674,1683,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(" selected")}),t.pop()),i.b('>Visit site:</option>\n                  <option value="watch_now"'),i.s(i.f("is_cta_watch_now",t,e,1),t,e,0,1791,1800,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(" selected")}),t.pop()),i.b('>Watch now:</option>\n                </select>\n                <input class="MediaEditForm-ctaUrl'),i.s(i.f("has_cta",t,e,1),t,e,1,0,0,"")||i.b(" u-hidden"),i.b('" type="text" name="video_metadata[cta_url]" value="'),i.b(i.v(i.f("video_ctl_url",t,e,0))),i.b('" placeholder="Website" />\n              </div>\n              <div class="control-group">\n                <div class="checkbox">\n                  <label>\n                    <input class="MediaEditForm-embeddable" type="checkbox" name="video_metadata[embeddable]" value="true" '),i.s(i.f("is_video_embeddable",t,e,1),t,e,0,2322,2329,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("checked")}),t.pop()),i.b(">\n                    Allow video to be embedded\n                  </label>\n                </div>\n              </div>\n            </form>\n")}),t.pop()),i.b('        </div>\n        <div class="modal-footer text-right">\n          <button type="button" class="EdgeButton EdgeButton--primary js-done">\n            Done\n          </button>\n        </div>\n      </div>\n')}),t.pop()),s.s(s.f("is_video",t,e,1),t,e,1,0,0,"")||(s.b('      <div class="MediaEditDialog-photoSection">\n        <div class="modal-body"><div class="MediaEditDialog-photoContainer"></div></div>\n'),s.s(s.f("can_compose_alt_text",t,e,1),t,e,0,2944,3380,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('          <div class="MediaEditDialog-footer modal-footer">\n            <textarea aria-label="Image description" class="MediaEditDialog-altTextTextarea js-initial-focus" placeholder="Describe this photo for the visually impaired" maxlength="420">'),i.b(i.v(i.f("alt_text",t,e,0))),i.b('</textarea>\n            <button type="button" class="EdgeButton EdgeButton--primary js-done MediaEditDialog-applyAltTextButton" disabled>Apply</button>\n          </div>\n')}),t.pop()),s.b("      </div>\n")),s.b("  </div>\n</div>\n"),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}},"<media/video_trim1":{name:"media/video_trim",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},"m24/":function(t,e,i){"use strict";(function(t){function s(){this.attributes({avatarSelector:".DMTypingIndicator-avatar",avatarsContainerSelector:".DMTypingIndicator-avatarsContainer",containerSelector:".DMConversation-typingIndicator",messageBubbleSelector:".TypingIndicatorMessageBubble",overflowAvatarSelector:".DMTypingIndicator-avatar.is-overflowAvatar",overflowAvatarClass:"is-overflowAvatar",overflowCountSelector:".DMTypingIndicator-overflowCount",typingIndicatorSelector:".DMTypingIndicator",showHideDuration:300,avatarDisplayDuration:4e3,maxNumAvatars:5}),this.reset=function(t,e){this.$container.addClass("u-hidden").css({height:""}),this.$avatarsContainerSelector.empty(),this.$messageBubble.addClass("is-hidden"),this.activeAvatarList().forEach(function(t){return clearTimeout(t.timer)}),this.activeAvatars={}},this.show=function(){this.$container.stop().clearQueue().css({height:""}).removeClass("u-hidden"),this.$messageBubble.removeClass("is-hidden"),this.trigger("uiDMTypingIndicatorShown")},this.hideAnimation=function(){return this.$messageBubble.addClass("is-hidden"),this.$container.delay(250).animate({height:0},this.attr.showHideDuration).promise()},this.hide=function(e){var i=this;(e?this.hideAnimation():t.Deferred().resolve().promise()).then(function(){i.activeAvatarList().length?i.show():(i.$avatarsContainerSelector.empty(),i.$container.addClass("u-hidden"))})},this.updateOverflow=function(){var e=this.activeAvatarList().length,i=t(h.a.render({count:e-this.attr.maxNumAvatars+1}));this.$avatarsContainerSelector.find(this.attr.overflowCountSelector).remove();var s=e-this.attr.maxNumAvatars>0;s&&this.$avatarsContainerSelector.append(i);var n=this.select("avatarSelector").not(".is-hidden").not(this.attr.overflowAvatarSelector);n.css("visibility","");var o=this.attr.maxNumAvatars-n.length;if(o>0){var a=this.select("overflowAvatarSelector").slice(0,o);a.removeClass(this.attr.overflowAvatarClass),s&&a.last().css("visibility","hidden")}},this.addAvatar=function(e){var i=this.profileImageData[e].image_url,s=this.profileImageData[e].name;if(i){var n=t(c.a.render({alt:s,image_count:1,images:[{src:i}],overflow:this.activeAvatarList().length>=this.attr.maxNumAvatars}));!this.activeAvatarList().length&&this.$avatarsContainerSelector.empty(),this.$avatarsContainerSelector.append(n),this.activeAvatars[e]={timer:this.setRemoveTimeout(e),node:n},this.updateOverflow(),this.$container.hasClass("u-hidden")&&this.show()}},this.setRemoveTimeout=function(t){return setTimeout(this.removeAvatar.bind(this,t,!0),this.attr.avatarDisplayDuration)},this.refreshTimer=function(t){var e=this.activeAvatars[t];e&&(clearTimeout(e.timer),e.timer=this.setRemoveTimeout(t))},this.isEventForCurrentConvo=function(t,e){return this.conversationId&&this.conversationId===e.conversation_id},this.removeAvatar=function(t,e){var i=this.activeAvatars[t];if(i){clearTimeout(i.timer);var s=1===this.activeAvatarList().length;!s&&i.node.addClass("is-hidden"),delete this.activeAvatars[t],this.updateOverflow(),s&&this.hide(e)}},this.activeAvatarList=function(){return Object.keys(this.activeAvatars)},this.handleUserUpdate=function(t,e){var i=this;if(!e.should_request_inbox&&!e.is_empty){var s=(e.conversations||[]).filter(function(t){return t.conversation_id===i.conversationId})[0];s&&!s.is_empty&&(this.avatarsToClear.forEach(function(t){return i.removeAvatar(t,!1)}),this.avatarsToClear=[])}},this.handleConversationUpdate=function(t,e){e.conversation_id!==this.conversationId&&(this.reset(),this.conversationId=e.conversation_id);var i=e.participants||[];this.profileImageData=i.reduce(function(t,e){return t[e.id]={image_url:e.profile_image_url,name:e.name},t},{})},this.handleUpdateEvent=function(t,e){e.user_id&&this.avatarsToClear.push(e.user_id)},this.handleTypingEvent=function(t,e){var i=e.user_id;if(o.a.user.id!==i){this.activeAvatars[i]?this.refreshTimer(i):this.addAvatar(i)}},this.after("addAvatar",function(){this.trigger("uiDMTypingIndicatorAvatarAdded",{num_avatars:this.activeAvatarList().length})}),this.after("refreshTimer",function(){this.trigger("uiDMTypingIndicatorAvatarRefreshed",{num_avatars:this.activeAvatarList().length})}),this.after("initialize",function(){this.activeAvatars={},this.profileImageData={},this.avatarsToClear=[],this.$container=this.select("containerSelector"),this.$avatarsContainerSelector=this.select("avatarsContainerSelector"),this.$messageBubble=this.select("messageBubbleSelector"),this.on(document,"dataDMUserUpdates",this.handleUserUpdate),this.on(document,"uiDMConversationUpdated",this.handleConversationUpdate),this.on(document,"dataDMTyping",Object(a.a)(this.handleTypingEvent,this.isEventForCurrentConvo)),this.on(document,"dataDMUpdate",Object(a.a)(this.handleUpdateEvent,this.isEventForCurrentConvo))})}var n=i("DBjh"),o=i("IAMj"),a=i("4oun"),r=i("+71d"),c=i.n(r),l=i("0T2C"),h=i.n(l);e.a=Object(n.default)(s)}).call(e,i("4kSj"))},mBsm:function(t,e,i){"use strict";function s(){this.scribeClickOnButton=function(t,e){this.scribe({element:"media_tag_prompt",action:"click"},e)},this.scribeUserSelected=function(t,e){e.items.length&&this.scribe({component:"media_tag",element:"taggable_user",action:"click"},e)},this.scribeUserNotSelected=function(t,e){this.scribe({component:"media_tag",element:"nontaggable_user",action:"click"},e)},this.scribeTweet=function(t,e){e.tweetData.tagged_users&&e.tweetData.tagged_users.length&&e.tweetData.in_reply_to_status_id&&e.tweetData.in_reply_to_status_id.length?this.scribe({action:"reply_with_tags"},e):e.tweetData.tagged_users&&e.tweetData.tagged_users.length&&this.scribe({action:"tweet_with_tags"},e)},this.after("initialize",function(){this.on("uiShowSelectPopover",this.scribeClickOnButton),this.on("uiUpdatedSelectedUsers",this.scribeUserSelected),this.on("uiSendTweetWithMedia",this.scribeTweet),this.on("uiCouldNotSelectUser",this.scribeUserNotSelected)})}var n=i("DBjh"),o=i("3oDc");e.a=Object(n.default)(s,o.a)},mDLQ:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("emojified_text_as_html",t,e,1),t,e,0,27,55,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.t(i.f("emojified_text_as_html",t,e,0)))}),t.pop()),s.s(s.f("emojified_text_as_html",t,e,1),t,e,1,0,0,"")||s.b(s.v(s.f("text",t,e,0))),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},mPc1:function(t,e,i){"use strict";var s={feedbackNpsCardName:"2586390716:feedback_nps",feedbackCsatCardName:"2586390716:feedback_csat",feedbackNpsScribeComponentName:"nps_feedback_survey",feedbackCsatScribeComponentName:"csat_feedback_survey"};e.a=s},"n/Jq":function(t,e,i){"use strict";function s(){this.defaults={cancelSelector:".cancel-action",blockSelector:".block-action"},this.openBlockUser=function(t,e){var i={userOnly:!0,modal:"block"};this.attr.sourceEventData=e,this.displayTweet(e.tweetId,i),this.open()},this.blockUser=function(){this.trigger("uiDidBlockUser",{sourceEventData:this.attr.sourceEventData}),this.close()},this.after("initialize",function(){this.on("click",{cancelSelector:this.close,blockSelector:this.blockUser}),this.on(document,"uiOpenBlockUserDialog",this.openBlockUser)})}var n=i("DBjh"),o=i("UHc7"),a=i("WqLG");e.a=Object(n.default)(s,o.a,a.a)},n85Q:function(t,e,i){"use strict";function s(t){var e=t.match(n);if(e)return e[1];throw new Error("unexpected mustache path: "+t)}var n=/^\.\/(.+)\.mustache$/,o=function(t){var e={};return t.keys().forEach(function(i){var n=s(i);e[n]=t(i)}),e}(i("aIXW"));e.a=o},nVGa:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({showShortcutsBtnSelector:"#show-shortcuts-btn",dismissShortcutsBtnSelector:"#dismiss-shortcuts-btn",suppressSRMsgCookie:"suppress_sr_shortcuts_msg",loggedIn:!1,closeOnOtherDialogOpened:!0,keyboardShortcuts:[]}),this.renderSRMessage=function(){if(!t("#kb-shortcuts-msg").length){var e=h.a.render({});t(e).insertBefore(document.body.firstChild)}},this.addMessage=function(){Object(a.a)(this.attr.suppressSRMsgCookie)||this.renderSRMessage()},this.removeMessage=function(){t("#kb-shortcuts-msg").remove(),Object(a.a)(this.attr.suppressSRMsgCookie,"1",{expires:1/0})},this.renderShortcutsDialog=function(){if(!t("#keyboard-shortcut-dialog").length){var e={keyboard_shortcuts:this.attr.keyboardShortcuts};t("body").append(c.a.render(e)),this.$dialogContainer=t("#keyboard-shortcut-dialog"),this.$dialog=this.$dialogContainer.find(this.attr.modalSelector)}},this.showShortcutsDialog=function(){this.renderShortcutsDialog(),this.open()},this.after("initialize",function(){this.on(document,"click",{showShortcutsBtnSelector:this.showShortcutsDialog,dismissShortcutsBtnSelector:this.removeMessage}),this.on(document,"uiSwiftLoaded",this.addMessage),this.on(document,"uiOpenKeyboardShortcutsDialog",this.showShortcutsDialog)})}var n=i("DBjh"),o=i("UHc7"),a=i("dsp6"),r=i("QFJf"),c=i.n(r),l=i("BDSG"),h=i.n(l),d=Object(n.default)(s,o.a);e.a=d}).call(e,i("4kSj"))},nffu:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("protected",t,e,1),t,e,0,14,128,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('<span class="Icon Icon--protected">'),i.b('<span class="u-hidden">Protected Tweets</span>'),i.b("</span>")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},nnea:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({stickerSelector:".StickersMediaImage-stickerImage",stickerLinkSelector:".StickersMediaImage-stickerLink",stickerMediaImageSelector:".StickersMediaImage",hitTestingEnabledClass:"is-hitTesting"}),this.animateSticker=function(e){var i=t(e.target),s="stickerAnimation-"+i.data("animationRefIndex"),n=i.data("currentAnimationPattern");n="a"===n?"b":"a",i.data("currentAnimationPattern",n),s=s+"-"+n,i.css("-webkit-animation-name",s),i.css("animation-name",s)},this.transformSticker=function(t,e){return"matrix("+t.matrix.join(",")+")scale("+e+")"},this.generateStickerDataArray=function(t){var e=this.select("imageSelector").width();this.stickerData=t.map(function(t,i){var s=e*t.aspectRatio;return h({width:e,height:s,halfWidth:e/2,halfHeight:s/2,animationRefIndex:i,matrix:[t.transformA,t.transformB,t.transformC,t.transformD,t.transformTx*e,t.transformTy*s]},t)},this)},this.generateTemplateVariables=function(t,e,i,s){var n=Math.ceil((e.width()-i.width())/2);return{image:t.src,width:t.width,height:t.height,bgWidth:i.width(),bgHeight:i.height(),blackBarWidth:n,stickers:this.stickerData.map(function(t){return h({},t,{link:s?"/i/stickers/"+t.id:"",transform:this.transformSticker(t,1)})},this)}},this.renderMainImageAndStickerPlaceholders=function(t,e){this.generateStickerDataArray(e);var i=r.a.getDeciderValue("stickersInteractivity"),s=this.generateTemplateVariables(t,this.select("galleryMediaSelector"),this.select("imageSelector"),i),n=l.a.render(s);this.$current.attr("loaded",!0),this.stickersFirstVisibleTime=Date.now(),this.select("galleryMediaSelector").html(n),this.$stickersContainer=this.select("stickerMediaImageSelector"),r.a.getDeciderValue("stickersInteractivityDuringLoading")||this.enableHitTesting()},this.detectedBrowser=function(){return Object(n.a)().name},this.isNotFirefoxOrIE=function(){var t=this.detectedBrowser();return!("mozilla"===t||"msie"===t)},this.isValidBrowserForSVG=function(){return!(document.implementation&&!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"))&&this.isNotFirefoxOrIE()},this.hypot=function(t,e){return Math.sqrt(t*t+e*e)},this.getBiggestRasterSticker=function(t){var e=t.images.raster;return e[e.length-1].url},this.findBestsizedRasterSticker=function(t){for(var e=!1,i=t.width*this.hypot(t.matrix[0],t.matrix[2]),s=t.height*this.hypot(t.matrix[1],t.matrix[3]),n=t.images.raster,o=0;o<n.length-1;o++)if(n[o].w>i&&n[o].h>s){e=n[o].url;break}return e||this.getBiggestRasterSticker(t)},this.determineStickerUrl=function(t){return this.isValidBrowserForSVG()&&t.images.vector?t.images.vector.url:this.findBestsizedRasterSticker(t)},this.loadStickersAsBlobUrls=function(t,e,i){var s=this;this.renderMainImageAndStickerPlaceholders(t,e);var n=this.stickerData.map(function(t){return t.url=s.determineStickerUrl(t),t.url}),a=this.$stickersContainer.width(),r=this.$stickersContainer.height();i===this.currentStickerKey&&o.a.createMapOfBlobUrls(n).then(function(t){i===s.currentStickerKey&&(s.urlToBlobUrlMap=t,Promise.all(s.stickerData.map(function(t){return this.generateHitTestPixels(t,a,r,i)},s)).then(function(){return s.beginHitTesting()}))})},this.loadMainImageAndStickers=function(t,e,i){var s=this;a.a.load(t,function(t){var n=t[0];s.loadStickersAsBlobUrls(n,e,i)})},this.replaceMediaWithImageAndStickers=function(t){var e=this.getLargeMediaUrl(this.$current),i=e+JSON.stringify(t);this.currentStickerKey!==i&&(this.currentStickerKey=i,this.loadMainImageAndStickers(e,t,i))},this.resetStickers=function(){this.lastHitIndex=-1,this.$stickersContainer=null,this.isHitTesting=!1,this.stickerData=[],this.currentStickerKey=null,this.urlToBlobUrlMap&&o.a.revokeMapOfBlobUrls(this.urlToBlobUrlMap),this.urlToBlobUrlMap=null},this.generateHitTestPixels=function(t,e,i,s){var n=this,o=document.createElement("canvas");o.width=e,o.height=i;var a=new Image,r=this.getBlobUrlForSticker(t);return new Promise(function(c,l){if(a.onload=function(){var s=o.getContext("2d");s.transform.apply(s,t.matrix),s.drawImage(a,-t.halfWidth,-t.halfHeight,t.width,t.height),t.hitTestPixels=s.getImageData(0,0,e,i),c(t)},a.onerror=l,s!==n.currentStickerKey||!r)return l();a.src=n.urlToBlobUrlMap[t.url]})},this.enableHitTesting=function(){this.select("gallerySelector").addClass(this.attr.hitTestingEnabledClass),this.isHitTesting=!0},this.getBlobUrlForSticker=function(t){return this.urlToBlobUrlMap&&this.urlToBlobUrlMap[t.url]},this.replaceTempImagesWithRealImages=function(){var e=this;this.select("stickerSelector").each(function(i,s){var n=e.stickerData[i],o=e.getBlobUrlForSticker(n);o&&t(s).css("background-image","url("+o+")")})},this.beginHitTesting=function(){this.enableHitTesting(),this.replaceTempImagesWithRealImages();var t=this.select("stickerSelector"),e=Math.max(0,d-(Date.now()-this.stickersFirstVisibleTime));setTimeout(function(){return t.trigger("uiAnimateSticker")},e)},this.getStickerHitIndex=function(t){if(!this.$stickersContainer)return-1;var e=this.$stickersContainer[0].getBoundingClientRect(),i=e.bottom-e.top,s=e.right-e.left;if(!s||!i)return-1;var n=this.$stickersContainer.offset(),o=(t.pageX-n.left)/s,a=(t.pageY-n.top)/i;return o<0||o>=1||a<0||a>=1?-1:this.stickerData.reduce(function(t,e,i){var s=e.hitTestPixels;return s&&s.data[4*(Math.floor(o*s.width)+Math.floor(a*s.height)*s.width)+3]?i:t},-1)},this.animateIfHitTestChanged=function(t){if(this.isHitTesting){var e=this.getStickerHitIndex(t);e!==this.lastHitIndex&&(this.lastHitIndex=e,this.select("stickerLinkSelector").css("cursor",e>=0?"pointer":"default"),e>=0&&this.select("stickerSelector").eq(e).trigger("uiAnimateSticker"))}},this.navigateIfHitTestSucceeds=function(t){if(this.isHitTesting){var e=this.getStickerHitIndex(t);e>=0&&this.select("stickerSelector").eq(e).trigger("click")}},this.preventWhenHitTesting=function(t){this.isHitTesting&&t.originalEvent&&(t.stopPropagation(),t.preventDefault())},this.after("initialize",function(){this.resetStickers(),this.on("uiAnimateSticker",{stickerSelector:this.animateSticker}),this.on("mousemove",{stickerMediaImageSelector:this.animateIfHitTestChanged}),this.on("click",{stickerLinkSelector:this.preventWhenHitTesting}),this.on("mouseup",{stickerLinkSelector:this.navigateIfHitTestSucceeds})}),this.before("teardown",this.resetStickers)}e.a=s;var n=i("RW6J"),o=i("+dWm"),a=i("/zmn"),r=i("IAMj"),c=i("w3Xn"),l=i.n(c),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},d=500}).call(e,i("4kSj"))},nub0:function(t,e,i){"use strict";function s(){this.addCardUriToParams=function(t,e){this.cardUri=e&&e.cardUri},this.removeCardUriToParams=function(){delete this.cardUri},this.after("initialize",function(){this.on(document,"uiSetDmCreateCardUriParam",this.addCardUriToParams),this.on(document,"uiResetDmCreateCardUriParam",this.removeCardUriToParams)}),this.after("reset",function(){this.removeCardUriToParams()})}e.a=s},nwDM:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({emailSettingsLinkSelector:".email-settings-link",phoneSettingsLinkSelector:".phone-settings-link",resendConfirmationEmailLinkSelector:".resend-confirmation-email-link",resetBounceLinkSelector:".reset-bounce-link"}),this.emailSettingsLink=function(){this.trigger("uiClickEmailSettingsLink")},this.phoneSettingsLink=function(){this.trigger("uiClickPhoneSettingsLink")},this.resendConfirmationEmail=function(e,i){this.trigger("uiResendConfirmationEmail",{unsuspend:t(e.target).hasClass("unsuspend-confirmation")})},this.resetBounceLink=function(){this.trigger("uiResetBounceLink")},this.after("initialize",function(){this.on("click",{emailSettingsLinkSelector:this.emailSettingsLink,phoneSettingsLinkSelector:this.phoneSettingsLink,resendConfirmationEmailLinkSelector:this.resendConfirmationEmail,resetBounceLinkSelector:this.resetBounceLink})})}var n=i("DBjh");e.a=Object(n.default)(s)}).call(e,i("4kSj"))},"o/dd":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({jsMediaPreviewSelector:".js-media-preview",jsTweetSelector:'.js-stream-tweet:not(".RtbAd-container")',jsLinkSelector:".js-link",jsPermalinkSelector:".js-permalink",jsDetailsLinkSelector:".js-details",jsAdaptivePhotoSelector:".js-adaptive-photo",playableMediaPlayerSelector:".PlayableMedia-player",quoteTweetSelector:".QuoteTweet-container",quoteTweetClass:"QuoteTweet-container",quoteTweetInnerSelector:".QuoteTweet-innerContainer",pushState:!0,expandoHandleSelector:".js-open-close-tweet span",dropdownSelector:".ProfileTweet-action .dropdown-menu",withheldTweetClass:"withheld-tweet",profileTweetActionButtonSelector:".js-actionButton",profileTweetActionCountSelector:".js-actionCount",jsTweetTextContainer:".js-tweet-text-container",jsExpandedTweetTextSelector:".js-expanded-tweet-text",jsTweetText:".js-tweet-text",newWindowClass:"js-new-window"}),this.shouldNavigateToPermalink=function(t){return this.attr.isMobile||this.isQuoteTweet(t)},this.isQuoteTweet=function(t){return t.hasClass(this.attr.quoteTweetClass)},this.handleMediaPreviewClick=function(e,i){var s=t(i.el),n=s.closest(this.attr.jsTweetSelector);this.shouldExpandWhenTargetIs(t(e.target),n)&&(e.preventDefault(),e.stopPropagation(),this.handleClick(e,n,!0))},this.handleQuoteTweetClick=function(t){var e=t.closest("[data-tweet-id]").attr("data-tweet-id"),i=t.find(this.attr.quoteTweetInnerSelector).attr("data-item-id"),s=[{id:e,item_type:a.a.tweet},{id:i,item_type:a.a.quotedTweet}];this.trigger("uiQuoteTweetClick",{items:s})},this.handleTweetClick=function(e,i){var s=t(i.el);this.isQuoteTweet(s)&&this.handleQuoteTweetClick(s),this.shouldExpandWhenTargetIs(t(e.target),s)&&(e.preventDefault(),e.stopPropagation(),this.handleClick(e,s,!1))},this.handleClick=function(t,e,i){var s=e.hasClass(this.attr.quoteTweetClass),n=e.find(this.attr.jsPermalinkSelector),o=s?n.attr("href"):e.data("permalink-path"),a=s?n.data("conversation-id"):e.data("conversation-id"),c=e.closest("[data-impression-id]"),l={impressionId:c.attr("data-impression-id"),disclosureType:c.attr("data-disclosure-type"),impressionCookie:c.attr("data-impression-cookie"),href:o,conversation_id:a};!i&&this.shouldNavigateToPermalink(e)&&this.setImpressionCookieOnProfileTweet(e),e.trigger("uiHasClickedTweet",r({},l,{organicExpansion:!0})),this.modifierKey(t)||n.length&&(n.attr("target")||n.hasClass(this.attr.newWindowClass))?this.openNewTab(o):this.trigger("uiNavigate",l)},this.openNewTab=function(t){window.open(t,"_blank").opener=null},this.setImpressionCookieOnProfileTweet=function(t){if(t.hasClass("profile-promoted-tweet")){var e=t.closest("[data-impression-cookie]").attr("data-impression-cookie");if(e){var i=new Date,s=new Date(i.getTime()+1e4);this.setCookie(e,s)}}},this.shouldExpandWhenTargetIs=function(t,e){return!this.selectedText()&&!e.hasClass(this.attr.withheldTweetClass)&&(this.targetIsWhitelistedToExpandTweet(t,e)||!this.targetIsBlacklistedToExpandTweet(t,e))},this.targetIsWhitelistedToExpandTweet=function(t,e){var i=[this.attr.expandoHandleSelector,this.attr.jsDetailsLinkSelector,this.attr.jsMediaPreviewSelector,this.attr.quoteTweetSelector];return t.closest(i.join(),e).length>0},this.targetIsBlacklistedToExpandTweet=function(t,e){var i=["a","button",this.attr.jsLinkSelector,this.attr.dropdownSelector,this.attr.jsAdaptivePhotoSelector,this.attr.playableMediaPlayerSelector];return t.closest(i.join(),e).length},this.selectedText=function(){return n.a.getSelection()},this.modifierKey=function(t){return t.shiftKey||t.ctrlKey||t.metaKey||t.which>1},this.preventFocusOnClick=function(t){t.preventDefault()},this.setCookie=function(t,e){Object(o.a)("ic",t,{expires:e})},this.after("initialize",function(){this.on("click",{jsMediaPreviewSelector:this.handleMediaPreviewClick,quoteTweetSelector:this.handleTweetClick,jsTweetSelector:this.handleTweetClick}),this.on("uiShortcutEnter",{quoteTweetSelector:this.handleTweetClick}),this.on("mousedown",{profileTweetActionButtonSelector:this.preventFocusOnClick,profileTweetActionCountSelector:this.preventFocusOnClick,quoteTweetSelector:this.preventFocusOnClick})})}e.a=s;var n=i("mJ5M"),o=i("dsp6"),a=i("rbkv"),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t}}).call(e,i("4kSj"))},o3dW:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({cancelSelector:".cancel-action",deleteSelector:".delete-action"}),this.openDeleteTweet=function(t,e){this.attr.sourceEventData=e,this.displayTweet(e.tweetId,{modal:"delete"}),this.id=e.id,this.open()},this.deleteTweet=function(){this.trigger("uiDidDeleteTweet",{id:this.id,sourceEventData:this.attr.sourceEventData})},this.deleteTweetSuccess=function(t,e){this.trigger("uiDidDeleteTweetSuccess",this.attr.sourceEventData),this.close()},this.restoreFocusToTweet=function(e){t(e.target).is(this.$dialog)&&this.activeEl&&this.trigger(t(this.activeEl).closest(".tweet"),"uiShouldAddFocusStyle")},this.after("initialize",function(){this.on("click",{cancelSelector:this.close,deleteSelector:this.deleteTweet}),this.on(document,"uiOpenDeleteDialog",this.openDeleteTweet),this.on(document,"dataDidDeleteTweet",this.deleteTweetSuccess),this.on(document,"uiDialogRestorePreviousFocus",this.restoreFocusToTweet),this.on(document,"uiCloseDeleteTweetDialog",this.close)})}var n=i("DBjh"),o=i("UHc7"),a=i("WqLG"),r=Object(n.default)(s,o.a,a.a);e.a=r}).call(e,i("4kSj"))},oHUX:function(t,e,i){"use strict";function s(){this.saveSearch=function(t,e){this.post({url:"/i/saved_searches/create.json",data:e,eventData:{scribeComponent:e.scribeComponent,scribeAction:"add"},success:"dataAddedSavedSearch",error:"dataSavedSearchError"})},this.removeSavedSearch=function(t,e){this.post({url:"/i/saved_searches/destroy/"+encodeURIComponent(e.id)+".json",data:"",eventData:{scribeComponent:e.scribeComponent,scribeAction:"remove"},success:"dataRemovedSavedSearch",error:"dataSavedSearchError"})},this.after("initialize",function(){this.on("uiAddSavedSearch",this.saveSearch),this.on("uiRemoveSavedSearch",this.removeSavedSearch)})}var n=i("DBjh"),o=i("VtWx");e.a=Object(n.default)(s,o.a)},oPMG:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<style id="user-style-'),s.b(s.v(s.f("screen_name",t,e,0))),s.b('">\n'),s.b("\n"+i),s.s(s.f("user_color",t,e,1),t,e,0,395,1485,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("  a,\n  a:hover,\n  a:focus,\n  a:active {\n    color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(";\n  }\n\n  .u-textUserColor,\n  .u-textUserColorHover:hover,\n  .u-textUserColorHover:hover .ProfileTweet-actionCount,\n  .u-textUserColorHover:focus {\n    color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(" !important;\n  }\n\n  .u-borderUserColor,\n  .u-borderUserColorHover:hover,\n  .u-borderUserColorHover:focus {\n    border-color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(" !important;\n  }\n\n  .u-bgUserColor,\n  .u-bgUserColorHover:hover,\n  .u-bgUserColorHover:focus {\n    background-color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(" !important;\n  }\n\n  .u-dropdownUserColor > li:hover,\n  .u-dropdownUserColor > li:focus,\n  .u-dropdownUserColor > li > button:hover,\n  .u-dropdownUserColor > li > button:focus,\n  .u-dropdownUserColor > li > a:focus,\n  .u-dropdownUserColor > li > a:hover {\n    color: #fff !important;\n    background-color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(" !important;\n  }\n\n  .u-boxShadowInsetUserColorHover:hover,\n  .u-boxShadowInsetUserColorHover:focus {\n    box-shadow: inset 0 0 0 5px #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(" !important;\n  }\n\n  .u-dropdownOpenUserColor.dropdown.open .dropdown-toggle {\n    color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(";\n  }\n")}),t.pop()),s.b("\n"+i),s.s(s.f("user_color_light",t,e,1),t,e,0,1575,1935,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("  .u-textUserColorLight {\n    color: #"),i.b(i.v(i.f("user_color_light",t,e,0))),i.b(" !important;\n  }\n\n  .u-borderUserColorLight,\n  .u-borderUserColorLightFocus:focus,\n  .u-borderUserColorLightHover:hover,\n  .u-borderUserColorLightHover:focus {\n    border-color: #"),i.b(i.v(i.f("user_color_light",t,e,0))),i.b(" !important;\n  }\n\n  .u-bgUserColorLight {\n    background-color: #"),i.b(i.v(i.f("user_color_light",t,e,0))),i.b(" !important;\n  }\n")}),t.pop()),s.b("\n"+i),s.s(s.f("rgba_user_color_lighter",t,e,1),t,e,0,2045,2195,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("  .u-boxShadowUserColorLighterFocus:focus {\n    box-shadow: 0 0 8px rgba(0, 0, 0, 0.05), inset 0 1px 2px "),i.b(i.v(i.f("rgba_user_color_lighter",t,e,0))),i.b(" !important;\n  }\n")}),t.pop()),s.b("\n"+i),s.s(s.f("user_color_lightest",t,e,1),t,e,0,2304,2568,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("  .u-textUserColorLightest {\n    color: #"),i.b(i.v(i.f("user_color_lightest",t,e,0))),i.b(" !important;\n  }\n\n  .u-borderUserColorLightest {\n    border-color: #"),i.b(i.v(i.f("user_color_lightest",t,e,0))),i.b(" !important;\n  }\n\n  .u-bgUserColorLightest {\n    background-color: #"),i.b(i.v(i.f("user_color_lightest",t,e,0))),i.b(" !important;\n  }\n")}),t.pop()),s.b("\n"+i),s.s(s.f("user_color_lighter",t,e,1),t,e,0,2671,2929,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("  .u-textUserColorLighter {\n    color: #"),i.b(i.v(i.f("user_color_lighter",t,e,0))),i.b(" !important;\n  }\n\n  .u-borderUserColorLighter {\n    border-color: #"),i.b(i.v(i.f("user_color_lighter",t,e,0))),i.b(" !important;\n  }\n\n  .u-bgUserColorLighter {\n    background-color: #"),i.b(i.v(i.f("user_color_lighter",t,e,0))),i.b(" !important;\n  }\n")}),t.pop()),s.b("\n"+i),s.s(s.f("user_color_dark",t,e,1),t,e,0,3025,3202,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("  .u-bgUserColorDarkHover:hover {\n    background-color: #"),i.b(i.v(i.f("user_color_dark",t,e,0))),i.b(" !important;\n  }\n\n  .u-borderUserColorDark {\n    border-color: #"),i.b(i.v(i.f("user_color_dark",t,e,0))),i.b(" !important;\n  }\n")}),t.pop()),s.b("\n"+i),s.s(s.f("user_color_darker",t,e,1),t,e,0,3299,3399,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("  .u-bgUserColorDarkerActive:active {\n    background-color: #"),i.b(i.v(i.f("user_color_darker",t,e,0))),i.b(" !important;\n  }\n")}),t.pop()),s.b("\n"),s.b("\n"+i),s.b("\n"+i),s.b("\n"+i),s.b("a,\n.btn-link,\n.btn-link:focus,\n.icon-btn,\n"),s.b(".pretty-link b,\n.pretty-link:hover s,\n.pretty-link:hover b,\n.pretty-link:focus s,\n.pretty-link:focus b,\n"),s.b(".metadata a:hover,\n.metadata a:focus,\n"),s.b("a.account-group:hover .fullname,\na.account-group:focus .fullname,\n.account-summary:focus .fullname,\n"),s.b(".message .message-text a,\n.message .message-text button,\n.stats a strong,\n.plain-btn:hover,\n.plain-btn:focus,\n.dropdown.open .user-dropdown.plain-btn,\n.open > .plain-btn,\n#global-actions .new:before,\n.module .list-link:hover,\n.module .list-link:focus,\n"),s.b(".stats a:hover,\n.stats a:hover strong,\n.stats a:focus,\n.stats a:focus strong,\n"),s.b(".find-friends-sources li:hover .source,\n\n"),s.b("\n"+i),s.b(".stream-item a:hover .fullname,\n.stream-item a:focus .fullname,\n"),s.b(".stream-item .view-all-supplements:hover,\n.stream-item .view-all-supplements:focus,\n"),s.b(".tweet .time a:hover,\n.tweet .time a:focus,\n.tweet .details.with-icn b,\n.tweet .details.with-icn .Icon,\n"),s.b(".stream-item:hover .original-tweet .details b,\n.stream-item .original-tweet.focus .details b,\n.stream-item.open .original-tweet .details b,\n"),s.b(".client-and-actions a:hover,\n.client-and-actions a:focus,\n"),s.b(".dismiss-btn:hover b,\n"),s.b(".tweet .context .pretty-link:hover s,\n.tweet .context .pretty-link:hover b,\n.tweet .context .pretty-link:focus s,\n.tweet .context .pretty-link:focus b,\n"),s.b(".list .username a:hover,\n.list .username a:focus,\n.list-membership-container .create-a-list,\n.list-membership-container .create-a-list:hover,\n.new-tweets-bar,\n\n"),s.b(".card .list-details a:hover,\n.card .list-details a:focus,\n.card .card-body:hover .attribution,\n.card .card-body .attribution:focus {\n  color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n}\n\n"),s.s(s.f("user_color",t,e,1),t,e,0,6174,12273,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.s(s.f("logged_in",t,e,1),t,e,0,6191,6771,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("    #global-actions > li > a {\n      border-bottom-color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(";\n    }\n\n    #global-actions > li:hover > a,\n    #global-actions > li > a:focus,\n    #global-actions > li.active .text,\n    .DashUserDropdown.dropdown-menu .nightmode-toggle .Icon,\n    .nav.right-actions > li > a:hover,\n    .nav.right-actions > li > a:focus {\n      color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(";\n    }\n\n"),i.s(i.f("web_notifications_badge_on",t,e,1),t,e,0,6597,6737,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("      #global-actions .people.new:before {\n        content: none;\n      }\n")}),t.pop())}),t.pop()),s.b("\n"+i),s.b("  .FoundMediaSearch--keyboard .FoundMediaSearch-focusable.is-focused {\n    border-color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n  }\n\n"),s.b("  .photo-selector:hover .btn,\n  .icon-btn:hover,\n  .icon-btn:active,\n  .icon-btn.active,\n  .icon-btn.enabled {\n    border-color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n    border-color: "),s.b(s.v(s.f("rgba_user_color_light",t,e,0))),s.b(";\n    color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n  }\n\n"),s.b("  .photo-selector:hover .btn,\n  .icon-btn:hover {\n    background-image: linear-gradient(rgba(255,255,255,0), "),s.b(s.v(s.f("rgba_user_color_lightest",t,e,0))),s.b(");\n  }\n\n  .icon-btn.disabled,\n  .icon-btn.disabled:hover,\n  .icon-btn[disabled],\n  .icon-btn[aria-disabled=true] {\n    color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n  }\n\n"),s.b("\n"+i),s.b("  .EdgeButton--primary,\n  .EdgeButton--primary:focus {\n    background-color: #"),s.b(s.v(s.f("user_color_medium",t,e,0))),s.b(";\n    border-color: transparent;\n  }\n\n  .EdgeButton--primary:hover,\n  .EdgeButton--primary:active {\n    background-color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n    border-color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n  }\n\n  .EdgeButton--primary:focus {\n    box-shadow:\n      0 0 0 2px #"),s.b(s.v(s.f("page_panel_background_color",t,e,0))),s.b(",\n      0 0 0 4px #"),s.b(s.v(s.f("user_color_light",t,e,0))),s.b(";\n  }\n\n  .EdgeButton--primary:active {\n    box-shadow:\n      0 0 0 2px #"),s.b(s.v(s.f("page_panel_background_color",t,e,0))),s.b(",\n      0 0 0 4px #"),s.b(s.v(s.f("user_color_medium",t,e,0))),s.b(";\n  }\n\n"),s.b("\n"+i),s.b("  .EdgeButton--secondary,\n  .EdgeButton--secondary:hover,\n  .EdgeButton--secondary:focus,\n  .EdgeButton--secondary:active {\n    border-color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n    color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n  }\n\n  .EdgeButton--secondary:hover,\n  .EdgeButton--secondary:active {\n    background-color: #"),s.b(s.v(s.f("user_color_lightest",t,e,0))),s.b(";\n  }\n\n  .EdgeButton--secondary:focus {\n    box-shadow:\n      0 0 0 2px #"),s.b(s.v(s.f("page_panel_background_color",t,e,0))),s.b(",\n      0 0 0 4px "),s.b(s.v(s.f("rgba_user_color_light",t,e,0))),s.b(";\n  }\n\n  .EdgeButton--secondary:active {\n    box-shadow:\n      0 0 0 2px #"),s.b(s.v(s.f("page_panel_background_color",t,e,0))),s.b(",\n      0 0 0 4px #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n  }\n\n"),s.b("\n"+i),s.b("  .EdgeButton--invertedPrimary {\n    color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(" !important;\n  }\n\n  .EdgeButton--invertedPrimary:focus {\n    box-shadow:\n      0 0 0 2px #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(",\n      0 0 0 4px #"),s.b(s.v(s.f("user_color_light",t,e,0))),s.b(";\n  }\n\n  .EdgeButton--invertedPrimary:active {\n    box-shadow:\n      0 0 0 2px #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(",\n      0 0 0 4px #"),s.b(s.v(s.f("page_panel_background_color",t,e,0))),s.b(";\n  }\n\n"),s.b("\n"+i),s.b("  .EdgeButton--invertedSecondary {\n    background-color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n  }\n\n  .EdgeButton--invertedSecondary:hover {\n    background-color: #"),s.b(s.v(s.f("user_color_medium",t,e,0))),s.b(";\n  }\n\n  .EdgeButton--invertedSecondary:focus {\n    box-shadow:\n      0 0 0 2px #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(",\n      0 0 0 4px #"),s.b(s.v(s.f("user_color_light",t,e,0))),s.b(";\n  }\n\n  .EdgeButton--invertedSecondary:active {\n    box-shadow:\n      0 0 0 2px #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(",\n      0 0 0 4px #"),s.b(s.v(s.f("page_panel_background_color",t,e,0))),s.b(";\n  }\n\n"),s.b("\n"+i),s.b("  .btn:focus,\n  .btn.focus,\n  .Button:focus,\n  .EmojiPicker-item.is-focused,\n  .EmojiPicker .EmojiCategoryIcon:focus,\n  .EmojiPicker-skinTone:focus + .EmojiPicker-skinToneSwatch,\n  a:focus > img:first-child:last-child,\n  button:focus {\n    box-shadow:\n      0 0 0 2px #"),s.b(s.v(s.f("page_panel_background_color",t,e,0))),s.b(",\n      0 0 2px 4px "),s.b(s.v(s.f("rgba_user_color_light",t,e,0))),s.b(";\n  }\n\n  .selected-stream-item:focus {\n    box-shadow: 0 0 0 3px "),s.b(s.v(s.f("rgba_user_color_light",t,e,0))),s.b(";\n  }\n\n"),s.b('  .js-navigable-stream.stream-table-view .selected-stream-item[tabindex="-1"]:focus {\n    outline: 3px solid '),s.b(s.v(s.f("rgba_user_color_light",t,e,0))),s.b(" !important;\n  }\n\n"),s.b("  .js-navigable-stream.stream-table-view .selected-stream-item:focus {\n    box-shadow: none;\n  }\n\n"),s.b("\n"+i),s.b("  .global-dm-nav.new.with-count .dm-new .count-inner {\n    background: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n  }\n\n  .global-nav .people .count .count-inner {\n    background: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n  }\n\n  .dropdown-menu li > a:hover,\n  .dropdown-menu li > a:focus,\n  .dropdown-menu .dropdown-link:hover,\n  .dropdown-menu .dropdown-link:focus,\n  .dropdown-menu .dropdown-link.is-focused,\n  .dropdown-menu li:hover .dropdown-link,\n  .dropdown-menu li:focus .dropdown-link,\n  .dropdown-menu .selected a,\n  .dropdown-menu .dropdown-link.selected {\n    background-color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(" !important;\n  }\n\n  /* for items in typeahead dropdown menu on logged in pages */\n  .dropdown-menu .typeahead-items li > a:focus,\n  .dropdown-menu .typeahead-items li > a:hover,\n  .dropdown-menu .typeahead-items .selected,\n  .dropdown-menu .typeahead-items .selected a {\n    background-color: #"),s.b(s.v(s.f("user_color_lightest",t,e,0))),s.b(" !important;\n    color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(" !important;\n  }\n\n  .typeahead a:hover,\n  .typeahead a:hover strong,\n  .typeahead a:hover .fullname,\n  .typeahead .selected a,\n  .typeahead .selected strong,\n  .typeahead .selected .fullname,\n  .typeahead .selected .Icon--close {\n    color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(" !important;\n  }\n")}),t.pop()),s.b("\n"+i),s.b(".home-tweet-box,\n.LiveVideo-tweetBox,\n.RetweetDialog-commentBox {\n  background-color: #"),s.b(s.v(s.f("user_color_lightest",t,e,0))),s.b(";\n}\n\n.top-timeline-tweetbox .timeline-tweet-box .tweet-form.condensed .tweet-box {\n  color: #"),s.b(s.v(s.f("user_color",t,e,0))),s.b(";\n}\n"),s.b(".RichEditor,\n.TweetBoxAttachments {\n  border-color: #"),s.b(s.v(s.f("user_color_lighter",t,e,0))),s.b(';\n}\n\ninput:focus,\ntextarea:focus,\ndiv[contenteditable="true"]:focus,\ndiv[contenteditable="true"].fake-focus,\ndiv[contenteditable="plaintext-only"]:focus,\ndiv[contenteditable="plaintext-only"].fake-focus {\n  border-color: #'),s.b(s.v(s.f("user_color_light",t,e,0))),s.b(";\n  box-shadow: inset 0 0 0 1px "),s.b(s.v(s.f("rgba_user_color_medium",t,e,0))),s.b(';\n}\n\n.tweet-box textarea:focus,\n.tweet-box input[type=text],\n.currently-dragging .tweet-form.is-droppable .tweet-drag-help,\n.tweet-box[contenteditable="true"]:focus,\n.RichEditor.is-fakeFocus,\n.RichEditor.is-fakeFocus ~ .TweetBoxAttachments {\n  border-color: #'),s.b(s.v(s.f("user_color_light",t,e,0))),s.b(";\n  box-shadow: 0 0 0 1px #"),s.b(s.v(s.f("user_color_light",t,e,0))),s.b(";\n}\n\n.MomentCapsuleItem.selected-stream-item:focus {\n  box-shadow: 0 0 0 3px "),s.b(s.v(s.f("rgba_user_color_light",t,e,0))),s.b(";\n}\n\n"),s.b("\n"+i),s.b("s,\n.pretty-link:hover s,\n.pretty-link:focus s,\n.stream-item-activity-notification .latest-tweet .tweet-row a:hover s,\n.stream-item-activity-notification .latest-tweet .tweet-row a:focus s {\n"),s.s(s.f("user_color",t,e,1),t,e,0,13752,13783,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("    color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(";\n")}),t.pop()),s.s(s.f("user_color",t,e,1),t,e,1,0,0,"")||s.b("    color: #66B5D2;\n"),s.b("}\n\n"),s.b(".vellip,\n.vellip:before,\n.vellip:after,\n.conversation-module > li:after,\n.conversation-module > li:before,\n.ThreadedConversation--loneTweet:after,\n.ThreadedConversation-tweet:not(.is-hiddenAncestor) ~ .ThreadedConversation-tweet:before,\n.ThreadedConversation-tweet:after,\n.ThreadedConversation-moreReplies:before,\n.ThreadedConversation-viewOther:before,\n.ThreadedConversation-unavailableTweet:before,\n.ThreadedConversation-unavailableTweet:after,\n.ThreadedConversation--permalinkTweetWithAncestors:before,\n.mini-avatar-with-thread:before,\n.permalink.self-thread-permalink-with-descendant .permalink-tweet-container:after,\n.permalink.self-thread-permalink-with-descendant .inline-reply-tweetbox-container:after {\n"),s.s(s.f("user_color_light",t,e,1),t,e,0,14681,14725,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("    border-color: #"),i.b(i.v(i.f("user_color_light",t,e,0))),i.b(";\n")}),t.pop()),s.s(s.f("user_color_light",t,e,1),t,e,1,0,0,"")||s.b("    border-color: #66B5D2;\n"),s.b("}\n\n"),s.b(".tweet .sm-reply,\n.tweet .sm-rt,\n.tweet .sm-fav,\n.tweet .sm-image,\n.tweet .sm-video,\n.tweet .sm-audio,\n.tweet .sm-geo,\n.tweet .sm-in,\n.tweet .sm-trash,\n.tweet .sm-more,\n.tweet .sm-page,\n.tweet .sm-embed,\n.tweet .sm-summary,\n.tweet .sm-chat,\n"),s.b(".timelines-navigation .active .profile-nav-icon,\n.timelines-navigation .profile-nav-icon:hover,\n.timelines-navigation .profile-nav-link:focus .profile-nav-icon,\n"),s.b(".sm-top-tweet {\n"),s.s(s.f("user_color",t,e,1),t,e,0,15472,15514,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("    background-color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(";\n")}),t.pop()),s.s(s.f("user_color",t,e,1),t,e,1,0,0,"")||s.b("    background-color: #6684B4;\n"),s.b("}\n\n"),s.s(s.f("mini_profile_banner_url_for_web",t,e,1),t,e,0,15636,15757,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(".enhanced-mini-profile .mini-profile .profile-summary {\n  background-image: url("),i.b(i.v(i.f("mini_profile_banner_url_for_web",t,e,0))),i.b(");\n}\n")}),t.pop()),s.b("\n"+i),s.s(s.f("user_color",t,e,1),t,e,0,15810,16519,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("  #global-tweet-dialog .modal-header,\n  #Tweetstorm-dialog .modal-header {\n    border-bottom: solid 1px "),i.b(i.v(i.f("rgba_user_color_lighter",t,e,0))),i.b(";\n  }\n\n  #global-tweet-dialog .modal-tweet-form-container,\n  #Tweetstorm-dialog .modal-body {\n    background-color: #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(";\n    background: "),i.b(i.v(i.f("rgba_user_color_lightest",t,e,0))),i.b(";\n  }\n\n  .TweetstormDialog-reply-context .tweet-box-avatar:after,\n  .TweetstormDialog-reply-context .tweet-box-avatar:before,\n  .TweetstormDialog-tweet-box .tweet-box-avatar:after,\n  .TweetstormDialog-tweet-box .tweet-box-avatar:before {\n    border-color: #"),i.b(i.v(i.f("user_color_light",t,e,0))),i.b(";\n  }\n\n  .global-nav .search-input:focus,\n  .global-nav .search-input.focus {\n    border: 2px solid #"),i.b(i.v(i.f("user_color",t,e,0))),i.b(";\n  }\n}\n")}),t.pop()),s.b("\n"+i),s.s(s.f("user_color_lightest",t,e,1),t,e,0,16560,16640,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("  .inline-reply-tweetbox {\n    background-color: #"),i.b(i.v(i.f("user_color_lightest",t,e,0))),i.b(";\n  }\n")}),t.pop()),s.b("\n"+i),s.b("</style>\n"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},ocKB:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({locationPickerIframeSelector:".LocationPickerDialog-iframe",suggestedLocationSelector:".LocationPickerDialog-suggestedLocation",mainAddressLineSelector:".LocationPickerDialog-mainAddressLine",secondaryAddressLineSelector:".LocationPickerDialog-secondaryAddressLine",titleSelector:".LocationPickerDialog-title",submitButtonSelector:"#location-picker-submit-button",footerSelector:".LocationPickerDialog-footer",foursquareVendorInfoSelector:".LocationPickerDialog-foursquareVendorInfo",yelpVendorInfoSelector:".LocationPickerDialog-yelpVendorInfo",isShowingAttributionClass:"is-ShowingAttribution"}),this.openDialog=function(e,i){var s=t("html").attr("lang"),o="/i/locations/share?lang="+s;i=i||{},e=e||{};var a=i&&i.src||o;this.attr.loggedIn?(this.select("locationPickerIframeSelector").attr("src",a),this.on(window,"message",this.proxyIframeEvents),this.open(),this.$button=this.select("submitButtonSelector"),this.$button.addClass("disabled").prop("disabled",!0),this.state={type:"uiLocationAttachmentClicked"===e.type?"location_attachment":"location_picker"},"location_picker"===this.state.type?(this.state.qrId=i.qr_id,this.state.conversationId=i.conversation_id,this.$button.addClass("primary-btn").text(Object(n.default)("Send")),this.select("titleSelector").text(Object(n.default)("Share Location"))):(this.handlePickerTextUpdate(null,i),this.$button.removeClass("primary-btn").text(Object(n.default)("View related Tweets")),this.updateDialogTitle(i))):this.trigger(document,"uiOpenSignupDialog")},this.updateDialogTitle=function(t){var e=t.blackLine,i=e||Object(n.default)("Shared Location");this.select("titleSelector").text(i)},this.resetDialog=function(t,e){this.off(window,"message",this.proxyIframeEvents),this.select("locationPickerIframeSelector").attr("src","about:blank"),this.select("titleSelector").empty(),this.select("mainAddressLineSelector").empty(),this.select("secondaryAddressLineSelector").empty(),this.select("footerSelector").removeClass(this.attr.isShowingAttributionClass),this.select("foursquareVendorInfoSelector").addClass("u-hidden"),this.select("yelpVendorInfoSelector").addClass("u-hidden")},this.handlePickerTextUpdate=function(t,e){e=e||{};var i=this.select("suggestedLocationSelector"),s=i.find(".LocationPickerDialog-mainAddressLine"),n=i.find(".LocationPickerDialog-secondaryAddressLine"),o=!e.blackLine&&!e.grayLine,a=o?"":e.blackLine||e.grayLine,r=!e.blackLine||!e.grayLine,c=r?"":e.grayLine;s.toggleClass("u-hidden",o).text(a),n.toggleClass("u-hidden",r).text(c)},this.handleLocationUpdate=function(t,e){this.state.locationData=e||{},this.$button.removeClass("disabled").prop("disabled",!1),e.attribution&&this.updateAttribution(e.attribution)},this.updateAttribution=function(t){var e=this.select("footerSelector"),i=this.select("foursquareVendorInfoSelector"),s=this.select("yelpVendorInfoSelector"),n="foursquare"===t,o="yelp"===t,a=n||o;e.toggleClass(this.attr.isShowingAttributionClass,a),i.toggleClass("u-hidden",!n),s.toggleClass("u-hidden",!o)},this.canSend=function(){return this.state.locationData},this.handleClick=function(){"location_picker"===this.state.type?(this.sendLocation(),this.close()):this.viewRelatedTweets(),this.trigger("uiScribeLocationDialogButtonClick",this.state)},this.viewRelatedTweets=function(){var t=this.state.locationData.bestPlaceId||"",e="place:"+t,i="/search?"+u.a.encode({q:e});window.open(i,"_blank")},this.sendLocation=function(){var t=this.state.locationData,e={conversation_id:this.state.conversationId,"quick_reply_response[location][id]":this.state.qrId};"Coord"===t.type?l.default.push(e,{"location[shared_coordinate][lat]":t.lat,"location[shared_coordinate][lon]":t.lon}):l.default.push(e,{"location[shared_place][place][id]":t.placeId}),this.trigger("uiDMSendMessage",e)},this.after("initialize",function(){this.on(document,"uiLocationQRCtaClicked uiShareLocation uiLocationAttachmentClicked",this.openDialog),this.on("uiDialogClosed",this.resetDialog),this.on("uiB2CLocationPickerTextUpdate",this.handlePickerTextUpdate),this.on("uiB2CLocationPickerUpdateSelectedLocation uiB2CLocationAttachmentInit",this.handleLocationUpdate),this.on("click",{submitButtonSelector:Object(h.a)(this.handleClick,this.canSend)})})}var n=i("0d4m"),o=i("DBjh"),a=i("UHc7"),r=i("zvXx"),c=i("3oDc"),l=i("YzIt"),h=i("4oun"),d=i("TBNR"),u=i("TX0g"),p=Object(o.default)(s,a.a,r.a,c.a,d.a);e.a=p}).call(e,i("4kSj"))},oh3L:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("is_translator",t,e,1),t,e,0,18,121,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('<span class="Icon Icon--translator"><span class="u-hiddenVisually">Translator</span></span>')}),t.pop()),s.s(s.f("is_translation_moderator",t,e,1),t,e,0,175,288,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('<span class="Icon Icon--moderator"><span class="u-hiddenVisually">Translation Moderator</span></span>')}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},orcd:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<h3 class="PromptbirdPrompt-title">'),s.b(s.v(s.f("title",t,e,0))),s.b("</h3>"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},p3ED:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({top:90,closeOnOtherDialogOpened:!0,timelineSelectorSelector:".timeline-selector",wasMemberSelector:".timeline-item .was-member",wasNotMemberSelector:".timeline-item .was-not-member",submitSelector:".js-submit"}),this.openDialog=function(t,e){var i=l.a.render({});this.$node.html(i),this.$dialog=this.$dialogContainer.find(this.attr.modalSelector),this.tweetId=e.tweetId,this.impressionId=e.impressionId,this.trigger("uiNeedsFullCustomTimelines",{tweetId:e.tweetId}),this.scribe({component:"curate_dialog",action:"open"},e),this.open()},this.renderFullTimelinesList=function(t,e){this.select("timelineSelectorSelector").html(e.html)},this.submitChanges=function(){function e(e){return e.map(function(){return t(this).attr("data-timeline-id")}).get()}this.select("submitSelector").prop("disabled",!0);var i=this.select("wasMemberSelector").filter(":not(:checked)"),s=this.select("wasNotMemberSelector").filter(":checked"),n={removed:e(i),added:e(s),tweetId:this.tweetId,impressionId:this.impressionId};this.trigger("uiCurateTweets",n)},this.after("initialize",function(){this.on(document,"uiOpenCurateDialog",this.openDialog),this.on(document,"dataGotFullCustomTimelines",this.renderFullTimelinesList),this.on(document,"dataTweetsCurated",this.close),this.on("click",{submitSelector:this.submitChanges})})}var n=i("DBjh"),o=i("UHc7"),a=i("Y4bJ"),r=i("3oDc"),c=i("zbKd"),l=i.n(c);e.a=Object(n.default)(o.a,s,a.a,r.a)}).call(e,i("4kSj"))},p4eP:function(t,e,i){"use strict";function s(){this.defaultAttrs({noShowError:!0}),this.updateName=function(t,e){e=e||{},this.post({url:"/i/direct_messages/update_name",data:{id:e.conversation_id,name:e.name},success:r(t.target,["dataDMConversationResult","dataUpdateConversationNameSuccess"]),error:r(t.target,"dataUpdateConversationNameFailure")})},this.after("initialize",function(){this.on("uiUpdateConversationName",this.updateName)})}var n=i("DBjh"),o=i("VtWx"),a=i("ldNY"),r=a.a.triggerFn;e.a=Object(n.default)(s,o.a)},pAFG:function(t,e,i){"use strict";(function(t){function s(e){this.attr={id:null,ttl_ms:216e5,limit:3,version:1,storageList:"conciergeList",storageVersion:"conciergeVersion",prefetchLimit:3,localQueriesEnabled:!1,remoteQueriesEnabled:!1,prefetchPath:"/i/search/typeahead.json",prefetchType:"oneclick",remotePath:"/i/search/typeahead.json",remoteType:"oneclick",basePath:"/search?",scribeMap:{images:"photos",videos:"video",news:"news",users:"people"},nameMap:{"images near":Object(a.default)("Photos near you"),"images follow":Object(a.default)("Photos from people you follow"),"videos near":Object(a.default)("Videos near you"),"videos follow":Object(a.default)("Videos from people you follow"),"news near":Object(a.default)("News near you"),"news follow":Object(a.default)("News shared by people you follow"),"users near":Object(a.default)("People near you")},modePathMap:{images:"mode=photos",videos:"mode=videos",news:"mode=news",users:"mode=users"},locationFilterPath:"near=me",followFilterPath:"f=follows",querySourcePath:"src=taoc",querySource:"typeahead_oneclick"},this.attr=o.default.merge(this.attr,e),this.after=t.noop,this.defaultAttrs=t.noop,n.default.mixin(this,[c.a,l.a]),this.getStorageKeys=function(){return[this.attr.storageVersion,this.attr.storageList]},this.getPrefetchCount=function(){return this.attr.prefetchLimit},this.isMetadataExpired=function(){return this.storage.getItem(this.attr.storageVersion)!==this.attr.version},this.getDataFromLocalStorage=function(){this.conciergeList=this.storage.getItem(this.attr.storageList)||this.conciergeList},this.processResults=function(t){if(!t||!t[this.attr.prefetchType])return void this.useStaleData();t[this.attr.prefetchType].forEach(function(t){var e=this.constructConciergeSuggestion(t);e&&this.conciergeList.push(e)},this),this.storage.setItem(this.attr.storageList,this.conciergeList,this.attr.ttl_ms),this.storage.setItem(this.attr.storageVersion,this.attr.version,this.attr.ttl_ms)},this.getLocalSuggestions=function(t,e){e(t&&""!==t.query?[]:this.conciergeList.slice(0,this.attr.limit))},this.requiresRemoteSuggestions=function(t){return!(!t||""!==t.query)&&this.attr.remoteQueriesEnabled},this.processRemoteSuggestions=function(t,e,i){var s=i[this.attr.id]||[];if(e[this.attr.remoteType])for(var n=e[this.attr.remoteType],o=0;o<n.length;o++){var a=this.constructConciergeSuggestion(n[o]);if(a){var r=s.push(a);if(r>=this.attr.limit)break}}return i[this.attr.id]=s.slice(0,this.attr.limit),i},this.constructConciergeSuggestion=function(t){var e=t.filter,i=!!t.location,s=!!t.follow,n=t.topic,o=this.constructName(e,i,s,n);return o?{topic:n,searchPath:this.constructSearchPath(e,i,s,n),name:o,querySource:this.attr.querySource,searchDetails:this.constructScribeDetails(e,i,s,n)}:null},this.constructName=function(t,e,i,s){var n=e?" near":"",o=i?" follow":"";return s||this.attr.nameMap[t+n+o]},this.constructSearchPath=function(t,e,i,s){var n=[this.attr.querySourcePath],o=t?this.attr.modePathMap[t]:"";return o&&n.push(o),e&&n.push(this.attr.locationFilterPath),i&&n.push(this.attr.followFilterPath),s&&n.push("q="+encodeURIComponent(s)),this.attr.basePath+n.join("&")},this.constructScribeDetails=function(t,e,i,s){var n={result_type:this.attr.scribeMap[t]||"everything",social_filter:i?"following":"all"};return s&&(n.query=s),e&&(n.near="me"),n},this.initialize=function(){var t=Object(r.a)({withExpiry:!0});this.storage=new t("typeahead"),this.conciergeList=[],this.attr.localQueriesEnabled&&this.loadData(this.attr.prefetchPath,this.attr.prefetchType)},this.initialize()}var n=i("q9/C"),o=i("YzIt"),a=i("0d4m"),r=i("rWgq"),c=i("VtWx"),l=i("8XKX");e.a=s}).call(e,i("4kSj"))},pB0G:function(t,e,i){"use strict";(function(t){function s(){var e={},i={};this.defaultAttrs({mediaSelector:".js-adaptive-photo,.tweet-media-img-placeholder,.AdaptiveStreamGridImage,.ProfileAvatar-container,.ProfileCardMini-avatar,.MomentMediaItem-entity--image,.ProfileStreamGridImage",mediaNewsCameraBadgeSelector:".AdaptiveMedia-newsCameraBadge",adaptiveMediaSelector:".AdaptiveMedia",galleryParentSelector:".Gallery",galleryMediaSelector:".Gallery-media",galleryTweetSelector:".GalleryTweet",galleryTweetFooterSelector:".GalleryTweet .stream-item-footer",galleryNewsCameraBadgeSelector:".GalleryTweet-newsCameraBadge",closeSelector:".js-close, .Gallery-closeTarget",gallerySelector:".Gallery-content",imageSelector:".media-image",navSelector:".GalleryNav",prevSelector:".GalleryNav--prev",nextSelector:".GalleryNav--next",itemType:"tweet",tweetlessGalleryClass:"without-tweet",hasStickersClass:"is-stickers"}),this.clearCache=function(){e={},i={}},this.isOpen=function(){return t("body").hasClass("gallery-enabled")},this.open=function(e,i){this.calculateScrollbarWidth(),!this.isOpen()&&i.length&&(e&&e.timelineSelector?this.$timeline=i.closest(e.timelineSelector):this.$timeline=i.parent(),this.tweetFooterSelector=this.attr.galleryTweetFooterSelector,this.clearTweet(),this.setDominantColorForMedia(i),o.a.resetMinSize(this.$gallery),this.render(i),t("body").addClass("gallery-enabled"),this.$gallery.addClass("show-controls"),this.on(this.$gallery,"mouseout",this.enableTweetFade),this.trigger("uiGalleryOpened",e))},this.openGallery=function(e,i){var s=t(e.target).closest(this.attr.mediaSelector);this.open(i,s)},this.openCardImageGallery=function(e,i){var s=t("<div/>",{"data-resolved-url-large":i.imageUrl,"data-status-id":i.tweetId});this.open(i,s)},this.handleClose=function(t){this.isOpen()&&(t.stopPropagation(),this.closeGallery())},this.closeGallery=function(){t("body").hasClass("gallery-enabled")&&(t("body").removeClass("gallery-enabled"),this.setDominantColorForMedia(),this.select("galleryMediaSelector").empty(),this.resetStickers(),this.hideNav(),this.enableNav(!1,!1),this.off(window,"resize",this.debouncedResize),this.disableTweetFade(),this.off(this.$gallery,"mouseout",this.enableTweetFade),delete this.$current,this.trigger("uiGalleryClosed"),this.trigger("uiDialogClosed"))},this.render=function(t){this.resetStickers(),this.$current=t,this.renderNav(),this.trigger(t,"uiGalleryMediaLoad"),this.renderMedia(t)},this.renderNav=function(){if(this.$current){var t=this.$timeline.find(this.attr.mediaSelector),e=t.index(this.$current),i=t.slice(0,e),s=t.slice(e+1),n=s.length>0,o=i.length>0;this.enableNav(n,o),n||o?this.showNav():this.hideNav()}},this.clearTweet=function(){this.select("galleryTweetSelector").empty()},this.flushTweet=function(i){var s=this.getTweetId(t(i.target));s&&delete e[s]},this.getTweet=function(t){if(t)if(e[t]){var i=e[t];this.renderTweet(t,i.tweetHtml,i.tweetStickers)}else{this.$current&&this.getTweetId(this.$current)===t&&this.select("galleryMediaSelector").find(".media-image,iframe").hide();var s={id:t,modal:"gallery",hasStickers:a.a.getDeciderValue("stickersExperience")};this.trigger("uiGetTweet",s)}},this.gotTweet=function(t,s){"id"in s&&"tweet_html"in s&&"sourceEventData"in s&&"gallery"===s.sourceEventData.modal&&(e[s.id]={tweetHtml:s.tweet_html,tweetStickers:s.tweet_stickers},s.sourceEventData.promotedBadgeHtml&&(i[s.id]=s.sourceEventData.promotedBadgeHtml),this.renderTweet(s.id,s.tweet_html,s.tweet_stickers))},this.moveDropdownToActionList=function(t){var e=t.find(".ProfileTweet-action--more"),i=t.find(".stream-item-footer .ProfileTweet-actionList");e.appendTo(i)},this.renderTweet=function(e,s,n){if(this.$current&&this.getTweetId(this.$current)===e.toString()){var a=this.select("galleryTweetSelector"),r=this.select("galleryMediaSelector").find(".media-image,iframe");a.html(s);var c=i[e];if(c&&a.find(".stream-item-footer").prepend(t(c)),this.moveDropdownToActionList(a),r.length&&(r.show(),o.a.resizeMedia(r,this.$gallery,!1,this.tweetFooterSelector),this.applyDominantColorToBorder()),n){var l=this.$timeline.find(this.attr.mediaSelector),h=l.filter('[data-tweet-id="'+e+'"]');h.length||(h=l.not("[data-tweet-id]"));var d=h.index(this.$current);d>=0&&n[d]&&(this.$gallery.addClass(this.attr.hasStickersClass),this.replaceMediaWithImageAndStickers(n[d]))}this.trigger("uiNeedUpdateInjectedTweetStats")}},this.getTweetId=function(t){return t.attr("data-status-id")?t.attr("data-status-id"):t.closest("[data-tweet-id]").attr("data-tweet-id")},this.getAllInDir=function(e,i){var s=void 0,n="prev"===i?-1:1,o=this.$timeline.find(this.attr.mediaSelector),a=o.index(e)+n;return a>-1&&(s=o.slice(a)),s||t()},this.getInDir=function(t,e){return this.getAllInDir(t,e).first()},this.renderMedia=function(t){t.attr("data-source-url")?this.loadVideo(t):this.loadImage(t)},this.mediaLoaded=function(t){if(this.isOpen()){var e=this.getTweetId(t);this.setDominantColorForMedia(t),e?(this.getTweet(e),this.$gallery.closest(this.attr.galleryParentSelector).removeClass(this.attr.tweetlessGalleryClass)):(this.clearTweet(),this.$gallery.closest(this.attr.galleryParentSelector).addClass(this.attr.tweetlessGalleryClass));var i=t.closest(this.attr.adaptiveMediaSelector).find(this.attr.mediaNewsCameraBadgeSelector),s=this.$gallery.closest(this.attr.galleryParentSelector).find(this.attr.galleryNewsCameraBadgeSelector);i.length?s.html(i.clone()):s.empty(),this.trigger("uiGalleryMediaLoaded",{url:this.getLargeMediaUrl(t),id:t.attr("data-status-id")})}},this.mediaFailed=function(t){this.trigger("uiGalleryMediaFailed",{url:this.getLargeMediaUrl(t),id:t.attr("data-status-id")}),t.remove(),this.next()},this.loadImage=function(e){var i=this;this.$gallery.removeClass(["video","is-hitTesting",this.attr.hasStickersClass].join(" "));var s=e.find("img").attr("alt"),n=t("<img>",{alt:s,addClass:"media-image"});n.on("load",function(t){e.attr("loaded",!0),i.select("galleryMediaSelector").html(n),n.attr({"data-height":n[0].height,"data-width":n[0].width}),o.a.resizeMedia(n,i.$gallery,!1,i.tweetFooterSelector,!0),i.$current=e,i.mediaLoaded(e)}),n.on("error",function(){return i.mediaFailed(e)}),n.attr("src",this.getLargeMediaUrl(e))},this.fixSnappyUrl=function(t){var e=t.attr("data-source-url"),i=/https:\/\/www.snappytv.com\/tc\/(\d+)\?autoplay=true&h=(\d+)&w=(\d+)/;if(i.test(e)){var s=2*t.attr("data-height"),n=2*t.attr("data-width");e=e.replace(i,"https://www.snappytv.com/tc/$1?autoplay=true&h="+s+"&w="+n),t.attr("data-source-url",e)}},this.loadVideo=function(e){var i=t("<iframe>");this.fixSnappyUrl(e),i.height(2*e.attr("data-height")).width(2*e.attr("data-width")).attr("data-height",2*e.attr("data-height")).attr("data-width",2*e.attr("data-width")).attr("src",e.attr("data-source-url")),e.attr("loaded",!0),this.select("galleryMediaSelector").empty().append(i),this.$current=e,this.getTweet(e.attr("data-status-id")),this.$gallery.addClass("video").removeClass(this.attr.hasStickersClass)},this.prev=function(){this.gotoMedia("prev"),this.trigger("uiGalleryNavigatePrev")},this.next=function(){this.gotoMedia("next"),this.trigger("uiGalleryNavigateNext")},this.gotoMedia=function(t){if(this.$current){var e=this.getInDir(this.$current,t);e.length&&this.render(e)}},this.showNav=function(){this.select("navSelector").show()},this.hideNav=function(){this.select("navSelector").hide()},this.enableTweetFade=function(){this.select("galleryTweetSelector").addClass("enable-fade")},this.disableTweetFade=function(){this.select("galleryTweetSelector").removeClass("enable-fade")},this.enableNav=function(t,e){t?this.select("nextSelector").addClass("enabled"):this.select("nextSelector").removeClass("enabled"),e?this.select("prevSelector").addClass("enabled"):this.select("prevSelector").removeClass("enabled")},this.getLargeMediaUrl=function(t){var e=t.attr("data-image-url");return t.attr("data-resolved-url-large")||e&&e+":large"},this.throttle=function(t,e,i){var s=!1;return function(){s||(t.apply(i,arguments),s=!0,setTimeout(function(){return s=!1},e))}},this.hideControls=function(){this.$gallery.removeClass("show-controls")},this.after("initialize",function(){this.on("uiReplyToTweet","uiOpenReplyDialog"),this.on("mousemove",this.hideControls),this.on(document,"dataDidDeleteTweet",this.closeGallery),this.on(document,"dataGotMoreMediaTimelineItems",this.renderNav),this.on(document,"uiOpenGallery",this.openGallery),this.on(document,"uiOpenCardImageGallery",this.openCardImageGallery),this.on(document,"uiOverlayNavigate uiCloseGallery",this.closeGallery),this.on(document,"uiShortcutEsc",this.handleClose),this.on(window,"popstate",this.closeGallery),this.on(document,"uiShortcutLeft",this.throttle(this.prev,200,this)),this.on(document,"uiShortcutRight",this.throttle(this.next,200,this)),this.on(document,"dataGotTweet",this.gotTweet),this.on(document,"dataFailedToGetTweet",this.clearTweet),this.on("click",{prevSelector:this.prev,nextSelector:this.next,closeSelector:this.handleClose}),this.on(document,"uiDidRetweet uiDidUnretweet uiDidFavoriteTweet uiDidUnfavoriteTweet",this.flushTweet),this.$gallery=this.select("gallerySelector")})}var n=i("DBjh"),o=i("Hotm"),a=i("IAMj"),r=i("xgWv"),c=i("E+fT"),l=i("mRBi"),h=i("nnea"),d=i("MRdM"),u=i("hKEr"),p=Object(n.default)(s,d.a,r.a,l.a,h.a,c.a,u.a);e.a=p}).call(e,i("4kSj"))},pMrE:function(t,e,i){"use strict";(function(t){function s(){var e=void 0,i="onwebkitfullscreenchange"in document;this.getFullscreenElement=function(){return document.webkitFullscreenElement},this.getYOffset=function(){return o.a.getGlobalYOffset()},this.supportsFullscreen=function(){return i},this.isEnteringFullscreen=function(){return Boolean(this.getFullscreenElement())},this.saveFullscreenElement=function(){e=this.getFullscreenElement()},this.scrollToFullscreenElement=function(){if(e){var i=t(e).parents('[data-component-context="tweet"]');i&&"function"==typeof i.offset&&i.offset()&&window.scrollTo(window.scrollX,i.offset().top-o.a.getGlobalYOffset()),e=void 0}},this.changeFullScreen=function(t,e){this.isEnteringFullscreen()?this.saveFullscreenElement():this.scrollToFullscreenElement()},this.after("initialize",function(){this.supportsFullscreen()&&this.on(document,"webkitfullscreenchange",this.changeFullScreen)})}var n=i("DBjh"),o=i("reQR"),a=Object(n.default)(s);e.a=a}).call(e,i("4kSj"))},pNUl:function(t,e,i){"use strict";e.a={GIF:"gif",IMAGE:"image",VIDEO:"video"}},pREB:function(t,e,i){"use strict";(function(t){function i(){this.defaultAttrs({missingTweetsLinkSelector:"a.missing-tweets-link",missingTweetsBarSelector:".missing-tweets-bar",focalTweetSelector:".original-tweet",topLevelStreamItemSelector:".stream-item:not(.conversation-tweet-item)",conversationTweetClass:"conversation-tweet",detachedConversationClass:"detached-conversation",expandingConversationClass:"expanding-conversation",selectedSelector:".selected-stream-item",awaitingAncestorsClass:".conversation-awaiting-ancestors"}),this.handleExpandConversationAndLoadMissingTweets=function(t){t.preventDefault();var e=this.streamItemFromEvent(t),i=this.getFocalPoint(e),s=i.data("permalink-path"),n=i.data("conversation-id");s&&this.trigger("uiNavigate",{href:s,conversation_id:n})},this.streamItemFromEvent=function(e){return t(e.target).closest(this.attr.topLevelStreamItemSelector)},this.getFocalPoint=function(t){return t.find(this.attr.focalTweetSelector)},this.getTweetId=function(e){return t(e).find(".tweet").attr("data-tweet-id")},this.notifyConversationMutated=function(e,i){var s=t(e.target),n=s.closest(this.attr.conversationModuleSelector);n.length&&this.trigger(n,"uiConversationModuleUpdated")},this.after("initialize",function(){this.on("click",{missingTweetsLinkSelector:this.handleExpandConversationAndLoadMissingTweets}),this.on("uiShortcutEnter",{missingTweetsBarSelector:this.handleExpandConversationAndLoadMissingTweets}),this.on("uiTweetInserted uiBeforeTweetRemoved",this.notifyConversationMutated)})}e.a=i}).call(e,i("4kSj"))},pRwu:function(t,e,i){"use strict";(function(t){function i(){this.defaultAttrs({condensable:!1,condensedClass:"condensed"}),this.isCondensed=function(){return this.attr.condensable&&this.$node.hasClass(this.attr.condensedClass)},this.canBeCondensed=function(){return this.attr.condensable&&!this.$node.hasClass(this.attr.condensedClass)},this.isWithinContainer=function(e){return t.contains(this.containerElement,e)},this.expand=function(t){var e=this;this.isCondensed()&&(this.$node.removeClass(this.attr.condensedClass),this.trigger("uiTweetBoxExpanded"),this.validateAddTweetButton(),void 0!==this.cursorPosition&&setTimeout(function(){return e.setCursorPosition(e.cursorPosition)}),t&&this.trigger("uiComposerResetAndFocus"))},this.getCondensedText=function(){return void 0===this.condensedText&&(this.condensedText=void 0!==this.attr.condensedText?this.attr.condensedText:this.$node.attr("data-condensed-text")||""),this.condensedText},this.condense=function(){this.$node.addClass(this.attr.condensedClass),this.$text.blur(),this.resetTweetText(),this.trigger("uiTweetBoxCondensed")},this.condenseIfNotActive=function(){var t=this;setTimeout(function(){t.canBeCondensed()&&!t.isWithinContainer(document.activeElement)&&(t.detectUpdatedText(),t.trigger("uiHideAutocomplete"),t.isEmpty()&&t.condense())},0)},this.condenseOnMouseDown=function(t){this.canBeCondensed()&&(this.checkCondenseOnMouseUp=!0)},this.condenseOnMouseUp=function(){this.checkCondenseOnMouseUp&&(this.checkCondenseOnMouseUp=!1,this.condenseIfNotActive())},this.condenseOnFocusOut=function(){this.checkCondenseOnMouseUp||this.condenseIfNotActive()},this.expandOnFocusIn=function(){this.expand(!0)},this.around("resetTweetText",function(t){this.isCondensed()?this.setVisibleText(this.getCondensedText()):t()}),this.around("setTweetBoxOverrides",function(t,e,i){t(e,i),this.condensedText=i?i.condensedText:void 0,i&&this.isCondensed()&&this.setVisibleText(this.getCondensedText())}),this.around("isEmpty",function(t){return this.isCondensed()&&this.getVisibleText().trim()===this.getCondensedText().trim()||t()}),this.after("clear",function(){this.canBeCondensed()&&this.condense()}),this.after("initialize",function(){if(this.containerElement=t(this.attr.condenseContainer||this.$node)[0],this.attr.condensable){this.on(this.$text,"focusin",this.ignoreDuringFakeFocus(this.expandOnFocusIn)),this.on(this.containerElement,"focusout",this.ignoreDuringFakeFocus(this.condenseOnFocusOut)),this.on(document,"mousedown",this.condenseOnMouseDown),this.on(document,"mouseup",this.condenseOnMouseUp);var e=this.hasFocus();if(e){var i=this.getVisibleText(),s=this.getCondensedText();s&&!i.indexOf(s)&&this.setVisibleText(i.replace(s,this.defaultText))}!e&&this.isEmpty()||this.expand(!1)}})}e.a=i}).call(e,i("4kSj"))},pSzH:function(t,e,i){"use strict";var s=i("+dWm"),n=i("P2na"),o=i("EYue"),a={getOrientation:function(t){return new Promise(function(e,i){return o.a.detectOrientation(t,e)})},drawImageWithOrientation:function(t,e,i,s,n){switch(t.save(),n){case o.a.TOP_RIGHT:t.scale(-1,1),t.drawImage(e,-i,0,i,s);break;case o.a.BOTTOM_RIGHT:t.rotate(Math.PI),t.drawImage(e,-i,-s,i,s);break;case o.a.BOTTOM_LEFT:t.scale(1,-1),t.drawImage(e,0,-s,i,s);break;case o.a.LEFT_TOP:t.translate(i/2,s/2),t.rotate(Math.PI/2),t.scale(1,-1),t.drawImage(e,-s/2,-i/2,s,i);break;case o.a.RIGHT_TOP:t.translate(i/2,s/2),t.rotate(Math.PI/2),t.drawImage(e,-s/2,-i/2,s,i);break;case o.a.RIGHT_BOTTOM:t.translate(i/2,s/2),t.rotate(Math.PI/2),t.scale(-1,1),t.drawImage(e,-s/2,-i/2,s,i);break;case o.a.LEFT_BOTTOM:t.translate(i/2,s/2),t.rotate(-Math.PI/2),t.drawImage(e,-s/2,-i/2,s,i);break;default:t.drawImage(e,0,0,i,s)}t.restore()},widthAndHeightForOrientation:function(t,e){return e===o.a.LEFT_TOP||e===o.a.RIGHT_TOP||e===o.a.RIGHT_BOTTOM||e===o.a.LEFT_BOTTOM?{width:t.height,height:t.width}:{width:t.width,height:t.height}},progressiveResizeRoughPass:function(t,e,i){for(var s=t,n=void 0;s.width/2>e||s.height/2>i;)n=document.createElement("canvas"),n.width=s.width/2,n.height=s.height/2,n.getContext("2d").drawImage(s,0,0,s.width/2,s.height/2),s=n;return s},progressiveResize:function(t,e,i){var o=this.progressiveResizeRoughPass(t,e,i),a=document.createElement("canvas");a.width=e,a.height=i,a.getContext("2d").drawImage(o,0,0,e,i);var r=a.toDataURL("image/jpeg"),c=e>n.a.MAX_DIMENSION||i>n.a.MAX_DIMENSION,l=s.a.getDataUriObjectSize(r)>s.a.MAX_UPLOAD_FILE_SIZE,h=.8;return c||l?(c&&(h=e>i?n.a.MAX_DIMENSION/e:n.a.MAX_DIMENSION/i),this.progressiveResize(t,e*h,i*h)):s.a.getBlobFromDataUri(r)},resize:function(t){var e=this;return new Promise(function(i,s){n.a.hasCanvas()?e.getOrientation(t).then(e.resizeWorker.bind(e,t)).then(i).catch(s):i(t)})},resizeWorker:function(t,e){var i=this,a=new Image,r=s.a.getObjectUrl(t);return new Promise(function(c,l){a.onload=function(r){var h=i.widthAndHeightForOrientation(a,e),d=h.width,u=h.height;if(!d||!u)return l(r);if(!(t.size>s.a.MAX_UPLOAD_FILE_SIZE||d>n.a.MAX_DIMENSION||u>n.a.MAX_DIMENSION||e!==o.a.TOP_LEFT&&e!==o.a.UNKNOWN))return c(t);var p=document.createElement("canvas");p.width=d,p.height=u;var f=p.getContext("2d");i.drawImageWithOrientation(f,a,d,u,e),c(i.progressiveResize(p,d,u))},a.onerror=l,a.src=r}).then(function(t){return s.a.revokeObjectUrl(r),t}).catch(function(t){throw s.a.revokeObjectUrl(r),t})}};e.a=a},"pUl/":function(t,e,i){"use strict";function s(){o.default.mixin(this,[r.a]),this.caret=n.a,this.defaultAttrs({textSelector:"textarea.tweet-box",textFakeFocusClass:"fake-focus"}),this.hasFakeFocus=function(){return this.$text.hasClass(this.attr.textFakeFocusClass)},this.toggleFakeFocus=function(t){this.$text.toggleClass(this.attr.textFakeFocusClass,!!t)},this.ignoreDuringFakeFocus=function(t){var e=this;return function(){if(!e.$text.hasClass(e.attr.textFakeFocusClass))return t.apply(this,arguments)}},this.hasFocus=function(){return document.activeElement===this.$text[0]||this.hasFakeFocus()},this.getVisibleText=function(){return this.cleanedText||""},this.setVisibleText=function(t){this.detectUpdatedText(!1,t)},this.addHiddenText=function(t){return t},this.cleanText=function(t){return t},this.detectUpdatedText=function(t,e){void 0===e?e=this.$text.val():this.$text.val(e);var i=n.a.getPosition(this.$text[0]);(e!==this.prevText||t)&&(this.prevText=e,this.updateCleanedTextAndPosition(this.cleanText(e),i)),this.detectUpdatedCursorPosition(i)},this.updateCleanedTextAndPosition=function(t,e){this.cleanedText=t,this.trigger("uiTextChanged",{text:t,position:Math.min(e,t.length)})},this.detectUpdatedCursorPosition=function(t){(t=Math.min(t,(this.cleanedText||"").length))!==this.prevPosition&&(this.prevPosition=t,this.trigger("uiCursorPositionChanged",{position:t}))},this.setCursorPosition=function(t){void 0===t&&(t=this.cursorPosition),void 0===t&&(t=this.$text.val().length),n.a.setPosition(this.$text.get(0),t),this.detectUpdatedCursorPosition(t)},this.changeTextAndPosition=function(t,e){this.setVisibleText(e.text),this.setCursorPosition(e.position)},this.focus=function(){this.hasFocus()||(document.body.focus(),this.$text.trigger("focusin"),this.$text.focus())},this.initTextNode=function(){this.$text=this.select("textSelector"),this.detectUpdatedText()},this.inputPoll=function(){this.detectUpdatedText()},this.setEditability=function(t){this.$text.prop("disabled",!t)},this.after("initialize",function(){this.on("uiChangeTextAndPosition",this.changeTextAndPosition),this.on("uiInputPoll",this.inputPoll),this.on("uiEnableEditing",this.setEditability.bind(this,!0)),this.on("uiDisableEditing",this.setEditability.bind(this,!1)),this.attachChild(a.a,this.$text)})}var n=i("mJ5M"),o=i("q9/C"),a=i("ZWfe"),r=i("AJAn");e.a=s},pVwJ:function(t,e,i){"use strict";function s(){this.defaultAttrs({safeOrigins:["https://localhost.twitter.com","https://twitter.com"],iframeSelector:"#bouncer-flow",contentSelector:".BouncerContent",spinnerSelector:".BouncerSpinner",dismissButtonSelector:".js-close"}),this.openBouncerDialog=function(t,e){var i=e.bounce.bounce_location||"/account/access",s=document.documentElement.lang||"en";this.select("iframeSelector").attr("src",a.a.addToUrl(i,{lang:s})),this.open()},this.onBeforeIframeUnload=function(){this.setIframeLoading(!0),this.position()},this.onIframeLoad=function(){this.setIframeLoading(!1),this.position()},this.setIframeLoading=function(t){if(t)this.$bouncerContent.hide(),this.$dismissButton.hide(),this.$spinner.show(),this.$bouncerContent.height(this.$spinner.height()),this.$iframe.height(this.$spinner.height());else{this.$spinner.hide(),this.$dismissButton.show(),this.$bouncerContent.show();var e=this.$iframe.contents().find("body").height()+20;e>this.$iframe.height()&&(this.$bouncerContent.height(e),this.$iframe.height(e))}},this.onCancel=function(){this.trigger("uiBouncerCancelled"),this.close()},this.onComplete=function(){this.trigger("uiBouncerCompleted"),this.close()},this.on2FAComplete=function(){this.is2faEnrollmentComplete=!0},this.onDialogClosed=function(){this.is2faEnrollmentComplete?(this.is2faEnrollmentComplete=!1,this.trigger("uiBouncer2FACompleted")):this.trigger("uiBouncerCancelled")},this.aroundAfterClose=function(t){t(),this.onDialogClosed(),this.reset()},this.reset=function(){this.setIframeLoading(!0)},this.dispatchBouncerMessage=function(t,e){var i=t.originalEvent,s=i&&i.data;if(-1!==this.attr.safeOrigins.indexOf(i.origin)&&s&&s.bouncer&&s.event){var n=s.event;"beforeunload"===n?this.onBeforeIframeUnload():"load"===n?this.onIframeLoad():"cancel"===n?this.onCancel():"complete"===n?this.onComplete():"2fa_complete"===n&&this.on2FAComplete()}},this.after("initialize",function(){this.on(document,"dataRequestBounced",this.openBouncerDialog),this.on(document,"uiPreOpenBouncerDialog",this.open),this.is2faEnrollmentComplete=!1,this.on(window,"message",this.dispatchBouncerMessage),this.around("afterClose",this.aroundAfterClose),this.$modalContent=this.select("modalContentSelector"),this.$iframe=this.select("iframeSelector"),this.$bouncerContent=this.select("contentSelector"),this.$spinner=this.select("spinnerSelector"),this.$dismissButton=this.select("dismissButtonSelector"),this.reset()})}var n=i("DBjh"),o=i("UHc7"),a=i("sxXh"),r=Object(n.default)(s,o.a);e.a=r},pkiN:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({delayedPrompts:[],tweetItemSelector:'.js-stream-item[data-item-type="tweet"]:visible',originalTweetSelector:".js-original-tweet",promotedTweetClass:"promoted-tweet",immediateTriggers:[]}),this.initPage=function(){this.trigger("uiPromptbirdManagerWantsPrompts",{tweetIds:this.getTweetIds()})},this.renderImmediatePrompts=function(t){t.filter(function(t){return this.shouldRenderPromptImmediately(t)},this).forEach(this.renderPrompt,this)},this.renderPrompt=function(t){this.trigger("uiPromptbirdShouldRenderPrompt",{prompt:t})},this.saveDelayedPrompts=function(t){var e=t.filter(function(t){return!this.shouldRenderPromptImmediately(t)},this);this.attr.delayedPrompts=e},this.refreshPrompts=function(t,e){e.prompts&&(this.renderImmediatePrompts(e.prompts),this.saveDelayedPrompts(e.prompts))},this.shouldRenderPromptImmediately=function(t){return!t.trigger||this.attr.immediateTriggers.indexOf(t.trigger)>-1},this.getTweetIds=function(){var e=this;return this.select("tweetItemSelector").filter(function(i,s){return!t(s).find(e.attr.originalTweetSelector).hasClass(e.attr.promotedTweetClass)}).map(function(e,i){return t(i).data("item-id")}).toArray().join(",")},this.after("initialize",function(){this.on(document,"uiSwiftLoaded uiPageChanged",this.initPage),this.on("dataPromptbirdManagerHasPrompts",this.refreshPrompts)})}var n=i("DBjh"),o=i("NWI8");e.a=Object(n.default)(s,o.a)}).call(e,i("4kSj"))},"q+8D":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({querySourceLinkSelector:"a[data-query-source]",querySourceDataAttr:"data-query-source",storageExpiration:6e4}),this.saveQuerySource=function(t){this.storage.setItem("source",{source:{value:t,expire:Date.now()+this.attr.storageExpiration}},this.attr.storageExpiration)},this.catchLinkClick=function(e,i){var s=t(i.el).attr(this.attr.querySourceDataAttr);s&&this.saveQuerySource(s)},this.saveTypedQuery=function(t,e){"search"===e.source&&this.saveQuerySource("typed_query")},this.after("initialize",function(){var t=Object(o.a)({withExpiry:!0});this.storage=new t("searchQuerySource"),this.on("click",{querySourceLinkSelector:this.catchLinkClick}),this.on("uiSearchQuery",this.saveTypedQuery)})}var n=i("DBjh"),o=i("rWgq");e.a=Object(n.default)(s)}).call(e,i("4kSj"))},"q+ee":function(t,e,i){"use strict";(function(t){function s(){n.default.mixin(this,[r.a,l.default.withAdvice,c.a]),this.defaultAttrs({querySelector:".GeoSearch-queryInput",dropdownTriggerSelector:".js-geo-search-trigger",dropdownSelector:".GeoSearch-dropdownMenu",resultSelector:".GeoSearch-result",resultClass:"GeoSearch-result",focusableSelector:".GeoSearch-focusable:visible",firstFocusableSelector:".GeoSearch-focusable:first",focusedSelector:".GeoSearch-focusable.is-focused",focusedClass:"is-focused"}),this.getQuery=function(){return this.select("querySelector").text()||""},this.applyAriaAttrsToDropdown=function(){var t=this.select("dropdownSelector");if(t.length){var e=Object(a.a)(t[0]);this.select("querySelector").attr({"aria-owns":e,"aria-expanded":!0,"aria-autocomplete":"list"}),this.select("dropdownSelector").attr("role","listbox"),this.ariaApplied=!0}},this.applyAriaAttrsToResultsAndAnnounceNumResults=function(){if(this.ariaApplied){var e=this.select("resultSelector").length;e&&(this.select("resultSelector").each(function(e,i){t(i).attr("role","option"),Object(a.a)(i)}),this.trigger("uiGeoResultsShown",{numResults:e}))}},this.moveFocus=function(t){var e=this.select("focusedSelector"),i=this.select("focusableSelector"),s=i.index(e)+t,n=i.length-1;s<0?s=n:s>n&&(s=0);var o=i.eq(s);e.removeClass(this.attr.focusedClass),o.addClass(this.attr.focusedClass),this.ariaApplied&&(e.removeAttr("aria-selected"),e.removeAttr("tabindex"),o.attr({"aria-selected":!0,tabindex:"-1"}),this.select("querySelector").attr("aria-activedescendant",o.attr("id")))},this.queryKeyDown=function(t){switch(t.which){case o.a.UP:return t.preventDefault(),void this.moveFocus(-1);case o.a.DOWN:return t.preventDefault(),void this.moveFocus(1);case o.a.LEFT:case o.a.RIGHT:return;case o.a.ENTER:t.preventDefault();var e=this.select("focusedSelector");return e.length?(t.stopPropagation(),void e.trigger("uiGeoSearchSelect")):void this.trigger("uiGeoSearchEnter");case o.a.TAB:return void this.trigger("uiGeoSearchTab")}this.trigger("uiGeoSearchAutocomplete")},this.selectResult=function(e){var i=t(e.target),s=i.data("place-id"),n=i.text(),o=i.data("result-type"),a=i.data("result-type")?'[data-result-type="'+i.data("result-type")+'"]':this.attr.resultSelector,r=this.$node.find(a).index(i);this.trigger("uiGeoSearchChangeLocation",{placeId:s,placeName:n,resultType:o,placeOffset:r})},this.changeQuery=function(t){this.trigger("uiGeoSearchAutocomplete")},this.setFocus=function(e){var i=t(e.target).closest(this.attr.focusableSelector);this.select("focusedSelector").not(i).removeClass(this.attr.focusedClass),i.addClass(this.attr.focusedClass)},this.clearFocus=function(e){t(e.target).removeClass(this.attr.focusedClass)},this.after("openDropdown",function(){this.applyAriaAttrsToDropdown()}),this.after("closeDropdown",function(){this.ariaApplied&&(this.select("focusedSelector").removeAttr("aria-selected").removeAttr("tabindex"),this.select("querySelector").attr("aria-expanded",!1).removeAttr("aria-activedescendant"))}),this.after("initialize",function(){this.on("click",{resultSelector:this.selectResult}),this.on("uiGeoSearchSelect",{resultSelector:this.selectResult}),this.on("mouseover",{focusableSelector:this.setFocus}),this.on("mouseout",{focusableSelector:this.clearFocus}),this.on("change paste cut input",{querySelector:this.changeQuery}),this.on("keydown",{querySelector:this.queryKeyDown})})}var n=i("q9/C"),o=i("i3qs"),a=i("dSEw"),r=i("1hKY"),c=i("oHsY"),l=i("GUGq");e.a=s}).call(e,i("4kSj"))},qGdp:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({newItemsBarSelector:".js-new-tweets-bar",containerSelector:".stream-container",newTweetsBarVisibleClass:"new-tweets-bar-visible",scrollTopOnNewItemsClick:!0}),this.updateNewItemsBar=function(e,i){if(e.target.contains(this.node)){var s=t(i.html),n=this.select("newItemsBarSelector");n.length?(n.replaceWith(s),this.trigger("uiNewItemsBarUpdated")):(this.$node.html(s),this.$node.hide(),this.showNewItemsBar(),this.trigger("uiNewItemsBarShown")),this.trigger("uiNewItemsBarVisible")}},this.showNewItemsBar=function(){var e=this.$node.parent(),i=o.a.getCanvasYOffset(e),s=t(window).scrollTop();this.$node.addClass(this.attr.newTweetsBarVisibleClass),s>i?(this.$node.show(),t("html, body").scrollTop(s+this.$node.height())):this.$node.slideDown()},this.hideNewItemsBar=function(){this.trigger("uiNewItemsBarHidden"),this.select("newItemsBarSelector").remove(),this.$node.removeClass(this.attr.newTweetsBarVisibleClass)},this.handleNewItemsBarClick=function(e,i){var s=t(e.target).closest("[data-live-video-item-json]").attr("data-live-video-item-json");this.attr.scrollTopOnNewItemsClick&&Object(a.a)(0,"fast");var n=window.performance.now();this.canInjectItems?this.trigger("uiInjectNewItems",{fromClick:!0,startTimeMs:n}):this.trigger("uiTimelineShouldRefresh",{injectImmediately:!0,fromPolling:!1,getInitial:!0,startTimeMs:n});var o=t(e.target).attr("data-item-count"),r={unreadCount:Number(o)};if(s)try{r.items=[JSON.parse(s)]}catch(e){}this.trigger("uiNewItemsBarClick",r)},this.after("initialize",function(){var t=this;this.canInjectItems=!0,this.on(document,"uiUpdateNewItemsBar",this.updateNewItemsBar),this.on(document,"uiHideNewItemsBar",function(){t.canInjectItems=!0,t.hideNewItemsBar()}),this.on(document,"uiTimelineCacheInvalidated",function(){t.canInjectItems=!1}),this.on("click",{newItemsBarSelector:this.handleNewItemsBarClick})})}var n=i("DBjh"),o=i("reQR"),a=i("lV5l");e.a=Object(n.default)(s)}).call(e,i("4kSj"))},qQqy:function(t,e,i){"use strict";(function(t){var i={},s={get:function(t){return i[t]},update:function(e){t.extend(i,e)},clear:function(){i={}}};e.a=s}).call(e,i("4kSj"))},qpEk:function(t,e,i){"use strict";function s(t){var e=t.promptbirdData||{};if(e.promptbirdEnabled){n.a.attachTo(document),o.a.attachTo(document),a.a.attachTo(document,e),r.a.attachTo(document,e),p.a.attachTo(document,n.a),u.a.attachTo(document,n.a),c.a.attachTo("#above-timeline-prompt",e),l.a.attachTo("#dashboard-profile-prompt",e),m.a.attachTo("#promptbird-modal-prompt",e);var i=g.a.timelinePromptOptions(e.format),s=v({},e,i.promptOptions);f.a.attachTo(i.timelineSelector,s),h.a.attachTo(i.timelineSelector,v({},s,{actionSelector:".PromptbirdPrompt--inline .js-promptAction",dismissSelector:".PromptbirdPrompt--inline .js-promptDismiss"})),d.a.attachTo(i.timelineSelector,v({},s,{actionSelector:".PromptbirdPrompt--inlinePointer .js-promptAction",dismissSelector:".PromptbirdPrompt--inlinePointer .js-promptDismiss"}))}}e.a=s;var n=i("IT+l"),o=i("CtjH"),a=i("pkiN"),r=i("GGGP"),c=i("dfH9"),l=i("gyvJ"),h=i("HWHS"),d=i("Ibme"),u=i("kPI8"),p=i("zr4x"),f=i("jHm3"),m=i("sU7P"),g=i("GXXu"),v=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t}},r5nI:function(t,e,i){"use strict";function s(){this.defaultAttrs({intent:null}),this.action=function(){},this.checkIntents=function(t,e){if(e.intent&&this.attr.intent===e.intent)return this.action(e.intent_params)},this.after("initialize",function(){this.on(document,"uiPromptbirdClick",this.checkIntents)})}var n=i("DBjh");e.a=Object(n.default)(s)},r8VG:function(t,e,i){"use strict";function s(){var t={tweet_box:{uiTweetboxTweetError:"failure",uiTweetboxTweetSuccess:"send_tweet",uiTweetboxGeotaggedTweetSuccess:"send_geotagged_tweet",uiTweetboxPhotoTweetSuccess:"send_photo_tweet",uiTweetboxPhotoTweetWithAltTextSuccess:"send_photo_tweet_with_alt_text",uiTweetboxPhotoTweetWithoutAltTextSuccess:"send_photo_tweet_without_alt_text",uiTweetboxPollTweetSuccess:"send_poll_tweet",uiTweetboxVideoTweetSuccess:"send_video_tweet",uiTweetboxProVideoTweetSuccess:"send_pro_video_tweet",uiTweetboxReplySuccess:"send_reply",uiTweetboxReplyEditedSuccess:"send_reply_edited",uiTweetboxEmojiTweetSuccess:"send_emoji_tweet",uiTweetboxDMSuccess:"send_dm",uiOpenTweetDialog:"compose_tweet"},local:{uiTweetboxLocalGifTweetSuccess:"send_gif_tweet"},remote:{uiTweetboxRemoteGifTweetSuccess:"send_gif_tweet"},image_picker:{uiImagePickerClick:"click",uiImagePickerAdd:"add",uiImagePickerRemove:"remove",uiImagePickerError:"error",uiImagePickerNoFileReaderError:"no_file_reader",uiImagePickerSelectedFlash:"selected_flash",uiDrop:"drag_and_drop",uiDropMany:"drag_and_drop_many",uiVideoPickerAdd:"add_video",uiVideoPickerProAdd:"add_pro_video"},found_media_category:{uiFoundMediaCategoryImpression:"impression",uiFoundMediaCategorySelect:"select",uiFoundMediaCategoryAdd:"add",uiFoundMediaCategoryError:"error",uiFoundMediaCategoryCancel:"cancel"},found_media_gallery:{uiFoundMediaGalleryImpression:"impression"},found_media_trend:{uiFoundMediaTrendImpression:"impression",uiFoundMediaTrendSelect:"select",uiFoundMediaTrendAdd:"add",uiFoundMediaTrendError:"error",uiFoundMediaTrendCancel:"cancel"},geo_picker:{uiGeoPickerOffer:"offer",uiGeoPickerEnable:"enable",uiGeoPickerOpen:"open",uiGeoPickerTurnOn:"on",uiGeoPickerTurnOff:"off",uiGeoPickerChange:"select",uiGeoPickerInteraction:"focus_field",uiGeoPickerSendTweet:"send_tweet_geo_interaction"},emoji_picker:{uiEmojiPickerOpen:"open",uiEmojiPickerCancel:"cancel",uiEmojiPickerResults:"results",uiEmojiPickerAdd:"add",uiEmojiPickerChangeSkinTone:"change"},lifeline_alerts:{uiLifelineAlertsSelect:"select",uiLifelineAlertsImpression:"impression",uiLifelineAlertsTweet:"tweet",uiLifelineAlertsCancel:"cancel"},add_poll:{uiActivatePollComposer:"click"},remove_poll:{uiResetPollComposer:"click"},add_poll_option:{uiPollOptionAdd:"click"},remove_poll_option:{uiPollOptionRemove:"click"}};this.after("initialize",function(){var e=this;Object.keys(t).forEach(function(i){return Object.keys(t[i]).forEach(function(s){return e.scribeOnEvent(s,{element:i,action:t[i][s]})})})})}var n=i("DBjh"),o=i("3oDc");e.a=Object(n.default)(s,o.a)},"rLv+":function(t,e,i){"use strict";(function(t){function s(t){o.a.attachTo("#profile-hover-container",l({},t,{eventData:{scribeContext:{component:"profile_hover"}}})),a.a.attachTo(document,l({},t,{eventData:{scribeContext:{component:"profile_dialog"}}})),c.a.attachTo(document,t),n.a.attachTo(document,t),r.a.attachTo(document,t)}var n=i("VSco"),o=i("hIyN"),a=i("LtQk"),r=i("TXp3"),c=i("Gg8t"),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},h=t("#profile-hover-container").length>0;e.a=h?s:t.noop}).call(e,i("4kSj"))},rS19:function(t,e,i){"use strict";(function(t){function s(){this.attributes({convoSettingsSelector:".DMConversationSettings",backButtonSelector:".DMConversationSettings .DMActivity-back",activityTitleSelector:".DMConversationSettings .DMActivity-title",dropdownSelector:".DMConversationSettings-dropdown",dropdownContentSelector:".DMConversationSettings-dropdown .DMPopover-content",subscriptionsSelector:".DMConversationSettings-subscriptions",subscriptionsFooterTextSelector:".DMConversationSettings-subscriptionsFooter",notificationsFooterTextSelector:".DMConversationSettings-notificationsFooter",participantsSelector:".DMConversationSettings-participants",reportConversationSelector:".DMConversationSettings .js-actionReportConversation",deleteConversationSelector:".DMConversationSettings .js-actionDeleteConversation",addParticipantsSelector:".DMConversationSettings .js-actionAddParticipants",editGroupNameSelector:".DMConversationSettings .js-actionEditGroupName",viewAvatarSelector:".DMConversationSettings .js-actionViewAvatar",uploadAvatarSelector:".DMConversationSettings .js-actionChangeAvatar",removeAvatarSelector:".DMConversationSettings .js-actionRemoveAvatar",convoSettingsAvatarUpdateSelector:".DMConversationSettings .DMUpdateAvatar",convoSettingsNameUpdateSelector:".DMConversationSettings .DMUpdateName",convoSettingsMentionsSelector:".DMConversationSettings-mentions",notificationCheckboxSelector:'input[name="dm[toggle_notifications]"]',subscriptionCheckboxSelector:'input[name="dm[toggle_subscriptions]"]',mentionsCheckboxSelector:'input[name="dm[toggle_mentions]"]',blockUpdatesInterval:8e3}),this.initConvoSettings=function(t,e){e=e||{},this.isGroup=!e.is_oto,this.conversationId=e.conversation_id,this.isMuted=void 0,this.reportedUserId=void 0,this.dropdownHTML=void 0,this.participantsHash=void 0,this.mentionsDisabled=void 0,this.trigger("uiNeedsDMConversation",{conversation_id:this.conversationId});var i=e.from_inbox?"to-inbox":"to-convo";this.select("backButtonSelector").removeAttr("to-convo to-inbox").attr(i,!0),this.select("activityTitleSelector").text(e.is_oto?Object(r.default)("Conversation info"):Object(r.default)("Group info")),this.select("reportConversationSelector").text(e.is_oto?Object(r.default)("Report account"):Object(r.default)("Report conversation")),this.select("deleteConversationSelector").text(e.is_oto?Object(r.default)("Delete conversation"):Object(r.default)("Leave conversation")),this.select("dropdownSelector").toggleClass("u-hidden",!this.isGroup),this.$notificationsCheckbox.prop("checked",e.is_muted),this.$mentionsCheckbox.prop("checked",e.mentions_disabled),this.select("notificationsFooterTextSelector").empty(),this.select("subscriptionsSelector").addClass("u-hidden"),this.select("participantsSelector").empty().toggleClass("u-hidden",!this.isGroup),this.blockNotificationsUpdates=!1,this.updateConvoSettings(null,e)},this.updateConvoSettings=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.conversation;i=void 0===i?{}:i;var s=i.title,n=void 0===s?{name:e.name}:s,o=i.avatar,a=void 0===o?{is_custom:!1}:o,r=e.conversation_settings;r=void 0===r?{}:r;var c=r.notifications,l=r.reportedUserId,h=r.dropdownHtml,d=void 0===h?null:h,u=r.participantsHash,p=r.dmSubscriptions;this.$convoSettings.toggleClass("has-readOnlyActions",!e.is_trusted),this.$convoSettings.toggleClass("is-selfConversation",!!e.is_self),this.updateConvoSettingsName(n),this.updateConvoSettingsAvatar(a),this.dropdownHTML!==d&&(this.dropdownHTML=d,this.select("dropdownSelector").html(this.dropdownHTML)),void 0!==u&&this.updateParticipantsView(u),void 0===c||this.blockNotificationsUpdates||(this.updateNotifications(null,c),this.updateMentions(null,c)),void 0!==p&&this.updateSubscriptions(p),this.reportedUserId=l},this.updateNotifications=function(t,e){var i=this;if(this.isMuted!==e.is_muted){this.isMuted=e.is_muted;var s=e.show_mentions_toggle&&!this.isMuted;this.select("notificationsFooterTextSelector").toggleClass("u-hidden",s),this.select("notificationsFooterTextSelector").text(this.mkNotificationsText(e)),this.$notificationsCheckbox.prop("checked",this.isMuted),t&&(this.blockNotificationsUpdates=!0,setTimeout(function(){return i.blockNotificationsUpdates=!1},this.attr.blockUpdatesInterval))}},this.updateMentions=function(t,e){var i=e.mentions_disabled,s=e.show_mentions_toggle;this.select("convoSettingsMentionsSelector").toggleClass("u-hidden",!s),s&&this.mentionsDisabled!==i&&(this.mentionsDisabled=i,this.$mentionsCheckbox.prop("checked",i))},this.mkNotificationsText=function(e){return!this.isMuted&&this.isGroup?Object(r.default)("Disable all notifications from this conversation. This will not remove you from the group."):this.isMuted||this.isGroup?e.mute_expiration_time?Object(r.default)("Muted until {{time}}.",{time:new Date(e.mute_expiration_time).toLocaleString(t("html").attr("lang")||"en",e.is_short_interval?{hour:"2-digit",minute:"2-digit"}:{weekday:"long",month:"short",day:"2-digit"})}):Object(r.default)("Notifications are muted."):Object(r.default)("Disable all notifications from this conversation.")},this.updateParticipantsView=function(t){this.participantsHash!==t&&(this.trigger("uiNeedsConversationParticipants",{conversation_id:this.conversationId}),this.participantsHash=t)},this.handleAddParticipants=function(){this.trigger("uiAddParticipants",{conversation_id:this.conversationId})},this.handleReportConversation=function(){this.trigger("uiDMLaunchConversationReportWebView",{reported_user_id:this.reportedUserId,conversation_id:this.conversationId})},this.handleDeleteConversation=function(){this.trigger("uiShowDMDeleteConversationConfirmation",{conversation_id:this.conversationId,is_group:this.isGroup})},this.handleNotificationsToggling=function(t){this.$notificationsCheckbox.is(":checked")?this.trigger("uiDMDialogMuteNotifications",{conversation_id:this.conversationId}):(this.trigger("uiToggleNotifications",{conversation_id:this.conversationId,enable_notifications:!0}),this.trigger("uiDMUpdateNotificationsState",{is_muted:!1})),this.$notificationsCheckbox.prop("checked",!1),t.preventDefault()},this.handleMentionsToggling=function(t){var e=this.$mentionsCheckbox.is(":checked");this.trigger("uiToggleMentions",{conversation_id:this.conversationId,disable_mentions:e}),t.preventDefault()},this.handleSubscriptionsToggling=function(e){var i=t(e.target);this.trigger("uiToggleDMBroadcastSubscription",{user_id:i.attr("data-broadcaster-id"),enable_subscriptions:i.is(":checked")}),e.preventDefault()},this.renderParticipants=function(t,e){this.select("participantsSelector").html(e.html)},this.triggerOnConvoSettingsAvatar=function(t,e){this.$updateAvatar.trigger(t,e)},this.updateConvoSettingsAvatar=function(t){var e=t.html?"uiDMSetConversationAvatar":"uiDMResetConversationAvatar",i=h({is_oto:!this.isGroup,conversation_id:this.conversationId},t);this.triggerOnConvoSettingsAvatar(e,i)},this.triggerOnConvoSettingsName=function(t,e){this.$updateName.trigger(t,e)},this.updateConvoSettingsName=function(t){var e=t.html?"uiDMUpdateConversationName":"uiDMInitConversationName",i=h({is_oto:!this.isGroup,conversation_id:this.conversationId},t);this.triggerOnConvoSettingsName(e,i)},this.processUserUpdates=function(t,e){var i=this;if(!e.should_request_inbox&&!e.is_empty){var s=(e.conversations||[]).find(function(t){return t.conversation_id===i.conversationId});this.updateConvoSettings(null,s)}},this.updateSubscriptions=function(t){this.select("subscriptionsSelector").removeClass("u-hidden"),this.select("subscriptionsFooterTextSelector").text(t.subscription_text),this.select("subscriptionCheckboxSelector").prop("checked",t.enabled),this.select("subscriptionCheckboxSelector").attr("data-broadcaster-id",t.broadcaster_id)},this.isDataForCurrentConvo=function(t,e){return e.conversation_id===this.conversationId},this.after("initialize",function(){this.$convoSettings=this.select("convoSettingsSelector"),this.$notificationsCheckbox=this.select("notificationCheckboxSelector"),this.$mentionsCheckbox=this.select("mentionsCheckboxSelector"),this.$updateAvatar=this.select("convoSettingsAvatarUpdateSelector"),this.$updateName=this.select("convoSettingsNameUpdateSelector"),this.on("click",{reportConversationSelector:this.handleReportConversation,deleteConversationSelector:this.handleDeleteConversation,addParticipantsSelector:this.handleAddParticipants,editGroupNameSelector:this.triggerOnConvoSettingsName.bind(this,"uiEditConversationName"),viewAvatarSelector:this.triggerOnConvoSettingsAvatar.bind(this,"uiDMRequestViewConversationAvatar"),uploadAvatarSelector:this.triggerOnConvoSettingsAvatar.bind(this,"uiDMRequestUploadConversationAvatar"),removeAvatarSelector:this.triggerOnConvoSettingsAvatar.bind(this,"uiDMRequestRemoveConversationAvatar"),dropdownContentSelector:"uiCloseDropdowns"}),this.on("change",{notificationCheckboxSelector:this.handleNotificationsToggling,subscriptionCheckboxSelector:this.handleSubscriptionsToggling,mentionsCheckboxSelector:this.handleMentionsToggling}),this.on(document,"uiInitDMConversationSettings",this.initConvoSettings),this.on(document,"dataDMUserUpdates",this.processUserUpdates),this.on("dataDMConversationResult",Object(o.a)(this.updateConvoSettings,this.isDataForCurrentConvo)),this.on(document,"uiDMUpdateNotificationsState",this.updateNotifications),this.on("dataConversationParticipantsResult",Object(o.a)(this.renderParticipants,this.isDataForCurrentConvo)),this.attachChild(c.a,this.select("convoSettingsAvatarUpdateSelector")),this.attachChild(l.a,this.select("convoSettingsNameUpdateSelector"))})}var n=i("DBjh"),o=i("4oun"),a=i("AJAn"),r=i("0d4m"),c=i("5E2Z"),l=i("CsBf"),h=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=Object(n.default)(s,a.a)}).call(e,i("4kSj"))},rmeb:function(t,e,i){"use strict";function s(){this.adCacheKey=function(t){var e="t"+t.id;return t.promoted_id&&(e+="i"+t.promoted_id),e}}e.a=s},"s+cD":function(t,e,i){"use strict";function s(){this.after("initialize",function(){this.scribeOnEvent("uiNativeNotificationPermissionGranted",{page:"",section:"",component:"native_notifications",element:"permission",action:"success"}),this.scribeOnEvent("uiNativeNotificationPermissionDenied",{page:"",section:"",component:"native_notifications",element:"permission",action:"failure"}),this.scribeOnEvent("uiNativeNotificationPermissionDismissed",{page:"",section:"",component:"native_notifications",element:"permission",action:"dismiss"}),this.scribeOnEvent("uiNativeNotificationPermissionRequested",{page:"",section:"",component:"native_notifications",element:"permission",action:"impression"}),this.scribeOnEvent("uiNativeNotificationTriggered",{page:"",section:"",component:"native_notifications",element:"notification",action:"show"}),this.scribeOnEvent("uiNativeNotificationClicked",{page:"",section:"",component:"native_notifications",element:"notification",action:"click"}),this.scribeOnEvent("uiNativeNotificationError",{page:"",section:"",component:"native_notifications",element:"notification",action:"error"})})}var n=i("DBjh"),o=i("3oDc"),a=Object(n.default)(s,o.a);e.a=a},s0ux:function(t,e,i){"use strict";(function(t){function i(){this.getItemPosition=function(e){return t(this.attr.genericInteractionItemSelector).index(e.closest(this.attr.genericInteractionItemSelector))}}e.a=i}).call(e,i("4kSj"))},s6yN:function(t,e,i){"use strict";(function(t){function s(){this.attributes({feedbackDismissSelector:".DMFeedback-dismiss",feedbackSelector:".DMFeedback",feedbackPageFrameSelector:"iframe.B2CFeedback"}),this.showFeedback=function(t,e){this.$b2cFeedback.is(":visible")||this.$b2cFeedback.show();var i="/i/pages/feedback?cardUri="+encodeURIComponent(t)+"&lang="+e;this.$feedbackIframe.attr("src")!==i&&this.$feedbackIframe.attr("src",i),this.trigger("uiFeedbackPanelOpened")},this.dismissFeedback=function(){var t=this.$feedbackIframe.data("current-view");this.closeFeedback(),this.trigger("uiB2CFeedbackDismiss",{cardName:this.feedback.name,feedbackId:this.feedback.feedback_id,currentView:t})},this.closeFeedback=function(){this.$b2cFeedback.hide(),this.$feedbackIframe.attr("src",""),this.trigger("uiFeedbackPanelClosed")},this.handleFeedbackError=function(t,e){var i=e&&e.errorMessage;this.trigger(document,"uiShowError",{message:i}),this.trigger("dataDMError",{message:i})},this.handleFeedbackTweetBtnClick=function(t,e){this.closeFeedback(),this.trigger(document,"uiOpenTweetDialog",{title:Object(r.default)("Tweet about your experience"),canTweetDefaultText:!1,text:e&&e.prefilledText})},this.updateFeedbackPanel=function(e,i){var s=t("html").attr("lang")||"en";i&&i.feedback&&(this.feedback=i.feedback,this.showFeedback(this.feedback.card_uri,s))},this.handleFeedbackUpdateView=function(t,e){this.$feedbackIframe.data("current-view",e.view)},this.resizeIframe=function(t){this.fitIframeHeight(t,{iframeSelector:this.attr.feedbackPageFrameSelector,isQualified:function(t){return t.name&&"commerce_page"===t.name&&t.height}})},this.closeFeedbackPanelWithId=function(t,e){this.feedback&&e.dmId===this.feedback.dm_id&&this.closeFeedback()},this.after("initialize",function(){this.$b2cFeedback=this.select("feedbackSelector"),this.$feedbackIframe=this.select("feedbackPageFrameSelector"),this.on("uiB2CCloseFeedbackAnchor uiDMDialogClearActions",this.closeFeedback),this.on("uiB2CFeedbackPostError",this.handleFeedbackError),this.on("uiB2CTweetBtnClicked",this.handleFeedbackTweetBtnClick),this.on("uiB2CFeedbackUpdateView",this.handleFeedbackUpdateView),this.on("uiDMConversationUpdated",this.updateFeedbackPanel),this.on("uiDMMesageDeleted",this.closeFeedbackPanelWithId),this.on(window,"message",this.resizeIframe),this.on(window,"message",this.proxyIframeEvents),this.on("click",{feedbackDismissSelector:this.dismissFeedback})})}var n=i("DBjh"),o=i("TBNR"),a=i("ipYT"),r=i("0d4m"),c=Object(n.default)(s,o.a,a.a);e.a=c}).call(e,i("4kSj"))},s9bR:function(t,e,i){"use strict";function s(){this.attributes({acceptSelector:".DMTrustRequest-confirm",trustContainerSelector:".DMConversation-trustRequest",untrustedMediaSelector:".Sensitive--untrusted"}),this.shouldUpdate=function(t,e){return this.conversationId!==e.conversation_id||this.isTrusted!==e.is_trusted||this.isReadonly!==e.is_readonly},this.storeConvoData=function(t){this.conversationId=t.conversation_id,this.isTrusted=t.is_trusted,this.isOto=t.is_oto,this.isReadonly=t.is_readonly},this.handleConversationUpdate=function(t,e){this.storeConvoData(e);var i=!1===this.isTrusted&&!this.isReadonly;if(i){var s=e.conversation.title.raw,n=r.a.render({conversation_title:s,is_oto:e.is_oto});this.select("trustContainerSelector").html(n)}this.select("trustContainerSelector").toggleClass("u-hidden",!i);var o=i?"uiDMHideComposeSection":"uiDMShowComposeSection";this.trigger(o)},this.handleAccept=function(t,e){this.select("trustContainerSelector").addClass("u-hidden"),this.select("untrustedMediaSelector").trigger("uiShowAllMedia"),this.trigger("uiDMShowComposeSection"),this.trigger("uiDMTrustRequestAccept",{conversation_id:this.conversationId})},this.after("initialize",function(){this.on("uiDMUpdateTrustRequest uiOpenConversationView uiOpenNewConversationView",Object(o.a)(this.handleConversationUpdate,this.shouldUpdate,this)),this.on("click",{acceptSelector:this.handleAccept})})}var n=i("DBjh"),o=i("4oun"),a=i("UNB/"),r=i.n(a);e.a=Object(n.default)(s)},sKR5:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={"promptbird/templates/icon":i("8QxQ"),"promptbird/templates/title":i("orcd"),"promptbird/templates/explanation":i("7SIb"),"promptbird/templates/call_to_action":i("hK7e"),"promptbird/templates/second_call_to_action":i("8T/I")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="PromptbirdPrompt PromptbirdPrompt--modal '),s.b(s.v(s.f("prompt_css_class",t,e,0))),s.b('" data-prompt-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('" data-prompt-intent="'),s.b(s.v(s.f("prompt_intent",t,e,0))),s.b('">\n'),s.b(s.rp("<promptbird/templates/icon0",t,e,"  ")),s.b(s.rp("<promptbird/templates/title1",t,e,"  ")),s.b(s.rp("<promptbird/templates/explanation2",t,e,"  ")),s.b(s.rp("<promptbird/templates/call_to_action3",t,e,"  ")),s.b(s.rp("<promptbird/templates/second_call_to_action4",t,e,"  ")),s.b("</div>\n"),s.fl()},partials:{"<promptbird/templates/icon0":{name:"promptbird/templates/icon",partials:{},subs:{}},"<promptbird/templates/title1":{name:"promptbird/templates/title",partials:{},subs:{}},"<promptbird/templates/explanation2":{name:"promptbird/templates/explanation",partials:{},subs:{}},"<promptbird/templates/call_to_action3":{name:"promptbird/templates/call_to_action",partials:{},subs:{}},"<promptbird/templates/second_call_to_action4":{name:"promptbird/templates/second_call_to_action",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},sU7P:function(t,e,i){"use strict";function s(){this.defaultAttrs({promptType:"modal",top:120,width:590,blockClickDuration:2e3}),this.insertPrompt=function(t){var e=!t.renderData.hide_dismiss,i="PromptbirdPrompt--black"===t.renderData.prompt_css_class;this.select("modalContentSelector").toggleClass("PromptbirdPrompt--black",i),this.disableBackgroundClicks(e),this.select("modalContentSelector").html(t.html),this.open(),this.removeOrAdjustCloseBtnPosition(e)},this.removePrompt=function(){},this.disableBackgroundClicks=function(t){var e=this;this.attr.enableClosingViaBackground=!1,t&&setTimeout(function(){return e.attr.enableClosingViaBackground=!0},this.attr.blockClickDuration)},this.removeOrAdjustCloseBtnPosition=function(t){this.select("closeButtonSelector").remove(),t&&this.select("promptSelector").append(this.$modalCloseBtn)},this.dismissPromptOnDismissDialog=function(){this.dismissPrompt(this.select("promptSelector"))},this.onUiShortcutEsc=function(){this.isOpen()&&(this.trigger("uiPromptbirdModalPromptKeyboardDismiss"),this.dismissPromptOnDismissDialog())},this.after("initialize",function(){this.$modalCloseBtn=this.select("closeButtonSelector").clone(!1),this.on(document,"uiShortcutEsc",this.onUiShortcutEsc),this.on(this.$node,"uiDialogClosed",this.dismissPromptOnDismissDialog),this.on("click",{actionSelector:this.close})})}var n=i("k7B4"),o=i("UHc7");e.a=n.a.mixin(s,o.a)},t0ie:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({timeBubbleSelector:".VideoTrim-timeBubble",timelineSelector:".VideoTrim-timeline",timelineCursorSelector:".VideoTrim-timelineCursor",scrubberSelector:".VideoTrim-scrubber",unplayedScrubberSelector:".VideoTrim-unplayedScrubber",timeSelector:".VideoTrim-time",widestTimeSelector:".VideoTrim-widestTime",selectionSelector:" .VideoTrim-selection",ticksSelector:".VideoTrim-ticks",innerSelectionSelector:".VideoTrim-innerSelection",leftHandleSelector:".VideoTrim-leftHandle",midHandleSelector:".VideoTrim-midHandle",midHandleCursorSelector:".VideoTrim-midHandleCursor",rightHandleSelector:".VideoTrim-rightHandle",shroudSelector:".VideoTrim-shroud",minSelectionDuration:1,maxSelectionDuration:30,maxVisibleDuration:36,defaultSelectionDuration:20,scrollPixels:20,timeToFadeOutBubble:1e3,pixelsBeforeWarningLength:50,maxPixelsPerSecond:30,widthForHandles:42,minWidthForMidHandle:18,dragScrollRepeatInterval:30}),this.setInitialTrimRange=function(t,e){this.initialTrimRange=e.initialTrimRange},this.initAfterVideoLoads=function(){if(""===this.initialTrimRange)this.startTime=0,this.endTime=this.videoDuration;else if(this.initialTrimRange){var t=this.initialTrimRange.split("-");this.startTime=+t[0],this.endTime=+t[1]}else this.startTime=(this.videoDuration-this.attr.defaultSelectionDuration)/2,this.endTime=this.startTime+this.attr.defaultSelectionDuration;this.startTime=this.clamp(this.startTime,0,this.videoDuration),this.endTime=this.clamp(this.endTime,0,this.videoDuration),this.visibleWidth=this.$node.width()-this.attr.widthForHandles,this.defaultPixelsPerSecond=this.visibleWidth/Math.min(this.videoDuration,this.attr.maxVisibleDuration),this.timelinePixelsPerSecond=this.$timeline.width()/this.videoDuration,this.generateTicks(),this.zoomToDefault(),this.showSelectionBubble(),this.playVideo(this.startTime),this.notifyTrimRange()},this.generateTicks=function(){for(var t="",e=0;e<this.videoDuration;e+=1){t+='<div style="left:'+(100*e/this.videoDuration).toFixed(4)+'%">'+(e%60?"":r.a.formatDuration(e))+"</div>"}this.$ticks.html(t)},this.calculateScale=function(){this.offset=-this.$selection.position().left,this.pixelsPerSecond=this.$innerSelection.width()/this.videoDuration,this.percentPerSecond=100/this.videoDuration,this.minTimeForScrolling=(this.offset-this.attr.scrollPixels)/this.pixelsPerSecond,this.maxTimeForScrolling=(this.offset+this.attr.scrollPixels+this.visibleWidth)/this.pixelsPerSecond},this.formatTimeProgress=function(t){return r.a.formatDuration(t)+" / "+r.a.formatDuration(this.videoDuration)},this.updatePositions=function(){if(this.$mid.toggle(!!this.videoDuration),this.videoDuration){this.calculateScale(),this.$mid.css({left:this.startTime*this.percentPerSecond+"%",width:(this.endTime-this.startTime)*this.percentPerSecond+"%"});var t=Math.min(-1,((this.endTime-this.startTime)*this.pixelsPerSecond-this.attr.minWidthForMidHandle)/2);this.$midHandleCursor.css({left:t,right:t});var e=this.isProgressVisible?Math.max(100*(this.getVideoCurrentTime()-this.startTime)/(this.endTime-this.startTime),0):0;this.$unplayedScrubber.css("left",e+"%"),this.$scrubber.css({left:this.startTime*this.percentPerSecond+"%",right:100-this.endTime*this.percentPerSecond+"%"}),this.$widestTime.text(this.formatTimeProgress(this.videoDuration)),this.$time.text(this.formatTimeProgress(this.getVideoCurrentTime())),this.select("timelineSelector"),this.updateBubblePos()}},this.showSelectionBubble=function(){var t=Math.max(this.selectionDuration(),this.attr.minSelectionDuration);this.setBubble(this.formatTimeForSelection(t),"mid")},this.setEndBubbleWhileDragging=function(){3===this.dragMode?this.setBubble(r.a.formatDuration(this.endTime),"right"):this.setBubble(r.a.formatDuration(this.startTime),"left")},this.selectionDuration=function(){return this.endTime-this.startTime},this.isMaxSelected=function(){return this.selectionDuration()>=this.attr.maxSelectionDuration},this.isMinSelected=function(){return this.selectionDuration()<=this.attr.minSelectionDuration},this.formatTimeForSelection=function(t){var e=Math.floor(t/60),i=Math.floor(t%60),s="abbreviated";this.timespanFormatter.patterns.none.minute.abbreviated||(s="short");var o={minutesWithAbbreviation:this.timespanFormatter.format(60*e,{direction:"none",type:s,unit:"minute"}),secondsWithAbbreviation:this.timespanFormatter.format(i,{direction:"none",type:s,unit:"second"})};return this.isMaxSelected()?e?Object(n.default)("{{minutesWithAbbreviation}} {{secondsWithAbbreviation}} max selected",o):Object(n.default)("{{secondsWithAbbreviation}} max selected",o):this.isMinSelected()?Object(n.default)("{{secondsWithAbbreviation}} min selected",o):e?Object(n.default)("{{minutesWithAbbreviation}} {{secondsWithAbbreviation}} selected",o):Object(n.default)("{{secondsWithAbbreviation}} selected",o)},this.setBubble=function(t,e){this.bubbleMode=e,this.bubbleWidth=this.$timeBubble.attr("data-mode",e||"").text(t||"").css("opacity",0).show().outerWidth(),this.updateBubblePos(),this.$timeBubble.css("opacity",1).delay(this.attr.timeToFadeOutBubble).fadeOut(500)},this.updateBubblePos=function(){var t=null,e=void 0,i=void 0;switch(this.bubbleMode){case"left":e=0,i=0;break;case"right":e=100,i=-this.bubbleWidth;break;case"mid":e=50;var s=(this.startTime+this.endTime)*this.timelinePixelsPerSecond/2;s<this.bubbleWidth/2?(i=-15,t="left"):s>this.videoDuration*this.timelinePixelsPerSecond-this.bubbleWidth/2?(i=23-this.bubbleWidth,t="right"):i=-this.bubbleWidth/2;break;default:return}this.$timeBubble.css({left:e+"%","margin-left":i}),t?this.$timeBubble.attr("data-clip",t):this.$timeBubble.removeAttr("data-clip")},this.setSelectionView=function(t,e){e?this.$selection.width(e+this.attr.widthForHandles):e=this.$innerSelection.width(),this.$selection.css("left",-this.clamp(t,0,e-this.visibleWidth)),this.updatePositions()},this.zoomToDefault=function(){var t=this.defaultPixelsPerSecond*this.videoDuration,e=(this.defaultPixelsPerSecond*(this.startTime+this.endTime)-this.visibleWidth)/2;e=this.clamp(e,0,t-this.visibleWidth),this.setSelectionView(e,t)},this.playLastFewSeconds=function(t){this.playVideo(t?Math.max(this.endTime-3,this.startTime):this.startTime),this.updatePositions()},this.beginDrag=function(t,e){if(this.$shroud.toggleClass("is-sideways",1===t||3===t),this.dragMode=t,this.dragStartX=e.clientX,this.dragDirty=!1,this.dragStartOffset=this.offset,this.dragHandlesInView=[1===t||4===t,3===t||4===t],4===t){var i=(e.clientX-this.$timeline.offset().left)/this.timelinePixelsPerSecond;if(i<this.startTime||i>this.endTime){var s=this.endTime-this.startTime;this.startTime=this.clamp(i,0,this.videoDuration-s),this.endTime=this.startTime+s}this.$shroud.show(),this.zoomToDefault()}this.$mid.addClass("is-active"),this.isVideoPlaying()||this.setDragPause(),this.updatePositions(),this.setEndBubbleWhileDragging()},this.drag=function(t){if(0!==this.dragMode){var e=window.getSelection();e&&e.removeAllRanges(),clearTimeout(this.dragTimeoutId);var i=!1;this.$shroud.show(),this.calculateScale(),2===this.dragMode&&(this.dragHandlesInView=this.dragHandlesInView.map(function(t,e){return t||0===this.scrollShiftForHandle(e)},this));var s=t.clientX-this.dragStartX,n=void 0;4===this.dragMode?n=this.timelinePixelsPerSecond:(n=this.pixelsPerSecond,s+=this.offset-this.dragStartOffset);var o=this.applyDrag(s/n)*n;o?(this.dragDirty=!0,this.updatePositions(),this.dragStartX+=o,this.setDragPause(),this.setEndBubbleWhileDragging()):Math.abs(s)>this.attr.pixelsBeforeWarningLength&&(this.isMaxSelected()||this.isMinSelected())&&this.showSelectionBubble(),4===this.dragMode?this.zoomToDefault():this.dragHandlesInView.forEach(function(t,e){if(t){var s=this.scrollShiftForHandle(e);s&&(this.setSelectionView(this.offset+s),i=!0)}},this),i&&(this.dragTimeoutId=setTimeout(this.drag.bind(this,t),this.attr.dragScrollRepeatInterval))}},this.endDrag=function(){var t=this;if(this.dragMode){this.$shroud.hide(),this.updatePositions();var e=3===this.dragMode;this.dragDirty&&this.showSelectionBubble(),this.isVideoPlaying()?this.doubleClickTimeoutId||(this.doubleClickTimeoutId=setTimeout(function(){t.doubleClickTimeoutId=null,t.playLastFewSeconds(e)},300)):this.playLastFewSeconds(e),this.$mid.removeClass("is-active"),this.dragMode=0,clearTimeout(this.dragTimeoutId),this.notifyTrimRange()}},this.setDragPause=function(t){this.pauseVideo(3===this.dragMode?this.endTime:this.startTime)},this.calculateDrag=function(t,e,i){return t=this.clamp(t+e,0,this.videoDuration),1===this.dragMode?t=this.clamp(t,this.endTime-this.attr.maxSelectionDuration,this.endTime-this.attr.minSelectionDuration):3===this.dragMode&&(t=this.clamp(t,this.startTime+this.attr.minSelectionDuration,this.startTime+this.attr.maxSelectionDuration)),4!==this.dragMode&&this.dragHandlesInView[i]&&(t=this.clamp(t,this.minTimeForScrolling,this.maxTimeForScrolling)),t},this.applyDragLeft=function(t){var e=this.startTime;return this.startTime=this.calculateDrag(this.startTime,t,0),this.startTime-e},this.applyDragRight=function(t){var e=this.endTime;return this.endTime=this.calculateDrag(this.endTime,t,1),this.endTime-e},this.applyDrag=function(t){return 1===this.dragMode?this.applyDragLeft(t):3===this.dragMode?this.applyDragRight(t):t<0?this.applyDragRight(this.applyDragLeft(t)):this.applyDragLeft(this.applyDragRight(t))},this.scrollShiftForHandle=function(t){var e=(t?this.endTime:this.startTime)*this.pixelsPerSecond;return this.clamp(this.offset,e-this.visibleWidth,e)-this.offset},this.hoverSideHandle=function(e){0===this.dragMode&&t(e.target).toggleClass("is-hover","mouseenter"===e.type)},this.hoverMidHandle=function(t){0===this.dragMode&&this.$left.add(this.$right).toggleClass("is-hover","mouseenter"===t.type)},this.hoverSelectionBubble=function(){0===this.dragMode&&this.showSelectionBubble()},this.notifyTrimRange=function(){var t=this.endTime-this.startTime>this.videoDuration-.01;this.trigger("uiTrimRangeChanged",{trimStart:this.startTime,trimEnd:this.endTime,trimRange:t?"":this.startTime.toFixed(3)+"-"+this.endTime.toFixed(3)})},this.clamp=function(t,e,i){return Math.max(e,Math.min(i,t))},this.after("initialize",function(){this.timespanFormatter=new l.a.TimespanFormatter,this.dragMode=0,this.$timeBubble=this.select("timeBubbleSelector"),this.$timeline=this.select("timelineSelector"),this.$scrubber=this.select("scrubberSelector"),this.$unplayedScrubber=this.select("unplayedScrubberSelector"),this.$time=this.select("timeSelector"),this.$widestTime=this.select("widestTimeSelector"),this.$selection=this.select("selectionSelector"),this.$ticks=this.select("ticksSelector"),this.$innerSelection=this.select("innerSelectionSelector"),this.$left=this.select("leftHandleSelector"),this.$mid=this.select("midHandleSelector"),this.$midHandleCursor=this.select("midHandleCursorSelector"),this.$right=this.select("rightHandleSelector"),this.$shroud=this.select("shroudSelector"),this.on("uiLoadVideo",this.setInitialTrimRange),this.on("uiVideoLoaded uiVideoUnloaded",this.initAfterVideoLoads),this.on("uiVideoStateChanged",this.updatePositions),this.on("mousedown",{leftHandleSelector:this.beginDrag.bind(this,1),rightHandleSelector:this.beginDrag.bind(this,3),midHandleCursorSelector:this.beginDrag.bind(this,2),timelineSelector:this.beginDrag.bind(this,4)}),this.on(window,"mousemove",this.drag),this.on(window,"mouseup",this.endDrag),this.on(this.$midHandleCursor,"mouseenter mouseleave",this.hoverMidHandle),this.on(this.$right.add(this.$left),"mouseenter mouseleave",this.hoverSideHandle),this.on(this.select("timelineCursorSelector").add(this.$mid),"mouseenter",this.hoverSelectionBubble)})}var n=i("0d4m"),o=i("DBjh"),a=i("1NSd"),r=i("20ha"),c=i("ZVSr"),l=i.n(c);e.a=Object(o.default)(s,a.a)}).call(e,i("4kSj"))},tAXt:function(t,e,i){"use strict";function s(){this.defaultAttrs({videoInfoSelector:".ComposerVideoInfo"}),this.videoInfoHeight=null,this.clearStateData=function(t,e){this.videoInfoHeight=null,this.select("videoInfoSelector").addClass("u-hidden").html("")},this.renderAdvancedVideoInfo=function(t){var e={has_cta:""!==t.ctaType,is_cta_visit_site:"visit_site"===t.ctaType,is_cta_watch_now:"watch_now"===t.ctaType,embeddable:t.embeddable,cta_url:t.ctaUrl,title:t.title,description:t.description},i=r.a.render(e);this.select("videoInfoSelector").removeClass("u-hidden").replaceWith(i)},this.updateFromEditDialog=function(t,e){var i=o.a.get(e.fileId);if(i){var s=i.advanced;i.isVideo&&s&&this.renderAdvancedVideoInfo(s)}},this.createMediaDataForSending=function(){var t=this.getTweetboxId();return Object(n.a)(t).reduce(function(t,e){var i=e.advanced,s=t.altText||e.altText,n=i?{advanced_title:i.title,advanced_description:i.description,advanced_cta_type:i.ctaType,advanced_cta_url:i.ctaUrl,advanced_embeddable:!!i.embeddable}:{};return c({},t,n,s?{has_alt_text:!0}:{})},{})},this.around("createDataForSending",function(t){var e=t();return c({},e,this.createMediaDataForSending())}),this.after("initialize",function(){this.on(document,"uiMediaEditDialogDone",this.updateFromEditDialog),this.on("uiTweetSent uiTweetCancelled uiPreviewThumbnailRemoveAll uiPreviewThumbnailRemoved",this.clearStateData)})}var n=i("WKYg"),o=i("H6fk"),a=i("IQ7T"),r=i.n(a),c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=s},tOdr:function(t,e,i){"use strict";function s(){this.sendTweet=function(t,e){this.post({url:this.apiEndpointUrl(p),data:e,success:r.b.tweet.SEND_SUCCESS,error:this.onTweetError.bind(this),useOAuthSessionAuth:!0})},this.onTweetError=function(t){this.trigger(r.b.tweet.SEND_ERROR,t);var e=r.j[Object(o.b)(t)];return e?(this.trigger("uiShowError",{message:e}),Promise.resolve()):Promise.reject()},this.sendMedia=function(t){var e=this;return this.mediaSruFinalize(t).then(function(i){return e.uploadMetadata(i,t)}).then(function(i){return t.mediaId=i,e.trigger(r.b.media.SEND_SUCCESS,{mediaId:i}),i})},this.sendMediaBatch=function(t,e){var i=this;return Promise.all(e.mediaItems.map(this.sendMedia.bind(this))).then(function(t){return i.trigger(r.b.media.SEND_BATCH_SUCCESS,{mediaIds:t})}).catch(function(t){return i.onMediaError(t)})},this.onMediaError=function(t){this.trigger("uiShowError",{message:t.message}),this.trigger(r.b.media.SEND_ERROR,{errors:[t]})},this.sendCard=function(t,e){var i=this;return this.createCard(e).then(function(t){return i.trigger(r.b.card.SEND_SUCCESS,{cardUri:t})}).catch(function(t){return i.onCardError(t)})},this.onCardError=function(t){var e=Object(n.default)("Sorry, there was a problem creating your poll. Please try again later.");this.trigger("uiShowError",{message:e}),this.trigger(r.b.card.SEND_ERROR,{errors:[t]})},this.after("initialize",function(){this.on(r.b.tweet.SEND,this.sendTweet),this.on(r.b.card.SEND,this.sendCard),this.on(r.b.media.SEND_BATCH,this.sendMediaBatch)})}var n=i("0d4m"),o=i("2Doy"),a=i("DBjh"),r=i("JFPI"),c=i("IBie"),l=i("VtWx"),h=i("JZGn"),d=i("x+k1"),u=Object(a.default)(s,l.a,d.a,h.a,c.a),p="/statuses/update.json";e.a=u},tX0K:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({itemType:"user",dialogSelector:"#dm_dialog",backButtonSelector:".DMConversationSettings .DMActivity-back",noReposition:!0,disableKeyboardShortcuts:!0,itemSelector:".DMInboxItem",openActivity:".DMActivity--open",openActivityClass:"DMActivity--open",addParticipants:".DMAddParticipants",compose:".DMCompose",conversation:".DMConversation",convoSettings:".DMConversationSettings",emptyState:".DMEmptyState",inbox:".DMInbox",linksForInbox:".DMActivity-back[to-inbox]",linksForConvo:".DMActivity-back[to-convo]",linksForCompose:".dm-new-button",linksForConvoSettings:".DMActivity-back[to-convoSettings], .dm-to-convoSettings",linkForConvoSettingsFromInbox:".inbox-to-convoSettings",toFieldSelector:".dm-to-input",errorBar:".DMErrorBar",errorText:".DMErrorBar-text",mediaPreviewSelector:".DMInboxItem-media, .dm-attached-media"}),this.openDialog=function(t,e){e&&e.fromInitData&&this.on("uiDialogClosed",function(){this.isDialogNavigation||this.isOverlayNavigation||this.trigger("uiNavigate",{href:"/"}),this.isOverlayNavigation=!1}),this.trigger("uiNeedsDMConversationList"),e&&e.id?this.trigger("uiRenderConversationView",{conversation_id:o.a.generateConversationId(this.attr.userId,e.id),name:e.name,is_oto:!0,default_composer_text:e.default_composer_text,welcome_message_id:e.welcome_message_id,has_tweet_attachment:e.has_tweet_attachment,retain_tweet_attachment:e.retain_tweet_attachment}):e&&e.conversation_id?this.trigger("uiRenderConversationView",e):e&&e.default_composer_text?this.trigger("uiOpenNewDM",{default_composer_text:e.default_composer_text}):this.renderInbox(),this.open()},this.closeDialog=function(){this.isDialogNavigation=!1,this.close()},this.renderInbox=function(t,e){t&&t.preventDefault(),this.renderView("inbox");var i=this.select("inbox");if(this.trigger("uiReadStateChanged",{msgCount:0}),i.hasClass("needs-refresh"))return i.removeClass("needs-refresh"),void this.trigger("uiNeedsDMConversationList");this.trigger("uiDMDialogOpenedConversationList")},this.handleProfileLinkClick=function(){this.isDialogNavigation||(this.isDialogNavigation=this.$dialog.is(":visible"),this.closeImmediately())},this.renderConversationView=function(t,e){this.renderView("conversation"),this.trigger("uiDMDialogOpenedConversation",{recipient:e.conversation_id||e.screen_names})},this.renderCompose=function(t,e){t&&t.preventDefault(),this.renderView("compose"),this.trigger("uiDMDialogOpenedNewConversation"),this.isOpen()||(this.trigger("uiNeedsDMConversationList"),this.open())},this.renderAddParticipants=function(t,e){this.renderView("addParticipants")},this.renderSettingsViewFromInbox=function(e){var i=t(e.target).closest(this.attr.itemSelector),s=i.attr("data-thread-id"),n=i.data("is-oto"),o=i.data("is-muted");this.trigger("uiInitDMConversationSettings",{conversation_id:s,is_oto:n,is_muted:o,from_inbox:!0}),this.renderView("convoSettings",s)},this.renderView=function(t){this.trigger("uiDismissAllDMNotices"),this.select("openActivity").removeClass(this.attr.openActivityClass),this.select(t).addClass(this.attr.openActivityClass),this.trigger("uiDMActivityOpened",{activity:t}),this.trigger(this.$dialog,"uiDialogContentChanged"),this.setScribeComponent(t)},this.setScribeComponent=function(t){this.attr.eventData||(this.attr.eventData={});var e=void 0;switch(t){case"compose":e="dm_new_conversation_dialog";break;case"conversation":e="dm_existing_conversation_dialog";break;case"inbox":e="dm_conversation_list_dialog";break;case"addParticipants":e="dm_add_participants_dialog"}e&&(this.attr.eventData.scribeContext={component:e})},this.showError=function(t,e){this.select("errorText").html(e.message||e.error),this.select("errorBar").show(),this.trigger(this.select("toFieldSelector"),"uiTypeaheadIgnoreNextFocus"),this.trigger(this.$dialog,"uiDialogContentChanged")},this.previewMedia=function(e,i){e.preventDefault();var s=t(e.target);this.trigger("uiDMDialogMediaPreview",{imgUrl:s.attr("data-full-img"),dmId:s.closest(".dm").attr("data-message-id")||s.closest(".DMInboxItem").attr("data-last-message-id")})},this.hideDMDialog=function(){this.$dialogContainer.hide(),this.openState=!1},this.showDMDialog=function(t,e){this.$dialogContainer.show(),this.openState=!0},this.restoreDialog=function(){this.isDialogNavigation&&(this.isDialogNavigation=!1,this.open())},this.dismissErrors=function(){this.trigger("uiHideMessage"),this.select("errorBar").trigger("uiDismissDMNotice")},this.setOverlayNavigation=function(){this.isOverlayNavigation=!0},this.after("initialize",function(){this.$dialogContainer=this.select("dialogSelector"),this.$backButton=this.select("backButtonSelector"),this.on(document,"uiShowProfilePopup",this.handleProfileLinkClick),this.on(document,"uiCloseProfilePopup",this.restoreDialog),this.on(document,"uiNeedsDMDialog",this.openDialog),this.on(document,"uiCloseDMDialog",this.closeDialog),this.on(document,"uiOpenNewDM",this.renderCompose),this.on(document,"uiAddParticipants",this.renderAddParticipants),this.on(document,"uiNavigate","uiCloseDMDialog"),this.on(document,"uiOverlayNavigate",this.setOverlayNavigation),this.on("uiRenderConversationListView",this.renderInbox),this.on("uiRenderConversationView uiRenderNewConversationView",this.renderConversationView),this.on("uiDMAddParticipantsDone",this.renderView.bind(this,"convoSettings")),this.on(document,"dataDMSendSuccess dataDMDeleteSuccess","dataDMSuccess"),this.on(document,"dataDMError",this.showError),this.on(document,"uiDMDialogMediaPreview",this.hideDMDialog),this.on(document,"uiDMDialogMediaPreviewClosed",this.showDMDialog),this.on("uiDialogClosed uiDMHideError",this.dismissErrors),this.on("uiDialogClosed","uiDMDialogClosed"),this.on("click",{linksForInbox:this.renderInbox,linksForConvo:this.renderView.bind(this,"conversation"),linksForConvoSettings:this.renderView.bind(this,"convoSettings"),linkForConvoSettingsFromInbox:this.renderSettingsViewFromInbox,linksForCompose:"uiOpenNewDM",mediaPreviewSelector:this.previewMedia})})}var n=i("DBjh"),o=i("WRDM"),a=i("UHc7"),r=i("xgWv"),c=i("CA0f"),l=i("W5ds"),h=i("El2S"),d=Object(n.default)(s,a.a,c.a,r.a,l.a,h.a);e.a=d}).call(e,i("4kSj"))},tblW:function(t,e,i){"use strict";function s(){this.defaultAttrs({noShowError:!0}),this.update=function(t,e){var i=this;e=e||{};var s=t.target,n=o.a.get(e.fileId);n&&this.mediaSruFinalize(n).then(function(t){return i.post({url:"/i/direct_messages/update_avatar",data:{conversation_id:e.conversation_id,media_id:t},success:l(s,"dataDMUpdateConversationAvatarSuccess"),error:l(s,"dataDMUpdateConversationAvatarFailed")})})},this.remove=function(t,e){e=e||{},this.post({url:"/i/direct_messages/update_avatar",data:{conversation_id:e.conversation_id},success:l(t.target,"dataDMRemoveConversationAvatarSuccess"),error:l(t.target,"dataDMRemoveConversationAvatarFailed")})},this.after("initialize",function(){this.on("uiDMUpdateConversationAvatar",this.update),this.on("uiDMRemoveConversationAvatar",this.remove)})}var n=i("DBjh"),o=i("H6fk"),a=i("ldNY"),r=i("VtWx"),c=i("x+k1"),l=a.a.triggerFn;e.a=Object(n.default)(s,r.a,c.a)},tgDM:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({selectUsersContainerSelector:".user-select-container",typeaheadContainerSelector:".typeahead-container",dropdownSelector:".dropdown-menu.typeahead",inputSelector:".user-select-controls input",itemSelector:".typeahead-item",maxSelection:10,requestType:"",alwaysOpen:!1,includePreviouslySelectedUsers:!1,controlsSelector:".user-select-controls",userBorderColorClass:"u-borderUserColorLight",datasourceForTagging:"accounts",additionalDatasourceRenderers:[],typeaheadSrc:"",decidersForTypeahead:{},selectedItemType:"mediaTagUsers",cannotSelectClass:"cannot-select",eventData:{scribeContext:{element:"tweet_box"}}}),this.selectUser=function(t,e){if(null!=(e&&e.item&&e.item.id)){var i=this.shouldUpdateUserList(t,e),s=this.selectedUserIndex(e.item.id);-1!==s||i||t.stopImmediatePropagation(),-1===s&&i?this.selectedUsers.push(e.item):-1!==s&&(this.selectedUsers.splice(s,1),i=!0),i?(this.trigger("uiUpdatedSelectedUsers",{items:this.selectedUsers}),this.$input.val(""),this.trigger(this.$input,"uiTextChanged",{text:this.$input.val(),position:n.a.getPosition(this.$input[0])})):this.trigger("uiCouldNotSelectUser"),this.$input.focus()}},this.shouldUpdateUserList=function(e,i){var s=i&&i.item&&i.item.id;return null!=s&&!t(e.target).find("[data-user-id="+s+"]").hasClass(this.attr.cannotSelectClass)&&this.selectedUsers.length<this.maxSelectedItems},this.selectedUserIndex=function(t){for(var e=0;e<this.selectedUsers.length;e++)if(this.selectedUsers[e].id===t)return e;return-1},this.resetSelectedUsers=function(){this.selectedUsers=[],this.trigger("uiTypeaheadClearRenderedResults")},this.setMaxSelectedItems=function(t){this.maxSelectedItems=parseInt(t,10)},this.updateMaxSelectedItems=function(t,e){var i=e&&e.maxSelectedItems>=0?e.maxSelectedItems:this.maxSelectedItems;this.setMaxSelectedItems(i)},this.resetComposer=function(){this.resetSelectedUsers(),this.$input.val(""),this.trigger("uiUpdatedSelectedUsers",{items:this.selectedUsers}),this.trigger(this.$input,"uiTextChanged",{text:this.$input.val(),position:n.a.getPosition(this.$input[0])})},this.focusInputWithResultsShown=function(t,e){this.$input.focus(),this.forceShow(),this.trigger("uiTypeaheadResultsShown")},this.focusInput=function(){this.select("controlsSelector").addClass(this.attr.userBorderColorClass)},this.blurInput=function(){this.select("controlsSelector").removeClass(this.attr.userBorderColorClass)},this.forceShow=function(){this.select("dropdownSelector").show()},this.forceHide=function(){this.select("dropdownSelector").hide(),this.trigger("uiTypeaheadSetPreventDefault",{preventDefault:!1,key:9}),this.trigger("uiTypeaheadResultsHidden")},this.hideAndManageEsc=function(t){t.preventDefault(),t.stopPropagation(),this.$input.blur(),this.forceHide()},this.possiblyHide=function(e){e.target===this.$node.get(0)||t.contains(this.$node.get(0),e.target)||this.forceHide()},this.after("initialize",function(){r.a.attachTo(this.$node,{inputSelector:this.attr.inputSelector,eventData:this.attr.eventData});var t=[this.attr.datasourceForTagging,"selectedUsers"];this.attr.includePreviouslySelectedUsers&&t.push("prefillUsers");var e=[["selectedUsers",t]];this.attr.additionalDatasourceRenderers&&this.attr.additionalDatasourceRenderers.length&&e.push.apply(e,this.attr.additionalDatasourceRenderers),this.setMaxSelectedItems(this.attr.maxSelection),a.a.attachTo(this.$node,{alwaysOpen:this.attr.alwaysOpen,blockLinkActions:!0,typeaheadSrc:this.attr.typeaheadSrc,datasourceRenders:e,datasourceOptions:{requestType:this.attr.requestType},selectedItemType:this.attr.selectedItemType,deciders:this.attr.decidersForTypeahead,inputSelector:this.attr.inputSelector,eventData:this.attr.eventData}),this.on("uiTypeaheadRenderResults uiShowSelectedUsers",this.forceShow),this.on("uiTypeaheadItemSelected uiSelectUser",this.selectUser),this.on("uiUpdateMaxSelectedItems",this.updateMaxSelectedItems),this.on("uiResetSelectedUsers",this.resetSelectedUsers),this.on("uiResetSelectedUserComposer",this.resetComposer),this.on("uiShortcutEsc",this.hideAndManageEsc),this.selectedUsers=[],this.$input=this.select("inputSelector"),this.on("uiSetFocusInSelectedUserInput",this.focusInputWithResultsShown),this.on(this.$input,"focusin",this.focusInput),this.on(this.$input,"focusout",this.blurInput),this.on(document,"mousedown : focusin",this.possiblyHide)})}var n=i("mJ5M"),o=i("DBjh"),a=i("cCv7"),r=i("aRgS"),c=Object(o.default)(s);e.a=c}).call(e,i("4kSj"))},tiTt:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({ctaLocationQRSelector:".js-locationQR-cta",ctaWebUrlSelector:".js-webUrl-cta",ctaViewSelector:".DMCtaView",convoContentSelector:".DMConversation-content"}),this.getJsonData=function(e){return t(e.target).closest(this.attr.ctaViewSelector).data("cta-json")},this.handleWebUrlClick=function(t){this.scribe(r)},this.handleLocationQRClick=function(t){t.preventDefault();var e=this.getJsonData(t),i=this.select("convoContentSelector").data("thread-id");e&&e.id&&i&&this.trigger("uiLocationQRCtaClicked",{qr_id:e.id,conversation_id:i})},this.after("initialize",function(){this.on("click",{ctaLocationQRSelector:this.handleLocationQRClick,ctaWebUrlSelector:this.handleWebUrlClick})})}var n=i("DBjh"),o=i("3oDc"),a=Object(n.default)(s,o.a),r={page:"messages",section:"thread",element:"cta_dm",action:"click"};e.a=a}).call(e,i("4kSj"))},tvrK:function(t,e,i){"use strict";function s(){this.getDynamicVideoAdFromCache=function(t){return n.a.get(t)},this.updateDynamicVideoAdCache=function(t){n.a.update(t)},this.clearDynamicVideoAdCache=function(){n.a.clear()}}var n=i("qQqy");e.a=s},uANo:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("primary",t,e,1),t,e,0,12,97,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.s(i.f("count",t,e,1),t,e,1,0,0,"")||i.b("    Inbox\n"),i.s(i.f("count",t,e,1),t,e,0,61,86,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b("    Inbox ("),i.b(i.v(i.f("count",t,e,0))),i.b(")\n")}),t.pop())}),t.pop()),s.s(s.f("primary",t,e,1),t,e,1,0,0,"")||(s.s(s.f("count",t,e,1),t,e,1,0,0,"")||s.b("    Requests\n"),s.s(s.f("count",t,e,1),t,e,0,174,202,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("    Requests ("),i.b(i.v(i.f("count",t,e,0))),i.b(")\n")}),t.pop())),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},uYmV:function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i("Gu7T"),o=s(n),a=i("Zrlr"),r=s(a),c=i("wxAW"),l=s(c),h=function(){function t(e,i){(0,r.default)(this,t),this.progressCircle=e;var s="number"==typeof i?i:this.progressCircle.getAttribute("r");this.circumference=2*Math.PI*s,this.stateClassList=[]}return(0,l.default)(t,[{key:"updateProgress",value:function(t){var e=this.progressCircle,i=(1-Math.ceil(t)/100)*this.circumference;return e.style.strokeDashoffset=i,e.style.strokeDasharray=this.circumference,this}},{key:"updateClassList",value:function(t){var e=this,i=this.progressCircle;if(Array.isArray(t)){if(i.classList){var s,n;(s=i.classList).remove.apply(s,(0,o.default)(this.stateClassList)),(n=i.classList).add.apply(n,(0,o.default)(t))}else{var a=i.getAttribute("class").split(" "),r=[].concat((0,o.default)(a.filter(function(t){return-1===e.stateClassList.indexOf(t)})),(0,o.default)(t));i.setAttribute("class",r.join(" "))}this.stateClassList=t}return this}}]),t}();e.default=h},v2wg:function(t,e,i){"use strict";function s(){this.scribeDialogImpression=function(t,e){this.scribe({component:"sms_confirmation_dialog",action:"impression"},e)},this.scribeCountryChange=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"mobile_country_code",action:"change"},e)},this.scribePhoneNumberInput=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"phone_number",action:"change"},e)},this.scribeSendPinClick=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"activate_mobile",action:"click"},e)},this.scribeVerifyPinFormImpression=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"verify_pin",action:"impression"},e)},this.scribePinCodeInput=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"verify_pin",action:"input"},e)},this.scribeVerifyButtonClick=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"verify_pin",action:"click"},e)},this.scribeResendPinCodeButtonClick=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"resend_pin",action:"click"},e)},this.scribeDialogCancelClick=function(t,e){this.scribe({component:"sms_confirmation_dialog",action:"cancel"},e)},this.scribeUnlockSuccessImpression=function(t,e){this.scribe({component:"sms_confirmation_dialog",element:"verify_pin",action:"success"},e)},this.after("initialize",function(){this.on("dataVerifyPinSuccess",this.scribeUnlockSuccessImpression),this.on("uiCancelSmsConfirmationDialog",this.scribeDialogCancelClick),this.on("uiNeedsSmsConfirmationDialog",this.scribeDialogImpression),this.on("uiResendPinAction",this.scribeResendPinCodeButtonClick),this.on("uiSendPinAction",this.scribeSendPinClick),this.on("uiSmsConfirmationCountryChange",this.scribeCountryChange),this.on("uiSmsConfirmationPhoneNumberInput",this.scribePhoneNumberInput),this.on("uiSmsConfirmationPinCodeInput",this.scribePinCodeInput),this.on("uiVerifyPinAction",this.scribeVerifyButtonClick),this.on("uiVerifyPinFormImpression",this.scribeVerifyPinFormImpression)})}var n=i("DBjh"),o=i("3oDc");e.a=Object(n.default)(s,o.a)},v9EU:function(t,e,i){"use strict";(function(t){var i=t("html").attr("lang");e.a={language:i}}).call(e,i("4kSj"))},vNdL:function(t,e,i){"use strict";function s(){this.defaultAttrs({acceptSelector:".js-prompt-accept",dismissSelector:".js-prompt-later",daysToWaitOnDismiss:30,useNativePush:!1}),this.shouldDisplayRequest=function(){if(!("Notification"in window))return!1;var t="default"===Notification.permission,e=this.storage.getItem("last_dismissed_timestamp")||0,i=this.now()-e>24*this.attr.daysToWaitOnDismiss*60*60*1e3;return t&&i},this.now=function(){return Date.now()},this.handleAccept=function(){this.attr.useNativePush&&this.pushSupported?this.trigger("uiPushSubscriptionChangeRequested",{subscribe:!0}):this.trigger("uiRequestNativeNotificationPermission"),this.trigger("uiDismissDMNotice"),this.scribeAction("success")},this.handleDismiss=function(){this.storage.setItem("last_dismissed_timestamp",this.now()),this.trigger("uiDismissDMNotice"),this.scribeAction("dismiss")},this.scribeAction=function(t){this.scribe({component:"dm_conversation_list_dialog",element:"native_notifications_permission_request",action:t})},this.showNotice=function(){this.trigger("uiShowDMNotice")},this.updatePushSupport=function(t,e){e.supported&&(this.pushSupported=!0),e.subscribed&&this.trigger("uiDismissDMNotice")},this.after("initialize",function(){this.pushSupported=!1,this.storage=new r.a("dm_notifications"),this.shouldDisplayRequest()&&(this.on("click",{acceptSelector:this.handleAccept,dismissSelector:this.handleDismiss}),this.on(document,"dataPushSubscriptionState",this.updatePushSupport),this.trigger("uiWantsPushSubscriptionState"),this.on(document,"uiSwiftLoaded",a.default.once(this.showNotice).bind(this)))})}var n=i("DBjh"),o=i("3oDc"),a=i("YzIt"),r=i("WODX"),c=Object(n.default)(s,o.a);e.a=c},vdtI:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b("  via &nbsp;\n"),s.s(s.f("image",t,e,1),t,e,0,26,91,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('    <span class="provider provider--'),i.b(i.v(i.f("image",t,e,0))),i.b('"></span> &nbsp;\n')}),t.pop()),s.b("  "),s.b(s.v(s.f("name",t,e,0))),s.b("\n"),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},vfpM:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<li class="dropdown-link geo-turn-off-item GeoSearch-focusable" id='),s.b(s.v(s.f("id",t,e,0))),s.b(' role="option">\n  <span class="Icon Icon--close Icon--smallest"></span>Remove location\n</li>\n'),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},"vg/a":function(t,e,i){"use strict";(function(t){function s(){this.attributes({messageClass:"DirectMessage",sentMessageSelector:".DirectMessage--sent",emojiOnlyMessageSelector:".DirectMessage--emoji",receivedMessageSelector:".DirectMessage--received",newMessagesPillSelector:".DMConversation-newMessagesPill",pageBackRange:1e3,openActivityClass:"DMActivity--open",dmComposerSelector:".DMComposer",dmComposerSectionSelector:".DMConversation-composer",viewConversation:".DMConversation",conversationContentSelector:".DMConversation-content",conversationScrollContainer:".DMConversation-scrollContainer",conversationReadonlyClass:"is-readonly",spinnerSelector:".DMConversation-spinner",quickReplyOptionPanelSelector:".DMConversation-quickReply",conversationTypeSelector:"[data-is-oto]",deleteConversationSelector:".DMConversation .js-actionDeleteConversation",reportConversationSelector:".DMConversation .js-actionReportConversation",reportUserIdSelector:".DMConversationActions [data-other-participant-id]",conversationAvatarUpdateSelector:".DMConversation .DMUpdateAvatar",conversationNameUpdateSelector:".DMConversation .DMUpdateName",sendingStateSelector:".DMConversation-sendingStateIndicator",openConvoSettingsSelector:".DMConversation-convoSettings",maxCharacters:1e4}),this.prepareConversationView=function(t,e){e=e||{};var i="uiOpenNewConversationView"===t.type,s=i&&e.screen_names&&1===e.screen_names.length;this.trigger("uiDMDialogClearActions"),this.trigger("uiUpdateConversationState",{is_readonly:e.is_readonly});var n=e.is_oto||s,o={is_oto:n,conversation_id:e.conversation_id};this.triggerOnConversationAvatar("uiDMResetConversationAvatar",o),this.triggerOnConversationName("uiDMInitConversationName",O({name:e.name},o)),this.$content.empty().removeAttr("data-thread-id").attr("data-thread-id",e.conversation_id),this.$viewConversation.removeAttr("data-thread-id").attr("data-thread-id",e.conversation_id),this.hideNewMessagesPill(),this.trigger("uiRemoveQuickReply"),i?(this.hideSpinner(),this.hideConversationSettings()):(this.showSpinner(),this.loadConversationData(e),this.initConversationSettings(e)),this.trigger("uiDMConversationUpdated",e)},this.currentConversationId=function(){return this.$content.attr("data-thread-id")},this.isGroupConversation=function(){return!this.select("conversationTypeSelector").data("is-oto")},this.getReportedUserId=function(){return this.select("reportUserIdSelector").attr("data-other-participant-id")},this.isExistingConversation=function(){return!!this.currentConversationId()},this.isDataForCurrentConversation=function(t){return!this.isExistingConversation()||t.conversation_id===this.currentConversationId()},this.processConversationResult=function(t,e){if(t&&t.preventDefault(),e&&this.isDataForCurrentConversation(e)){this.isExistingConversation()||(this.initializeDMComposer(null,e),this.$viewConversation.hasClass(this.attr.openActivityClass)&&this.initConversationSettings(e)),this.$content.attr("data-thread-id",e.conversation_id),this.$viewConversation.attr("data-thread-id",e.conversation_id);var i=e&&e.conversation&&e.conversation.title||{};this.triggerOnConversationName("uiDMUpdateConversationName",O({is_oto:e.is_oto,conversation_id:e.conversation_id},i));var s=e&&e.conversation&&e.conversation.avatar||{};this.triggerOnConversationAvatar("uiDMSetConversationAvatar",O({is_oto:e.is_oto,conversation_id:e.conversation_id},s)),this.trigger("uiUpdateConversationState",{is_readonly:e.is_readonly});var n=this.$content.children(),o=n.first().attr("data-message-id"),a=n.last().attr("data-message-id");this.isPageVisible()&&this.$content.is(":visible")&&e.conversation&&e.conversation.is_unread&&this.trigger("dataMarkDMsAsRead",{last_message_id:e.sort_event_id||-1,recipient_id:e.conversation_id}),this.trigger("uiDMUpdateTrustRequest",e),this.updateConversationHTML(e,o,a),!1===e.has_more&&this.hideSpinner(),this.trigger("uiDMConversationUpdated",e)}},this.processUserUpdatesResult=function(e,i){if(!i.should_request_inbox&&!i.is_empty){var s=this.$content.attr("data-thread-id");(i.conversations||[]).forEach(function(t){t.conversation_id===s&&this.processConversationResult(null,t)},this),(i.update_events||[]).filter(function(_){return _.conversation_id===s}).forEach(function(e){switch(e.type){case"conversation_delete":this.trigger("uiCloseDMConversation");break;case"message_delete":this.$content.find('[data-message-id="'+e.message_id+'"]').remove(),0===this.$content.children().length&&this.trigger("uiCloseDMConversation"),this.updateQR(),this.trigger("uiDMMesageDeleted",{dmId:e.message_id});break;case"mark_spam":case"unmark_spam":e.messages.forEach(function(e){var i=t(e.html);this.$content.find('[data-message-id="'+e.message_id+'"]').replaceWith(i)},this)}},this),this.updateRapidFire()}},this.isPageVisible=function(){return"visible"===document.visibilityState},this.removeAnimationClass=function(e,i){t(e.target).closest(this.attr.emojiOnlyMessageSelector).removeClass("is-animating")},this.updateConversationState=function(t,e){this.$viewConversation.toggleClass(this.attr.conversationReadonlyClass,!!e.is_readonly)},this.generateConversationHTML=function(t,e,i){var s=t.items,o=Object.keys(s);o.sort(n.a.compare);var a=!(e&&i),r="",c="";return o.forEach(function(t){a||n.a.compare(t,e)<0?r+=s[t]:n.a.compare(t,i)>0&&(c+=s[t])}),{prepend:r,append:c}},this.applyNewHtml=function(t,e,i,s){var n=this.$container[0].scrollHeight-this.$container.scrollTop();this.$content.prepend(e.prepend);var o=this.$container[0].scrollHeight-n;this.$container.scrollTop(o),this.$content.append(e.append),this.updateRapidFire(s),this.addAnimation(s),this.updateScrollPosition(t,s),this.updateQR(s)},this.updateConversationHTML=function(t,e,i){var s=this.generateConversationHTML(t,e,i);(s.append||s.prepend)&&this.applyNewHtml(t,s,e,i)},this.updateRapidFire=function(e){if(e){var i=this.attr.messageClass;this.$content.find('[data-message-id="'+e+'"]').nextAll().addBack().each(function(e,s){var n=t(this),o=n.next(),a=n.hasClass(i);if(a&&o.hasClass(i)){var r=n.find("[data-user-id]").attr("data-user-id"),c=n.find("[data-time]").attr("data-time"),l=n.find("[data-custom-profile-id]").attr("data-custom-profile-id"),h=o.find("[data-user-id]").attr("data-user-id"),d=o.find("[data-time]").attr("data-time"),u=o.find("[data-custom-profile-id]").attr("data-custom-profile-id");n.css("height"),r===h&&d-c<60&&l===u&&!n.hasClass("DirectMessage--emoji")&&!o.hasClass("DirectMessage--emoji")?n.addClass("is-rapidFire"):n.removeClass("is-rapidFire")}else a&&!o.hasClass(i)&&n.removeClass("is-rapidFire")})}},this.addAnimation=function(t){this.$content.find('[data-message-id="'+t+'"]').nextAll(this.attr.emojiOnlyMessageSelector).addClass("is-animating")},this.requestNextPage=function(){this.trigger("uiNeedsDMConversation",{conversation_id:this.$content.attr("data-thread-id"),max_entry_id:this.$content.children().first().attr("data-message-id")})},this.hideNewMessagesPill=function(){this.$newMessagesPill.addClass("is-hidden")},this.showNewMessagesPill=function(){this.$newMessagesPill.removeClass("is-hidden"),setTimeout(this.hideNewMessagesPill.bind(this),3500)},this.showSpinner=function(){this.$spinner.removeClass("u-hidden")},this.hideSpinner=function(){this.$spinner.addClass("u-hidden")},this.initConversationSettings=function(t){this.attachChild(A.a,this.select("openConvoSettingsSelector"),{enableTooltip:t.enable_mentions_tooltip}),this.trigger("uiInitDMConversationSettings",t),this.select("openConvoSettingsSelector").removeClass("u-hidden")},this.hideConversationSettings=function(){this.select("openConvoSettingsSelector").addClass("u-hidden")},this.isMessageVisible=function(t){return t.position().top<this.$container[0].clientHeight},this.findMessage=function(t){return this.$content.find('[data-message-id="'+t+'"]')},this.hasNewReceivedMessages=function(t){return t.nextAll(this.attr.receivedMessageSelector).length},this.updateScrollPosition=function(t,e){var i=!e,s=this.findMessage(e),n=s.nextAll(this.attr.sentMessageSelector).length,o=this.hasNewReceivedMessages(s);i?(this.$container.scrollTop(this.$container[0].scrollHeight),this.applyMarker(t.last_read_event_id)):o?this.isMessageVisible(s)?this.scrollToBottom():this.showNewMessagesPill():n&&(this.scrollToBottom(),this.removeMarker())},this.updateQR=function(t){var e=!t,i=this.findMessage(t),s=this.hasNewReceivedMessages(i);if(e||s){var n=this.$content.children().last().data("quick-reply-json");this.trigger("uiRemoveQuickReply"),n&&(this.trigger("uiShowQuickReply",{qrJson:n,isFirstResult:e}),this.scrollToBottom())}},this.addDMComposerSectionQuickReplyClass=function(){this.$dmComposerSection.addClass("is-showingQuickReply")},this.removeDMComposerSectionQuickReplyClass=function(){this.$dmComposerSection.removeClass("is-showingQuickReply")},this.scrollToBottom=function(t){var e=t?250:0;this.$container.stop().clearQueue().animate({scrollTop:this.$container[0].scrollHeight-this.$container[0].clientHeight},e),this.hideNewMessagesPill()},this.initializeDMComposer=function(t,e){this.trigger(this.attr.dmComposerSelector,"uiInitializeDMComposer",e)},this.loadConversationData=function(t){this.$viewConversation.trigger("uiNeedsDMConversation",{conversation_id:t.conversation_id,fromInitData:t.fromInitData})},this.triggerOnConversationAvatar=function(t,e){this.$updateAvatar.trigger(t,e)},this.triggerOnConversationName=function(t,e){this.$updateName.trigger(t,e)},this.showComposeSection=function(){this.select("dmComposerSectionSelector").removeClass("u-hidden")},this.hideComposeSection=function(){this.select("dmComposerSectionSelector").addClass("u-hidden"),this.scrollToBottom(!1)},this.handleViewChange=function(t,e){var i="uiDMDialogClosed"===t.type||"conversation"!==e.activity?"uiDMConversationActivityHidden":"uiDMConversationActivityVisible";this.trigger(i,e)},this.handleTypingIndicatorShown=function(){var t=this.$content.children().last();this.isMessageVisible(t)&&this.scrollToBottom()},this.removeCardsFromConversation=function(){this.trigger(this.select("conversationScrollContainer"),"uiUnloadAllCards")},this.launchReportingWebview=function(t,e){this.trigger("uiNeedsReportDialog",{userId:this.getReportedUserId(),reportedDirectMessageConversationId:this.currentConversationId(),target:"dm-conversation"})},this.triggerAction=function(t){this.trigger(t,{conversation_id:this.currentConversationId(),is_group:this.isGroupConversation()})},this.after("initialize",function(){this.attachChild(C.a,this.select("conversationAvatarUpdateSelector")),this.attachChild(y.a,this.select("conversationNameUpdateSelector")),this.attachChild(u.a,this.$node),this.attachChild(f.a,this.$node),this.attachChild(P.a,this.$node),this.attachChild(m.a,this.$node),this.attachChild(x.a,this.select("quickReplyOptionPanelSelector")),this.attachChild(g.a,this.$node,{tweetSelector:".DirectMessage-message",mediaNotDisplayedSelector:".Sensitive-warning",mediaContainerSelector:".Sensitive-content",hiddenClass:"u-hidden"}),this.attachChild(v.a,this.$node),this.attachChild(b.a,this.$node,{eventData:{scribeContext:{component:"dm_existing_conversation_dialog"}}}),this.attachChild(w.a,this.$node),this.attachChild(S.a,this.$node),this.attachChild(l.a,this.select("dmComposerSelector"),{defaultText:"",condensedText:"",suppressFlashMessage:!0,eventData:{scribeContext:{component:"tweet_box_dm"}},dmOnly:!0,mediaCategoryPrefix:"dm_",fileDataString:"media",fileInputString:"media",maxLength:this.attr.maxCharacters,warnLength:this.attr.maxCharacters-20,superwarnLength:this.attr.maxCharacters-10,timeToDismissSelectedQRInMS:h.a.get("dm_quick_reply_options_panel_dismiss_in_ms")}),this.attachChild(c.a,this.$node),this.attachChild(p.a,this.$node),this.attachChild(d.a,this.select("sendingStateSelector")),this.attachChild(I.a,this.select("conversationScrollContainer"),{containerSelector:this.attr.conversationScrollContainer,cardContainerSelector:".DirectMessage",unloadedCardsFilter:".DirectMessage .js-macaw-cards-iframe-container"}),this.attachChild(k.a,this.$node),this.attachChild(M.a,this.$node),this.attachChild(D.a,this.select("conversationScrollContainer"),{watchDocumentScroll:!1}),this.on("uiDMConversationActivityHidden","uiPauseAllMedia"),this.$updateAvatar=this.select("conversationAvatarUpdateSelector"),this.$updateName=this.select("conversationNameUpdateSelector"),this.$container=this.select("conversationScrollContainer"),this.$content=this.select("conversationContentSelector"),this.$viewConversation=this.select("viewConversation"),this.$spinner=this.select("spinnerSelector"),this.$newMessagesPill=this.select("newMessagesPillSelector"),this.$dmComposerSection=this.select("dmComposerSectionSelector"),this.on(document,"dataDMConversationResult dataDMSendSuccess",this.processConversationResult),this.on("dataDMDeleteSuccess",this.processUserUpdatesResult),this.on("uiOpenConversationView uiOpenNewConversationView",this.prepareConversationView),this.on("uiOpenConversationView uiOpenNewConversationView",this.initializeDMComposer),this.on("uiUpdateConversationState",this.updateConversationState),this.on("uiWantsConversationHistory",a.default.throttle(this.requestNextPage,1e3)),this.on(document,"uiDMDialogClosed uiDMActivityOpened",this.handleViewChange),this.on("uiDMConversationActivityHidden",this.removeCardsFromConversation),this.on("uiFeedbackPanelOpened uiDMHideComposeSection",this.hideComposeSection),this.on("uiFeedbackPanelClosed uiDMShowComposeSection",this.showComposeSection),this.on("uiB2CFeedbackUpdateView",this.scrollToBottom),this.on("uiShowQuickReplyOptionPanel",this.addDMComposerSectionQuickReplyClass),this.on("uiQuickReplyRemoved",this.removeDMComposerSectionQuickReplyClass),this.on("uiUpdateQR",function(){this.updateQR()}),this.on("uiDMTypingIndicatorShown",this.handleTypingIndicatorShown),this.on("click",{newMessagesPillSelector:this.scrollToBottom,deleteConversationSelector:this.triggerAction.bind(this,"uiShowDMDeleteConversationConfirmation"),reportConversationSelector:this.launchReportingWebview}),this.on("mouseover",{emojiOnlyMessageSelector:this.removeAnimationClass}),this.on(document,"dataDMUserUpdates",this.processUserUpdatesResult)})}var n=i("lUIe"),o=i("DBjh"),a=i("YzIt"),r=i("AJAn"),c=i("JGGW"),l=i("T2Va"),h=i("8tPW"),d=i("wLog"),u=i("Ss9a"),p=i("s6yN"),f=i("TItO"),m=i("YeQ4"),g=i("2t4W"),v=i("Mmtj"),b=i("liht"),w=i("tiTt"),S=i("ThX/"),C=i("5E2Z"),y=i("CsBf"),T=i("ca1w"),D=i("+9xK"),I=i("A1Ox"),x=i("IsXp"),k=i("3YhO"),M=i("s9bR"),P=i("fAUD"),A=i("eh/H"),O=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},E=Object(o.default)(s,r.a,T.a);e.a=E}).call(e,i("4kSj"))},"w/aG":function(t,e,i){"use strict";function s(){this.scribeError=function(t,e){this.scribe({component:"oembed",action:"request_failed"})},this.scribeRetry=function(t,e){this.scribe({component:"oembed",action:"retry"})},this.scribeRequest=function(t,e){this.scribe({component:"oembed",action:"request"},e)},this.scribeSuccess=function(t,e){this.scribe({component:"oembed",action:"success"},e)},this.after("initialize",function(){this.on("dataOembedError",this.scribeError),this.on("dataOembedRetry",this.scribeRetry),this.on("dataOembedRequest",this.scribeRequest),this.on("dataOembedSuccess",this.scribeSuccess)})}var n=i("DBjh"),o=i("3oDc");e.a=Object(n.default)(s,o.a)},w3Xn:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("<style>\n\n.StickersMediaImage.media-image {\n  background-image: url('"),s.b(s.v(s.f("image",t,e,0))),s.b("');\n\n  width: "),s.b(s.v(s.f("bgWidth",t,e,0))),s.b("px;\n  height: "),s.b(s.v(s.f("bgHeight",t,e,0))),s.b("px;\n}\n\n.StickersMediaImage-blackBar {\n  width: "),s.b(s.v(s.f("blackBarWidth",t,e,0))),s.b("px;\n  height: "),s.b(s.v(s.f("bgHeight",t,e,0))),s.b("px;\n}\n\n"),s.s(s.f("stickers",t,e,1),t,e,0,238,1859,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("@-webkit-keyframes stickerAnimation-"),i.b(i.v(i.f("animationRefIndex",t,e,0))),i.b("-a {\n  0%   {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  13%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  53%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1.025); animation-timing-function: ease-in;}\n  100% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-out;}\n}\n@keyframes stickerAnimation-"),i.b(i.v(i.f("animationRefIndex",t,e,0))),i.b("-a {\n  0%   {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  13%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  53%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1.025); animation-timing-function: ease-in;}\n  100% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-out;}\n}\n@-webkit-keyframes stickerAnimation-"),i.b(i.v(i.f("animationRefIndex",t,e,0))),i.b("-b {\n  0%   {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  13%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  53%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1.025); animation-timing-function: ease-in;}\n  100% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-out;}\n}\n@keyframes stickerAnimation-"),i.b(i.v(i.f("animationRefIndex",t,e,0))),i.b("-b {\n  0%   {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  13%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-in;}\n  53%  {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1.025); animation-timing-function: ease-in;}\n  100% {transform: matrix("),i.b(i.v(i.f("matrix",t,e,0))),i.b(") scale(1); animation-timing-function: ease-out;}\n}\n")}),t.pop()),s.b("\n"+i),s.b('</style>\n\n<div class="StickersMediaImage media-image">\n  <img src="'),s.b(s.v(s.f("image",t,e,0))),s.b('" class="StickersMediaImage-passthroughImage" />\n\n'),s.s(s.f("stickers",t,e,1),t,e,0,2015,2702,"{{ }}")&&(s.rs(t,e,function(t,e,s){s.s(s.f("link",t,e,1),t,e,0,2029,2106,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('      <a class="StickersMediaImage-stickerLink js-nav" href="'),i.b(i.v(i.f("link",t,e,0))),i.b('">\n')}),t.pop()),s.b("\n"+i),s.b('      <div\n          class="StickersMediaImage-stickerImage js-tooltip"\n          data-original-title="'),s.b(s.v(s.f("tooltip",t,e,0))),s.b('"\n          data-animation-ref-index="'),s.b(s.v(s.f("animationRefIndex",t,e,0))),s.b('"\n\n          style="\n            width: '),s.b(s.v(s.f("width",t,e,0))),s.b("px;\n            height: "),s.b(s.v(s.f("height",t,e,0))),s.b("px;\n            left: -"),s.b(s.v(s.f("halfWidth",t,e,0))),s.b("px;\n            top: -"),s.b(s.v(s.f("halfHeight",t,e,0))),s.b("px;\n\n            -moz-transform:    "),s.b(s.v(s.f("transform",t,e,0))),s.b(";\n            -webkit-transform: "),s.b(s.v(s.f("transform",t,e,0))),s.b(";\n            -o-transform:      "),s.b(s.v(s.f("transform",t,e,0))),s.b(";\n            transform:         "),s.b(s.v(s.f("transform",t,e,0))),s.b(';\n          ">\n      </div>\n\n'),s.s(s.f("link",t,e,1),t,e,0,2674,2690,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("      </a>\n")}),t.pop())}),t.pop()),s.b("</div>\n"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},w3ke:function(t,e,i){"use strict";function s(){this.defaultAttrs({keepBadgeStorageKey:"keep_badge_until",keepBadgeInterval:1e3}),this.processNewNotifications=function(t,e){e&&e.b&&"ok"===e.b.status&&e.b.response&&this.possiblyUpdateBadgeAndHighlighting(e.b.response)},this.possiblyUpdateBadgeAndHighlighting=function(t){t.show_badge_highlighting&&t.count>=0&&(this.trigger("uiUpdateConnectBadge",t),t.timestamp>=0&&(t.count>0||this.pastStorageTime())&&this.trigger("uiUpdateActivityHighlighting",t.timestamp),this.updateStorageTime())},this.pastStorageTime=function(){var t=(new Date).getTime();return(this.storage.getItem(this.attr.keepBadgeStorageKey)||{until:0}).until<t},this.updateStorageTime=function(){var t=(new Date).getTime();this.storage.setItem(this.attr.keepBadgeStorageKey,{until:t+this.attr.keepBadgeInterval})},this.after("initialize",function(){this.storage=new o.a("connect_badge"),this.updateStorageTime(0),this.on(document,"dataNotificationsReceived",this.processNewNotifications)})}var n=i("DBjh"),o=i("WODX");e.a=Object(n.default)(s)},wAAH:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("intnumber_one",t,e,1),t,e,0,26,52,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" reply")}),t.pop()),s.s(s.f("intnumber_other",t,e,1),t,e,0,98,126,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" replies")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},wAPH:function(t,e,i){"use strict";var s={hasFiles:function(t,e){var i=(t.originalEvent||t).dataTransfer;if(!i)return!1;var s=i.items||i.files,n=(i.types.contains?i.types.contains("Files"):i.types.indexOf("Files")>=0)&&!!(s&&s.length>0);if(!n||!e)return n;for(var o=0;o<s.length;++o)n=n&&!!s[o].type.match(e);return n},onlyHandleEventsWithFiles:function(t,e){return function(i,n){if(s.hasFiles(i,e))return t.call(this,i,n)}}};e.a=s},wLog:function(t,e,i){"use strict";function s(){this.attributes({indicatorDelay:1e3}),this.state={current:0,conversationId:void 0,isVisible:!1,previousInFlight:0,total:0},this.render=function(){var t=this;this.$node.html(a.a.render({total:this.state.total,current:this.state.current})),this.state.isVisible?this.timeout=setTimeout(function(){return t.state.isVisible?t.$node.slideDown(300):t.$node.hide()},this.attr.indicatorDelay):(clearTimeout(this.timeout),this.$node.slideUp(100))},this.updateCount=function(t,e){var i=e[this.state.conversationId]||0;0===i?(this.state.total=0,this.state.current=0):0===this.state.previousInFlight?(this.state.total=i,this.state.current=1):this.state.previousInFlight<i?this.state.total=this.state.total+1:this.state.previousInFlight>i&&(this.state.current=this.state.current+1),this.state.previousInFlight=i,this.state.isVisible=i>0},this.updateConversationId=function(t,e){this.state={isVisible:!1,total:0,conversationId:e.conversation_id,current:0,previousInFlight:0},this.trigger("uiDMConversationNeedsInFlightState")},this.after("updateCount",this.render),this.after("updateConversationId",this.render),this.after("initialize",function(){this.on(document,"dataDMMessagesInFlight",this.updateCount),this.on(document,"uiRenderConversationView",this.updateConversationId)})}var n=i("DBjh"),o=i("KaXq"),a=i.n(o);e.a=Object(n.default)(s)},wPVw:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="Grid js-prompt-layout-container" data-component-context="prompt" role="presentation">\n  <div class="Grid-cell" role="presentation">\n    <div class="PromptbirdPrompt-streamItem StreamItem js-stream-item js-prompt-layout-content separated-module" data-item-type="prompt" data-item-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('" role="listitem"></div>\n  </div>\n</div>'),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},wQ5J:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b("  "),s.b(s.v(s.f("localized_number",t,e,0))),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},wVpQ:function(t,e,i){"use strict";function s(){this.IFRAME_TIMEOUT=12e4,this.defaultAttrs({includePageContext:!0,liveVideoEventId:void 0}),this.sendTweet=function(t,e){var i=e.tweetboxId,s=function(t){t.tweetboxId=i,t.tweetData=e.tweetData,this.trigger("dataTweetSuccess",t),this.trigger("dataGotProfileStats",{stats:t.profile_stats}),t.tweet_stats&&this.trigger("dataGotTweetStats",{stats:t.tweet_stats})},o=function(t){var e=void 0;try{e={message:t.message,spamChallenge:t.challengeName}}catch(t){e={error:Object(n.default)("Sorry! We did something wrong.")}}e.tweetboxId=i,this.trigger("dataTweetError",e)},a=this.attr.liveVideoEventId?{liveVideoEventId:this.attr.liveVideoEventId}:{},r=c.default.merge(e.tweetData,a);this.post({url:"/i/tweet/create",isMutation:!1,data:r,success:s.bind(this),error:o.bind(this),retryIfUnavailable:!0})},this.sendTweetWithMedia=function(t,e){var i=this,s=e.tweetboxId,n=e.tweetData,o=Object(a.a)(s),r=function(e){n.media_ids=e.join(","),i.sendTweet(t,{tweetboxId:s,tweetData:n})},c=function(t){return i.trigger(t.cancelled?"dataTweetCancel":"dataTweetError",{message:t.message,tweetboxId:s})};return this.collectMediaItems(o).then(r,c)},this.normalizeError=function(t){throw t="object"===(void 0===t?"undefined":m(t))?t:{message:t}},this.collectMediaItems=function(t){var e=this;return Promise.all(t.map(function(t){return e.mediaSruFinalize(t).then(function(i){return e.uploadMetadata(i,t).then(void 0,e.normalizeError)},e.normalizeError)}))},this.sendTweetWithCard=function(t,e){var i=this,s=void 0;if(void 0===e.cardData)return this.trigger("dataTweetError",{tweetboxId:s,message:e.clientErrorMsg}),Promise.reject();s=e.tweetboxId;var n=function(n){var o=e.tweetData;o.card_uri=n,i.sendTweet(t,{tweetboxId:s,tweetData:o})},o=function(){return i.trigger("dataTweetError",{tweetboxId:s,message:e.serverErrorMsg})};return this.createCard(e.cardData).then(n,o)},this.sendDirectMessage=function(t,e){this.trigger("dataDirectMessageSuccess",e)},this.after("initialize",function(){this.attachChild(r.a,document),this.on("uiSendTweet",this.sendTweet),this.on("uiSendTweetWithMedia",this.sendTweetWithMedia),this.on("uiSendTweetWithCard",this.sendTweetWithCard),this.on("uiSendDirectMessage",this.sendDirectMessage)})}var n=i("0d4m"),o=i("DBjh"),a=i("WKYg"),r=i("3Cjl"),c=i("YzIt"),l=i("9np9"),h=i("IBie"),d=i("VtWx"),u=i("JZGn"),p=i("x+k1"),f=i("AJAn"),m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g=Object(o.default)(s,l.a,d.a,p.a,f.a,h.a,u.a);e.a=g},ww42:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({itemSelector:".tweet[data-dynamic-preroll=true]",maxAdRequest:10,tweetIdAttr:"data-tweet-id",impressionIdAttr:"data-impression-id",includeLongVideos:!1}),this.initialAdFetch=function(t,e){var i=this.getTweetInfo(this.select("itemSelector"));this.fetchAdsAndCache(i)},this.timelineAdFetch=function(e,i){var s=this.getTweetInfo(t(i.items_html).find(this.attr.itemSelector));this.fetchAdsAndCache(s)},this.getTweetInfo=function(e){var i=this;return e.map(function(e,s){var n=t(s);return{id:n.attr(i.attr.tweetIdAttr),promoted_id:n.attr(i.attr.impressionIdAttr)}}).get()},this.isMarketplaceTweet=function(t){return!t.promoted_id},this.fetchAdsAndCache=function(t){var e=this;this.tweetRefreshCache=this.tweetRefreshCache.concat(t.filter(this.isMarketplaceTweet)),t.forEach(function(t){e.isMarketplaceTweet(t)||(e.amplifyTweets[e.adCacheKey(t)]=t)}),this.fetchAds(t)},this.fetchAds=function(t,e){var i=this;if(t&&0!==t.length){var s=void 0;for(s=0;s<t.length;s+=this.attr.maxAdRequest){var n=t.slice(s,s+this.attr.maxAdRequest),o=n.map(function(t){return i.requestsInFlight[i.adCacheKey(t)]=!0,{tweet_id:t.id,impression_id:t.promoted_id}}),a=void 0;e&&e.adId&&e.dynamicPrerollType&&(a={preroll_id:e.adId,dynamic_preroll_type:e.dynamicPrerollType}),this.post({url:"/i/videoads/v2/prerolls.json",data:{tweets:JSON.stringify({tweets:o,trigger_preroll:a,include_long_videos:this.attr.includeLongVideos})},success:this.handleSuccess.bind(this,n),error:this.handleError.bind(this,n)})}}},this.handleSuccess=function(t,e){var i=this,s={},n=e.autoplay_blacklist;this.removeInFlightRequests(t),e.video_analytics_scribe.forEach(function(t){var o=e.prerolls.find(function(e){return e.tweet_id===t.tweet_id&&e.impression_id===t.impression_id&&e.live_event_id===t.live_event_id})||{},a={adId:o.preroll_id,dynamicPrerollType:o.dynamic_preroll_type,autoplayBlacklist:n,videoAnalyticsScribePassthrough:t.video_analytics_scribe_passthrough};o.promoted_content&&(a.promotedContent={impressionId:o.promoted_content.impression_id,disclosureType:o.promoted_content.disclosure_type}),o.media_info&&(a.mediaInfo=o.media_info);var r=i.adCacheKey({id:t.tweet_id,promoted_id:t.impression_id});i.amplifyTweets[r]&&(i.amplifyTweets[r].adId=o.preroll_id,i.amplifyTweets[r].dynamicPrerollType=o.dynamic_preroll_type),s[r]=a}),this.updateDynamicVideoAdCache(s)},this.handleError=function(t,e){this.removeInFlightRequests(t);var i=t.map(function(t){return l({error_message:e.message},t)});this.scribe({element:"dynamic_video_ads",action:"dynamic_preroll_request_error"},{items:i})},this.removeInFlightRequests=function(t){var e=this;t.forEach(function(t){return delete e.requestsInFlight[e.adCacheKey(t)]})},this.refreshCache=function(t,e){var i=this;if(this.clearDynamicVideoAdCache(),e.tweet&&e.tweet.id){var s=this.adCacheKey({id:e.tweet.id,promoted_id:e.tweet.promoted_id});this.requestsInFlight[s]&&this.scribe({element:"dynamic_video_ads",action:"dynamic_preroll_request_late"},{items:[e.tweet]})}Object.keys(this.amplifyTweets).length>0&&setTimeout(function(){return i.updateDynamicVideoAdCache(i.amplifyTweets)},0),this.fetchAds(this.tweetRefreshCache,e.triggerAd)},this.after("initialize",function(){this.tweetRefreshCache=[],this.amplifyTweets={},this.requestsInFlight={},this.on(document,"uiRefreshVideoAdCache",this.refreshCache),this.on(document,"dataGotMoreTimelineItems",this.timelineAdFetch),this.initialAdFetch()})}var n=i("DBjh"),o=i("VtWx"),a=i("3oDc"),r=i("rmeb"),c=i("tvrK"),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},h=Object(n.default)(s,o.a,a.a,r.a,c.a);e.a=h}).call(e,i("4kSj"))},"x+k1":function(t,e,i){"use strict";function s(){this.mediaSruFinalize=function(t){var e=this,i=t.uploadId,s=this.sruDeferreds,a={uploadId:i,trimRange:t.trimRange,tweetboxId:t.tweetboxId,mediaCategory:t.mediaCategory,sourceUrl:t.sourceUrl,mediaType:t.mediaType},r=function(e){var i=Object(n.a)(e.code,t.fileType);throw o({},e,{message:i})};return new Promise(function(t,n){var o={resolve:t,reject:n};s[i]=o,e.trigger("uiMediaSruFinalize",a)}).catch(r)},this.uploadMediaSruResult=function(t,e){var i=e.uploadId,s=this.sruDeferreds[i];if(s){switch(t.type){case"dataMediaSruSuccess":s.resolve(e.mediaId);break;case"dataMediaSruCancel":s.reject({cancelled:!0});break;default:s.reject(e.error)}delete this.sruDeferreds[i]}},this.after("initialize",function(){this.sruDeferreds={},this.on("dataMediaSruSuccess dataMediaSruError dataMediaSruCancel dataMediaSruComplete",this.uploadMediaSruResult)})}var n=i("buW5"),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=s},"x8V/":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({addTweetButtonSelector:".add-tweet-button",replyButtonTextSelector:".replying-text",replyUsersSelector:".reply-users",replyUsersButtonSelector:".reply-users-btn",tooltipClass:"js-tooltip",tweetBoxSelector:".tweet-box",visibleTooltipSelector:".js-tooltip.in"}),this.around("createDataForSending",function(t){var e=l({},t(),{in_reply_to_status_id:this.overrides.retweetId||this.overrides.id,auto_populate_reply_metadata:this.isAutoPopulateReply||void 0,exclude_reply_user_ids:Array.isArray(this.excludeReplyUserIds)&&this.excludeReplyUserIds.join(",")||void 0});for(var i in e)void 0===e[i]&&delete e[i];return e}),this.notifyReplyButtonTweetSuccess=function(){if(this.overrides.isReplyLinkClick){var t=l({},this.overrides);t.scribeContext&&"suggest_recap"!==t.scribeContext.component&&(t.scribeContext.element=""),this.trigger("uiReplyButtonTweetSuccess",t)}},this.renderReplyUsers=function(){this.removeTooltips(),delete this.screenNamesInConversationHash;var t="";if(this.isAutoPopulateReply&&!this.canBeSelfThreaded){var e=this.originalReplyUsers.filter(function(t){return this.excludeReplyUserIds.indexOf(t.id_str)<0},this),i={};if(e.forEach(function(t){return i[t.screen_name.toLowerCase()]=!0}),this.screenNamesInConversationHash=i,this.trigger("uiChangedUsersInConversation",{screenNamesInConversationHash:i}),this.originalReplyUsers.length>0){var s=e.length,n={is_reply_user_count_1:1===s,is_reply_user_count_2:2===s,is_reply_user_count_3:3===s,is_reply_user_count_more_than_3:s>3,reply_user_count_minus_2:s-2,first_reply_user:e[0],second_reply_user:e[1],third_reply_user:e[2]};n["reply_user_count_minus_2_"+a.a.PluralRules.rule_for(n.reply_user_count_minus_2)]=!0,t=c.a.render(n)}}this.select("replyUsersSelector").html(t)},this.removeTooltips=function(){this.$node.attr("data-original-title")&&this.$node.attr("data-original-title","").tooltip("hide"),this.select("replyUsersSelector").find(this.attr.visibleTooltipSelector).tooltip("hide")},this.after("setTweetBoxOverrides",function(){this.canBeSelfThreaded=this.overrides.canBeSelfThreaded,this.canBeSelfThreaded?(this.$node.find(this.attr.replyButtonTextSelector).text(Object(n.default)("Tweet")),this.$node.find(this.attr.tweetBoxSelector).attr("data-placeholder-reply",Object(n.default)("Add another Tweet"))):(this.$node.find(this.attr.replyButtonTextSelector).text(Object(n.default)("Reply")),this.$node.find(this.attr.tweetBoxSelector).attr("data-placeholder-reply",Object(n.default)("Tweet your reply"))),this.isAutoPopulateReply=!!this.overrides.id,this.isAutoPopulateReply&&this.$node.find(this.attr.addTweetButtonSelector).toggleClass("hidden",!this.canBeSelfThreaded),this.originalReplyUsers=this.overrides.replyToUsers||[],this.$node.toggleClass("is-reply",this.isAutoPopulateReply);var t=this.overrides.retweetId||this.overrides.id;t&&this.$node.attr("data-previous-status-id-in-thread",t),this.resetReplyUsers()}),this.replyPrefixTooltip=function(e,i){var s=this;if(this.screenNamesInConversationHash){var o=[],a=i.text.match(h);a&&a[0].replace(d,function(t,e){s.screenNamesInConversationHash[e.toLowerCase()]&&o.push("@"+e)});var r=o.length?Object(n.default)("The reply already includes {{duplicated_mentions}}",{duplicated_mentions:o.join(" ")}):"";r!==this.lastReplyTipText&&(this.lastReplyTipText=r,t(this.select("replyUsersButtonSelector")[0]||this.node).attr("data-original-title",r).toggleClass(this.attr.tooltipClass,!!r).tooltip(r?"show":"hide"))}},this.openReplyUsersDialog=function(){this.isEditReplyUsersDialogOpen=!0,this.trigger("uiRequestActivityPopup",{component:"reply_users_popup",contentId:this.overrides.retweetId||this.overrides.id,htmlTitle:Object(n.default)("Replying to"),excludeReplyUserIds:this.excludeReplyUserIds})},this.editReplyUsersDialogClosed=function(){this.focus(),this.isEditReplyUsersDialogOpen=!1},this.editReplyUsersDialogSave=function(t,e){this.excludeReplyUserIds=e.excludeReplyUserIds,this.renderReplyUsers()},this.resetReplyUsers=function(){this.excludeReplyUserIds=[],this.lastReplyTipText=null,this.renderReplyUsers()},this.after("reset",function(){this.isEditReplyUsersDialogOpen=!1,this.resetReplyUsers()}),this.around("isEmpty",function(t){return t()&&!this.isEditReplyUsersDialogOpen&&!(this.excludeReplyUserIds&&this.excludeReplyUserIds.length)}),this.after("initialize",function(){this.isEditReplyUsersDialogOpen=!1,this.on("click",{replyUsersButtonSelector:this.openReplyUsersDialog}),this.on("uiTextChanged",this.replyPrefixTooltip),this.on("uiActivityPopupClosed",this.editReplyUsersDialogClosed),this.on("uiActivityPopupSave",this.editReplyUsersDialogSave)})}var n=i("0d4m"),o=i("ZVSr"),a=i.n(o),r=i("IhyL"),c=i.n(r),l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},h=/^\s*([@＠]\w{1,20}\s+)+/,d=/[@＠](\w{1,20})/g;e.a=s}).call(e,i("4kSj"))},xH9u:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={"dm/dm_typeahead_group_suggestion":i("afWj"),"dm/dm_typeahead_account_suggestion":i("koaM")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("has_suggestions",t,e,1),t,e,0,20,86,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b('  <li class="DMTypeaheadHeader">\n    <span>Recent</span>\n  </li>\n')}),t.pop()),s.s(s.f("suggestions",t,e,1),t,e,0,123,274,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.s(i.f("is_group",t,e,1),t,e,0,139,184,"{{ }}")&&(i.rs(t,e,function(t,e,i){i.b(i.rp("<dm/dm_typeahead_group_suggestion0",t,e,"    "))}),t.pop()),i.s(i.f("is_group",t,e,1),t,e,1,0,0,"")||i.b(i.rp("<dm/dm_typeahead_account_suggestion1",t,e,"    "))}),t.pop()),s.fl()},partials:{"<dm/dm_typeahead_group_suggestion0":{name:"dm/dm_typeahead_group_suggestion",partials:{},subs:{}},"<dm/dm_typeahead_account_suggestion1":{name:"dm/dm_typeahead_account_suggestion",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},xO2U:function(t,e,i){"use strict";function s(t,e,i){var s=e.split(",").map(function(t){return t+"[data-tweet-id="+i+"]"}).join();return t.find(s)}e.a=s},xOPL:function(t,e,i){"use strict";function s(){this.defaultAttrs({actionableTweetSelector:".js-actionable-tweet"}),this.triggerBlockActionOnNode=function(t,e){!this.itemIsMine(t)&&this.itemIsBlockable(t)&&this.trigger(t,e,{userId:this.getUserIdFromNode(t),username:this.getUsernameFromNode(t),tweetId:this.getUserTweetIdFromNode(t),fromShortcut:!0})},this.getUserIdFromNode=function(t){var e=n.a.getId(t);return e||(e=n.a.getId(t.find("[data-user-id]"))),e},this.getUserTweetIdFromNode=function(t){var e=t.attr("data-tweet-id");return e||(e=t.find("[data-tweet-id]").attr("data-tweet-id")),e},this.getUsernameFromNode=function(t){var e=n.a.getName(t);return e||(e=n.a.getName(t.find("[data-name]"))),e},this.itemIsMine=function(t){return t.is(this.attr.ownTweetSelector)||t.find(this.attr.ownTweetSelector).length>0},this.itemIsBlockable=function(t){return t.find(this.attr.actionableTweetSelector).length>0||t.is(this.attr.actionableTweetSelector)}}var n=i("UXvI");e.a=s},xgWv:function(t,e,i){"use strict";(function(t){function s(){n.default.mixin(this,[a.a,o.a]),this.defaultAttrs({pageContainer:"#doc",nestedContainerSelector:".js-stream-item .in-reply-to",showWithScreenNameSelector:".twitter-atreply",showWithIdSelector:".show-popup-with-id, .js-user-profile-link",searchtagSelector:".twitter-hashtag, .twitter-cashtag",cashtagSelector:".twitter-cashtag",geoPivotSelector:".js-geo-pivot-link",highlightedLabelSelector:".HighlightedUserLabel-link",itemLinkSelector:".twitter-timeline-link,.js-adaptive-photo",mediaForwardSelector:".js-adaptive-photo",cardExternalLinkSelector:".js-card2-external-link",viewMoreItemSelector:".view-more-container",inSnapbackExperiment:!1,snapbackSkipProfilePopup:!1,dismissedTweetSelector:".js-dismissed-tweet",dismissedTweetClass:"js-dismissed-tweet",dismissibleContainerSelector:".dismissible-container",threadedConversationTweetSelector:".ThreadedConversation-tweet",newsCameraBadgeSelector:".AdaptiveMedia-newsCameraBadge"}),this.showProfilePopupWithScreenName=function(e,i){var s=t(e.target).closest(this.attr.showWithScreenNameSelector).text();"@"===s[0]&&(s=s.substring(1));var n={screenName:s},o=this.getCardDataFromContainer(t(e.target));i=r({},this.interactionData(e,n),o),this.showProfile(e,i)},this.showProfilePopupWithId=function(e,i){var s=this.getCardDataFromContainer(t(e.target));i=r({},this.interactionDataWithCard(e),s),this.showProfile(e,i)},this.showProfile=function(e,i){"mouseover"===e.type?(e.preventDefault(),e.stopImmediatePropagation(),this.trigger(e.target,"uiShowProfileHover",i)):(i.user_id=t(e.target).closest(".twitter-atreply").attr("data-mentioned-user-id")||i.userId,this.trigger(e.target,"uiShowProfileNewWindow",i))},this.hideHover=function(e,i){var s=this.getCardDataFromContainer(t(e.target));i=r({},this.interactionData(e),s),this.trigger("uiHideProfileHover",i)},this.searchtagClick=function(e,i){var s=t(e.target),n=s.closest(this.attr.searchtagSelector),o=n.is(this.attr.cashtagSelector)?"uiCashtagClick":"uiHashtagClick",a={query:n.text()};this.trigger(o,this.interactionData(e,a))},this.isCardUrl=function(t){return/^(https?:\/\/)?cards(-staging|-beta)?.twitter.com/.test(t)},this.geoPivotClick=function(e,i){var s={placeId:t(i.el).data("place-id")};this.trigger("uiGeoPivotClick",this.interactionData(e,s))},this.itemLinkClick=function(e,i){var s=t(e.target),n=s.closest(this.attr.itemLinkSelector),o=n.closest(".tweet").data("permalink-path"),a=!!s.parents(".permalink").length,c=void 0,l=n.is(this.attr.mediaForwardSelector)?o:"",h=r({url:n.attr("data-expanded-url")||n.attr("href")||l,tcoUrl:n.attr("href")||l,text:n.text()},this.getCardDataFromContainer(s));if(("promotion"===h.cardName||"promotions"===h.cardType)&&this.isCardUrl(h.url)&&!a){e.preventDefault(),c=n.parents(".stream-item").find(".tweet");var d=c.data("permalink-path"),u=c.data("conversation-id");d&&t(document).trigger("uiNavigate",r({},i,{href:d,conversation_id:u}))}this.trigger("uiItemLinkClick",this.interactionData(e,h))},this.cardLinkClick=function(e,i,s){var n=this.getCardDataFromContainer(t(i.target));this.trigger(e,this.interactionDataWithCard(i,n))},this.getUserIdFromElement=function(t){return t.length?t.data("user-id"):null},this.itemSelected=function(e,i){var s=this.getCardDataFromContainer(t(e.target));i.organicExpansion&&this.trigger("uiItemSelected",r({},this.interactionData(e),s))},this.isNested=function(){return this.$node.closest(this.attr.nestedContainerSelector).length},this.modifierKey=function(t){if(t.shiftKey||t.ctrlKey||t.metaKey||t.which>1)return!0},this.removeTweetsFromUser=function(e,i){var s=this,n=this.$node.find("[data-user-id="+i.userId+"].js-stream-tweet"),o=this;t.each(n,function(e,i){var n=t(i),a=n.attr("data-tweet-id"),r=n.closest(s.attr.threadedConversationTweetSelector);r.length||(r=n.parent()),o.removeEngagementsOnTweet(a),r.remove()}),this.trigger("uiRemovedSomeTweets")},this.navigateToViewMoreURL=function(e){var i=t(e.target),s=void 0;i.find(this.attr.viewMoreItemSelector).length&&(s=i.find(".view-more-link"),this.trigger(s,"uiNavigate",{href:s.attr("href")}))},this.removeEngagementsOnTweet=function(t){this.$node.find("[data-item-id="+t+"]").remove()},this.dismissTweet=function(e,i){var s=t(e.target),n=s.closest(this.attr.tweetContainerSelector),o=n.closest(this.attr.dismissibleContainerSelector);n.addClass(this.attr.dismissedTweetClass).fadeOut(200,function(){n.remove(),o&&o.remove()}),this.trigger("uiTweetDismissed",i)},this.removeAllDismissedTweets=function(){this.select("dismissedTweetSelector").stop().remove()},this.highlightedLabelClick=function(){this.trigger("uiHighlightedLabelClick")},this.handleNewsCameraBadgeClick=function(e,i){var s=t(i.el).closest("[data-tweet-id]"),n={tweet_id:s.attr("data-tweet-id"),moment_id:s.attr("data-camera-moment-id")};this.trigger("uiNewsCameraBadgeClick",this.interactionData(e,n))},this.after("initialize",function(){this.isNested()||(this.on("click",{showWithScreenNameSelector:this.showProfilePopupWithScreenName,showWithIdSelector:this.showProfilePopupWithId,searchtagSelector:this.searchtagClick,geoPivotSelector:this.geoPivotClick,itemLinkSelector:this.itemLinkClick,cardExternalLinkSelector:this.cardLinkClick.bind(this,"uiCardExternalLinkClick"),highlightedLabelSelector:this.highlightedLabelClick,newsCameraBadgeSelector:this.handleNewsCameraBadgeClick}),this.on("uiItemLinkClick",{itemLinkSelector:this.itemLinkClick}),this.on("mouseover",{showWithScreenNameSelector:this.showProfilePopupWithScreenName,showWithIdSelector:this.showProfilePopupWithId}),this.on("mouseout",{showWithScreenNameSelector:this.hideHover,showWithIdSelector:this.hideHover}),this.on("uiHasClickedTweet",this.itemSelected),this.on("uiRemoveTweetsFromUser",this.removeTweetsFromUser),this.on("uiShortcutEnter",this.navigateToViewMoreURL),this.on("uiDismissTweet",this.dismissTweet),this.on(document,"uiBeforePageChanged",this.removeAllDismissedTweets))})}var n=i("q9/C"),o=i("Vuuo"),a=i("alSu"),r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=s}).call(e,i("4kSj"))},xhag:function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({quickPromoteIframeSelector:".quick-promote-iframe",cancelButtonSelector:".cancel-action",top:47}),this.openDialog=function(e,i){var s=t(e.target),n=s.attr("data-tfb-view");this.select("quickPromoteIframeSelector").attr("src",n),this.open(),this.scribeDialogOpenInteraction(e)},this.closeDialog=function(t,e){this.select("quickPromoteIframeSelector").removeAttr("src style"),this.off(window,"message",this.postMessageHandler)},this.postMessageHandler=function(t){var e=t.originalEvent,i=!1;if(e.origin===window.location.protocol+"//"+window.location.host){if("string"==typeof e.data&&"undefined"!==e.data)try{i=JSON.parse(e.data)}catch(t){}if(i&&i.name&&"quick_promote"===i.name)if("resize"===i.type)this.adjustIframeHeight(e);else if("scribe"===i.type){var s=i.scribeData||{};this.scribeUiInteraction(s.uiEvent,s.data)}else"close"===i.type&&this.close()}},this.scribeDialogOpenInteraction=function(t){this.scribe({component:"tweet",element:"view_tweet_analytics",action:"navigate"})},this.scribeUiInteraction=function(t,e){t=t&&t.toLowerCase(),["click","confirm"].indexOf(t)>=0&&this.scribe({component:"tweet",element:"quick_promote",action:t})},this.adjustIframeHeight=function(t){var e={iframeSelector:this.attr.quickPromoteIframeSelector,isQualified:function(t){return t.height}};this.fitIframeHeight(t,e)},this.setupMessageListener=function(){this.on(window,"message",this.postMessageHandler)},this.after("initialize",function(){this.on("click",{cancelButtonSelector:this.close}),this.on("uiDialogOpened",this.setupMessageListener),this.on(document,"uiOpenQuickPromoteDialog",this.openDialog),this.on("uiDialogClosed",this.closeDialog),this.on(window,"message",this.postMessageHandler)})}var n=i("DBjh"),o=i("UHc7"),a=i("ipYT"),r=i("zvXx"),c=i("3oDc"),l=Object(n.default)(s,o.a,r.a,a.a,c.a);e.a=l}).call(e,i("4kSj"))},"xq8/":function(t,e,i){"use strict";(function(t){function s(){n.default.mixin(this,[o.a]),this.defaultAttrs({hoverContentSelector:".hovercard",hoverContainerClasses:"hovercard",showDelay:600,hideDelay:100}),this.prepareHover=function(t){this.currentKey!==t&&this.forceHide(!1),this.openTimer=setTimeout(this.timerSaysOK.bind(this),this.attr.showDelay)},this.timerSaysOK=function(){this.okToOpen=!0,this.queuedOpen&&this.queuedOpen()},this.showHTML=function(e,i,s,n){var o=this;if(n=n||{},n.id=e,this.currentKey===e&&this.timeout)return clearTimeout(this.timeout),void(this.timeout=null);if(!this.okToOpen)return void(this.queuedOpen=function(){this.showHTML(e,i,s,n)});this.queuedOpen=null,this.forceHide(),this.currentKey=e,this.$hoverContent=t(i),this.$hoverContent.addClass(this.attr.hoverContainerClasses),this.$node.html(this.$hoverContent),this.pos=this.adjacent(this.$node,t(s),{gravity:"vertical"}),this.$hoverContent.addClass("gravity-"+this.pos.gravity),this.$hoverContent.addClass("weight-"+this.pos.weight),"south"===this.pos.gravity&&(this.pos.top-=10),this.$node.css({top:this.pos.top,left:this.pos.left});var a=function(){var t=o.pos.top,e=o.pos.top+("north"===o.pos.gravity?20:-20);o.$node.css({top:e,opacity:0}),o.$node.show(),o.$node.animate({top:t,opacity:1},150,"easeOutQuad"),o.trigger("uiHoverShown",n)},r=this.$hoverContent.find("img.banner");r.length>0?r.on("load",a):a()},this.forceHide=function(t){var e=this;(null!==this.currentKey||t)&&(this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.openTimer&&(clearTimeout(this.openTimer),this.openTimer=null),this.currentKey=null,this.$hoverContent&&this.$node.fadeOut({duration:100,complete:function(){e.$hoverContent&&(e.$hoverContent.remove(),e.$hoverContent=null)},easing:"easeOutQuad"}))},this.hide=function(){this.okToOpen=!1,this.queuedOpen=null,clearTimeout(this.openTimer),this.openTimer=null,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(this.forceHide.bind(this,!1),this.attr.hideDelay)},this.mouseOverContent=function(){if(this.timeout)return clearTimeout(this.timeout),void(this.timeout=null)},this.after("initialize",function(){this.on(document,"uiOverlayNavigate uiBeforePageChanged uiShortcutEsc",this.forceHide.bind(this,!0)),this.on(document,"mouseover",{hoverContentSelector:this.mouseOverContent}),this.on(document,"mouseout",{hoverContentSelector:this.hide}),t.extend(t.easing,{def:"easeOutQuad",easeOutQuad:function(t,e,i,s,n){return-s*(e/=n)*(e-2)+i}})})}var n=i("q9/C"),o=i("zvXx");e.a=s}).call(e,i("4kSj"))},xxLi:function(t,e,i){"use strict";function s(){this.attributes({conversation:".DMConversationContainer",groupAvatars:!1,maxCharacters:1e4}),this.openConversation=function(t,e){var i="uiRenderNewConversationView"===t.type?"uiOpenNewConversationView":"uiOpenConversationView";this.select("conversation").trigger(i,e)},this.after("initialize",function(){this.attachChild(c.a,this.attr.conversation),this.attachChild(a.a,this.attr.conversation),this.attachChild(r.a,this.attr.conversation,{groupAvatars:this.attr.groupAvatars,maxCharacters:this.attr.maxCharacters}),this.attachChild(l.a,this.attr.conversation),this.on("uiRenderConversationView uiRenderNewConversationView",this.openConversation)})}var n=i("DBjh"),o=i("AJAn"),a=i("UFzu"),r=i("vg/a"),c=i("rS19"),l=i("m24/");e.a=Object(n.default)(s,o.a)},"y/m3":function(t,e,i){"use strict";(function(t){function s(){this.defaultAttrs({top:80,closeOnOtherDialogOpened:!0,topMargin:60,bottomMargin:60,containerSelector:".MomentCapsuleSummaryListDialog-listContainer",itemsSelector:".MomentCapsuleSummaryListDialog-items",capsuleSelector:".MomentCapsuleSummary",createMomentSelector:".MomentCapsuleSummaryListDialog-button--newMoment",spinnerSelector:".spinner"}),this.around("open",function(t,e,i){this.tweetId=i.tweet_id,0===this.$items.children().length&&this.trigger("uiMomentsGetDialogUserMoments"),t()}),this.renderDialogContents=function(t,e){this.select("spinnerSelector").hide(),this.$items.append(e.html),this.$items.trigger("uiMomentsHasInjectedNewItems"),this.trigger("uiTriggerEllipsis"),this.updatePaginationValues(e),this.resizeDialog()},this.getOlderMoments=function(){this.hasMoreItems&&(this.select("spinnerSelector").show(),this.trigger("uiMomentsGetDialogUserMoments",{before:this.oldestMomentId}))},this.updatePaginationValues=function(t){this.oldestMomentId=t.oldest_moment_id,this.hasMoreItems=t.has_more_items},this.windowHeight=function(){return t(window).height()},this.resizeDialog=function(){var t=this.$dialog.height()+this.attr.topMargin+this.attr.bottomMargin-this.windowHeight();this.$container.css("max-height",this.$container.height()-t)},this.handleCapsuleClick=function(e,i){e.preventDefault(),e.stopPropagation();var s=t(e.target).closest(this.attr.capsuleSelector).attr("data-moment-id");this.trigger("uiMomentMakerAddTweet",{moment_id:s,tweet_id:this.tweetId,scribeContext:{component:"add_to_moment_dialog"}}),this.close()},this.handleCreateMoment=function(t,e){this.trigger("uiMomentMakerCreateMoment",{tweet_id:this.tweetId,scribeContext:{component:"add_to_moment_dialog"}}),this.close()},this.after("initialize",function(){this.tweetId=void 0,this.$container=this.select("containerSelector"),this.$items=this.select("itemsSelector"),this.attachChild(o.a,this.attr.containerSelector),this.attachChild(a.a,this.select("containerSelector"),{contentSelector:this.attr.itemsSelector}),this.on(document,"uiOpenAddToMomentDialog",this.open),this.on(document,"dataMomentsGetDialogUserMomentsSuccess",this.renderDialogContents),this.on("click",{capsuleSelector:this.handleCapsuleClick,createMomentSelector:this.handleCreateMoment}),this.on("uiNearTheBottom",this.getOlderMoments)})}var n=i("DBjh"),o=i("8Xx6"),a=i("Kjck"),r=i("UHc7"),c=i("AJAn");e.a=Object(n.default)(r.a,c.a,s)}).call(e,i("4kSj"))},"yG/K":function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.s(s.f("intnumber_one",t,e,1),t,e,0,26,51,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" like")}),t.pop()),s.s(s.f("intnumber_other",t,e,1),t,e,0,97,123,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" likes")}),t.pop()),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},yMkX:function(t,e,i){"use strict";function s(t,e,i){function s(s,n,o){var a=s-p,r=a+n;if(a>=0&&r<=u.length)o(u.subarray(a,r),s);else{var c=new FileReader;c.onload=function(){u=new Uint8Array(this.result),p=s,o(u.subarray(0,n),s)},c.onerror=e.bind(null,!1),c.readAsArrayBuffer(t.slice(s,s+Math.max(i,n)))}}function a(t){return(t>>7)*(2<<(7&t))*3}function r(t,i){d++?e(!0):s(i+o+a(t[9]||0),1,c)}function c(t,e){var i=t[0];i?s(e+1+i,1,c):s(e+1,o,l)}function l(t,i){var s=t[0];33===s?c(t.subarray(2,3),i+2):44===s?r(t,i):e(!1)}function h(t){/^GIF8[79]a/.test(String.fromCharCode.apply(null,t))?s(n+a(t[10]||0),o,l):e(!1)}i=i||65536;var d=0,u=[],p=0;t instanceof Blob?s(0,n,h):e(!1)}var n=13,o=11;e.a=s},yQav:function(t,e,i){"use strict";function s(t){this.defaultAttrs({itemType:"tweet"}),this.scribeActivityCount=function(t,e,i){var s={component:this.attr.itemType,element:t,action:"click"};this.scribe(s,this.interactionData(e))},this.after("initialize",function(){this.on("uiRequestReplyActivity",this.scribeActivityCount.bind(this,"reply_count")),this.on("uiRequestRetweetedActivity",this.scribeActivityCount.bind(this,"retweet_count")),this.on("uiRequestFavoritedActivity",this.scribeActivityCount.bind(this,"favorite_count"))})}var n=i("DBjh"),o=i("alSu"),a=i("gcfh"),r=Object(n.default)(s,o.a,a.a);e.a=r},z2Y5:function(t,e,i){/*!
 * xdm.js – Nicolas Gallagher – MIT License
 * easyXDM – Copyright(c) 2009-2011, Øyvind Sean Kinsey, oyvind@kinsey.no – MIT License
 */
!function(e){"use strict";function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function s(t){return void 0===t}function n(t){if(!t)throw new Error("url is undefined or empty");if(/^file/.test(t))throw new Error("The file:// protocol is not supported");var e=t.toLowerCase().match(S);if(e){var i=e[2],s=e[3],n=e[4]||"";return("http:"===i&&":80"===n||"https:"===i&&":443"===n)&&(n=""),i+"//"+s+n}return t}function o(t){if(!t)throw new Error("url is undefined or empty");if(t=t.replace(y,"$1/"),!t.match(/^(http||https):\/\//)){var e="/"===t.substring(0,1)?"":location.pathname;"/"!==e.substring(e.length-1)&&(e=e.substring(0,e.lastIndexOf("/")+1)),t=location.protocol+"//"+location.host+e+t}for(;C.test(t);)t=t.replace(C,"");return t}function a(t,e,i){var s;for(var n in e)e.hasOwnProperty(n)&&(n in t?(s=e[n],"object"==typeof s?a(t[n],s,i):i||(t[n]=e[n])):t[n]=e[n]);return t}function r(t,e){"string"==typeof t&&(t=[t]);for(var i,s=t.length;s--;)if(i=t[s],i=new RegExp("^"===i.substr(0,1)?i:"^"+i.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),i.test(e))return!0;return!1}function c(t,e){if(!e)throw new Error("parameters is undefined or null");var i=t.indexOf("#"),s=[];for(var n in e)e.hasOwnProperty(n)&&s.push(n+"="+encodeURIComponent(e[n]));return t+(-1===i?"#":"&")+s.join("&")}function l(t){var e=v.cloneNode(!1);if(a(t.props,{frameBorder:0,allowTransparency:!0,scrolling:"no",width:"100%",src:c(t.remote,{xdm_e:n(location.href),xdm_c:t.channel,xdm_p:1}),name:g+t.channel+"_provider",style:{margin:0,padding:0,border:0}}),e.id=t.props.name,delete t.props.name,!t.container)throw new Error('xdm.Rpc() configuration object missing a DOM "container" property');return a(e,t.props),t.container.appendChild(e),t.onLoad&&T(e,"load",t.onLoad),t.html&&(e.contentWindow.document.open(),e.contentWindow.document.write(t.html),e.contentWindow.document.close()),t.iframe=e,e}function h(t){var e;if(t.isHost=t.isHost||s(I.xdm_p),t.props=t.props||{},t.isHost)t.remote=o(t.remote),t.channel=t.channel||"default"+b++;else if(t.channel=I.xdm_c.replace(/["'<>\\]/g,""),t.remote=I.xdm_e.replace(/["'<>\\]/g,""),t.acl&&!r(t.acl,t.remote))throw new Error("Access denied for "+t.remote);return e=[new f.stack.PostMessageTransport(t)],e.push(new f.stack.QueueBehavior(!0)),e}function d(t){var e,i,s=t.length,n={incoming:function(t,e){this.up.incoming(t,e)},outgoing:function(t,e){this.down.outgoing(t,e)},callback:function(t){this.up.callback(t)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}};for(i=0;i<s;i++)e=t[i],a(e,n,!0),0!==i&&(e.down=t[i-1]),i!==s-1&&(e.up=t[i+1]);return e}function u(t){t.up.down=t.down,t.down.up=t.up,t.up=t.down=null}if(e.postMessage){var p="",f={},m=e.xdm,g="xdm_",v=document.createElement("IFRAME"),b=Math.floor(1e4*Math.random()),w=Function.prototype,S=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,C=/[\-\w]+\/\.\.\//,y=/([^:])\/\//g,T=function(){return e.addEventListener?function(t,e,i){t.addEventListener(e,i,!1)}:function(t,e,i){t.attachEvent("on"+e,i)}}(),D=function(){return e.removeEventListener?function(t,e,i){t.removeEventListener(e,i,!1)}:function(t,e,i){t.detachEvent("on"+e,i)}}(),I=function(t){t=t.substring(1,t.length).split("&");for(var e,i={},s=t.length;s--;)e=t[s].split("="),i[e[0]]=decodeURIComponent(e[1]);return i}(location.hash);f.version="1.0.1",f.stack={},f.query=I,f.checkAcl=r,f.noConflict=function(t){return e.xdm=m,p=t,p&&(g="xdm_"+p.replace(".","_")+"_"),f},f.Rpc=function(t,e){var i;if(e.local)for(var s in e.local)e.local.hasOwnProperty(s)&&(i=e.local[s])instanceof Function&&(e.local[s]={method:i});var o=d(h(t).concat([new f.stack.RpcBehavior(this,e),{callback:function(e){t.onReady&&t.onReady(e)}}]));this.origin=n(t.remote),this.destroy=function(){o.destroy()},o.init(),this.iframe=t.iframe},f.stack.PostMessageTransport=function(t){function i(e){var i=n(e.origin),s="string"==typeof e.data;i===c&&s&&e.data.substring(0,t.channel.length+1)===t.channel+" "&&o.up.incoming(e.data.substring(t.channel.length+1),i)}function s(n){n.data===t.channel+"-ready"&&(r="postMessage"in a.contentWindow?a.contentWindow:a.contentWindow.document,D(e,"message",s),T(e,"message",i),setTimeout(function(){o.up.callback(!0)},0))}var o,a,r,c;return o={outgoing:function(e,i,s){r.postMessage(t.channel+" "+e,i||c),s&&s()},destroy:function(){D(e,"message",s),D(e,"message",i),a&&(r=null,a.parentNode.removeChild(a),a=null)},init:function(){c=n(t.remote),t.isHost?(T(e,"message",s),a=l(t)):(T(e,"message",i),r="postMessage"in e.parent?e.parent:e.parent.document,r.postMessage(t.channel+"-ready",c),setTimeout(function(){o.up.callback(!0)},0))}}},f.stack.QueueBehavior=function(t){function e(){var a;if(!0===t&&0===n.length)return void u(i);o||0===n.length||s||(o=!0,a=n.shift(),i.down.outgoing(a.data,a.origin,function(t){o=!1,a.callback&&setTimeout(function(){a.callback(t)},0),e()}))}var i,s,n=[],o=!0;return i={init:function(){i.down.init()},callback:function(t){o=!1;var s=i.up;e(),s.callback(t)},incoming:function(t,e){i.up.incoming(t,e)},outgoing:function(t,i,s){n.push({data:t,origin:i,callback:s}),e()},destroy:function(){s=!0,i.down.destroy()}}},f.stack.RpcBehavior=function(t,e){function n(t){t.jsonrpc="2.0",r.down.outgoing(JSON.stringify(t))}function o(t,e){var i=Array.prototype.slice;return function(){var s,o=arguments.length,a={method:e};o>0&&arguments[o-1]instanceof Function?(o>1&&arguments[o-2]instanceof Function?(s={success:arguments[o-2],error:arguments[o-1]},a.params=i.call(arguments,0,o-2)):(s={success:arguments[o-1]},a.params=i.call(arguments,0,o-1)),l[""+ ++c]=s,a.id=c):a.params=i.call(arguments,0),t.namedParams&&1===a.params.length&&(a.params=a.params[0]),n(a)}}function a(t,e,o,a){if(!o)return void(e&&n({id:e,error:{code:-32601,message:"Procedure not found."}}));var r,c;e?(r=function(t){r=w,n({id:e,result:t})},c=function(t,i){c=w;var s={id:e,error:{code:-32099,message:t}};i&&(s.error.data=i),n(s)}):r=c=w,i(a)||(a=[a]);try{var l=o.method.apply(o.scope,a.concat([r,c]));s(l)||r(l)}catch(t){c(t.message)}}var r,c=0,l={};return r={incoming:function(t,i){var s,o=JSON.parse(t);o.method?e.handle?e.handle(o,n):a(o.method,o.id,e.local[o.method],o.params):(s=l[o.id],o.error&&s.error?s.error(o.error):s.success&&s.success(o.result),delete l[o.id])},init:function(){if(e.remote)for(var i in e.remote)e.remote.hasOwnProperty(i)&&(t[i]=o(e.remote[i],i));r.down.init()},destroy:function(){for(var i in e.remote)e.remote.hasOwnProperty(i)&&t.hasOwnProperty(i)&&delete t[i];r.down.destroy()}}},t.exports=f}}(window)},z8Pp:function(t,e,i){"use strict";(function(t){function s(e){this.attr={id:null,ttl_ms:216e5,limit:4,version:4,storageAdjacencyList:"topicsAdjacencyList",storageHash:"topicsHash",storageVersion:"topicsVersion",prefetchLimit:500,localQueriesEnabled:!1,remoteQueriesEnabled:!1,remotePath:"/i/search/typeahead.json",remoteType:"topics",prefetchPath:"/i/search/typeahead.json",prefetchType:"topics",basePath:"/search?",modePathMap:{images:"f=images",videos:"f=videos",news:"f=news"},querySourcePathTypeahead:"src=tyah"},this.attr=r.default.merge(this.attr,e),this.after=t.noop,this.defaultAttrs=t.noop,a.default.mixin(this,[o.a,c.a]),this.getLocalSuggestions=function(t,e){e([])},this.getTopicObjectsFromStrings=function(t){var e=[];return t.forEach(function(t){var i=this.topicsHash[t];i&&e.push(i)},this),e},this.requiresRemoteSuggestions=function(t){var e=n.a.getFirstChar(t.query),i=t.topicsMustStartWithHashtag&&-1===l.indexOf(e);return!(!t||!t.query||i)&&this.attr.remoteQueriesEnabled},this.processRemoteSuggestions=function(t,e,i){var s=i[this.attr.id]||[],n={};return s.forEach(function(t){var e=t.topic||t.hashtag;n[e.toLowerCase()]=!0},this),e[this.attr.remoteType]&&e[this.attr.remoteType].forEach(function(t){var e=t.topic||t.hashtag;t.searchPath=this.constructSearchPath(e,t.filter),n[e.toLowerCase()]||s.push(t)},this),i[this.attr.id]=s.slice(0,this.attr.limit),i},this.constructSearchPath=function(t,e){var i=["q="+encodeURIComponent(t)],s=e?this.attr.modePathMap[e]:"";return s&&i.push(s),i.push(this.attr.querySourcePathTypeahead),this.attr.basePath+i.join("&")},this.initialize=function(){},this.initialize()}var n=i("pFsH"),o=i("VtWx"),a=i("q9/C"),r=i("YzIt"),c=i("8XKX"),l=["$","#","＃"];e.a=s}).call(e,i("4kSj"))},zApe:function(t,e,i){"use strict";function s(){this.defaultAttrs({dropdownId:"swift_autocomplete_dropdown_goto_user",inputSelector:"input.username-input",usernameFormSelector:"form.goto-user-form"}),this.focus=function(){this.select("inputSelector").focus()},this.gotoUser=function(t,e){if(!e||!e.dropdownId||e.dropdownId===this.attr.dropdownId){if(t.preventDefault(),e&&e.item)return this.select("inputSelector").val(e.item.screen_name),void this.trigger("uiNavigate",{href:e.href});var i=this.select("inputSelector").val().trim();"@"===i.substr(0,1)&&(i=i.substr(1)),this.trigger("uiNavigate",{href:"/"+i})}},this.reset=function(){this.select("inputSelector").val(""),this.select("inputSelector").blur(),this.trigger(this.select("inputSelector"),"uiHideAutocomplete")},this.after("initialize",function(){this.on(document,"uiShortcutShowGotoUser",this.open),this.on("uiDialogOpened",this.focus),this.on("uiDialogClosed",this.reset),this.on(this.select("usernameFormSelector"),"submit",this.gotoUser),this.on("uiTypeaheadItemSelected uiTypeaheadSubmitQuery",this.gotoUser),a.a.attachTo(this.$node,{inputSelector:this.attr.inputSelector}),o.a.attachTo(this.$node,{inputSelector:this.attr.inputSelector,autocompleteAccounts:!1,datasourceRenders:[["accounts",["accounts"]]],deciders:this.attr.typeaheadData,eventData:{scribeContext:{component:"goto_user_dialog"}}})})}var n=i("DBjh"),o=i("cCv7"),a=i("aRgS"),r=i("UHc7"),c=Object(n.default)(s,r.a);e.a=c},zIBT:function(t,e,i){"use strict";function s(){this.defaultAttrs({countryCodeDisplaySelector:"#country_code_display",countryCodeSelector:"#country_code",countryNameSelector:"#device_country_code",phoneNumberSelector:"#phone_number",pinCodeSelector:"#numeric_pin",pinCodeSelectorRaw:"#numeric_pin_raw",submitRegisterButtonSelector:"#send_verification_pin",submitVerifyButtonSelector:"#device_verify"}),this.updateCountryCode=function(t,e){var i=e.value;this.select("countryCodeDisplaySelector").html("+"+i),this.select("countryCodeSelector").val(i),""!==this.select("phoneNumberSelector").val()&&this.callbackIfValidPhoneNumber(this.clearInvalidPhoneMessage)},this.callbackIfValidPhoneNumber=function(t){var e=this.select("countryCodeSelector").val(),i=this.select("phoneNumberSelector").val();this.validatePhoneNumber(e,i)?t.call(this):this.showInvalidPhoneMessage(e)},this.showInvalidPhoneMessage=function(t){var e=Object(n.default)("US and Canadian phone numbers must have 11 digits."),i=Object(n.default)("This appears to be an invalid phone number."),s="1"===t?e:i;s+=Object(n.default)(" Please enter a valid phone number."),this.trigger("uiAlertBanner",{message:s})},this.clearInvalidPhoneMessage=function(){this.trigger("uiAlertBannerClose")},this.validatePhoneNumber=function(t,e){var i=/\(*\)*\+*-*#* */g,s=e.replace(i,""),n=/^\d{11}$/;return"1"!==t&&(n=/^\d{10,15}$/),n.test(t+s)},this.enableIfValue=function(t){return function(e,i){var s=e.target||e.srcElement;this.select(t).prop("disabled",""===s.value)}},this.stripPin=function(t){return t.replace(/[^a-zA-Z0-9]/g,"")},this.after("initialize",function(){o.a.attachTo(this.attr.countryNameSelector),this.on(this.attr.countryNameSelector,"uiItemSelect",this.updateCountryCode),this.on("input",{phoneNumberSelector:this.enableIfValue("submitRegisterButtonSelector"),pinCodeSelectorRaw:this.enableIfValue("submitVerifyButtonSelector")})})}var n=i("0d4m"),o=i("lbzY");e.a=s},zLK3:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={emojified_name:i("NsFJ")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("Reply to "),s.s(s.f("in_reply_to_user",t,e,1),t,e,0,30,49,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<emojified_name0",t,e,""))}),t.pop()),s.fl()},partials:{"<emojified_name0":{name:"emojified_name",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},zP5u:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={"promptbird/templates/dismiss_button":i("02mS"),"promptbird/templates/icon":i("8QxQ"),"promptbird/templates/title":i("orcd"),"promptbird/templates/explanation":i("7SIb"),"promptbird/templates/call_to_action":i("hK7e"),"promptbird/templates/second_call_to_action":i("8T/I")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="PromptbirdPrompt PromptbirdPrompt--'),s.s(s.f("is_modal",t,e,1),t,e,0,60,65,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("modal")}),t.pop()),s.s(s.f("is_above_timeline",t,e,1),t,e,0,100,113,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b("aboveTimeline")}),t.pop()),s.b(" "),s.b(s.v(s.f("health_prompt_custom_class",t,e,0))),s.b('" data-prompt-id="'),s.b(s.v(s.f("prompt_id",t,e,0))),s.b('">\n'),s.s(s.f("is_above_timeline",t,e,1),t,e,0,224,272,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<promptbird/templates/dismiss_button0",t,e,"    "))}),t.pop()),s.s(s.f("is_modal",t,e,1),t,e,0,310,348,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.rp("<promptbird/templates/icon1",t,e,"    "))}),t.pop()),s.b(s.rp("<promptbird/templates/title2",t,e,"  ")),s.b(s.rp("<promptbird/templates/explanation3",t,e,"  ")),s.b(s.rp("<promptbird/templates/call_to_action4",t,e,"  ")),s.b(s.rp("<promptbird/templates/second_call_to_action5",t,e,"  ")),s.b("</div>"),s.fl()},partials:{"<promptbird/templates/dismiss_button0":{name:"promptbird/templates/dismiss_button",partials:{},subs:{}},"<promptbird/templates/icon1":{name:"promptbird/templates/icon",partials:{},subs:{}},"<promptbird/templates/title2":{name:"promptbird/templates/title",partials:{},subs:{}},"<promptbird/templates/explanation3":{name:"promptbird/templates/explanation",partials:{},subs:{}},"<promptbird/templates/call_to_action4":{name:"promptbird/templates/call_to_action",partials:{},subs:{}},"<promptbird/templates/second_call_to_action5":{name:"promptbird/templates/second_call_to_action",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},zbKd:function(t,e,i){(function(e){function s(t,e,i){e=e||{};for(var s in a)e[s]||(e[s]=a[s]);return r.render(t,e,i)}var n=i("Opvs").default,o={"dialogs/close_button":i("38hD"),create_custom_timeline_button:i("478N")},a=n(o),r=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b('<div class="modal modal-medium draggable">\n  <div class="modal-content">\n'),s.b(s.rp("<dialogs/close_button0",t,e,"    ")),s.b('    <div class="modal-header">\n      <h3 class="modal-title">Add Tweet to collection</h3>\n    </div>\n    <div class="modal-body">\n      <div class="timeline-selector"></div>\n    </div>\n    <div class="modal-footer">\n'),s.b(s.rp("<create_custom_timeline_button1",t,e,"      ")),s.b("\n"+i),s.b('      <button type="button" class="EdgeButton EdgeButton--tertiary js-close">Cancel</button>\n      <button type="button" class="EdgeButton EdgeButton--primary modal-submit js-submit">Save changes</button>\n    </div>\n  </div>\n</div>\n'),s.fl()},partials:{"<dialogs/close_button0":{name:"dialogs/close_button",partials:{},subs:{}},"<create_custom_timeline_button1":{name:"create_custom_timeline_button",partials:{},subs:{}}},subs:{}});t.exports={template:r,partials:a,render:s}}).call(e,i("jTWp"))},zcLM:function(t,e,i){(function(e){t.exports=new e.Template({code:function(t,e,i){var s=this;return s.b(i=i||""),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_one",t,e,1),t,e,0,21,50,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Follower")}),t.pop()),s.b("\n"+i),s.b("  "),s.s(s.f("intnumber_other",t,e,1),t,e,0,91,121,"{{ }}")&&(s.rs(t,e,function(t,e,i){i.b(i.v(i.f("localized_number",t,e,0))),i.b(" Followers")}),t.pop()),s.b("\n"),s.b("\n"),s.fl()},partials:{},subs:{}})}).call(e,i("jTWp"))},zif6:function(t,e,i){"use strict";function s(){this.scribeFollowSearchAction=function(t,e){this.scribe({component:e.sourceEventData.scribeComponent,element:"follow_search",action:e.sourceEventData.scribeAction})},this.scribeFollowSearchNux=function(){this.scribe({component:"follow_search",element:"nux",action:"impression"})},this.after("initialize",function(){this.on("dataAddFollowSearchSuccess dataRemoveFollowSearchSuccess",this.scribeFollowSearchAction),this.on("uiFollowSearchNuxImpression",this.scribeFollowSearchNux)})}var n=i("DBjh"),o=i("3oDc");e.a=Object(n.default)(s,o.a)},zqN9:function(t,e,i){"use strict";function s(t,e){Object(n.a)(e),p.a.attachTo(document,e),f.a.attachTo(document),o.a.attachTo(document,e),g.a.attachTo(document,e),r.a.attachTo(document,e),u.a.attachTo(document,e),m.a.attachTo(document,e),e.excludeExpandingTweets||a.a.attachTo(t,e);d.a.attachTo(".js-new-items-bar-container",e),e.excludeUserActions||v.a.attachTo(t,w({},e,{genericItemSelector:".js-stream-item"})),b.a.attachTo(document),l.a.attachTo(document),c.a.attachTo(document),h.a.attachTo(document)}var n=i("SFzM"),o=i("HEdP"),a=i("Moyp"),r=i("Hpo3"),c=i("U8+L"),l=i("lTdQ"),h=i("GKfl"),d=i("qGdp"),u=i("2t4W"),p=i("MZZR"),f=i("yQav"),m=i("WuTo"),g=i("Vvp0"),v=i("X4Ka"),b=i("hDvG"),w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=s},zr4x:function(t,e,i){"use strict";function s(){this.defaultAttrs({intent:"tweet"}),this.action=function(t){var e=o.a.decode(t);e.canTweetDefaultText=!0,this.trigger("uiOpenTweetDialog",e)}}var n=i("r5nI"),o=i("TX0g");e.a=n.a.mixin(s)},zvXx:function(t,e,i){"use strict";(function(t){function s(){this.adjacent=function(e,i,s){var o=void 0,a=void 0;return s=s||{},s.pos=i.offset(),"fixed"===s.position&&(s.pos.top-=n.a.getWindow().scrollTop(),s.pos.left-=n.a.getWindow().scrollLeft()),"relative"===s.position&&(o.top=0),s.rtl=s.rtl||"rtl"===t("body").attr("dir"),s.gravity=s.gravity||"vertical",s.attachBox={height:i.outerHeight(),width:i.outerWidth()},s.overlayBox={height:s.height||e.outerHeight(),width:s.width||e.outerWidth()},s.winBox={height:n.a.getWindow().height(),width:n.a.getWindow().width()},s.bodyBox={height:this.getBody().height(),width:this.getBody().width()},-1!=="vertical,vertical-north,north,south".indexOf(s.gravity)?(o=this.processVertical(s),s.allowGravitySwitch&&!o.validFit&&(s.gravity="horizontal",a=this.processHorizontal(s))):-1!=="horizontal,east,west".indexOf(s.gravity)&&(o=this.processHorizontal(s),s.allowGravitySwitch&&!o.validFit&&(s.gravity="vertical",a=this.processVertical(s))),a&&a.validFit?a:o},this.processVertical=function(e){var i=t.extend(!0,{},e.pos),s=e.pos.top-e.overlayBox.height>=n.a.getWindow().scrollTop()+this.topBarHeight(),o=e.pos.top+e.attachBox.height+e.overlayBox.height<=n.a.getWindow().scrollTop()+e.winBox.height;if(i.validFit=s||o,"vertical-north"===e.gravity?i.gravity=o||!i.validFit?"north":"south":"vertical"===e.gravity?i.gravity=s||!i.validFit?"south":"north":i.gravity=e.gravity,"relative"===e.position&&(i.left=0),-1==="right,left,center".indexOf(e.weight)){var a=e.rtl?"right":"left";i.weight="left"===a?e.pos.left+e.overlayBox.width>e.winBox.width?"right":"left":e.pos.left+e.attachBox.width-e.overlayBox.width<0?"left":"right"}return i.weight=i.weight||e.weight,"right"===i.weight?i.left=e.pos.left-e.overlayBox.width+e.attachBox.width:"center"===i.weight&&(i.left=e.pos.left-(e.overlayBox.width-e.attachBox.width)/2),i.top="north"===i.gravity?e.pos.top+e.attachBox.height:e.pos.top-e.overlayBox.height,i},this.processHorizontal=function(e){var i=t.extend(!0,{},e.pos),s=e.pos.top+e.attachBox.height/2;-1==="top,bottom,center".indexOf(e.weight)&&(s-e.overlayBox.height/2<0?i.weight="bottom":s+e.overlayBox.height/2>Math.max(e.winBox.height,e.bodyBox.height)?i.weight="top":i.weight="center"),i.weight=i.weight||e.weight;var n=e.pos.left+e.attachBox.width+e.overlayBox.width<=e.winBox.width,o=e.pos.left-e.overlayBox.width>=0;return i.validFit=o||n,"horizontal"===e.gravity&&(i.gravity=e.pos.left+e.attachBox.width/2>e.winBox.width/2?"east":"west"),i.gravity=i.gravity||e.gravity,"relative"===e.position&&(i.top=0),"center"===i.weight?i.top=e.pos.top+e.attachBox.height/2-e.overlayBox.height/2:"bottom"===i.weight&&(i.top=e.pos.top-e.overlayBox.height+e.attachBox.height),i.left="west"===i.gravity?e.pos.left+e.attachBox.width:e.pos.left-e.overlayBox.width,i},this.getBody=function(){return t("body")},this.topBarHeight=function(){var e=t(".topbar, .StreamsTopBar").outerHeight()||0;return this.attr.additionalTopBarPositionSelector&&(e+=t(this.attr.additionalTopBarPositionSelector).outerHeight()||0),e}}var n=i("V3w7");e.a=s}).call(e,i("4kSj"))},zwio:function(t,e,i){"use strict";function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function n(){this.attributes({threads:{name:"threads",keyPath:"threadId",indexes:[{name:"timestamp",keyPath:"timestamp",unique:!0}]},version:2202,namePrefix:"self_thread_tweets_db",localStorageNamePrefix:"self_thread_mark_deletion",localStorageKey:"marked_deletion_thread_ids",updateDebounceInterval:800}),this.toDbTweets=function(){var t=[u({},h.a.threadData,{threadId:this.threadId,timestamp:Date.now()})];return s({},this.attr.threads.name,t)},this.fromDbTweets=function(){return{tweets:((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).thread||[]).map(function(t){return{tweetText:t.tweetData&&t.tweetData.status||""}})}},this.createThread=function(t,e){var i=this,s="object"===(void 0===e?"undefined":d(e))&&e.previousStatusIdInThread;if(void 0===this.threadId&&!s)return this.threadId=Date.now(),this.dbOpenPromise().then(function(t){return t.add(i.toDbTweets()).then(function(){return t.close()},function(){return t.close()})})},this.updateThread=function(){var t=this;return this.dbOpenPromise().then(function(e){return e.put(t.toDbTweets()).then(function(){return e.close()},function(){return e.close()})})},this.deleteThread=function(){var t=this;if(void 0!==this.threadId)return this.dbOpenPromise().then(function(e){return e.destroy(t.attr.threads.name,t.threadId).then(function(){return e.close()},function(){return e.close()})}).then(function(){return delete t.threadId})},this.clearDatabase=function(){return this.dbOpenPromise().then(function(t){return t.clear().then(function(){return t.close()},function(){return t.close()})})},this.readInitialData=function(t){var e=this,i=l.a.KeyRange.upperBound(Date.now());return t.getAll(this.attr.threads.name,"timestamp",i).then(function(t){(t||[]).length>0&&e.trigger(document,"uiTweetstormDBData",e.fromDbTweets(t.pop()))})},this.markThreadDeletion=function(){if(void 0!==this.threadId){var t=new c.a(this.storageName),e=t.getItem(this.attr.localStorageKey)||[];e.push(this.threadId),t.setItem(this.attr.localStorageKey,e)}},this.deleteMarkedThreads=function(t){var e=this,i=new c.a(this.storageName),s=i.getItem(this.attr.localStorageKey)||[],n=s.map(function(i){return t.destroy(e.attr.threads.name,i)});return i.removeItem(this.attr.localStorageKey),Promise.all(n)},this.initialSetup=function(){var t=this;return this.dbOpenPromise().then(function(e){t.deleteMarkedThreads(e).then(function(){return t.readInitialData(e)}).then(function(){return e.close()},function(){return e.close()}),t.on(document,"uiTweetstormInit uiTweetstormRestore",t.createThread),t.on(document,"uiTweetstormClearDB",t.clearDatabase),t.on(document,"uiTweetstormRemoveDBThread",t.deleteThread),t.on(document,"uiTweetstormDBUpdate",r.default.debounce(t.updateThread,t.attr.updateDebounceInterval)),t.on(window,"beforeunload uiBeforeUnload",t.markThreadDeletion)}).catch(function(){})},this.dbOpenPromise=function(){return l.a.open(this.dbName,this.attr.version,[this.attr.threads])},this.after("initialize",function(){this.dbName=this.attr.namePrefix+"_"+a.a.user.id,this.storageName=this.attr.localStorageNamePrefix+"_"+a.a.user.id,this.on(document,"uiSwiftLoaded",this.initialSetup)})}var o=i("DBjh"),a=i("IAMj"),r=i("YzIt"),c=i("WODX"),l=i("b6Cp"),h=i("a0ja"),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t};e.a=Object(o.default)(n)}});
//# sourceMappingURL=0.commons.en.06a750caea28350212ee.js.map